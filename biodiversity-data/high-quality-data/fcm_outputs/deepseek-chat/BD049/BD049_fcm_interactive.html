
<!DOCTYPE html>
<html>
<head>
    <title>Hierarchical FCM Visualization</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 0; 
            padding: 20px;
            background: #f5f5f5;
        }
        
        #network { 
            width: 100%; 
            height: 600px; 
            border: 2px solid #ccc; 
            background: white;
            border-radius: 8px;
        }
        
        #controls {
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn {
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        
        .btn-primary { background: #4A90E2; color: white; }
        .btn-primary:hover { background: #357ABD; }
        
        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #545b62; }
        
        #current-view {
            font-weight: bold;
            color: #333;
            margin-left: 10px;
        }
        
        #legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-size: 12px;
            max-width: 200px;
        }
        
        .legend-item {
            margin: 5px 0;
            display: flex;
            align-items: center;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .legend-line {
            width: 20px;
            height: 2px;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <h1>Fuzzy Cognitive Map - Hierarchical View</h1>
    
    <div id="controls">
        <button class="btn btn-secondary" id="back-btn" onclick="showClusterView()" style="display: none;">
            ‚Üê Back to Clusters
        </button>
        <span id="current-view">Cluster Overview</span>
        <div style="float: right;">
            <label>Min Confidence: </label>
            <input type="range" id="confidence-slider" min="0" max="1" step="0.1" value="0.3" 
                   onchange="updateConfidenceFilter(this.value)">
            <span id="confidence-value">0.3</span>
        </div>
    </div>
    
    <div id="network"></div>
    
    <div id="legend">
        <h4>Legend</h4>
        <div class="legend-item">
            <div class="legend-color" style="background: #4A90E2;"></div>
            <span>Clusters</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #FF9500;"></div>
            <span>Concepts</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #28A745;"></div>
            <span>Positive relationship</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #DC3545;"></div>
            <span>Negative relationship</span>
        </div>
        <div style="margin-top: 10px; font-style: italic; color: #666;">
            Click clusters to explore internal concepts
        </div>
    </div>

    <script>
        // Embedded data
        const clusterData = {"Ecosystem benefits": {"concepts": "marsh drowning, temperature impact, sea level rise, storms, climate change, climate shifts, temperature impacts, storm impacts", "concept_list": ["marsh drowning", "temperature impact", "sea level rise", "storms", "climate change", "climate shifts", "temperature impacts", "storm impacts"], "type": "cluster", "node_size": 39, "label": "Ecosystem benefits"}, "Marsh ecosystems": {"concepts": "ecological correctness, ecological impact, growing season, ecological benefit, habitat building, habitat impact, habitat restoration, ecological restoration, habitat forming species, ecosystem resilience, ecosystem services, nutrient storage, ecosystem dynamics, ecosystem transformation, habitat, ecological balance, socio-ecological dynamics, ecosystem benefits", "concept_list": ["ecological correctness", "ecological impact", "growing season", "ecological benefit", "habitat building", "habitat impact", "habitat restoration", "ecological restoration", "habitat forming species", "ecosystem resilience", "ecosystem services", "nutrient storage", "ecosystem dynamics", "ecosystem transformation", "habitat", "ecological balance", "socio-ecological dynamics", "ecosystem benefits"], "type": "cluster", "node_size": 69, "label": "Marsh ecosystems"}, "Plant resilience": {"concepts": "marsh resilience, bio-geo-chemical processes, low marsh, natural marsh, marsh restoration, marsh elevation, salt marsh sparrow, marshes, marsh migration, sav beds, marsh plants, high marsh", "concept_list": ["marsh resilience", "bio-geo-chemical processes", "low marsh", "natural marsh", "marsh restoration", "marsh elevation", "salt marsh sparrow", "marshes", "marsh migration", "sav beds", "marsh plants", "high marsh"], "type": "cluster", "node_size": 51, "label": "Plant resilience"}, "Legal regulations": {"concepts": "plant species, flooding tolerance, plant communities, resilience strategies, system resilience, resilience, salinity stress, water quality, plant diversity, salinity changes", "concept_list": ["plant species", "flooding tolerance", "plant communities", "resilience strategies", "system resilience", "resilience", "salinity stress", "water quality", "plant diversity", "salinity changes"], "type": "cluster", "node_size": 45, "label": "Legal regulations"}, "Climate threats": {"concepts": "shoreline law, regulatory compliance, living shoreline law, environmental law, legal frameworks, permit dynamics, permit process, legal constraints, permitters", "concept_list": ["shoreline law", "regulatory compliance", "living shoreline law", "environmental law", "legal frameworks", "permit dynamics", "permit process", "legal constraints", "permitters"], "type": "cluster", "node_size": 42, "label": "Climate threats"}, "Biodiversity Management": {"concepts": "innovative approaches, system components, natural recruitment, biodiversity, diversity, biodiversity components, cost considerations, facilitator species, keystone species, biodiversity management, design, system dynamics, transformation, non-profits, management approaches, science, community diversity, feedback loops, biological diversity, species conservation, stakeholders, decision-making, customer satisfaction, diverse communities, cost, practitioners, property owners, species of conservation concern, aesthetics, food web, competing interests, sav, species interactions, cost management, organizational policies, microbial activity, maintenance costs, harmful organisms, resource managers, policy loopholes, management components, biological organisms, recruitment, migration, species diversity, trade-offs", "concept_list": ["innovative approaches", "system components", "natural recruitment", "biodiversity", "diversity", "biodiversity components", "cost considerations", "facilitator species", "keystone species", "biodiversity management", "design", "system dynamics", "transformation", "non-profits", "management approaches", "science", "community diversity", "feedback loops", "biological diversity", "species conservation", "stakeholders", "decision-making", "customer satisfaction", "diverse communities", "cost", "practitioners", "property owners", "species of conservation concern", "aesthetics", "food web", "competing interests", "sav", "species interactions", "cost management", "organizational policies", "microbial activity", "maintenance costs", "harmful organisms", "resource managers", "policy loopholes", "management components", "biological organisms", "recruitment", "migration", "species diversity", "trade-offs"], "type": "cluster", "node_size": 153, "label": "Biodiversity Management"}, "Coastal Erosion Solutions": {"concepts": "living shorelines, coastal ecosystems, erosion mitigation, marine resource management, shoreline erosion, migratory waterfowl, coastal management, living shoreline, shoreline hardening, shoreline alterations", "concept_list": ["living shorelines", "coastal ecosystems", "erosion mitigation", "marine resource management", "shoreline erosion", "migratory waterfowl", "coastal management", "living shoreline", "shoreline hardening", "shoreline alterations"], "type": "cluster", "node_size": 45, "label": "Coastal Erosion Solutions"}, "Sediment Dynamics": {"concepts": "sediment supply, sediment retention, sediment dynamics, sediment-plant interactions, sediment placement, sediment stressors", "concept_list": ["sediment supply", "sediment retention", "sediment dynamics", "sediment-plant interactions", "sediment placement", "sediment stressors"], "type": "cluster", "node_size": 33, "label": "Sediment Dynamics"}, "Environmental Stressors": {"concepts": "elevation, stressors, environmental conditions, environmental adaptation, environmental stressors, high energy environments, ecological stressors", "concept_list": ["elevation", "stressors", "environmental conditions", "environmental adaptation", "environmental stressors", "high energy environments", "ecological stressors"], "type": "cluster", "node_size": 36, "label": "Environmental Stressors"}};
        const conceptData = {"marsh drowning": {"concepts": "marsh drowning", "type": "concept", "cluster": "Ecosystem benefits", "node_size": 10, "label": "marsh drowning"}, "temperature impact": {"concepts": "temperature impact", "type": "concept", "cluster": "Ecosystem benefits", "node_size": 10, "label": "temperature impact"}, "sea level rise": {"concepts": "sea level rise", "type": "concept", "cluster": "Ecosystem benefits", "node_size": 10, "label": "sea level rise"}, "storms": {"concepts": "storms", "type": "concept", "cluster": "Ecosystem benefits", "node_size": 10, "label": "storms"}, "climate change": {"concepts": "climate change", "type": "concept", "cluster": "Ecosystem benefits", "node_size": 10, "label": "climate change"}, "climate shifts": {"concepts": "climate shifts", "type": "concept", "cluster": "Ecosystem benefits", "node_size": 10, "label": "climate shifts"}, "temperature impacts": {"concepts": "temperature impacts", "type": "concept", "cluster": "Ecosystem benefits", "node_size": 10, "label": "temperature impacts"}, "storm impacts": {"concepts": "storm impacts", "type": "concept", "cluster": "Ecosystem benefits", "node_size": 10, "label": "storm impacts"}, "ecological correctness": {"concepts": "ecological correctness", "type": "concept", "cluster": "Marsh ecosystems", "node_size": 10, "label": "ecological correctness"}, "ecological impact": {"concepts": "ecological impact", "type": "concept", "cluster": "Marsh ecosystems", "node_size": 10, "label": "ecological impact"}, "growing season": {"concepts": "growing season", "type": "concept", "cluster": "Marsh ecosystems", "node_size": 10, "label": "growing season"}, "ecological benefit": {"concepts": "ecological benefit", "type": "concept", "cluster": "Marsh ecosystems", "node_size": 10, "label": "ecological benefit"}, "habitat building": {"concepts": "habitat building", "type": "concept", "cluster": "Marsh ecosystems", "node_size": 10, "label": "habitat building"}, "habitat impact": {"concepts": "habitat impact", "type": "concept", "cluster": "Marsh ecosystems", "node_size": 10, "label": "habitat impact"}, "habitat restoration": {"concepts": "habitat restoration", "type": "concept", "cluster": "Marsh ecosystems", "node_size": 10, "label": "habitat restoration"}, "ecological restoration": {"concepts": "ecological restoration", "type": "concept", "cluster": "Marsh ecosystems", "node_size": 10, "label": "ecological restoration"}, "habitat forming species": {"concepts": "habitat forming species", "type": "concept", "cluster": "Marsh ecosystems", "node_size": 10, "label": "habitat forming species"}, "ecosystem resilience": {"concepts": "ecosystem resilience", "type": "concept", "cluster": "Marsh ecosystems", "node_size": 10, "label": "ecosystem resilience"}, "ecosystem services": {"concepts": "ecosystem services", "type": "concept", "cluster": "Marsh ecosystems", "node_size": 10, "label": "ecosystem services"}, "nutrient storage": {"concepts": "nutrient storage", "type": "concept", "cluster": "Marsh ecosystems", "node_size": 10, "label": "nutrient storage"}, "ecosystem dynamics": {"concepts": "ecosystem dynamics", "type": "concept", "cluster": "Marsh ecosystems", "node_size": 10, "label": "ecosystem dynamics"}, "ecosystem transformation": {"concepts": "ecosystem transformation", "type": "concept", "cluster": "Marsh ecosystems", "node_size": 10, "label": "ecosystem transformation"}, "habitat": {"concepts": "habitat", "type": "concept", "cluster": "Marsh ecosystems", "node_size": 10, "label": "habitat"}, "ecological balance": {"concepts": "ecological balance", "type": "concept", "cluster": "Marsh ecosystems", "node_size": 10, "label": "ecological balance"}, "socio-ecological dynamics": {"concepts": "socio-ecological dynamics", "type": "concept", "cluster": "Marsh ecosystems", "node_size": 10, "label": "socio-ecological dynamics"}, "ecosystem benefits": {"concepts": "ecosystem benefits", "type": "concept", "cluster": "Marsh ecosystems", "node_size": 10, "label": "ecosystem benefits"}, "marsh resilience": {"concepts": "marsh resilience", "type": "concept", "cluster": "Plant resilience", "node_size": 10, "label": "marsh resilience"}, "bio-geo-chemical processes": {"concepts": "bio-geo-chemical processes", "type": "concept", "cluster": "Plant resilience", "node_size": 10, "label": "bio-geo-chemical processes"}, "low marsh": {"concepts": "low marsh", "type": "concept", "cluster": "Plant resilience", "node_size": 10, "label": "low marsh"}, "natural marsh": {"concepts": "natural marsh", "type": "concept", "cluster": "Plant resilience", "node_size": 10, "label": "natural marsh"}, "marsh restoration": {"concepts": "marsh restoration", "type": "concept", "cluster": "Plant resilience", "node_size": 10, "label": "marsh restoration"}, "marsh elevation": {"concepts": "marsh elevation", "type": "concept", "cluster": "Plant resilience", "node_size": 10, "label": "marsh elevation"}, "salt marsh sparrow": {"concepts": "salt marsh sparrow", "type": "concept", "cluster": "Plant resilience", "node_size": 10, "label": "salt marsh sparrow"}, "marshes": {"concepts": "marshes", "type": "concept", "cluster": "Plant resilience", "node_size": 10, "label": "marshes"}, "marsh migration": {"concepts": "marsh migration", "type": "concept", "cluster": "Plant resilience", "node_size": 10, "label": "marsh migration"}, "sav beds": {"concepts": "sav beds", "type": "concept", "cluster": "Plant resilience", "node_size": 10, "label": "sav beds"}, "marsh plants": {"concepts": "marsh plants", "type": "concept", "cluster": "Plant resilience", "node_size": 10, "label": "marsh plants"}, "high marsh": {"concepts": "high marsh", "type": "concept", "cluster": "Plant resilience", "node_size": 10, "label": "high marsh"}, "plant species": {"concepts": "plant species", "type": "concept", "cluster": "Legal regulations", "node_size": 10, "label": "plant species"}, "flooding tolerance": {"concepts": "flooding tolerance", "type": "concept", "cluster": "Legal regulations", "node_size": 10, "label": "flooding tolerance"}, "plant communities": {"concepts": "plant communities", "type": "concept", "cluster": "Legal regulations", "node_size": 10, "label": "plant communities"}, "resilience strategies": {"concepts": "resilience strategies", "type": "concept", "cluster": "Legal regulations", "node_size": 10, "label": "resilience strategies"}, "system resilience": {"concepts": "system resilience", "type": "concept", "cluster": "Legal regulations", "node_size": 10, "label": "system resilience"}, "resilience": {"concepts": "resilience", "type": "concept", "cluster": "Legal regulations", "node_size": 10, "label": "resilience"}, "salinity stress": {"concepts": "salinity stress", "type": "concept", "cluster": "Legal regulations", "node_size": 10, "label": "salinity stress"}, "water quality": {"concepts": "water quality", "type": "concept", "cluster": "Legal regulations", "node_size": 10, "label": "water quality"}, "plant diversity": {"concepts": "plant diversity", "type": "concept", "cluster": "Legal regulations", "node_size": 10, "label": "plant diversity"}, "salinity changes": {"concepts": "salinity changes", "type": "concept", "cluster": "Legal regulations", "node_size": 10, "label": "salinity changes"}, "shoreline law": {"concepts": "shoreline law", "type": "concept", "cluster": "Climate threats", "node_size": 10, "label": "shoreline law"}, "regulatory compliance": {"concepts": "regulatory compliance", "type": "concept", "cluster": "Climate threats", "node_size": 10, "label": "regulatory compliance"}, "living shoreline law": {"concepts": "living shoreline law", "type": "concept", "cluster": "Climate threats", "node_size": 10, "label": "living shoreline law"}, "environmental law": {"concepts": "environmental law", "type": "concept", "cluster": "Climate threats", "node_size": 10, "label": "environmental law"}, "legal frameworks": {"concepts": "legal frameworks", "type": "concept", "cluster": "Climate threats", "node_size": 10, "label": "legal frameworks"}, "permit dynamics": {"concepts": "permit dynamics", "type": "concept", "cluster": "Climate threats", "node_size": 10, "label": "permit dynamics"}, "permit process": {"concepts": "permit process", "type": "concept", "cluster": "Climate threats", "node_size": 10, "label": "permit process"}, "legal constraints": {"concepts": "legal constraints", "type": "concept", "cluster": "Climate threats", "node_size": 10, "label": "legal constraints"}, "permitters": {"concepts": "permitters", "type": "concept", "cluster": "Climate threats", "node_size": 10, "label": "permitters"}, "innovative approaches": {"concepts": "innovative approaches", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "innovative approaches"}, "system components": {"concepts": "system components", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "system components"}, "natural recruitment": {"concepts": "natural recruitment", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "natural recruitment"}, "biodiversity": {"concepts": "biodiversity", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "biodiversity"}, "diversity": {"concepts": "diversity", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "diversity"}, "biodiversity components": {"concepts": "biodiversity components", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "biodiversity components"}, "cost considerations": {"concepts": "cost considerations", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "cost considerations"}, "facilitator species": {"concepts": "facilitator species", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "facilitator species"}, "keystone species": {"concepts": "keystone species", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "keystone species"}, "biodiversity management": {"concepts": "biodiversity management", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "biodiversity management"}, "design": {"concepts": "design", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "design"}, "system dynamics": {"concepts": "system dynamics", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "system dynamics"}, "transformation": {"concepts": "transformation", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "transformation"}, "non-profits": {"concepts": "non-profits", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "non-profits"}, "management approaches": {"concepts": "management approaches", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "management approaches"}, "science": {"concepts": "science", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "science"}, "community diversity": {"concepts": "community diversity", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "community diversity"}, "feedback loops": {"concepts": "feedback loops", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "feedback loops"}, "biological diversity": {"concepts": "biological diversity", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "biological diversity"}, "species conservation": {"concepts": "species conservation", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "species conservation"}, "stakeholders": {"concepts": "stakeholders", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "stakeholders"}, "decision-making": {"concepts": "decision-making", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "decision-making"}, "customer satisfaction": {"concepts": "customer satisfaction", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "customer satisfaction"}, "diverse communities": {"concepts": "diverse communities", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "diverse communities"}, "cost": {"concepts": "cost", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "cost"}, "practitioners": {"concepts": "practitioners", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "practitioners"}, "property owners": {"concepts": "property owners", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "property owners"}, "species of conservation concern": {"concepts": "species of conservation concern", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "species of conservation concern"}, "aesthetics": {"concepts": "aesthetics", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "aesthetics"}, "food web": {"concepts": "food web", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "food web"}, "competing interests": {"concepts": "competing interests", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "competing interests"}, "sav": {"concepts": "sav", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "sav"}, "species interactions": {"concepts": "species interactions", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "species interactions"}, "cost management": {"concepts": "cost management", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "cost management"}, "organizational policies": {"concepts": "organizational policies", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "organizational policies"}, "microbial activity": {"concepts": "microbial activity", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "microbial activity"}, "maintenance costs": {"concepts": "maintenance costs", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "maintenance costs"}, "harmful organisms": {"concepts": "harmful organisms", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "harmful organisms"}, "resource managers": {"concepts": "resource managers", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "resource managers"}, "policy loopholes": {"concepts": "policy loopholes", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "policy loopholes"}, "management components": {"concepts": "management components", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "management components"}, "biological organisms": {"concepts": "biological organisms", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "biological organisms"}, "recruitment": {"concepts": "recruitment", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "recruitment"}, "migration": {"concepts": "migration", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "migration"}, "species diversity": {"concepts": "species diversity", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "species diversity"}, "trade-offs": {"concepts": "trade-offs", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "trade-offs"}, "living shorelines": {"concepts": "living shorelines", "type": "concept", "cluster": "Coastal Erosion Solutions", "node_size": 10, "label": "living shorelines"}, "coastal ecosystems": {"concepts": "coastal ecosystems", "type": "concept", "cluster": "Coastal Erosion Solutions", "node_size": 10, "label": "coastal ecosystems"}, "erosion mitigation": {"concepts": "erosion mitigation", "type": "concept", "cluster": "Coastal Erosion Solutions", "node_size": 10, "label": "erosion mitigation"}, "marine resource management": {"concepts": "marine resource management", "type": "concept", "cluster": "Coastal Erosion Solutions", "node_size": 10, "label": "marine resource management"}, "shoreline erosion": {"concepts": "shoreline erosion", "type": "concept", "cluster": "Coastal Erosion Solutions", "node_size": 10, "label": "shoreline erosion"}, "migratory waterfowl": {"concepts": "migratory waterfowl", "type": "concept", "cluster": "Coastal Erosion Solutions", "node_size": 10, "label": "migratory waterfowl"}, "coastal management": {"concepts": "coastal management", "type": "concept", "cluster": "Coastal Erosion Solutions", "node_size": 10, "label": "coastal management"}, "living shoreline": {"concepts": "living shoreline", "type": "concept", "cluster": "Coastal Erosion Solutions", "node_size": 10, "label": "living shoreline"}, "shoreline hardening": {"concepts": "shoreline hardening", "type": "concept", "cluster": "Coastal Erosion Solutions", "node_size": 10, "label": "shoreline hardening"}, "shoreline alterations": {"concepts": "shoreline alterations", "type": "concept", "cluster": "Coastal Erosion Solutions", "node_size": 10, "label": "shoreline alterations"}, "sediment supply": {"concepts": "sediment supply", "type": "concept", "cluster": "Sediment Dynamics", "node_size": 10, "label": "sediment supply"}, "sediment retention": {"concepts": "sediment retention", "type": "concept", "cluster": "Sediment Dynamics", "node_size": 10, "label": "sediment retention"}, "sediment dynamics": {"concepts": "sediment dynamics", "type": "concept", "cluster": "Sediment Dynamics", "node_size": 10, "label": "sediment dynamics"}, "sediment-plant interactions": {"concepts": "sediment-plant interactions", "type": "concept", "cluster": "Sediment Dynamics", "node_size": 10, "label": "sediment-plant interactions"}, "sediment placement": {"concepts": "sediment placement", "type": "concept", "cluster": "Sediment Dynamics", "node_size": 10, "label": "sediment placement"}, "sediment stressors": {"concepts": "sediment stressors", "type": "concept", "cluster": "Sediment Dynamics", "node_size": 10, "label": "sediment stressors"}, "elevation": {"concepts": "elevation", "type": "concept", "cluster": "Environmental Stressors", "node_size": 10, "label": "elevation"}, "stressors": {"concepts": "stressors", "type": "concept", "cluster": "Environmental Stressors", "node_size": 10, "label": "stressors"}, "environmental conditions": {"concepts": "environmental conditions", "type": "concept", "cluster": "Environmental Stressors", "node_size": 10, "label": "environmental conditions"}, "environmental adaptation": {"concepts": "environmental adaptation", "type": "concept", "cluster": "Environmental Stressors", "node_size": 10, "label": "environmental adaptation"}, "environmental stressors": {"concepts": "environmental stressors", "type": "concept", "cluster": "Environmental Stressors", "node_size": 10, "label": "environmental stressors"}, "high energy environments": {"concepts": "high energy environments", "type": "concept", "cluster": "Environmental Stressors", "node_size": 10, "label": "high energy environments"}, "ecological stressors": {"concepts": "ecological stressors", "type": "concept", "cluster": "Environmental Stressors", "node_size": 10, "label": "ecological stressors"}};
        const interClusterEdges = [["Ecosystem benefits", "Plant resilience", {"weight": -0.6, "confidence": 0.8800000000000001, "type": "inter_cluster", "style": "solid"}], ["Ecosystem benefits", "Sediment Dynamics", {"weight": -1.0, "confidence": 0.78, "type": "inter_cluster", "style": "solid"}], ["Ecosystem benefits", "Coastal Erosion Solutions", {"weight": 1.0, "confidence": 0.78, "type": "inter_cluster", "style": "solid"}], ["Ecosystem benefits", "Marsh ecosystems", {"weight": -1.0, "confidence": 0.8250000000000001, "type": "inter_cluster", "style": "solid"}], ["Ecosystem benefits", "Biodiversity Management", {"weight": -1.0, "confidence": 0.7625, "type": "inter_cluster", "style": "solid"}], ["Ecosystem benefits", "Environmental Stressors", {"weight": 1.0, "confidence": 0.8333333333333334, "type": "inter_cluster", "style": "solid"}], ["Marsh ecosystems", "Plant resilience", {"weight": 1.0, "confidence": 0.86, "type": "inter_cluster", "style": "solid"}], ["Marsh ecosystems", "Biodiversity Management", {"weight": 1.0, "confidence": 0.82, "type": "inter_cluster", "style": "solid"}], ["Marsh ecosystems", "Environmental Stressors", {"weight": 0.2, "confidence": 0.7699999999999999, "type": "inter_cluster", "style": "solid"}], ["Marsh ecosystems", "Legal regulations", {"weight": 1.0, "confidence": 0.8374999999999999, "type": "inter_cluster", "style": "solid"}], ["Marsh ecosystems", "Sediment Dynamics", {"weight": 1.0, "confidence": 0.7875, "type": "inter_cluster", "style": "solid"}], ["Marsh ecosystems", "Climate threats", {"weight": 0.75, "confidence": 0.575, "type": "inter_cluster", "style": "solid"}], ["Plant resilience", "Biodiversity Management", {"weight": 1.0, "confidence": 0.8400000000000001, "type": "inter_cluster", "style": "solid"}], ["Plant resilience", "Climate threats", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["Plant resilience", "Environmental Stressors", {"weight": -1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["Legal regulations", "Sediment Dynamics", {"weight": 1.0, "confidence": 0.78, "type": "inter_cluster", "style": "solid"}], ["Legal regulations", "Marsh ecosystems", {"weight": 1.0, "confidence": 0.8625, "type": "inter_cluster", "style": "solid"}], ["Legal regulations", "Plant resilience", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["Legal regulations", "Coastal Erosion Solutions", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["Legal regulations", "Environmental Stressors", {"weight": -0.3333333333333333, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["Climate threats", "Biodiversity Management", {"weight": 1.0, "confidence": 0.7200000000000001, "type": "inter_cluster", "style": "solid"}], ["Climate threats", "Coastal Erosion Solutions", {"weight": 1.0, "confidence": 0.8500000000000001, "type": "inter_cluster", "style": "solid"}], ["Climate threats", "Plant resilience", {"weight": 1.0, "confidence": 0.775, "type": "inter_cluster", "style": "solid"}], ["Climate threats", "Sediment Dynamics", {"weight": 1.0, "confidence": 0.7250000000000001, "type": "inter_cluster", "style": "solid"}], ["Climate threats", "Environmental Stressors", {"weight": -0.8, "confidence": 0.5900000000000001, "type": "inter_cluster", "style": "solid"}], ["Climate threats", "Ecosystem benefits", {"weight": -0.5, "confidence": 0.35, "type": "inter_cluster", "style": "solid"}], ["Biodiversity Management", "Marsh ecosystems", {"weight": 1.0, "confidence": 0.8799999999999999, "type": "inter_cluster", "style": "solid"}], ["Biodiversity Management", "Legal regulations", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["Biodiversity Management", "Plant resilience", {"weight": 1.0, "confidence": 0.8400000000000001, "type": "inter_cluster", "style": "solid"}], ["Biodiversity Management", "Coastal Erosion Solutions", {"weight": 1.0, "confidence": 0.7749999999999999, "type": "inter_cluster", "style": "solid"}], ["Biodiversity Management", "Ecosystem benefits", {"weight": -1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["Coastal Erosion Solutions", "Climate threats", {"weight": 1.0, "confidence": 0.8375000000000001, "type": "inter_cluster", "style": "solid"}], ["Coastal Erosion Solutions", "Marsh ecosystems", {"weight": 1.0, "confidence": 0.8125, "type": "inter_cluster", "style": "solid"}], ["Coastal Erosion Solutions", "Sediment Dynamics", {"weight": 1.0, "confidence": 0.7749999999999999, "type": "inter_cluster", "style": "solid"}], ["Coastal Erosion Solutions", "Environmental Stressors", {"weight": -1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["Coastal Erosion Solutions", "Ecosystem benefits", {"weight": -0.4, "confidence": 0.5900000000000001, "type": "inter_cluster", "style": "solid"}], ["Coastal Erosion Solutions", "Legal regulations", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["Sediment Dynamics", "Plant resilience", {"weight": 1.0, "confidence": 0.875, "type": "inter_cluster", "style": "solid"}], ["Sediment Dynamics", "Marsh ecosystems", {"weight": 1.0, "confidence": 0.8125, "type": "inter_cluster", "style": "solid"}], ["Sediment Dynamics", "Legal regulations", {"weight": 1.0, "confidence": 0.7749999999999999, "type": "inter_cluster", "style": "solid"}], ["Sediment Dynamics", "Biodiversity Management", {"weight": 1.0, "confidence": 0.775, "type": "inter_cluster", "style": "solid"}], ["Sediment Dynamics", "Environmental Stressors", {"weight": -0.5, "confidence": 0.7625, "type": "inter_cluster", "style": "solid"}], ["Sediment Dynamics", "Ecosystem benefits", {"weight": -0.75, "confidence": 0.575, "type": "inter_cluster", "style": "solid"}], ["Sediment Dynamics", "Coastal Erosion Solutions", {"weight": 1.0, "confidence": 0.825, "type": "inter_cluster", "style": "solid"}], ["Environmental Stressors", "Biodiversity Management", {"weight": -1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["Environmental Stressors", "Plant resilience", {"weight": -1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["Environmental Stressors", "Legal regulations", {"weight": -1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["Environmental Stressors", "Marsh ecosystems", {"weight": -0.5, "confidence": 0.775, "type": "inter_cluster", "style": "solid"}], ["Environmental Stressors", "Climate threats", {"weight": 0.2, "confidence": 0.41999999999999993, "type": "inter_cluster", "style": "solid"}]];
        const clusterConcepts = {"Ecosystem benefits": [["marsh drowning", {"concepts": "marsh drowning", "type": "concept", "cluster": "Ecosystem benefits", "node_size": 10, "label": "marsh drowning"}], ["temperature impact", {"concepts": "temperature impact", "type": "concept", "cluster": "Ecosystem benefits", "node_size": 10, "label": "temperature impact"}], ["sea level rise", {"concepts": "sea level rise", "type": "concept", "cluster": "Ecosystem benefits", "node_size": 10, "label": "sea level rise"}], ["storms", {"concepts": "storms", "type": "concept", "cluster": "Ecosystem benefits", "node_size": 10, "label": "storms"}], ["climate change", {"concepts": "climate change", "type": "concept", "cluster": "Ecosystem benefits", "node_size": 10, "label": "climate change"}], ["climate shifts", {"concepts": "climate shifts", "type": "concept", "cluster": "Ecosystem benefits", "node_size": 10, "label": "climate shifts"}], ["temperature impacts", {"concepts": "temperature impacts", "type": "concept", "cluster": "Ecosystem benefits", "node_size": 10, "label": "temperature impacts"}], ["storm impacts", {"concepts": "storm impacts", "type": "concept", "cluster": "Ecosystem benefits", "node_size": 10, "label": "storm impacts"}]], "Marsh ecosystems": [["ecological correctness", {"concepts": "ecological correctness", "type": "concept", "cluster": "Marsh ecosystems", "node_size": 10, "label": "ecological correctness"}], ["ecological impact", {"concepts": "ecological impact", "type": "concept", "cluster": "Marsh ecosystems", "node_size": 10, "label": "ecological impact"}], ["growing season", {"concepts": "growing season", "type": "concept", "cluster": "Marsh ecosystems", "node_size": 10, "label": "growing season"}], ["ecological benefit", {"concepts": "ecological benefit", "type": "concept", "cluster": "Marsh ecosystems", "node_size": 10, "label": "ecological benefit"}], ["habitat building", {"concepts": "habitat building", "type": "concept", "cluster": "Marsh ecosystems", "node_size": 10, "label": "habitat building"}], ["habitat impact", {"concepts": "habitat impact", "type": "concept", "cluster": "Marsh ecosystems", "node_size": 10, "label": "habitat impact"}], ["habitat restoration", {"concepts": "habitat restoration", "type": "concept", "cluster": "Marsh ecosystems", "node_size": 10, "label": "habitat restoration"}], ["ecological restoration", {"concepts": "ecological restoration", "type": "concept", "cluster": "Marsh ecosystems", "node_size": 10, "label": "ecological restoration"}], ["habitat forming species", {"concepts": "habitat forming species", "type": "concept", "cluster": "Marsh ecosystems", "node_size": 10, "label": "habitat forming species"}], ["ecosystem resilience", {"concepts": "ecosystem resilience", "type": "concept", "cluster": "Marsh ecosystems", "node_size": 10, "label": "ecosystem resilience"}], ["ecosystem services", {"concepts": "ecosystem services", "type": "concept", "cluster": "Marsh ecosystems", "node_size": 10, "label": "ecosystem services"}], ["nutrient storage", {"concepts": "nutrient storage", "type": "concept", "cluster": "Marsh ecosystems", "node_size": 10, "label": "nutrient storage"}], ["ecosystem dynamics", {"concepts": "ecosystem dynamics", "type": "concept", "cluster": "Marsh ecosystems", "node_size": 10, "label": "ecosystem dynamics"}], ["ecosystem transformation", {"concepts": "ecosystem transformation", "type": "concept", "cluster": "Marsh ecosystems", "node_size": 10, "label": "ecosystem transformation"}], ["habitat", {"concepts": "habitat", "type": "concept", "cluster": "Marsh ecosystems", "node_size": 10, "label": "habitat"}], ["ecological balance", {"concepts": "ecological balance", "type": "concept", "cluster": "Marsh ecosystems", "node_size": 10, "label": "ecological balance"}], ["socio-ecological dynamics", {"concepts": "socio-ecological dynamics", "type": "concept", "cluster": "Marsh ecosystems", "node_size": 10, "label": "socio-ecological dynamics"}], ["ecosystem benefits", {"concepts": "ecosystem benefits", "type": "concept", "cluster": "Marsh ecosystems", "node_size": 10, "label": "ecosystem benefits"}]], "Plant resilience": [["marsh resilience", {"concepts": "marsh resilience", "type": "concept", "cluster": "Plant resilience", "node_size": 10, "label": "marsh resilience"}], ["bio-geo-chemical processes", {"concepts": "bio-geo-chemical processes", "type": "concept", "cluster": "Plant resilience", "node_size": 10, "label": "bio-geo-chemical processes"}], ["low marsh", {"concepts": "low marsh", "type": "concept", "cluster": "Plant resilience", "node_size": 10, "label": "low marsh"}], ["natural marsh", {"concepts": "natural marsh", "type": "concept", "cluster": "Plant resilience", "node_size": 10, "label": "natural marsh"}], ["marsh restoration", {"concepts": "marsh restoration", "type": "concept", "cluster": "Plant resilience", "node_size": 10, "label": "marsh restoration"}], ["marsh elevation", {"concepts": "marsh elevation", "type": "concept", "cluster": "Plant resilience", "node_size": 10, "label": "marsh elevation"}], ["salt marsh sparrow", {"concepts": "salt marsh sparrow", "type": "concept", "cluster": "Plant resilience", "node_size": 10, "label": "salt marsh sparrow"}], ["marshes", {"concepts": "marshes", "type": "concept", "cluster": "Plant resilience", "node_size": 10, "label": "marshes"}], ["marsh migration", {"concepts": "marsh migration", "type": "concept", "cluster": "Plant resilience", "node_size": 10, "label": "marsh migration"}], ["sav beds", {"concepts": "sav beds", "type": "concept", "cluster": "Plant resilience", "node_size": 10, "label": "sav beds"}], ["marsh plants", {"concepts": "marsh plants", "type": "concept", "cluster": "Plant resilience", "node_size": 10, "label": "marsh plants"}], ["high marsh", {"concepts": "high marsh", "type": "concept", "cluster": "Plant resilience", "node_size": 10, "label": "high marsh"}]], "Legal regulations": [["plant species", {"concepts": "plant species", "type": "concept", "cluster": "Legal regulations", "node_size": 10, "label": "plant species"}], ["flooding tolerance", {"concepts": "flooding tolerance", "type": "concept", "cluster": "Legal regulations", "node_size": 10, "label": "flooding tolerance"}], ["plant communities", {"concepts": "plant communities", "type": "concept", "cluster": "Legal regulations", "node_size": 10, "label": "plant communities"}], ["resilience strategies", {"concepts": "resilience strategies", "type": "concept", "cluster": "Legal regulations", "node_size": 10, "label": "resilience strategies"}], ["system resilience", {"concepts": "system resilience", "type": "concept", "cluster": "Legal regulations", "node_size": 10, "label": "system resilience"}], ["resilience", {"concepts": "resilience", "type": "concept", "cluster": "Legal regulations", "node_size": 10, "label": "resilience"}], ["salinity stress", {"concepts": "salinity stress", "type": "concept", "cluster": "Legal regulations", "node_size": 10, "label": "salinity stress"}], ["water quality", {"concepts": "water quality", "type": "concept", "cluster": "Legal regulations", "node_size": 10, "label": "water quality"}], ["plant diversity", {"concepts": "plant diversity", "type": "concept", "cluster": "Legal regulations", "node_size": 10, "label": "plant diversity"}], ["salinity changes", {"concepts": "salinity changes", "type": "concept", "cluster": "Legal regulations", "node_size": 10, "label": "salinity changes"}]], "Climate threats": [["shoreline law", {"concepts": "shoreline law", "type": "concept", "cluster": "Climate threats", "node_size": 10, "label": "shoreline law"}], ["regulatory compliance", {"concepts": "regulatory compliance", "type": "concept", "cluster": "Climate threats", "node_size": 10, "label": "regulatory compliance"}], ["living shoreline law", {"concepts": "living shoreline law", "type": "concept", "cluster": "Climate threats", "node_size": 10, "label": "living shoreline law"}], ["environmental law", {"concepts": "environmental law", "type": "concept", "cluster": "Climate threats", "node_size": 10, "label": "environmental law"}], ["legal frameworks", {"concepts": "legal frameworks", "type": "concept", "cluster": "Climate threats", "node_size": 10, "label": "legal frameworks"}], ["permit dynamics", {"concepts": "permit dynamics", "type": "concept", "cluster": "Climate threats", "node_size": 10, "label": "permit dynamics"}], ["permit process", {"concepts": "permit process", "type": "concept", "cluster": "Climate threats", "node_size": 10, "label": "permit process"}], ["legal constraints", {"concepts": "legal constraints", "type": "concept", "cluster": "Climate threats", "node_size": 10, "label": "legal constraints"}], ["permitters", {"concepts": "permitters", "type": "concept", "cluster": "Climate threats", "node_size": 10, "label": "permitters"}]], "Biodiversity Management": [["innovative approaches", {"concepts": "innovative approaches", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "innovative approaches"}], ["system components", {"concepts": "system components", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "system components"}], ["natural recruitment", {"concepts": "natural recruitment", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "natural recruitment"}], ["biodiversity", {"concepts": "biodiversity", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "biodiversity"}], ["diversity", {"concepts": "diversity", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "diversity"}], ["biodiversity components", {"concepts": "biodiversity components", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "biodiversity components"}], ["cost considerations", {"concepts": "cost considerations", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "cost considerations"}], ["facilitator species", {"concepts": "facilitator species", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "facilitator species"}], ["keystone species", {"concepts": "keystone species", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "keystone species"}], ["biodiversity management", {"concepts": "biodiversity management", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "biodiversity management"}], ["design", {"concepts": "design", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "design"}], ["system dynamics", {"concepts": "system dynamics", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "system dynamics"}], ["transformation", {"concepts": "transformation", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "transformation"}], ["non-profits", {"concepts": "non-profits", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "non-profits"}], ["management approaches", {"concepts": "management approaches", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "management approaches"}], ["science", {"concepts": "science", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "science"}], ["community diversity", {"concepts": "community diversity", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "community diversity"}], ["feedback loops", {"concepts": "feedback loops", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "feedback loops"}], ["biological diversity", {"concepts": "biological diversity", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "biological diversity"}], ["species conservation", {"concepts": "species conservation", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "species conservation"}], ["stakeholders", {"concepts": "stakeholders", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "stakeholders"}], ["decision-making", {"concepts": "decision-making", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "decision-making"}], ["customer satisfaction", {"concepts": "customer satisfaction", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "customer satisfaction"}], ["diverse communities", {"concepts": "diverse communities", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "diverse communities"}], ["cost", {"concepts": "cost", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "cost"}], ["practitioners", {"concepts": "practitioners", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "practitioners"}], ["property owners", {"concepts": "property owners", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "property owners"}], ["species of conservation concern", {"concepts": "species of conservation concern", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "species of conservation concern"}], ["aesthetics", {"concepts": "aesthetics", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "aesthetics"}], ["food web", {"concepts": "food web", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "food web"}], ["competing interests", {"concepts": "competing interests", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "competing interests"}], ["sav", {"concepts": "sav", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "sav"}], ["species interactions", {"concepts": "species interactions", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "species interactions"}], ["cost management", {"concepts": "cost management", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "cost management"}], ["organizational policies", {"concepts": "organizational policies", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "organizational policies"}], ["microbial activity", {"concepts": "microbial activity", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "microbial activity"}], ["maintenance costs", {"concepts": "maintenance costs", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "maintenance costs"}], ["harmful organisms", {"concepts": "harmful organisms", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "harmful organisms"}], ["resource managers", {"concepts": "resource managers", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "resource managers"}], ["policy loopholes", {"concepts": "policy loopholes", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "policy loopholes"}], ["management components", {"concepts": "management components", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "management components"}], ["biological organisms", {"concepts": "biological organisms", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "biological organisms"}], ["recruitment", {"concepts": "recruitment", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "recruitment"}], ["migration", {"concepts": "migration", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "migration"}], ["species diversity", {"concepts": "species diversity", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "species diversity"}], ["trade-offs", {"concepts": "trade-offs", "type": "concept", "cluster": "Biodiversity Management", "node_size": 10, "label": "trade-offs"}]], "Coastal Erosion Solutions": [["living shorelines", {"concepts": "living shorelines", "type": "concept", "cluster": "Coastal Erosion Solutions", "node_size": 10, "label": "living shorelines"}], ["coastal ecosystems", {"concepts": "coastal ecosystems", "type": "concept", "cluster": "Coastal Erosion Solutions", "node_size": 10, "label": "coastal ecosystems"}], ["erosion mitigation", {"concepts": "erosion mitigation", "type": "concept", "cluster": "Coastal Erosion Solutions", "node_size": 10, "label": "erosion mitigation"}], ["marine resource management", {"concepts": "marine resource management", "type": "concept", "cluster": "Coastal Erosion Solutions", "node_size": 10, "label": "marine resource management"}], ["shoreline erosion", {"concepts": "shoreline erosion", "type": "concept", "cluster": "Coastal Erosion Solutions", "node_size": 10, "label": "shoreline erosion"}], ["migratory waterfowl", {"concepts": "migratory waterfowl", "type": "concept", "cluster": "Coastal Erosion Solutions", "node_size": 10, "label": "migratory waterfowl"}], ["coastal management", {"concepts": "coastal management", "type": "concept", "cluster": "Coastal Erosion Solutions", "node_size": 10, "label": "coastal management"}], ["living shoreline", {"concepts": "living shoreline", "type": "concept", "cluster": "Coastal Erosion Solutions", "node_size": 10, "label": "living shoreline"}], ["shoreline hardening", {"concepts": "shoreline hardening", "type": "concept", "cluster": "Coastal Erosion Solutions", "node_size": 10, "label": "shoreline hardening"}], ["shoreline alterations", {"concepts": "shoreline alterations", "type": "concept", "cluster": "Coastal Erosion Solutions", "node_size": 10, "label": "shoreline alterations"}]], "Sediment Dynamics": [["sediment supply", {"concepts": "sediment supply", "type": "concept", "cluster": "Sediment Dynamics", "node_size": 10, "label": "sediment supply"}], ["sediment retention", {"concepts": "sediment retention", "type": "concept", "cluster": "Sediment Dynamics", "node_size": 10, "label": "sediment retention"}], ["sediment dynamics", {"concepts": "sediment dynamics", "type": "concept", "cluster": "Sediment Dynamics", "node_size": 10, "label": "sediment dynamics"}], ["sediment-plant interactions", {"concepts": "sediment-plant interactions", "type": "concept", "cluster": "Sediment Dynamics", "node_size": 10, "label": "sediment-plant interactions"}], ["sediment placement", {"concepts": "sediment placement", "type": "concept", "cluster": "Sediment Dynamics", "node_size": 10, "label": "sediment placement"}], ["sediment stressors", {"concepts": "sediment stressors", "type": "concept", "cluster": "Sediment Dynamics", "node_size": 10, "label": "sediment stressors"}]], "Environmental Stressors": [["elevation", {"concepts": "elevation", "type": "concept", "cluster": "Environmental Stressors", "node_size": 10, "label": "elevation"}], ["stressors", {"concepts": "stressors", "type": "concept", "cluster": "Environmental Stressors", "node_size": 10, "label": "stressors"}], ["environmental conditions", {"concepts": "environmental conditions", "type": "concept", "cluster": "Environmental Stressors", "node_size": 10, "label": "environmental conditions"}], ["environmental adaptation", {"concepts": "environmental adaptation", "type": "concept", "cluster": "Environmental Stressors", "node_size": 10, "label": "environmental adaptation"}], ["environmental stressors", {"concepts": "environmental stressors", "type": "concept", "cluster": "Environmental Stressors", "node_size": 10, "label": "environmental stressors"}], ["high energy environments", {"concepts": "high energy environments", "type": "concept", "cluster": "Environmental Stressors", "node_size": 10, "label": "high energy environments"}], ["ecological stressors", {"concepts": "ecological stressors", "type": "concept", "cluster": "Environmental Stressors", "node_size": 10, "label": "ecological stressors"}]]};
        const clusterEdges = {"Ecosystem benefits": [], "Marsh ecosystems": [], "Plant resilience": [], "Legal regulations": [], "Climate threats": [], "Biodiversity Management": [], "Coastal Erosion Solutions": [], "Sediment Dynamics": [], "Environmental Stressors": []};
        
        let network;
        let currentView = 'clusters';
        let currentCluster = null;
        let minConfidence = 0.3;
        
        // Network options
        const options = {
            nodes: {
                font: { color: 'white', size: 14 },
                borderWidth: 2,
                shadow: true
            },
            edges: {
                arrows: { to: { enabled: true, scaleFactor: 1.2 } },
                shadow: true,
                smooth: { type: 'continuous' }
            },
            physics: {
                stabilization: { iterations: 100 },
                barnesHut: {
                    gravitationalConstant: -8000,
                    springConstant: 0.001,
                    springLength: 200
                }
            },
            interaction: {
                hover: true,
                selectConnectedEdges: false
            }
        };
        
        function initNetwork() {
            const container = document.getElementById('network');
            const data = getClusterViewData();
            network = new vis.Network(container, data, options);
            
            // Handle cluster clicks for drill-down
            network.on("click", function(params) {
                if (params.nodes.length > 0 && currentView === 'clusters') {
                    const clickedNode = params.nodes[0];
                    if (clusterConcepts[clickedNode]) {
                        showClusterDetail(clickedNode);
                    }
                }
            });
        }
        
        function getClusterViewData() {
            const nodes = [];
            const edges = [];
            
            // Add cluster nodes
            Object.entries(clusterData).forEach(([clusterId, data]) => {
                const concepts = data.concepts || [];
                const conceptsStr = Array.isArray(concepts) ? concepts.join(', ') : concepts;
                
                nodes.push({
                    id: clusterId,
                    label: clusterId,
                    title: `Cluster: ${clusterId}\nConcepts: ${conceptsStr}\nClick to explore internal relationships`,
                    color: '#4A90E2',
                    size: 25 + (conceptsStr.split(',').length * 2),
                    font: { color: 'white' }
                });
            });
            
            // Add inter-cluster edges
            interClusterEdges.forEach(([source, target, edgeData]) => {
                const confidence = edgeData.confidence || 1.0;
                const weight = edgeData.weight || 0;
                
                if (confidence >= minConfidence) {
                    edges.push({
                        from: source,
                        to: target,
                        color: weight > 0 ? '#28A745' : '#DC3545',
                        width: Math.abs(weight) * 3 + 1,
                        title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                        dashes: false
                    });
                }
            });
            
            return { nodes: nodes, edges: edges };
        }
        
        function getClusterDetailData(clusterId) {
            const nodes = [];
            const edges = [];
            
            // Add concept nodes for this cluster
            if (clusterConcepts[clusterId]) {
                clusterConcepts[clusterId].forEach(([conceptId, data]) => {
                    nodes.push({
                        id: conceptId,
                        label: conceptId,
                        title: `Concept: ${conceptId}\nFrom cluster: ${clusterId}`,
                        color: '#FF9500',
                        size: 20,
                        font: { color: 'white' }
                    });
                });
            }
            
            // Add intra-cluster edges
            if (clusterEdges[clusterId]) {
                clusterEdges[clusterId].forEach(([source, target, edgeData]) => {
                    const confidence = edgeData.confidence || 1.0;
                    const weight = edgeData.weight || 0;
                    
                    if (confidence >= minConfidence) {
                        edges.push({
                            from: source,
                            to: target,
                            color: weight > 0 ? '#28A745' : '#DC3545',
                            width: Math.abs(weight) * 3 + 1,
                            title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                            dashes: true
                        });
                    }
                });
            }
            
            return { nodes: nodes, edges: edges };
        }
        
        function showClusterView() {
            currentView = 'clusters';
            currentCluster = null;
            const data = getClusterViewData();
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'none';
            document.getElementById('current-view').textContent = 'Cluster Overview';
        }
        
        function showClusterDetail(clusterId) {
            currentView = 'concepts';
            currentCluster = clusterId;
            const data = getClusterDetailData(clusterId);
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'inline-block';
            document.getElementById('current-view').textContent = `Inside Cluster: ${clusterId}`;
        }
        
        function updateConfidenceFilter(value) {
            minConfidence = parseFloat(value);
            document.getElementById('confidence-value').textContent = value;
            
            // Refresh current view
            if (currentView === 'clusters') {
                showClusterView();
            } else {
                showClusterDetail(currentCluster);
            }
        }
        
        // Initialize the network when page loads
        window.onload = function() {
            initNetwork();
        };
    </script>
</body>
</html>
