
<!DOCTYPE html>
<html>
<head>
    <title>Hierarchical FCM Visualization</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 0; 
            padding: 20px;
            background: #f5f5f5;
        }
        
        #network { 
            width: 100%; 
            height: 600px; 
            border: 2px solid #ccc; 
            background: white;
            border-radius: 8px;
        }
        
        #controls {
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn {
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        
        .btn-primary { background: #4A90E2; color: white; }
        .btn-primary:hover { background: #357ABD; }
        
        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #545b62; }
        
        #current-view {
            font-weight: bold;
            color: #333;
            margin-left: 10px;
        }
        
        #legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-size: 12px;
            max-width: 200px;
        }
        
        .legend-item {
            margin: 5px 0;
            display: flex;
            align-items: center;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .legend-line {
            width: 20px;
            height: 2px;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <h1>Fuzzy Cognitive Map - Hierarchical View</h1>
    
    <div id="controls">
        <button class="btn btn-secondary" id="back-btn" onclick="showClusterView()" style="display: none;">
            ← Back to Clusters
        </button>
        <span id="current-view">Cluster Overview</span>
        <div style="float: right;">
            <label>Min Confidence: </label>
            <input type="range" id="confidence-slider" min="0" max="1" step="0.1" value="0.3" 
                   onchange="updateConfidenceFilter(this.value)">
            <span id="confidence-value">0.3</span>
        </div>
    </div>
    
    <div id="network"></div>
    
    <div id="legend">
        <h4>Legend</h4>
        <div class="legend-item">
            <div class="legend-color" style="background: #4A90E2;"></div>
            <span>Clusters</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #FF9500;"></div>
            <span>Concepts</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #28A745;"></div>
            <span>Positive relationship</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #DC3545;"></div>
            <span>Negative relationship</span>
        </div>
        <div style="margin-top: 10px; font-style: italic; color: #666;">
            Click clusters to explore internal concepts
        </div>
    </div>

    <script>
        // Embedded data
        const clusterData = {"seasonal patterns": {"concepts": "seasonal patterns", "concept_list": ["seasonal patterns"], "type": "cluster", "node_size": 18, "label": "seasonal patterns"}, "Fishing Practices & Species": {"concepts": "kayak fishing, spawning season, snakehead, food preferences, fishing spots, guide fishermen, fishing times, spawning, tidal license, largemouth bass, freshwater license, fish talk magazine, fishing experience, salinity, fishing patience, fishing regulations, blue catfish, recreational fishing, fishing locations, fishing for food, fishing frequency, fishing hours, fishing knowledge, fish taste, cooking methods, flounder, ocean city, marine debris, fishing success, fishing reports, commercial fishing, sea trout, large mouth bass, recreational fishermen, fishbrain app, snakehead fishing, mercury levels, dock fishing, fish consumption, overfishing", "concept_list": ["kayak fishing", "spawning season", "snakehead", "food preferences", "fishing spots", "guide fishermen", "fishing times", "spawning", "tidal license", "largemouth bass", "freshwater license", "fish talk magazine", "fishing experience", "salinity", "fishing patience", "fishing regulations", "blue catfish", "recreational fishing", "fishing locations", "fishing for food", "fishing frequency", "fishing hours", "fishing knowledge", "fish taste", "cooking methods", "flounder", "ocean city", "marine debris", "fishing success", "fishing reports", "commercial fishing", "sea trout", "large mouth bass", "recreational fishermen", "fishbrain app", "snakehead fishing", "mercury levels", "dock fishing", "fish consumption", "overfishing"], "type": "cluster", "node_size": 135, "label": "Fishing Practices & Species"}, "Fishing Access & Conditions": {"concepts": "public docks, introductions, fall, competition, access, catch regulations, summer, patapsco, tide, travel time, filleting techniques, filet difficulty, hypoxic conditions, striped bass, public access, slot limits, catch and release, market demand, paddling conditions, neighborhood dock, kayaking, thesis research, social media, weather, patuxent, slime factor, parking availability, enclosed spaces, severn, potomac, trash, dnr, chesapeake bay, community access, hypoxia, crowded areas, telemetry data, wind conditions, tide timing, magothy, red drum, harvesting, pcbs, limited parking, time constraints, work schedule, channels, maryland, day trips", "concept_list": ["public docks", "introductions", "fall", "competition", "access", "catch regulations", "summer", "patapsco", "tide", "travel time", "filleting techniques", "filet difficulty", "hypoxic conditions", "striped bass", "public access", "slot limits", "catch and release", "market demand", "paddling conditions", "neighborhood dock", "kayaking", "thesis research", "social media", "weather", "patuxent", "slime factor", "parking availability", "enclosed spaces", "severn", "potomac", "trash", "dnr", "chesapeake bay", "community access", "hypoxia", "crowded areas", "telemetry data", "wind conditions", "tide timing", "magothy", "red drum", "harvesting", "pcbs", "limited parking", "time constraints", "work schedule", "channels", "maryland", "day trips"], "type": "cluster", "node_size": 162, "label": "Fishing Access & Conditions"}, "Environmental Impacts": {"concepts": "environmental factors, species introduction, biodiversity impact, biodiversity, environmental contamination, development impacts, species targeting, population increase, ecosystem threat, climate change, environmental impact, grasses, invasive species", "concept_list": ["environmental factors", "species introduction", "biodiversity impact", "biodiversity", "environmental contamination", "development impacts", "species targeting", "population increase", "ecosystem threat", "climate change", "environmental impact", "grasses", "invasive species"], "type": "cluster", "node_size": 54, "label": "Environmental Impacts"}, "Habitat Degradation": {"concepts": "degraded areas, offshore species, shallow habitat, anne arundel county, southern maryland, eastern shore, sediment runoff, southern anne arundel county, habitat quality, degraded habitat, blackwater national wildlife refuge, degraded streams, river ecosystems", "concept_list": ["degraded areas", "offshore species", "shallow habitat", "anne arundel county", "southern maryland", "eastern shore", "sediment runoff", "southern anne arundel county", "habitat quality", "degraded habitat", "blackwater national wildlife refuge", "degraded streams", "river ecosystems"], "type": "cluster", "node_size": 54, "label": "Habitat Degradation"}};
        const conceptData = {"kayak fishing": {"concepts": "kayak fishing", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "kayak fishing"}, "spawning season": {"concepts": "spawning season", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "spawning season"}, "snakehead": {"concepts": "snakehead", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "snakehead"}, "food preferences": {"concepts": "food preferences", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "food preferences"}, "fishing spots": {"concepts": "fishing spots", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "fishing spots"}, "guide fishermen": {"concepts": "guide fishermen", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "guide fishermen"}, "fishing times": {"concepts": "fishing times", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "fishing times"}, "spawning": {"concepts": "spawning", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "spawning"}, "tidal license": {"concepts": "tidal license", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "tidal license"}, "largemouth bass": {"concepts": "largemouth bass", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "largemouth bass"}, "freshwater license": {"concepts": "freshwater license", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "freshwater license"}, "fish talk magazine": {"concepts": "fish talk magazine", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "fish talk magazine"}, "fishing experience": {"concepts": "fishing experience", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "fishing experience"}, "salinity": {"concepts": "salinity", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "salinity"}, "fishing patience": {"concepts": "fishing patience", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "fishing patience"}, "fishing regulations": {"concepts": "fishing regulations", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "fishing regulations"}, "blue catfish": {"concepts": "blue catfish", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "blue catfish"}, "recreational fishing": {"concepts": "recreational fishing", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "recreational fishing"}, "fishing locations": {"concepts": "fishing locations", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "fishing locations"}, "fishing for food": {"concepts": "fishing for food", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "fishing for food"}, "fishing frequency": {"concepts": "fishing frequency", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "fishing frequency"}, "fishing hours": {"concepts": "fishing hours", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "fishing hours"}, "fishing knowledge": {"concepts": "fishing knowledge", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "fishing knowledge"}, "fish taste": {"concepts": "fish taste", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "fish taste"}, "cooking methods": {"concepts": "cooking methods", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "cooking methods"}, "flounder": {"concepts": "flounder", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "flounder"}, "ocean city": {"concepts": "ocean city", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "ocean city"}, "marine debris": {"concepts": "marine debris", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "marine debris"}, "fishing success": {"concepts": "fishing success", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "fishing success"}, "fishing reports": {"concepts": "fishing reports", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "fishing reports"}, "commercial fishing": {"concepts": "commercial fishing", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "commercial fishing"}, "sea trout": {"concepts": "sea trout", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "sea trout"}, "large mouth bass": {"concepts": "large mouth bass", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "large mouth bass"}, "recreational fishermen": {"concepts": "recreational fishermen", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "recreational fishermen"}, "fishbrain app": {"concepts": "fishbrain app", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "fishbrain app"}, "snakehead fishing": {"concepts": "snakehead fishing", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "snakehead fishing"}, "mercury levels": {"concepts": "mercury levels", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "mercury levels"}, "dock fishing": {"concepts": "dock fishing", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "dock fishing"}, "fish consumption": {"concepts": "fish consumption", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "fish consumption"}, "overfishing": {"concepts": "overfishing", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "overfishing"}, "public docks": {"concepts": "public docks", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "public docks"}, "introductions": {"concepts": "introductions", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "introductions"}, "fall": {"concepts": "fall", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "fall"}, "competition": {"concepts": "competition", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "competition"}, "access": {"concepts": "access", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "access"}, "catch regulations": {"concepts": "catch regulations", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "catch regulations"}, "summer": {"concepts": "summer", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "summer"}, "patapsco": {"concepts": "patapsco", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "patapsco"}, "tide": {"concepts": "tide", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "tide"}, "travel time": {"concepts": "travel time", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "travel time"}, "filleting techniques": {"concepts": "filleting techniques", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "filleting techniques"}, "filet difficulty": {"concepts": "filet difficulty", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "filet difficulty"}, "hypoxic conditions": {"concepts": "hypoxic conditions", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "hypoxic conditions"}, "striped bass": {"concepts": "striped bass", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "striped bass"}, "public access": {"concepts": "public access", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "public access"}, "slot limits": {"concepts": "slot limits", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "slot limits"}, "catch and release": {"concepts": "catch and release", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "catch and release"}, "market demand": {"concepts": "market demand", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "market demand"}, "paddling conditions": {"concepts": "paddling conditions", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "paddling conditions"}, "neighborhood dock": {"concepts": "neighborhood dock", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "neighborhood dock"}, "kayaking": {"concepts": "kayaking", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "kayaking"}, "thesis research": {"concepts": "thesis research", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "thesis research"}, "social media": {"concepts": "social media", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "social media"}, "weather": {"concepts": "weather", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "weather"}, "patuxent": {"concepts": "patuxent", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "patuxent"}, "slime factor": {"concepts": "slime factor", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "slime factor"}, "parking availability": {"concepts": "parking availability", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "parking availability"}, "enclosed spaces": {"concepts": "enclosed spaces", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "enclosed spaces"}, "severn": {"concepts": "severn", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "severn"}, "potomac": {"concepts": "potomac", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "potomac"}, "trash": {"concepts": "trash", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "trash"}, "dnr": {"concepts": "dnr", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "dnr"}, "chesapeake bay": {"concepts": "chesapeake bay", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "chesapeake bay"}, "community access": {"concepts": "community access", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "community access"}, "hypoxia": {"concepts": "hypoxia", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "hypoxia"}, "crowded areas": {"concepts": "crowded areas", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "crowded areas"}, "telemetry data": {"concepts": "telemetry data", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "telemetry data"}, "wind conditions": {"concepts": "wind conditions", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "wind conditions"}, "tide timing": {"concepts": "tide timing", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "tide timing"}, "magothy": {"concepts": "magothy", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "magothy"}, "red drum": {"concepts": "red drum", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "red drum"}, "harvesting": {"concepts": "harvesting", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "harvesting"}, "pcbs": {"concepts": "pcbs", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "pcbs"}, "limited parking": {"concepts": "limited parking", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "limited parking"}, "time constraints": {"concepts": "time constraints", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "time constraints"}, "work schedule": {"concepts": "work schedule", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "work schedule"}, "channels": {"concepts": "channels", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "channels"}, "maryland": {"concepts": "maryland", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "maryland"}, "day trips": {"concepts": "day trips", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "day trips"}, "environmental factors": {"concepts": "environmental factors", "type": "concept", "cluster": "Environmental Impacts", "node_size": 10, "label": "environmental factors"}, "species introduction": {"concepts": "species introduction", "type": "concept", "cluster": "Environmental Impacts", "node_size": 10, "label": "species introduction"}, "biodiversity impact": {"concepts": "biodiversity impact", "type": "concept", "cluster": "Environmental Impacts", "node_size": 10, "label": "biodiversity impact"}, "biodiversity": {"concepts": "biodiversity", "type": "concept", "cluster": "Environmental Impacts", "node_size": 10, "label": "biodiversity"}, "environmental contamination": {"concepts": "environmental contamination", "type": "concept", "cluster": "Environmental Impacts", "node_size": 10, "label": "environmental contamination"}, "development impacts": {"concepts": "development impacts", "type": "concept", "cluster": "Environmental Impacts", "node_size": 10, "label": "development impacts"}, "species targeting": {"concepts": "species targeting", "type": "concept", "cluster": "Environmental Impacts", "node_size": 10, "label": "species targeting"}, "population increase": {"concepts": "population increase", "type": "concept", "cluster": "Environmental Impacts", "node_size": 10, "label": "population increase"}, "ecosystem threat": {"concepts": "ecosystem threat", "type": "concept", "cluster": "Environmental Impacts", "node_size": 10, "label": "ecosystem threat"}, "climate change": {"concepts": "climate change", "type": "concept", "cluster": "Environmental Impacts", "node_size": 10, "label": "climate change"}, "environmental impact": {"concepts": "environmental impact", "type": "concept", "cluster": "Environmental Impacts", "node_size": 10, "label": "environmental impact"}, "grasses": {"concepts": "grasses", "type": "concept", "cluster": "Environmental Impacts", "node_size": 10, "label": "grasses"}, "invasive species": {"concepts": "invasive species", "type": "concept", "cluster": "Environmental Impacts", "node_size": 10, "label": "invasive species"}, "degraded areas": {"concepts": "degraded areas", "type": "concept", "cluster": "Habitat Degradation", "node_size": 10, "label": "degraded areas"}, "offshore species": {"concepts": "offshore species", "type": "concept", "cluster": "Habitat Degradation", "node_size": 10, "label": "offshore species"}, "shallow habitat": {"concepts": "shallow habitat", "type": "concept", "cluster": "Habitat Degradation", "node_size": 10, "label": "shallow habitat"}, "anne arundel county": {"concepts": "anne arundel county", "type": "concept", "cluster": "Habitat Degradation", "node_size": 10, "label": "anne arundel county"}, "southern maryland": {"concepts": "southern maryland", "type": "concept", "cluster": "Habitat Degradation", "node_size": 10, "label": "southern maryland"}, "eastern shore": {"concepts": "eastern shore", "type": "concept", "cluster": "Habitat Degradation", "node_size": 10, "label": "eastern shore"}, "sediment runoff": {"concepts": "sediment runoff", "type": "concept", "cluster": "Habitat Degradation", "node_size": 10, "label": "sediment runoff"}, "southern anne arundel county": {"concepts": "southern anne arundel county", "type": "concept", "cluster": "Habitat Degradation", "node_size": 10, "label": "southern anne arundel county"}, "habitat quality": {"concepts": "habitat quality", "type": "concept", "cluster": "Habitat Degradation", "node_size": 10, "label": "habitat quality"}, "degraded habitat": {"concepts": "degraded habitat", "type": "concept", "cluster": "Habitat Degradation", "node_size": 10, "label": "degraded habitat"}, "blackwater national wildlife refuge": {"concepts": "blackwater national wildlife refuge", "type": "concept", "cluster": "Habitat Degradation", "node_size": 10, "label": "blackwater national wildlife refuge"}, "degraded streams": {"concepts": "degraded streams", "type": "concept", "cluster": "Habitat Degradation", "node_size": 10, "label": "degraded streams"}, "river ecosystems": {"concepts": "river ecosystems", "type": "concept", "cluster": "Habitat Degradation", "node_size": 10, "label": "river ecosystems"}};
        const interClusterEdges = [["seasonal patterns", "Fishing Practices & Species", {"weight": 1.0, "confidence": 0.9099999999999999, "type": "inter_cluster", "style": "solid"}], ["seasonal patterns", "Fishing Access & Conditions", {"weight": 1.0, "confidence": 0.8099999999999999, "type": "inter_cluster", "style": "solid"}], ["seasonal patterns", "Environmental Impacts", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["seasonal patterns", "Habitat Degradation", {"weight": 0.8, "confidence": 0.4800000000000001, "type": "inter_cluster", "style": "solid"}], ["Fishing Practices & Species", "seasonal patterns", {"weight": 0.6, "confidence": 0.9000000000000001, "type": "inter_cluster", "style": "solid"}], ["Fishing Practices & Species", "Environmental Impacts", {"weight": -1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["Fishing Practices & Species", "Fishing Access & Conditions", {"weight": -0.2, "confidence": 0.74, "type": "inter_cluster", "style": "solid"}], ["Fishing Practices & Species", "Habitat Degradation", {"weight": 0.2, "confidence": 0.7500000000000001, "type": "inter_cluster", "style": "solid"}], ["Fishing Access & Conditions", "Fishing Practices & Species", {"weight": 1.0, "confidence": 0.93, "type": "inter_cluster", "style": "solid"}], ["Fishing Access & Conditions", "Environmental Impacts", {"weight": 0.6, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["Fishing Access & Conditions", "seasonal patterns", {"weight": 1.0, "confidence": 0.74, "type": "inter_cluster", "style": "solid"}], ["Fishing Access & Conditions", "Habitat Degradation", {"weight": -0.2, "confidence": 0.6799999999999999, "type": "inter_cluster", "style": "solid"}], ["Environmental Impacts", "Fishing Practices & Species", {"weight": 0.2, "confidence": 0.8200000000000001, "type": "inter_cluster", "style": "solid"}], ["Environmental Impacts", "Fishing Access & Conditions", {"weight": 0.6, "confidence": 0.7799999999999999, "type": "inter_cluster", "style": "solid"}], ["Environmental Impacts", "Habitat Degradation", {"weight": 0.2, "confidence": 0.76, "type": "inter_cluster", "style": "solid"}], ["Environmental Impacts", "seasonal patterns", {"weight": 0.6, "confidence": 0.74, "type": "inter_cluster", "style": "solid"}], ["Habitat Degradation", "Environmental Impacts", {"weight": 0.2, "confidence": 0.8799999999999999, "type": "inter_cluster", "style": "solid"}], ["Habitat Degradation", "Fishing Practices & Species", {"weight": -0.6, "confidence": 0.8100000000000002, "type": "inter_cluster", "style": "solid"}], ["Habitat Degradation", "Fishing Access & Conditions", {"weight": 0.2, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["Habitat Degradation", "seasonal patterns", {"weight": 0.2, "confidence": 0.32999999999999996, "type": "inter_cluster", "style": "solid"}]];
        const clusterConcepts = {"Fishing Practices & Species": [["kayak fishing", {"concepts": "kayak fishing", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "kayak fishing"}], ["spawning season", {"concepts": "spawning season", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "spawning season"}], ["snakehead", {"concepts": "snakehead", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "snakehead"}], ["food preferences", {"concepts": "food preferences", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "food preferences"}], ["fishing spots", {"concepts": "fishing spots", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "fishing spots"}], ["guide fishermen", {"concepts": "guide fishermen", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "guide fishermen"}], ["fishing times", {"concepts": "fishing times", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "fishing times"}], ["spawning", {"concepts": "spawning", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "spawning"}], ["tidal license", {"concepts": "tidal license", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "tidal license"}], ["largemouth bass", {"concepts": "largemouth bass", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "largemouth bass"}], ["freshwater license", {"concepts": "freshwater license", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "freshwater license"}], ["fish talk magazine", {"concepts": "fish talk magazine", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "fish talk magazine"}], ["fishing experience", {"concepts": "fishing experience", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "fishing experience"}], ["salinity", {"concepts": "salinity", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "salinity"}], ["fishing patience", {"concepts": "fishing patience", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "fishing patience"}], ["fishing regulations", {"concepts": "fishing regulations", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "fishing regulations"}], ["blue catfish", {"concepts": "blue catfish", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "blue catfish"}], ["recreational fishing", {"concepts": "recreational fishing", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "recreational fishing"}], ["fishing locations", {"concepts": "fishing locations", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "fishing locations"}], ["fishing for food", {"concepts": "fishing for food", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "fishing for food"}], ["fishing frequency", {"concepts": "fishing frequency", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "fishing frequency"}], ["fishing hours", {"concepts": "fishing hours", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "fishing hours"}], ["fishing knowledge", {"concepts": "fishing knowledge", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "fishing knowledge"}], ["fish taste", {"concepts": "fish taste", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "fish taste"}], ["cooking methods", {"concepts": "cooking methods", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "cooking methods"}], ["flounder", {"concepts": "flounder", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "flounder"}], ["ocean city", {"concepts": "ocean city", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "ocean city"}], ["marine debris", {"concepts": "marine debris", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "marine debris"}], ["fishing success", {"concepts": "fishing success", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "fishing success"}], ["fishing reports", {"concepts": "fishing reports", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "fishing reports"}], ["commercial fishing", {"concepts": "commercial fishing", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "commercial fishing"}], ["sea trout", {"concepts": "sea trout", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "sea trout"}], ["large mouth bass", {"concepts": "large mouth bass", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "large mouth bass"}], ["recreational fishermen", {"concepts": "recreational fishermen", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "recreational fishermen"}], ["fishbrain app", {"concepts": "fishbrain app", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "fishbrain app"}], ["snakehead fishing", {"concepts": "snakehead fishing", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "snakehead fishing"}], ["mercury levels", {"concepts": "mercury levels", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "mercury levels"}], ["dock fishing", {"concepts": "dock fishing", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "dock fishing"}], ["fish consumption", {"concepts": "fish consumption", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "fish consumption"}], ["overfishing", {"concepts": "overfishing", "type": "concept", "cluster": "Fishing Practices & Species", "node_size": 10, "label": "overfishing"}]], "Fishing Access & Conditions": [["public docks", {"concepts": "public docks", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "public docks"}], ["introductions", {"concepts": "introductions", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "introductions"}], ["fall", {"concepts": "fall", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "fall"}], ["competition", {"concepts": "competition", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "competition"}], ["access", {"concepts": "access", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "access"}], ["catch regulations", {"concepts": "catch regulations", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "catch regulations"}], ["summer", {"concepts": "summer", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "summer"}], ["patapsco", {"concepts": "patapsco", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "patapsco"}], ["tide", {"concepts": "tide", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "tide"}], ["travel time", {"concepts": "travel time", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "travel time"}], ["filleting techniques", {"concepts": "filleting techniques", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "filleting techniques"}], ["filet difficulty", {"concepts": "filet difficulty", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "filet difficulty"}], ["hypoxic conditions", {"concepts": "hypoxic conditions", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "hypoxic conditions"}], ["striped bass", {"concepts": "striped bass", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "striped bass"}], ["public access", {"concepts": "public access", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "public access"}], ["slot limits", {"concepts": "slot limits", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "slot limits"}], ["catch and release", {"concepts": "catch and release", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "catch and release"}], ["market demand", {"concepts": "market demand", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "market demand"}], ["paddling conditions", {"concepts": "paddling conditions", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "paddling conditions"}], ["neighborhood dock", {"concepts": "neighborhood dock", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "neighborhood dock"}], ["kayaking", {"concepts": "kayaking", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "kayaking"}], ["thesis research", {"concepts": "thesis research", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "thesis research"}], ["social media", {"concepts": "social media", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "social media"}], ["weather", {"concepts": "weather", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "weather"}], ["patuxent", {"concepts": "patuxent", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "patuxent"}], ["slime factor", {"concepts": "slime factor", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "slime factor"}], ["parking availability", {"concepts": "parking availability", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "parking availability"}], ["enclosed spaces", {"concepts": "enclosed spaces", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "enclosed spaces"}], ["severn", {"concepts": "severn", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "severn"}], ["potomac", {"concepts": "potomac", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "potomac"}], ["trash", {"concepts": "trash", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "trash"}], ["dnr", {"concepts": "dnr", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "dnr"}], ["chesapeake bay", {"concepts": "chesapeake bay", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "chesapeake bay"}], ["community access", {"concepts": "community access", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "community access"}], ["hypoxia", {"concepts": "hypoxia", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "hypoxia"}], ["crowded areas", {"concepts": "crowded areas", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "crowded areas"}], ["telemetry data", {"concepts": "telemetry data", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "telemetry data"}], ["wind conditions", {"concepts": "wind conditions", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "wind conditions"}], ["tide timing", {"concepts": "tide timing", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "tide timing"}], ["magothy", {"concepts": "magothy", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "magothy"}], ["red drum", {"concepts": "red drum", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "red drum"}], ["harvesting", {"concepts": "harvesting", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "harvesting"}], ["pcbs", {"concepts": "pcbs", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "pcbs"}], ["limited parking", {"concepts": "limited parking", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "limited parking"}], ["time constraints", {"concepts": "time constraints", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "time constraints"}], ["work schedule", {"concepts": "work schedule", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "work schedule"}], ["channels", {"concepts": "channels", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "channels"}], ["maryland", {"concepts": "maryland", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "maryland"}], ["day trips", {"concepts": "day trips", "type": "concept", "cluster": "Fishing Access & Conditions", "node_size": 10, "label": "day trips"}]], "Environmental Impacts": [["environmental factors", {"concepts": "environmental factors", "type": "concept", "cluster": "Environmental Impacts", "node_size": 10, "label": "environmental factors"}], ["species introduction", {"concepts": "species introduction", "type": "concept", "cluster": "Environmental Impacts", "node_size": 10, "label": "species introduction"}], ["biodiversity impact", {"concepts": "biodiversity impact", "type": "concept", "cluster": "Environmental Impacts", "node_size": 10, "label": "biodiversity impact"}], ["biodiversity", {"concepts": "biodiversity", "type": "concept", "cluster": "Environmental Impacts", "node_size": 10, "label": "biodiversity"}], ["environmental contamination", {"concepts": "environmental contamination", "type": "concept", "cluster": "Environmental Impacts", "node_size": 10, "label": "environmental contamination"}], ["development impacts", {"concepts": "development impacts", "type": "concept", "cluster": "Environmental Impacts", "node_size": 10, "label": "development impacts"}], ["species targeting", {"concepts": "species targeting", "type": "concept", "cluster": "Environmental Impacts", "node_size": 10, "label": "species targeting"}], ["population increase", {"concepts": "population increase", "type": "concept", "cluster": "Environmental Impacts", "node_size": 10, "label": "population increase"}], ["ecosystem threat", {"concepts": "ecosystem threat", "type": "concept", "cluster": "Environmental Impacts", "node_size": 10, "label": "ecosystem threat"}], ["climate change", {"concepts": "climate change", "type": "concept", "cluster": "Environmental Impacts", "node_size": 10, "label": "climate change"}], ["environmental impact", {"concepts": "environmental impact", "type": "concept", "cluster": "Environmental Impacts", "node_size": 10, "label": "environmental impact"}], ["grasses", {"concepts": "grasses", "type": "concept", "cluster": "Environmental Impacts", "node_size": 10, "label": "grasses"}], ["invasive species", {"concepts": "invasive species", "type": "concept", "cluster": "Environmental Impacts", "node_size": 10, "label": "invasive species"}]], "Habitat Degradation": [["degraded areas", {"concepts": "degraded areas", "type": "concept", "cluster": "Habitat Degradation", "node_size": 10, "label": "degraded areas"}], ["offshore species", {"concepts": "offshore species", "type": "concept", "cluster": "Habitat Degradation", "node_size": 10, "label": "offshore species"}], ["shallow habitat", {"concepts": "shallow habitat", "type": "concept", "cluster": "Habitat Degradation", "node_size": 10, "label": "shallow habitat"}], ["anne arundel county", {"concepts": "anne arundel county", "type": "concept", "cluster": "Habitat Degradation", "node_size": 10, "label": "anne arundel county"}], ["southern maryland", {"concepts": "southern maryland", "type": "concept", "cluster": "Habitat Degradation", "node_size": 10, "label": "southern maryland"}], ["eastern shore", {"concepts": "eastern shore", "type": "concept", "cluster": "Habitat Degradation", "node_size": 10, "label": "eastern shore"}], ["sediment runoff", {"concepts": "sediment runoff", "type": "concept", "cluster": "Habitat Degradation", "node_size": 10, "label": "sediment runoff"}], ["southern anne arundel county", {"concepts": "southern anne arundel county", "type": "concept", "cluster": "Habitat Degradation", "node_size": 10, "label": "southern anne arundel county"}], ["habitat quality", {"concepts": "habitat quality", "type": "concept", "cluster": "Habitat Degradation", "node_size": 10, "label": "habitat quality"}], ["degraded habitat", {"concepts": "degraded habitat", "type": "concept", "cluster": "Habitat Degradation", "node_size": 10, "label": "degraded habitat"}], ["blackwater national wildlife refuge", {"concepts": "blackwater national wildlife refuge", "type": "concept", "cluster": "Habitat Degradation", "node_size": 10, "label": "blackwater national wildlife refuge"}], ["degraded streams", {"concepts": "degraded streams", "type": "concept", "cluster": "Habitat Degradation", "node_size": 10, "label": "degraded streams"}], ["river ecosystems", {"concepts": "river ecosystems", "type": "concept", "cluster": "Habitat Degradation", "node_size": 10, "label": "river ecosystems"}]]};
        const clusterEdges = {"Fishing Practices & Species": [], "Fishing Access & Conditions": [], "Environmental Impacts": [], "Habitat Degradation": []};
        
        let network;
        let currentView = 'clusters';
        let currentCluster = null;
        let minConfidence = 0.3;
        
        // Network options
        const options = {
            nodes: {
                font: { color: 'white', size: 14 },
                borderWidth: 2,
                shadow: true
            },
            edges: {
                arrows: { to: { enabled: true, scaleFactor: 1.2 } },
                shadow: true,
                smooth: { type: 'continuous' }
            },
            physics: {
                stabilization: { iterations: 100 },
                barnesHut: {
                    gravitationalConstant: -8000,
                    springConstant: 0.001,
                    springLength: 200
                }
            },
            interaction: {
                hover: true,
                selectConnectedEdges: false
            }
        };
        
        function initNetwork() {
            const container = document.getElementById('network');
            const data = getClusterViewData();
            network = new vis.Network(container, data, options);
            
            // Handle cluster clicks for drill-down
            network.on("click", function(params) {
                if (params.nodes.length > 0 && currentView === 'clusters') {
                    const clickedNode = params.nodes[0];
                    if (clusterConcepts[clickedNode]) {
                        showClusterDetail(clickedNode);
                    }
                }
            });
        }
        
        function getClusterViewData() {
            const nodes = [];
            const edges = [];
            
            // Add cluster nodes
            Object.entries(clusterData).forEach(([clusterId, data]) => {
                const concepts = data.concepts || [];
                const conceptsStr = Array.isArray(concepts) ? concepts.join(', ') : concepts;
                
                nodes.push({
                    id: clusterId,
                    label: clusterId,
                    title: `Cluster: ${clusterId}\nConcepts: ${conceptsStr}\nClick to explore internal relationships`,
                    color: '#4A90E2',
                    size: 25 + (conceptsStr.split(',').length * 2),
                    font: { color: 'white' }
                });
            });
            
            // Add inter-cluster edges
            interClusterEdges.forEach(([source, target, edgeData]) => {
                const confidence = edgeData.confidence || 1.0;
                const weight = edgeData.weight || 0;
                
                if (confidence >= minConfidence) {
                    edges.push({
                        from: source,
                        to: target,
                        color: weight > 0 ? '#28A745' : '#DC3545',
                        width: Math.abs(weight) * 3 + 1,
                        title: `${source} → ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                        dashes: false
                    });
                }
            });
            
            return { nodes: nodes, edges: edges };
        }
        
        function getClusterDetailData(clusterId) {
            const nodes = [];
            const edges = [];
            
            // Add concept nodes for this cluster
            if (clusterConcepts[clusterId]) {
                clusterConcepts[clusterId].forEach(([conceptId, data]) => {
                    nodes.push({
                        id: conceptId,
                        label: conceptId,
                        title: `Concept: ${conceptId}\nFrom cluster: ${clusterId}`,
                        color: '#FF9500',
                        size: 20,
                        font: { color: 'white' }
                    });
                });
            }
            
            // Add intra-cluster edges
            if (clusterEdges[clusterId]) {
                clusterEdges[clusterId].forEach(([source, target, edgeData]) => {
                    const confidence = edgeData.confidence || 1.0;
                    const weight = edgeData.weight || 0;
                    
                    if (confidence >= minConfidence) {
                        edges.push({
                            from: source,
                            to: target,
                            color: weight > 0 ? '#28A745' : '#DC3545',
                            width: Math.abs(weight) * 3 + 1,
                            title: `${source} → ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                            dashes: true
                        });
                    }
                });
            }
            
            return { nodes: nodes, edges: edges };
        }
        
        function showClusterView() {
            currentView = 'clusters';
            currentCluster = null;
            const data = getClusterViewData();
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'none';
            document.getElementById('current-view').textContent = 'Cluster Overview';
        }
        
        function showClusterDetail(clusterId) {
            currentView = 'concepts';
            currentCluster = clusterId;
            const data = getClusterDetailData(clusterId);
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'inline-block';
            document.getElementById('current-view').textContent = `Inside Cluster: ${clusterId}`;
        }
        
        function updateConfidenceFilter(value) {
            minConfidence = parseFloat(value);
            document.getElementById('confidence-value').textContent = value;
            
            // Refresh current view
            if (currentView === 'clusters') {
                showClusterView();
            } else {
                showClusterDetail(currentCluster);
            }
        }
        
        // Initialize the network when page loads
        window.onload = function() {
            initNetwork();
        };
    </script>
</body>
</html>
