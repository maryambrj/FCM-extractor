
<!DOCTYPE html>
<html>
<head>
    <title>Hierarchical FCM Visualization (Unconnected nodes removed)</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 0; 
            padding: 20px;
            background: #f5f5f5;
        }
        
        #network { 
            width: 100%; 
            height: 600px; 
            border: 2px solid #ccc; 
            background: white;
            border-radius: 8px;
        }
        
        #controls {
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn {
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        
        .btn-primary { background: #4A90E2; color: white; }
        .btn-primary:hover { background: #357ABD; }
        
        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #545b62; }
        
        #current-view {
            font-weight: bold;
            color: #333;
            margin-left: 10px;
        }
        
        #legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-size: 12px;
            max-width: 200px;
        }
        
        .legend-item {
            margin: 5px 0;
            display: flex;
            align-items: center;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .legend-line {
            width: 20px;
            height: 2px;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <h1>Fuzzy Cognitive Map - Hierarchical View</h1>
    
    <div id="controls">
        <button class="btn btn-secondary" id="back-btn" onclick="showClusterView()" style="display: none;">
            ‚Üê Back to Clusters
        </button>
        <span id="current-view">Cluster Overview</span>
        <div style="float: right;">
            <label>Min Confidence: </label>
            <input type="range" id="confidence-slider" min="0" max="1" step="0.1" value="0.3" 
                   onchange="updateConfidenceFilter(this.value)">
            <span id="confidence-value">0.3</span>
        </div>
    </div>
    
    <div id="network"></div>
    
    <div id="legend">
        <h4>Legend</h4>
        <div class="legend-item">
            <div class="legend-color" style="background: #4A90E2;"></div>
            <span>Clusters</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #FF9500;"></div>
            <span>Concepts</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #28A745;"></div>
            <span>Positive relationship</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #DC3545;"></div>
            <span>Negative relationship</span>
        </div>
        <div style="margin-top: 10px; font-style: italic; color: #666;">
            Click clusters to explore internal concepts
        </div>
    </div>

    <script>
        // Embedded data
        const clusterData = {"fisheries problems": {"concepts": "fisheries problems", "concept_list": ["fisheries problems"], "type": "cluster", "node_size": 18, "label": "fisheries problems"}, "recreational fishermen": {"concepts": "recreational fishermen", "concept_list": ["recreational fishermen"], "type": "cluster", "node_size": 18, "label": "recreational fishermen"}, "grouper behavior (medical)": {"concepts": "grouper behavior (medical)", "concept_list": ["grouper behavior (medical)"], "type": "cluster", "node_size": 18, "label": "grouper behavior (medical)"}, "tourist development": {"concepts": "tourist development", "concept_list": ["tourist development"], "type": "cluster", "node_size": 18, "label": "tourist development"}, "government distrust": {"concepts": "government distrust", "concept_list": ["government distrust"], "type": "cluster", "node_size": 18, "label": "government distrust"}, "lack of management (organizational)": {"concepts": "lack of management (organizational)", "concept_list": ["lack of management (organizational)"], "type": "cluster", "node_size": 18, "label": "lack of management (organizational)"}, "declining stocks (medical)": {"concepts": "declining stocks (medical)", "concept_list": ["declining stocks (medical)"], "type": "cluster", "node_size": 18, "label": "declining stocks (medical)"}, "resource needs": {"concepts": "resource needs", "concept_list": ["resource needs"], "type": "cluster", "node_size": 18, "label": "resource needs"}, "climate change concern (social)": {"concepts": "climate change concern (social), climate change (medical), weather patterns (medical), sedimentation (medical)", "concept_list": ["climate change concern (social)", "climate change (medical)", "weather patterns (medical)", "sedimentation (medical)"], "type": "cluster", "node_size": 27, "label": "climate change concern (social)"}, "storm surges": {"concepts": "storm surges", "concept_list": ["storm surges"], "type": "cluster", "node_size": 18, "label": "storm surges"}, "Fishery Management": {"concepts": "fisher relationship, fisher-manager relationship, fisher-scientist collaboration, fisher engagement, fisher cooperation", "concept_list": ["fisher relationship", "fisher-manager relationship", "fisher-scientist collaboration", "fisher engagement", "fisher cooperation"], "type": "cluster", "node_size": 30, "label": "Fishery Management"}, "Fishermen Perspectives": {"concepts": "fishermen, fishermen perceptions, fisher understanding, fisher concerns", "concept_list": ["fishermen", "fishermen perceptions", "fisher understanding", "fisher concerns"], "type": "cluster", "node_size": 27, "label": "Fishermen Perspectives"}, "Environmental Threats": {"concepts": "species decline, overfishing, habitat loss, habitat degradation, environmental impacts, invasive species, overfishing (medical)", "concept_list": ["species decline", "overfishing", "habitat loss", "habitat degradation", "environmental impacts", "invasive species", "overfishing (medical)"], "type": "cluster", "node_size": 36, "label": "Environmental Threats"}, "Water Quality & Health": {"concepts": "water quality (medical), sargassum (medical), sahara dust (medical), coral diseases (medical), underwater habitats (medical), spawning (medical), water temperature, algae blooms, algal blooms (medical), larvae development (medical), fish behavior (medical), deep water snapper (medical), coral bleaching (medical), pollution (medical), fish stocks (medical), warming waters (medical), coral restoration (medical), deep water fish, coral reefs (medical), lionfish removal, ocean bounty, pollution, spawning changes, federal waters, fish products, juvenile fish, acoustic monitoring, coral restoration, fish stocks, lionfish removal (medical), species aggregation, coral bleaching", "concept_list": ["water quality (medical)", "sargassum (medical)", "sahara dust (medical)", "coral diseases (medical)", "underwater habitats (medical)", "spawning (medical)", "water temperature", "algae blooms", "algal blooms (medical)", "larvae development (medical)", "fish behavior (medical)", "deep water snapper (medical)", "coral bleaching (medical)", "pollution (medical)", "fish stocks (medical)", "warming waters (medical)", "coral restoration (medical)", "deep water fish", "coral reefs (medical)", "lionfish removal", "ocean bounty", "pollution", "spawning changes", "federal waters", "fish products", "juvenile fish", "acoustic monitoring", "coral restoration", "fish stocks", "lionfish removal (medical)", "species aggregation", "coral bleaching"], "type": "cluster", "node_size": 111, "label": "Water Quality & Health"}, "Coral Reef Coasts": {"concepts": "coastal communities, state waters, coral reef dependency, coral reefs, coral reef habitats, coastal communities (social)", "concept_list": ["coastal communities", "state waters", "coral reef dependency", "coral reefs", "coral reef habitats", "coastal communities (social)"], "type": "cluster", "node_size": 33, "label": "Coral Reef Coasts"}, "DNER Enforcement": {"concepts": "dner enforcers, enforcement", "concept_list": ["dner enforcers", "enforcement"], "type": "cluster", "node_size": 21, "label": "DNER Enforcement"}, "Organizational Compliance": {"concepts": "compliance (organizational), compliance, lack compliance", "concept_list": ["compliance (organizational)", "compliance", "lack compliance"], "type": "cluster", "node_size": 24, "label": "Organizational Compliance"}, "Public Engagement Process": {"concepts": "transparent process, public realm, advisory committee, participatory action, council cooperation, press coverage", "concept_list": ["transparent process", "public realm", "advisory committee", "participatory action", "council cooperation", "press coverage"], "type": "cluster", "node_size": 33, "label": "Public Engagement Process"}, "Drug User Reliability": {"concepts": "drug users, unreliable", "concept_list": ["drug users", "unreliable"], "type": "cluster", "node_size": 21, "label": "Drug User Reliability"}, "Climate Science": {"concepts": "climate change, scientific voices", "concept_list": ["climate change", "scientific voices"], "type": "cluster", "node_size": 21, "label": "Climate Science"}, "Port & Social Systems": {"concepts": "fuel provision (organizational), welfare (social), landing data, east coast compliance (social), work opportunities, manager concerns, port sampling (medical), port sampling, institutional vision (organizational), port sampling", "concept_list": ["fuel provision (organizational)", "welfare (social)", "landing data", "east coast compliance (social)", "work opportunities", "manager concerns", "port sampling (medical)", "port sampling", "institutional vision (organizational)", "port sampling"], "type": "cluster", "node_size": 45, "label": "Port & Social Systems"}, "Distrust & Illegality": {"concepts": "untrustworthy, untrustworthy relationship, third-party facilitation, underground market", "concept_list": ["untrustworthy", "untrustworthy relationship", "third-party facilitation", "underground market"], "type": "cluster", "node_size": 27, "label": "Distrust & Illegality"}, "Organizational Structure": {"concepts": "transparency (organizational), decentralized system (organizational), regulations (organizational), accountability (organizational), top-down management, engine repair (organizational)", "concept_list": ["transparency (organizational)", "decentralized system (organizational)", "regulations (organizational)", "accountability (organizational)", "top-down management", "engine repair (organizational)"], "type": "cluster", "node_size": 33, "label": "Organizational Structure"}, "Agency Disconnect": {"concepts": "community problems, agency disconnect, cohesive structure (organizational), social system (social), vieques cohesion (social), crisis response (social), community problems (social), community dependency, community outreach, community cohesion (social), family traditions, local knowledge", "concept_list": ["community problems", "agency disconnect", "cohesive structure (organizational)", "social system (social)", "vieques cohesion (social)", "crisis response (social)", "community problems (social)", "community dependency", "community outreach", "community cohesion (social)", "family traditions", "local knowledge"], "type": "cluster", "node_size": 51, "label": "Agency Disconnect"}, "Tourism Industry": {"concepts": "tourism industry, tourism sector, tourism, tourism culture, tourism (social)", "concept_list": ["tourism industry", "tourism sector", "tourism", "tourism culture", "tourism (social)"], "type": "cluster", "node_size": 30, "label": "Tourism Industry"}, "Economic Growth": {"concepts": "economic growth, agricultural sector", "concept_list": ["economic growth", "agricultural sector"], "type": "cluster", "node_size": 21, "label": "Economic Growth"}, "Government & Vision": {"concepts": "institutional vision, government policies, government leaders (organizational), government cooperation (organizational), boat subsidies, government subsidies (organizational), government job (organizational)", "concept_list": ["institutional vision", "government policies", "government leaders (organizational)", "government cooperation (organizational)", "boat subsidies", "government subsidies (organizational)", "government job (organizational)"], "type": "cluster", "node_size": 36, "label": "Government & Vision"}, "Illegal Fishing": {"concepts": "fishing spots, illegal fishing", "concept_list": ["fishing spots", "illegal fishing"], "type": "cluster", "node_size": 21, "label": "Illegal Fishing"}, "Fishermen Distrust": {"concepts": "fishermen distrust managers., fishermen distrust (social), individualist fishermen (social), puerto rico fishermen (social), fishery management (organizational), recreational fishing (social), subsistence fishing (social), unlicensed fishermen (social), fisheries dependency (social), fishing communities (social)", "concept_list": ["fishermen distrust managers.", "fishermen distrust (social)", "individualist fishermen (social)", "puerto rico fishermen (social)", "fishery management (organizational)", "recreational fishing (social)", "subsistence fishing (social)", "unlicensed fishermen (social)", "fisheries dependency (social)", "fishing communities (social)"], "type": "cluster", "node_size": 45, "label": "Fishermen Distrust"}, "Organizational Data Sharing": {"concepts": "monitoring program (organizational), research results (organizational), data sharing (organizational)", "concept_list": ["monitoring program (organizational)", "research results (organizational)", "data sharing (organizational)"], "type": "cluster", "node_size": 24, "label": "Organizational Data Sharing"}, "Decentralized Market Activities": {"concepts": "ice sales (organizational), market decentralized (organizational), boat repair (organizational), middle man (organizational), association vision (organizational)", "concept_list": ["ice sales (organizational)", "market decentralized (organizational)", "boat repair (organizational)", "middle man (organizational)", "association vision (organizational)"], "type": "cluster", "node_size": 30, "label": "Decentralized Market Activities"}, "Decision-Making": {"concepts": "decision-makers, decision-making process", "concept_list": ["decision-makers", "decision-making process"], "type": "cluster", "node_size": 21, "label": "Decision-Making"}, "Conflict Resolution Approach": {"concepts": "top-down approach, conflict resolution, pit tagging (medical), cold fronts (medical), courtship calls (medical)", "concept_list": ["top-down approach", "conflict resolution", "pit tagging (medical)", "cold fronts (medical)", "courtship calls (medical)"], "type": "cluster", "node_size": 30, "label": "Conflict Resolution Approach"}};
        const conceptData = {};
        const interClusterEdges = [["fisheries problems", "resource needs", {"weight": 1.0, "confidence": 0.575, "type": "inter_cluster", "style": "solid"}], ["recreational fishermen", "Conflict Resolution Approach", {"weight": 1.0, "confidence": 0.2, "type": "inter_cluster", "style": "solid"}], ["grouper behavior (medical)", "Fishery Management", {"weight": -1.0, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["tourist development", "Economic Growth", {"weight": 1.0, "confidence": 0.53, "type": "inter_cluster", "style": "solid"}], ["tourist development", "Decision-Making", {"weight": 1.0, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["tourist development", "DNER Enforcement", {"weight": -0.5, "confidence": 0.1, "type": "inter_cluster", "style": "solid"}], ["government distrust", "fisheries problems", {"weight": 1.0, "confidence": 0.5, "type": "inter_cluster", "style": "solid"}], ["government distrust", "Fishermen Perspectives", {"weight": 1.0, "confidence": 0.4, "type": "inter_cluster", "style": "solid"}], ["lack of management (organizational)", "tourist development", {"weight": 0.5, "confidence": 0.1, "type": "inter_cluster", "style": "solid"}], ["declining stocks (medical)", "storm surges", {"weight": -1.0, "confidence": 0.1, "type": "inter_cluster", "style": "solid"}], ["resource needs", "tourist development", {"weight": 0.8, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["climate change concern (social)", "DNER Enforcement", {"weight": 0.5, "confidence": 0.1, "type": "inter_cluster", "style": "solid"}], ["Fishery Management", "Fishermen Perspectives", {"weight": 1.0, "confidence": 0.5, "type": "inter_cluster", "style": "solid"}], ["Fishery Management", "DNER Enforcement", {"weight": 1.0, "confidence": 0.44000000000000006, "type": "inter_cluster", "style": "solid"}], ["Fishery Management", "Economic Growth", {"weight": 1.0, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Fishermen Perspectives", "fisheries problems", {"weight": 1.0, "confidence": 0.47000000000000003, "type": "inter_cluster", "style": "solid"}], ["Fishermen Perspectives", "Distrust & Illegality", {"weight": 1.0, "confidence": 0.3333333333333333, "type": "inter_cluster", "style": "solid"}], ["Fishermen Perspectives", "Conflict Resolution Approach", {"weight": -1.0, "confidence": 0.2, "type": "inter_cluster", "style": "solid"}], ["Environmental Threats", "Fishermen Perspectives", {"weight": 1.0, "confidence": 0.45, "type": "inter_cluster", "style": "solid"}], ["Environmental Threats", "Climate Science", {"weight": 1.0, "confidence": 0.35, "type": "inter_cluster", "style": "solid"}], ["Water Quality & Health", "Decision-Making", {"weight": 1.0, "confidence": 0.3666666666666667, "type": "inter_cluster", "style": "solid"}], ["Coral Reef Coasts", "Economic Growth", {"weight": 0.75, "confidence": 0.32499999999999996, "type": "inter_cluster", "style": "solid"}], ["Organizational Compliance", "Climate Science", {"weight": -0.75, "confidence": 0.175, "type": "inter_cluster", "style": "solid"}], ["Organizational Compliance", "Tourism Industry", {"weight": 1.0, "confidence": 0.2, "type": "inter_cluster", "style": "solid"}], ["Public Engagement Process", "fisheries problems", {"weight": -1.0, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Public Engagement Process", "storm surges", {"weight": -1.0, "confidence": 0.1, "type": "inter_cluster", "style": "solid"}], ["Climate Science", "Distrust & Illegality", {"weight": -0.5, "confidence": 0.05, "type": "inter_cluster", "style": "solid"}], ["Port & Social Systems", "Tourism Industry", {"weight": 0.3333333333333333, "confidence": 0.09999999999999999, "type": "inter_cluster", "style": "solid"}], ["Distrust & Illegality", "recreational fishermen", {"weight": 1.0, "confidence": 0.43, "type": "inter_cluster", "style": "solid"}], ["Distrust & Illegality", "Climate Science", {"weight": -1.0, "confidence": 0.1, "type": "inter_cluster", "style": "solid"}], ["Organizational Structure", "fisheries problems", {"weight": 1.0, "confidence": 0.42499999999999993, "type": "inter_cluster", "style": "solid"}], ["Agency Disconnect", "Fishery Management", {"weight": -1.0, "confidence": 0.5, "type": "inter_cluster", "style": "solid"}], ["Agency Disconnect", "Illegal Fishing", {"weight": 1.0, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Agency Disconnect", "Tourism Industry", {"weight": 0.5, "confidence": 0.1, "type": "inter_cluster", "style": "solid"}], ["Government & Vision", "Fishery Management", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["Government & Vision", "Decision-Making", {"weight": 1.0, "confidence": 0.6999999999999998, "type": "inter_cluster", "style": "solid"}], ["Government & Vision", "Fishermen Perspectives", {"weight": 1.0, "confidence": 0.4, "type": "inter_cluster", "style": "solid"}], ["Illegal Fishing", "government distrust", {"weight": 1.0, "confidence": 0.45999999999999996, "type": "inter_cluster", "style": "solid"}], ["Illegal Fishing", "Distrust & Illegality", {"weight": 1.0, "confidence": 0.5, "type": "inter_cluster", "style": "solid"}], ["Illegal Fishing", "Fishery Management", {"weight": -1.0, "confidence": 0.5, "type": "inter_cluster", "style": "solid"}], ["Illegal Fishing", "Economic Growth", {"weight": -1.0, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Fishermen Distrust", "Drug User Reliability", {"weight": 1.0, "confidence": 0.2, "type": "inter_cluster", "style": "solid"}], ["Organizational Data Sharing", "recreational fishermen", {"weight": -0.5, "confidence": 0.05, "type": "inter_cluster", "style": "solid"}], ["Decentralized Market Activities", "government distrust", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["Decentralized Market Activities", "Climate Science", {"weight": -0.6666666666666666, "confidence": 0.10000000000000002, "type": "inter_cluster", "style": "solid"}]];
        const clusterConcepts = {};
        const clusterEdges = {"climate change concern (social)": [], "Fishery Management": [], "Fishermen Perspectives": [], "Environmental Threats": [], "Water Quality & Health": [], "Coral Reef Coasts": [], "DNER Enforcement": [], "Organizational Compliance": [], "Public Engagement Process": [], "Drug User Reliability": [], "Climate Science": [], "Port & Social Systems": [], "Distrust & Illegality": [], "Organizational Structure": [], "Agency Disconnect": [], "Tourism Industry": [], "Economic Growth": [], "Government & Vision": [], "Illegal Fishing": [], "Fishermen Distrust": [], "Organizational Data Sharing": [], "Decentralized Market Activities": [], "Decision-Making": [], "Conflict Resolution Approach": []};
        
        let network;
        let currentView = 'clusters';
        let currentCluster = null;
        let minConfidence = 0.3;
        
        // Network options
        const options = {
            nodes: {
                font: { color: 'white', size: 14 },
                borderWidth: 2,
                shadow: true
            },
            edges: {
                arrows: { to: { enabled: true, scaleFactor: 1.2 } },
                shadow: true,
                smooth: { type: 'continuous' }
            },
            physics: {
                stabilization: { iterations: 100 },
                barnesHut: {
                    gravitationalConstant: -8000,
                    springConstant: 0.001,
                    springLength: 200
                }
            },
            interaction: {
                hover: true,
                selectConnectedEdges: false
            }
        };
        
        function initNetwork() {
            const container = document.getElementById('network');
            const data = getClusterViewData();
            network = new vis.Network(container, data, options);
            
            // Handle cluster clicks for drill-down
            network.on("click", function(params) {
                if (params.nodes.length > 0 && currentView === 'clusters') {
                    const clickedNode = params.nodes[0];
                    if (clusterConcepts[clickedNode]) {
                        showClusterDetail(clickedNode);
                    }
                }
            });
        }
        
        function getClusterViewData() {
            const nodes = [];
            const edges = [];
            
            // Add cluster nodes
            Object.entries(clusterData).forEach(([clusterId, data]) => {
                const concepts = data.concepts || [];
                const conceptsStr = Array.isArray(concepts) ? concepts.join(', ') : concepts;
                
                nodes.push({
                    id: clusterId,
                    label: clusterId,
                    title: `Cluster: ${clusterId}\nConcepts: ${conceptsStr}\nClick to explore internal relationships`,
                    color: '#4A90E2',
                    size: 25 + (conceptsStr.split(',').length * 2),
                    font: { color: 'white' }
                });
            });
            
            // Add inter-cluster edges
            interClusterEdges.forEach(([source, target, edgeData]) => {
                const confidence = edgeData.confidence || 1.0;
                const weight = edgeData.weight || 0;
                
                if (confidence >= minConfidence) {
                    edges.push({
                        from: source,
                        to: target,
                        color: weight > 0 ? '#28A745' : '#DC3545',
                        width: Math.abs(weight) * 3 + 1,
                        title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                        dashes: false
                    });
                }
            });
            
            return { nodes: nodes, edges: edges };
        }
        
        function getClusterDetailData(clusterId) {
            const nodes = [];
            const edges = [];
            
            // Add concept nodes for this cluster
            if (clusterConcepts[clusterId]) {
                clusterConcepts[clusterId].forEach(([conceptId, data]) => {
                    nodes.push({
                        id: conceptId,
                        label: conceptId,
                        title: `Concept: ${conceptId}\nFrom cluster: ${clusterId}`,
                        color: '#FF9500',
                        size: 20,
                        font: { color: 'white' }
                    });
                });
            }
            
            // Add intra-cluster edges
            if (clusterEdges[clusterId]) {
                clusterEdges[clusterId].forEach(([source, target, edgeData]) => {
                    const confidence = edgeData.confidence || 1.0;
                    const weight = edgeData.weight || 0;
                    
                    if (confidence >= minConfidence) {
                        edges.push({
                            from: source,
                            to: target,
                            color: weight > 0 ? '#28A745' : '#DC3545',
                            width: Math.abs(weight) * 3 + 1,
                            title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                            dashes: true
                        });
                    }
                });
            }
            
            return { nodes: nodes, edges: edges };
        }
        
        function showClusterView() {
            currentView = 'clusters';
            currentCluster = null;
            const data = getClusterViewData();
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'none';
            document.getElementById('current-view').textContent = 'Cluster Overview';
        }
        
        function showClusterDetail(clusterId) {
            currentView = 'concepts';
            currentCluster = clusterId;
            const data = getClusterDetailData(clusterId);
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'inline-block';
            document.getElementById('current-view').textContent = `Inside Cluster: ${clusterId}`;
        }
        
        function updateConfidenceFilter(value) {
            minConfidence = parseFloat(value);
            document.getElementById('confidence-value').textContent = value;
            
            // Refresh current view
            if (currentView === 'clusters') {
                showClusterView();
            } else {
                showClusterDetail(currentCluster);
            }
        }
        
        // Initialize the network when page loads
        window.onload = function() {
            initNetwork();
        };
    </script>
</body>
</html>
