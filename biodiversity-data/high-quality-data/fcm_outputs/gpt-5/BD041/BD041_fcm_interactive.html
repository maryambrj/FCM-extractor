
<!DOCTYPE html>
<html>
<head>
    <title>Hierarchical FCM Visualization</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 0; 
            padding: 20px;
            background: #f5f5f5;
        }
        
        #network { 
            width: 100%; 
            height: 600px; 
            border: 2px solid #ccc; 
            background: white;
            border-radius: 8px;
        }
        
        #controls {
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn {
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        
        .btn-primary { background: #4A90E2; color: white; }
        .btn-primary:hover { background: #357ABD; }
        
        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #545b62; }
        
        #current-view {
            font-weight: bold;
            color: #333;
            margin-left: 10px;
        }
        
        #legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-size: 12px;
            max-width: 200px;
        }
        
        .legend-item {
            margin: 5px 0;
            display: flex;
            align-items: center;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .legend-line {
            width: 20px;
            height: 2px;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <h1>Fuzzy Cognitive Map - Hierarchical View</h1>
    
    <div id="controls">
        <button class="btn btn-secondary" id="back-btn" onclick="showClusterView()" style="display: none;">
            ‚Üê Back to Clusters
        </button>
        <span id="current-view">Cluster Overview</span>
        <div style="float: right;">
            <label>Min Confidence: </label>
            <input type="range" id="confidence-slider" min="0" max="1" step="0.1" value="0.3" 
                   onchange="updateConfidenceFilter(this.value)">
            <span id="confidence-value">0.3</span>
        </div>
    </div>
    
    <div id="network"></div>
    
    <div id="legend">
        <h4>Legend</h4>
        <div class="legend-item">
            <div class="legend-color" style="background: #4A90E2;"></div>
            <span>Clusters</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #FF9500;"></div>
            <span>Concepts</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #28A745;"></div>
            <span>Positive relationship</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #DC3545;"></div>
            <span>Negative relationship</span>
        </div>
        <div style="margin-top: 10px; font-style: italic; color: #666;">
            Click clusters to explore internal concepts
        </div>
    </div>

    <script>
        // Embedded data
        const clusterData = {"Marine & Coastal Management": {"concepts": "species removal, invertebrates, biodiversity conservation, restoration approaches, biodiversity, species of conservation concern, food chain, invasive species, native species, ecosystem restoration, native organism abundance, species richness, biodiversity data, microbial communities, mangrove forests, invasive species removal, broad ecosystem protection, conservation policies, species diversity, baseline biodiversity, species abundance, habitat restoration, habitat forming species, baseline biodiversity data, key food web supporting species, non-native species, food web supporting species, ecosystem protection, ecosystem protections, food web, species distribution", "concept_list": ["species removal", "invertebrates", "biodiversity conservation", "restoration approaches", "biodiversity", "species of conservation concern", "food chain", "invasive species", "native species", "ecosystem restoration", "native organism abundance", "species richness", "biodiversity data", "microbial communities", "mangrove forests", "invasive species removal", "broad ecosystem protection", "conservation policies", "species diversity", "baseline biodiversity", "species abundance", "habitat restoration", "habitat forming species", "baseline biodiversity data", "key food web supporting species", "non-native species", "food web supporting species", "ecosystem protection", "ecosystem protections", "food web", "species distribution"], "type": "cluster", "node_size": 108, "label": "Marine & Coastal Management"}, "Conservation Planning & Policy": {"concepts": "shoreline development, marine assessment, fish species, fisheries policy, cichlids, marine, wetland loss, sea level rise, aquatic biology, coastal resilience, anadromous fish, marine ecosystems, marine mammals, marine resource management, oil spill damage assessment, coastal ecosystem, contaminant spills, marine policy, estuary, marine biology, wetland filling, lionfish, estuaries, sea turtles, pollutant spills, marine ecology, estuarine systems, marine conservation, shellfish predation, coastal ecosystems, marine ecosystem, estuarine projects", "concept_list": ["shoreline development", "marine assessment", "fish species", "fisheries policy", "cichlids", "marine", "wetland loss", "sea level rise", "aquatic biology", "coastal resilience", "anadromous fish", "marine ecosystems", "marine mammals", "marine resource management", "oil spill damage assessment", "coastal ecosystem", "contaminant spills", "marine policy", "estuary", "marine biology", "wetland filling", "lionfish", "estuaries", "sea turtles", "pollutant spills", "marine ecology", "estuarine systems", "marine conservation", "shellfish predation", "coastal ecosystems", "marine ecosystem", "estuarine projects"], "type": "cluster", "node_size": 111, "label": "Conservation Planning & Policy"}, "Ecosystem Health & Balance": {"concepts": "travel office, area of expertise, management approaches, everglades restoration, relationships, importation bans, approach, contaminants, army corps of engineers, no take areas, upstream management, bans on non-natives, resource management, conservation, everglades, qualitative, stressors, gulf of mexico, nature conservancy, mapping, travel arrangements, interviews, experts, quantitative, comprehensive model, consulting firms, stakeholders, environmental consulting, aggregation, population quantification, geospatial analysis, arrangements, workshop, concepts, effectiveness, watershed, no-take areas, sedimentation, meeting", "concept_list": ["travel office", "area of expertise", "management approaches", "everglades restoration", "relationships", "importation bans", "approach", "contaminants", "army corps of engineers", "no take areas", "upstream management", "bans on non-natives", "resource management", "conservation", "everglades", "qualitative", "stressors", "gulf of mexico", "nature conservancy", "mapping", "travel arrangements", "interviews", "experts", "quantitative", "comprehensive model", "consulting firms", "stakeholders", "environmental consulting", "aggregation", "population quantification", "geospatial analysis", "arrangements", "workshop", "concepts", "effectiveness", "watershed", "no-take areas", "sedimentation", "meeting"], "type": "cluster", "node_size": 132, "label": "Ecosystem Health & Balance"}, "Reef & Coastal Protection": {"concepts": "healthy ecosystems, ecosystems, excess nutrients, ecosystem health, nutrient flux, healthy ecosystem, native organisms, blue carbon, ecosystem balance, natural inventory, top predators, nutrient influx, harmful organisms, ecological balance", "concept_list": ["healthy ecosystems", "ecosystems", "excess nutrients", "ecosystem health", "nutrient flux", "healthy ecosystem", "native organisms", "blue carbon", "ecosystem balance", "natural inventory", "top predators", "nutrient influx", "harmful organisms", "ecological balance"], "type": "cluster", "node_size": 57, "label": "Reef & Coastal Protection"}, "Biodiversity & Restoration": {"concepts": "storm surge, tropical storms, oyster reefs, reefs, coral reefs, oyster reef restoration", "concept_list": ["storm surge", "tropical storms", "oyster reefs", "reefs", "coral reefs", "oyster reef restoration"], "type": "cluster", "node_size": 33, "label": "Biodiversity & Restoration"}};
        const conceptData = {"species removal": {"concepts": "species removal", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "species removal"}, "invertebrates": {"concepts": "invertebrates", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "invertebrates"}, "biodiversity conservation": {"concepts": "biodiversity conservation", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "biodiversity conservation"}, "restoration approaches": {"concepts": "restoration approaches", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "restoration approaches"}, "biodiversity": {"concepts": "biodiversity", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "biodiversity"}, "species of conservation concern": {"concepts": "species of conservation concern", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "species of conservation concern"}, "food chain": {"concepts": "food chain", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "food chain"}, "invasive species": {"concepts": "invasive species", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "invasive species"}, "native species": {"concepts": "native species", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "native species"}, "ecosystem restoration": {"concepts": "ecosystem restoration", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "ecosystem restoration"}, "native organism abundance": {"concepts": "native organism abundance", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "native organism abundance"}, "species richness": {"concepts": "species richness", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "species richness"}, "biodiversity data": {"concepts": "biodiversity data", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "biodiversity data"}, "microbial communities": {"concepts": "microbial communities", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "microbial communities"}, "mangrove forests": {"concepts": "mangrove forests", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "mangrove forests"}, "invasive species removal": {"concepts": "invasive species removal", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "invasive species removal"}, "broad ecosystem protection": {"concepts": "broad ecosystem protection", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "broad ecosystem protection"}, "conservation policies": {"concepts": "conservation policies", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "conservation policies"}, "species diversity": {"concepts": "species diversity", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "species diversity"}, "baseline biodiversity": {"concepts": "baseline biodiversity", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "baseline biodiversity"}, "species abundance": {"concepts": "species abundance", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "species abundance"}, "habitat restoration": {"concepts": "habitat restoration", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "habitat restoration"}, "habitat forming species": {"concepts": "habitat forming species", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "habitat forming species"}, "baseline biodiversity data": {"concepts": "baseline biodiversity data", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "baseline biodiversity data"}, "key food web supporting species": {"concepts": "key food web supporting species", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "key food web supporting species"}, "non-native species": {"concepts": "non-native species", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "non-native species"}, "food web supporting species": {"concepts": "food web supporting species", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "food web supporting species"}, "ecosystem protection": {"concepts": "ecosystem protection", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "ecosystem protection"}, "ecosystem protections": {"concepts": "ecosystem protections", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "ecosystem protections"}, "food web": {"concepts": "food web", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "food web"}, "species distribution": {"concepts": "species distribution", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "species distribution"}, "shoreline development": {"concepts": "shoreline development", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "shoreline development"}, "marine assessment": {"concepts": "marine assessment", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "marine assessment"}, "fish species": {"concepts": "fish species", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "fish species"}, "fisheries policy": {"concepts": "fisheries policy", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "fisheries policy"}, "cichlids": {"concepts": "cichlids", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "cichlids"}, "marine": {"concepts": "marine", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "marine"}, "wetland loss": {"concepts": "wetland loss", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "wetland loss"}, "sea level rise": {"concepts": "sea level rise", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "sea level rise"}, "aquatic biology": {"concepts": "aquatic biology", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "aquatic biology"}, "coastal resilience": {"concepts": "coastal resilience", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "coastal resilience"}, "anadromous fish": {"concepts": "anadromous fish", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "anadromous fish"}, "marine ecosystems": {"concepts": "marine ecosystems", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "marine ecosystems"}, "marine mammals": {"concepts": "marine mammals", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "marine mammals"}, "marine resource management": {"concepts": "marine resource management", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "marine resource management"}, "oil spill damage assessment": {"concepts": "oil spill damage assessment", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "oil spill damage assessment"}, "coastal ecosystem": {"concepts": "coastal ecosystem", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "coastal ecosystem"}, "contaminant spills": {"concepts": "contaminant spills", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "contaminant spills"}, "marine policy": {"concepts": "marine policy", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "marine policy"}, "estuary": {"concepts": "estuary", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "estuary"}, "marine biology": {"concepts": "marine biology", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "marine biology"}, "wetland filling": {"concepts": "wetland filling", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "wetland filling"}, "lionfish": {"concepts": "lionfish", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "lionfish"}, "estuaries": {"concepts": "estuaries", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "estuaries"}, "sea turtles": {"concepts": "sea turtles", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "sea turtles"}, "pollutant spills": {"concepts": "pollutant spills", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "pollutant spills"}, "marine ecology": {"concepts": "marine ecology", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "marine ecology"}, "estuarine systems": {"concepts": "estuarine systems", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "estuarine systems"}, "marine conservation": {"concepts": "marine conservation", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "marine conservation"}, "shellfish predation": {"concepts": "shellfish predation", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "shellfish predation"}, "coastal ecosystems": {"concepts": "coastal ecosystems", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "coastal ecosystems"}, "marine ecosystem": {"concepts": "marine ecosystem", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "marine ecosystem"}, "estuarine projects": {"concepts": "estuarine projects", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "estuarine projects"}, "travel office": {"concepts": "travel office", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "travel office"}, "area of expertise": {"concepts": "area of expertise", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "area of expertise"}, "management approaches": {"concepts": "management approaches", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "management approaches"}, "everglades restoration": {"concepts": "everglades restoration", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "everglades restoration"}, "relationships": {"concepts": "relationships", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "relationships"}, "importation bans": {"concepts": "importation bans", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "importation bans"}, "approach": {"concepts": "approach", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "approach"}, "contaminants": {"concepts": "contaminants", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "contaminants"}, "army corps of engineers": {"concepts": "army corps of engineers", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "army corps of engineers"}, "no take areas": {"concepts": "no take areas", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "no take areas"}, "upstream management": {"concepts": "upstream management", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "upstream management"}, "bans on non-natives": {"concepts": "bans on non-natives", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "bans on non-natives"}, "resource management": {"concepts": "resource management", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "resource management"}, "conservation": {"concepts": "conservation", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "conservation"}, "everglades": {"concepts": "everglades", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "everglades"}, "qualitative": {"concepts": "qualitative", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "qualitative"}, "stressors": {"concepts": "stressors", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "stressors"}, "gulf of mexico": {"concepts": "gulf of mexico", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "gulf of mexico"}, "nature conservancy": {"concepts": "nature conservancy", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "nature conservancy"}, "mapping": {"concepts": "mapping", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "mapping"}, "travel arrangements": {"concepts": "travel arrangements", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "travel arrangements"}, "interviews": {"concepts": "interviews", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "interviews"}, "experts": {"concepts": "experts", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "experts"}, "quantitative": {"concepts": "quantitative", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "quantitative"}, "comprehensive model": {"concepts": "comprehensive model", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "comprehensive model"}, "consulting firms": {"concepts": "consulting firms", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "consulting firms"}, "stakeholders": {"concepts": "stakeholders", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "stakeholders"}, "environmental consulting": {"concepts": "environmental consulting", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "environmental consulting"}, "aggregation": {"concepts": "aggregation", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "aggregation"}, "population quantification": {"concepts": "population quantification", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "population quantification"}, "geospatial analysis": {"concepts": "geospatial analysis", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "geospatial analysis"}, "arrangements": {"concepts": "arrangements", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "arrangements"}, "workshop": {"concepts": "workshop", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "workshop"}, "concepts": {"concepts": "concepts", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "concepts"}, "effectiveness": {"concepts": "effectiveness", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "effectiveness"}, "watershed": {"concepts": "watershed", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "watershed"}, "no-take areas": {"concepts": "no-take areas", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "no-take areas"}, "sedimentation": {"concepts": "sedimentation", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "sedimentation"}, "meeting": {"concepts": "meeting", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "meeting"}, "healthy ecosystems": {"concepts": "healthy ecosystems", "type": "concept", "cluster": "Reef & Coastal Protection", "node_size": 10, "label": "healthy ecosystems"}, "ecosystems": {"concepts": "ecosystems", "type": "concept", "cluster": "Reef & Coastal Protection", "node_size": 10, "label": "ecosystems"}, "excess nutrients": {"concepts": "excess nutrients", "type": "concept", "cluster": "Reef & Coastal Protection", "node_size": 10, "label": "excess nutrients"}, "ecosystem health": {"concepts": "ecosystem health", "type": "concept", "cluster": "Reef & Coastal Protection", "node_size": 10, "label": "ecosystem health"}, "nutrient flux": {"concepts": "nutrient flux", "type": "concept", "cluster": "Reef & Coastal Protection", "node_size": 10, "label": "nutrient flux"}, "healthy ecosystem": {"concepts": "healthy ecosystem", "type": "concept", "cluster": "Reef & Coastal Protection", "node_size": 10, "label": "healthy ecosystem"}, "native organisms": {"concepts": "native organisms", "type": "concept", "cluster": "Reef & Coastal Protection", "node_size": 10, "label": "native organisms"}, "blue carbon": {"concepts": "blue carbon", "type": "concept", "cluster": "Reef & Coastal Protection", "node_size": 10, "label": "blue carbon"}, "ecosystem balance": {"concepts": "ecosystem balance", "type": "concept", "cluster": "Reef & Coastal Protection", "node_size": 10, "label": "ecosystem balance"}, "natural inventory": {"concepts": "natural inventory", "type": "concept", "cluster": "Reef & Coastal Protection", "node_size": 10, "label": "natural inventory"}, "top predators": {"concepts": "top predators", "type": "concept", "cluster": "Reef & Coastal Protection", "node_size": 10, "label": "top predators"}, "nutrient influx": {"concepts": "nutrient influx", "type": "concept", "cluster": "Reef & Coastal Protection", "node_size": 10, "label": "nutrient influx"}, "harmful organisms": {"concepts": "harmful organisms", "type": "concept", "cluster": "Reef & Coastal Protection", "node_size": 10, "label": "harmful organisms"}, "ecological balance": {"concepts": "ecological balance", "type": "concept", "cluster": "Reef & Coastal Protection", "node_size": 10, "label": "ecological balance"}, "storm surge": {"concepts": "storm surge", "type": "concept", "cluster": "Biodiversity & Restoration", "node_size": 10, "label": "storm surge"}, "tropical storms": {"concepts": "tropical storms", "type": "concept", "cluster": "Biodiversity & Restoration", "node_size": 10, "label": "tropical storms"}, "oyster reefs": {"concepts": "oyster reefs", "type": "concept", "cluster": "Biodiversity & Restoration", "node_size": 10, "label": "oyster reefs"}, "reefs": {"concepts": "reefs", "type": "concept", "cluster": "Biodiversity & Restoration", "node_size": 10, "label": "reefs"}, "coral reefs": {"concepts": "coral reefs", "type": "concept", "cluster": "Biodiversity & Restoration", "node_size": 10, "label": "coral reefs"}, "oyster reef restoration": {"concepts": "oyster reef restoration", "type": "concept", "cluster": "Biodiversity & Restoration", "node_size": 10, "label": "oyster reef restoration"}};
        const interClusterEdges = [["Marine & Coastal Management", "Reef & Coastal Protection", {"weight": 1.0, "confidence": 0.9399999999999998, "type": "inter_cluster", "style": "solid"}], ["Marine & Coastal Management", "Biodiversity & Restoration", {"weight": 0.8, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["Marine & Coastal Management", "Ecosystem Health & Balance", {"weight": 0.75, "confidence": 0.6125, "type": "inter_cluster", "style": "solid"}], ["Marine & Coastal Management", "Conservation Planning & Policy", {"weight": 1.0, "confidence": 0.875, "type": "inter_cluster", "style": "solid"}], ["Conservation Planning & Policy", "Reef & Coastal Protection", {"weight": -0.2, "confidence": 0.82, "type": "inter_cluster", "style": "solid"}], ["Conservation Planning & Policy", "Biodiversity & Restoration", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["Conservation Planning & Policy", "Marine & Coastal Management", {"weight": 1.0, "confidence": 0.8166666666666668, "type": "inter_cluster", "style": "solid"}], ["Conservation Planning & Policy", "Ecosystem Health & Balance", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Health & Balance", "Biodiversity & Restoration", {"weight": 1.0, "confidence": 0.8125, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Health & Balance", "Marine & Coastal Management", {"weight": 1.0, "confidence": 0.9, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Health & Balance", "Reef & Coastal Protection", {"weight": 1.0, "confidence": 0.8833333333333333, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Health & Balance", "Conservation Planning & Policy", {"weight": 1.0, "confidence": 0.8000000000000002, "type": "inter_cluster", "style": "solid"}], ["Reef & Coastal Protection", "Marine & Coastal Management", {"weight": 0.6, "confidence": 0.9299999999999999, "type": "inter_cluster", "style": "solid"}], ["Reef & Coastal Protection", "Biodiversity & Restoration", {"weight": 0.6, "confidence": 0.8800000000000001, "type": "inter_cluster", "style": "solid"}], ["Reef & Coastal Protection", "Ecosystem Health & Balance", {"weight": 0.6, "confidence": 0.8400000000000001, "type": "inter_cluster", "style": "solid"}], ["Reef & Coastal Protection", "Conservation Planning & Policy", {"weight": 0.3333333333333333, "confidence": 0.8333333333333334, "type": "inter_cluster", "style": "solid"}], ["Biodiversity & Restoration", "Conservation Planning & Policy", {"weight": 0.6, "confidence": 0.78, "type": "inter_cluster", "style": "solid"}], ["Biodiversity & Restoration", "Ecosystem Health & Balance", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["Biodiversity & Restoration", "Reef & Coastal Protection", {"weight": 0.8, "confidence": 0.73, "type": "inter_cluster", "style": "solid"}], ["Biodiversity & Restoration", "Marine & Coastal Management", {"weight": 1.0, "confidence": 0.8666666666666667, "type": "inter_cluster", "style": "solid"}]];
        const clusterConcepts = {"Marine & Coastal Management": [["species removal", {"concepts": "species removal", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "species removal"}], ["invertebrates", {"concepts": "invertebrates", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "invertebrates"}], ["biodiversity conservation", {"concepts": "biodiversity conservation", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "biodiversity conservation"}], ["restoration approaches", {"concepts": "restoration approaches", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "restoration approaches"}], ["biodiversity", {"concepts": "biodiversity", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "biodiversity"}], ["species of conservation concern", {"concepts": "species of conservation concern", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "species of conservation concern"}], ["food chain", {"concepts": "food chain", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "food chain"}], ["invasive species", {"concepts": "invasive species", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "invasive species"}], ["native species", {"concepts": "native species", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "native species"}], ["ecosystem restoration", {"concepts": "ecosystem restoration", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "ecosystem restoration"}], ["native organism abundance", {"concepts": "native organism abundance", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "native organism abundance"}], ["species richness", {"concepts": "species richness", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "species richness"}], ["biodiversity data", {"concepts": "biodiversity data", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "biodiversity data"}], ["microbial communities", {"concepts": "microbial communities", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "microbial communities"}], ["mangrove forests", {"concepts": "mangrove forests", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "mangrove forests"}], ["invasive species removal", {"concepts": "invasive species removal", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "invasive species removal"}], ["broad ecosystem protection", {"concepts": "broad ecosystem protection", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "broad ecosystem protection"}], ["conservation policies", {"concepts": "conservation policies", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "conservation policies"}], ["species diversity", {"concepts": "species diversity", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "species diversity"}], ["baseline biodiversity", {"concepts": "baseline biodiversity", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "baseline biodiversity"}], ["species abundance", {"concepts": "species abundance", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "species abundance"}], ["habitat restoration", {"concepts": "habitat restoration", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "habitat restoration"}], ["habitat forming species", {"concepts": "habitat forming species", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "habitat forming species"}], ["baseline biodiversity data", {"concepts": "baseline biodiversity data", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "baseline biodiversity data"}], ["key food web supporting species", {"concepts": "key food web supporting species", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "key food web supporting species"}], ["non-native species", {"concepts": "non-native species", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "non-native species"}], ["food web supporting species", {"concepts": "food web supporting species", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "food web supporting species"}], ["ecosystem protection", {"concepts": "ecosystem protection", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "ecosystem protection"}], ["ecosystem protections", {"concepts": "ecosystem protections", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "ecosystem protections"}], ["food web", {"concepts": "food web", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "food web"}], ["species distribution", {"concepts": "species distribution", "type": "concept", "cluster": "Marine & Coastal Management", "node_size": 10, "label": "species distribution"}]], "Conservation Planning & Policy": [["shoreline development", {"concepts": "shoreline development", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "shoreline development"}], ["marine assessment", {"concepts": "marine assessment", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "marine assessment"}], ["fish species", {"concepts": "fish species", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "fish species"}], ["fisheries policy", {"concepts": "fisheries policy", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "fisheries policy"}], ["cichlids", {"concepts": "cichlids", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "cichlids"}], ["marine", {"concepts": "marine", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "marine"}], ["wetland loss", {"concepts": "wetland loss", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "wetland loss"}], ["sea level rise", {"concepts": "sea level rise", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "sea level rise"}], ["aquatic biology", {"concepts": "aquatic biology", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "aquatic biology"}], ["coastal resilience", {"concepts": "coastal resilience", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "coastal resilience"}], ["anadromous fish", {"concepts": "anadromous fish", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "anadromous fish"}], ["marine ecosystems", {"concepts": "marine ecosystems", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "marine ecosystems"}], ["marine mammals", {"concepts": "marine mammals", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "marine mammals"}], ["marine resource management", {"concepts": "marine resource management", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "marine resource management"}], ["oil spill damage assessment", {"concepts": "oil spill damage assessment", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "oil spill damage assessment"}], ["coastal ecosystem", {"concepts": "coastal ecosystem", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "coastal ecosystem"}], ["contaminant spills", {"concepts": "contaminant spills", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "contaminant spills"}], ["marine policy", {"concepts": "marine policy", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "marine policy"}], ["estuary", {"concepts": "estuary", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "estuary"}], ["marine biology", {"concepts": "marine biology", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "marine biology"}], ["wetland filling", {"concepts": "wetland filling", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "wetland filling"}], ["lionfish", {"concepts": "lionfish", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "lionfish"}], ["estuaries", {"concepts": "estuaries", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "estuaries"}], ["sea turtles", {"concepts": "sea turtles", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "sea turtles"}], ["pollutant spills", {"concepts": "pollutant spills", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "pollutant spills"}], ["marine ecology", {"concepts": "marine ecology", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "marine ecology"}], ["estuarine systems", {"concepts": "estuarine systems", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "estuarine systems"}], ["marine conservation", {"concepts": "marine conservation", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "marine conservation"}], ["shellfish predation", {"concepts": "shellfish predation", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "shellfish predation"}], ["coastal ecosystems", {"concepts": "coastal ecosystems", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "coastal ecosystems"}], ["marine ecosystem", {"concepts": "marine ecosystem", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "marine ecosystem"}], ["estuarine projects", {"concepts": "estuarine projects", "type": "concept", "cluster": "Conservation Planning & Policy", "node_size": 10, "label": "estuarine projects"}]], "Ecosystem Health & Balance": [["travel office", {"concepts": "travel office", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "travel office"}], ["area of expertise", {"concepts": "area of expertise", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "area of expertise"}], ["management approaches", {"concepts": "management approaches", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "management approaches"}], ["everglades restoration", {"concepts": "everglades restoration", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "everglades restoration"}], ["relationships", {"concepts": "relationships", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "relationships"}], ["importation bans", {"concepts": "importation bans", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "importation bans"}], ["approach", {"concepts": "approach", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "approach"}], ["contaminants", {"concepts": "contaminants", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "contaminants"}], ["army corps of engineers", {"concepts": "army corps of engineers", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "army corps of engineers"}], ["no take areas", {"concepts": "no take areas", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "no take areas"}], ["upstream management", {"concepts": "upstream management", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "upstream management"}], ["bans on non-natives", {"concepts": "bans on non-natives", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "bans on non-natives"}], ["resource management", {"concepts": "resource management", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "resource management"}], ["conservation", {"concepts": "conservation", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "conservation"}], ["everglades", {"concepts": "everglades", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "everglades"}], ["qualitative", {"concepts": "qualitative", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "qualitative"}], ["stressors", {"concepts": "stressors", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "stressors"}], ["gulf of mexico", {"concepts": "gulf of mexico", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "gulf of mexico"}], ["nature conservancy", {"concepts": "nature conservancy", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "nature conservancy"}], ["mapping", {"concepts": "mapping", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "mapping"}], ["travel arrangements", {"concepts": "travel arrangements", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "travel arrangements"}], ["interviews", {"concepts": "interviews", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "interviews"}], ["experts", {"concepts": "experts", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "experts"}], ["quantitative", {"concepts": "quantitative", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "quantitative"}], ["comprehensive model", {"concepts": "comprehensive model", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "comprehensive model"}], ["consulting firms", {"concepts": "consulting firms", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "consulting firms"}], ["stakeholders", {"concepts": "stakeholders", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "stakeholders"}], ["environmental consulting", {"concepts": "environmental consulting", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "environmental consulting"}], ["aggregation", {"concepts": "aggregation", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "aggregation"}], ["population quantification", {"concepts": "population quantification", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "population quantification"}], ["geospatial analysis", {"concepts": "geospatial analysis", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "geospatial analysis"}], ["arrangements", {"concepts": "arrangements", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "arrangements"}], ["workshop", {"concepts": "workshop", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "workshop"}], ["concepts", {"concepts": "concepts", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "concepts"}], ["effectiveness", {"concepts": "effectiveness", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "effectiveness"}], ["watershed", {"concepts": "watershed", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "watershed"}], ["no-take areas", {"concepts": "no-take areas", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "no-take areas"}], ["sedimentation", {"concepts": "sedimentation", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "sedimentation"}], ["meeting", {"concepts": "meeting", "type": "concept", "cluster": "Ecosystem Health & Balance", "node_size": 10, "label": "meeting"}]], "Reef & Coastal Protection": [["healthy ecosystems", {"concepts": "healthy ecosystems", "type": "concept", "cluster": "Reef & Coastal Protection", "node_size": 10, "label": "healthy ecosystems"}], ["ecosystems", {"concepts": "ecosystems", "type": "concept", "cluster": "Reef & Coastal Protection", "node_size": 10, "label": "ecosystems"}], ["excess nutrients", {"concepts": "excess nutrients", "type": "concept", "cluster": "Reef & Coastal Protection", "node_size": 10, "label": "excess nutrients"}], ["ecosystem health", {"concepts": "ecosystem health", "type": "concept", "cluster": "Reef & Coastal Protection", "node_size": 10, "label": "ecosystem health"}], ["nutrient flux", {"concepts": "nutrient flux", "type": "concept", "cluster": "Reef & Coastal Protection", "node_size": 10, "label": "nutrient flux"}], ["healthy ecosystem", {"concepts": "healthy ecosystem", "type": "concept", "cluster": "Reef & Coastal Protection", "node_size": 10, "label": "healthy ecosystem"}], ["native organisms", {"concepts": "native organisms", "type": "concept", "cluster": "Reef & Coastal Protection", "node_size": 10, "label": "native organisms"}], ["blue carbon", {"concepts": "blue carbon", "type": "concept", "cluster": "Reef & Coastal Protection", "node_size": 10, "label": "blue carbon"}], ["ecosystem balance", {"concepts": "ecosystem balance", "type": "concept", "cluster": "Reef & Coastal Protection", "node_size": 10, "label": "ecosystem balance"}], ["natural inventory", {"concepts": "natural inventory", "type": "concept", "cluster": "Reef & Coastal Protection", "node_size": 10, "label": "natural inventory"}], ["top predators", {"concepts": "top predators", "type": "concept", "cluster": "Reef & Coastal Protection", "node_size": 10, "label": "top predators"}], ["nutrient influx", {"concepts": "nutrient influx", "type": "concept", "cluster": "Reef & Coastal Protection", "node_size": 10, "label": "nutrient influx"}], ["harmful organisms", {"concepts": "harmful organisms", "type": "concept", "cluster": "Reef & Coastal Protection", "node_size": 10, "label": "harmful organisms"}], ["ecological balance", {"concepts": "ecological balance", "type": "concept", "cluster": "Reef & Coastal Protection", "node_size": 10, "label": "ecological balance"}]], "Biodiversity & Restoration": [["storm surge", {"concepts": "storm surge", "type": "concept", "cluster": "Biodiversity & Restoration", "node_size": 10, "label": "storm surge"}], ["tropical storms", {"concepts": "tropical storms", "type": "concept", "cluster": "Biodiversity & Restoration", "node_size": 10, "label": "tropical storms"}], ["oyster reefs", {"concepts": "oyster reefs", "type": "concept", "cluster": "Biodiversity & Restoration", "node_size": 10, "label": "oyster reefs"}], ["reefs", {"concepts": "reefs", "type": "concept", "cluster": "Biodiversity & Restoration", "node_size": 10, "label": "reefs"}], ["coral reefs", {"concepts": "coral reefs", "type": "concept", "cluster": "Biodiversity & Restoration", "node_size": 10, "label": "coral reefs"}], ["oyster reef restoration", {"concepts": "oyster reef restoration", "type": "concept", "cluster": "Biodiversity & Restoration", "node_size": 10, "label": "oyster reef restoration"}]]};
        const clusterEdges = {"Marine & Coastal Management": [], "Conservation Planning & Policy": [], "Ecosystem Health & Balance": [], "Reef & Coastal Protection": [], "Biodiversity & Restoration": []};
        
        let network;
        let currentView = 'clusters';
        let currentCluster = null;
        let minConfidence = 0.3;
        
        // Network options
        const options = {
            nodes: {
                font: { color: 'white', size: 14 },
                borderWidth: 2,
                shadow: true
            },
            edges: {
                arrows: { to: { enabled: true, scaleFactor: 1.2 } },
                shadow: true,
                smooth: { type: 'continuous' }
            },
            physics: {
                stabilization: { iterations: 100 },
                barnesHut: {
                    gravitationalConstant: -8000,
                    springConstant: 0.001,
                    springLength: 200
                }
            },
            interaction: {
                hover: true,
                selectConnectedEdges: false
            }
        };
        
        function initNetwork() {
            const container = document.getElementById('network');
            const data = getClusterViewData();
            network = new vis.Network(container, data, options);
            
            // Handle cluster clicks for drill-down
            network.on("click", function(params) {
                if (params.nodes.length > 0 && currentView === 'clusters') {
                    const clickedNode = params.nodes[0];
                    if (clusterConcepts[clickedNode]) {
                        showClusterDetail(clickedNode);
                    }
                }
            });
        }
        
        function getClusterViewData() {
            const nodes = [];
            const edges = [];
            
            // Add cluster nodes
            Object.entries(clusterData).forEach(([clusterId, data]) => {
                const concepts = data.concepts || [];
                const conceptsStr = Array.isArray(concepts) ? concepts.join(', ') : concepts;
                
                nodes.push({
                    id: clusterId,
                    label: clusterId,
                    title: `Cluster: ${clusterId}\nConcepts: ${conceptsStr}\nClick to explore internal relationships`,
                    color: '#4A90E2',
                    size: 25 + (conceptsStr.split(',').length * 2),
                    font: { color: 'white' }
                });
            });
            
            // Add inter-cluster edges
            interClusterEdges.forEach(([source, target, edgeData]) => {
                const confidence = edgeData.confidence || 1.0;
                const weight = edgeData.weight || 0;
                
                if (confidence >= minConfidence) {
                    edges.push({
                        from: source,
                        to: target,
                        color: weight > 0 ? '#28A745' : '#DC3545',
                        width: Math.abs(weight) * 3 + 1,
                        title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                        dashes: false
                    });
                }
            });
            
            return { nodes: nodes, edges: edges };
        }
        
        function getClusterDetailData(clusterId) {
            const nodes = [];
            const edges = [];
            
            // Add concept nodes for this cluster
            if (clusterConcepts[clusterId]) {
                clusterConcepts[clusterId].forEach(([conceptId, data]) => {
                    nodes.push({
                        id: conceptId,
                        label: conceptId,
                        title: `Concept: ${conceptId}\nFrom cluster: ${clusterId}`,
                        color: '#FF9500',
                        size: 20,
                        font: { color: 'white' }
                    });
                });
            }
            
            // Add intra-cluster edges
            if (clusterEdges[clusterId]) {
                clusterEdges[clusterId].forEach(([source, target, edgeData]) => {
                    const confidence = edgeData.confidence || 1.0;
                    const weight = edgeData.weight || 0;
                    
                    if (confidence >= minConfidence) {
                        edges.push({
                            from: source,
                            to: target,
                            color: weight > 0 ? '#28A745' : '#DC3545',
                            width: Math.abs(weight) * 3 + 1,
                            title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                            dashes: true
                        });
                    }
                });
            }
            
            return { nodes: nodes, edges: edges };
        }
        
        function showClusterView() {
            currentView = 'clusters';
            currentCluster = null;
            const data = getClusterViewData();
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'none';
            document.getElementById('current-view').textContent = 'Cluster Overview';
        }
        
        function showClusterDetail(clusterId) {
            currentView = 'concepts';
            currentCluster = clusterId;
            const data = getClusterDetailData(clusterId);
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'inline-block';
            document.getElementById('current-view').textContent = `Inside Cluster: ${clusterId}`;
        }
        
        function updateConfidenceFilter(value) {
            minConfidence = parseFloat(value);
            document.getElementById('confidence-value').textContent = value;
            
            // Refresh current view
            if (currentView === 'clusters') {
                showClusterView();
            } else {
                showClusterDetail(currentCluster);
            }
        }
        
        // Initialize the network when page loads
        window.onload = function() {
            initNetwork();
        };
    </script>
</body>
</html>
