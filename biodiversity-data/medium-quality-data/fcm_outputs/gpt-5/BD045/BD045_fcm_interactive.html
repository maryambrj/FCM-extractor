
<!DOCTYPE html>
<html>
<head>
    <title>Hierarchical FCM Visualization</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 0; 
            padding: 20px;
            background: #f5f5f5;
        }
        
        #network { 
            width: 100%; 
            height: 600px; 
            border: 2px solid #ccc; 
            background: white;
            border-radius: 8px;
        }
        
        #controls {
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn {
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        
        .btn-primary { background: #4A90E2; color: white; }
        .btn-primary:hover { background: #357ABD; }
        
        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #545b62; }
        
        #current-view {
            font-weight: bold;
            color: #333;
            margin-left: 10px;
        }
        
        #legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-size: 12px;
            max-width: 200px;
        }
        
        .legend-item {
            margin: 5px 0;
            display: flex;
            align-items: center;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .legend-line {
            width: 20px;
            height: 2px;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <h1>Fuzzy Cognitive Map - Hierarchical View</h1>
    
    <div id="controls">
        <button class="btn btn-secondary" id="back-btn" onclick="showClusterView()" style="display: none;">
            ‚Üê Back to Clusters
        </button>
        <span id="current-view">Cluster Overview</span>
        <div style="float: right;">
            <label>Min Confidence: </label>
            <input type="range" id="confidence-slider" min="0" max="1" step="0.1" value="0.3" 
                   onchange="updateConfidenceFilter(this.value)">
            <span id="confidence-value">0.3</span>
        </div>
    </div>
    
    <div id="network"></div>
    
    <div id="legend">
        <h4>Legend</h4>
        <div class="legend-item">
            <div class="legend-color" style="background: #4A90E2;"></div>
            <span>Clusters</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #FF9500;"></div>
            <span>Concepts</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #28A745;"></div>
            <span>Positive relationship</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #DC3545;"></div>
            <span>Negative relationship</span>
        </div>
        <div style="margin-top: 10px; font-style: italic; color: #666;">
            Click clusters to explore internal concepts
        </div>
    </div>

    <script>
        // Embedded data
        const clusterData = {"Stakeholder Engagement": {"concepts": "fisher folks, human recreation, recreational sector, marine recreation", "concept_list": ["fisher folks", "human recreation", "recreational sector", "marine recreation"], "type": "cluster", "node_size": 27, "label": "Stakeholder Engagement"}, "Fisheries Management": {"concepts": "case studies, stakeholder perspectives, policy management, smithsonian, national systematics lab, councils, management agencies, system components, workshop recruitment, human consumption, research collaboration, negative effect, noaa chesapeake office, stakeholders, protected resources, executive director, interviews, economic value, administration, national scale, case study, positive effect, regional focus, chesapeake bay, management concept, science and technology, chesapeake bay foundation, amy freitag, workshop summaries, modeling workshops, expert perspectives, maryland dnr, relationship weight, resource users, mental model, commercial sector, gulf rehabilitation, overharvesting, mental modeling, data analysis, maryland watermen association, problem solving, stakeholder groups, manuscript, funders, chesapeake funders network, big picture perspective, stressor, feedback loops, gulf of mexico, state agencies, stakeholder networks, research methods, advocacy, system dynamics, shared perspectives, society, virginia marine resource commission, stressors, microplastics, stakeholder, scenario analysis, baseline data, tradeoffs, conservation, chesapeake conservation association, project lead, preservation, salish sea", "concept_list": ["case studies", "stakeholder perspectives", "policy management", "smithsonian", "national systematics lab", "councils", "management agencies", "system components", "workshop recruitment", "human consumption", "research collaboration", "negative effect", "noaa chesapeake office", "stakeholders", "protected resources", "executive director", "interviews", "economic value", "administration", "national scale", "case study", "positive effect", "regional focus", "chesapeake bay", "management concept", "science and technology", "chesapeake bay foundation", "amy freitag", "workshop summaries", "modeling workshops", "expert perspectives", "maryland dnr", "relationship weight", "resource users", "mental model", "commercial sector", "gulf rehabilitation", "overharvesting", "mental modeling", "data analysis", "maryland watermen association", "problem solving", "stakeholder groups", "manuscript", "funders", "chesapeake funders network", "big picture perspective", "stressor", "feedback loops", "gulf of mexico", "state agencies", "stakeholder networks", "research methods", "advocacy", "system dynamics", "shared perspectives", "society", "virginia marine resource commission", "stressors", "microplastics", "stakeholder", "scenario analysis", "baseline data", "tradeoffs", "conservation", "chesapeake conservation association", "project lead", "preservation", "salish sea"], "type": "cluster", "node_size": 222, "label": "Fisheries Management"}, "Marine Resources": {"concepts": "atlantic marine fisheries commission, fisher people, fisheries councils, ecosystem based fisheries management, sustainable fisheries git, fisheries commissions, oyster harvests, fisheries management, chesapeake river fisheries commission, mid-atlantic fisheries council, fishing groups, south atlantic fisheries council, noaa fisheries, oyster stakeholders", "concept_list": ["atlantic marine fisheries commission", "fisher people", "fisheries councils", "ecosystem based fisheries management", "sustainable fisheries git", "fisheries commissions", "oyster harvests", "fisheries management", "chesapeake river fisheries commission", "mid-atlantic fisheries council", "fishing groups", "south atlantic fisheries council", "noaa fisheries", "oyster stakeholders"], "type": "cluster", "node_size": 57, "label": "Marine Resources"}, "Ecosystem Conservation": {"concepts": "oyster reefs, marine resources division, marine ecosystems, water quality, harmful algal blooms, marine resource management, corals", "concept_list": ["oyster reefs", "marine resources division", "marine ecosystems", "water quality", "harmful algal blooms", "marine resource management", "corals"], "type": "cluster", "node_size": 36, "label": "Ecosystem Conservation"}, "Marine Recreation": {"concepts": "conservation organizations, environmental ngo, ecosystem-based management, pollution, species of conservation concern, mangroves, ecosystem resiliency, invasive species, species indices, biodiversity, environmental ngos, ecosystem indicator, biodiversity indices, habitat destruction, sustainable ecosystem, ecosystem resilience, ecosystem based management, ecosystem stressors, ecosystem structure, climate change, secondary predators, harmful organisms, species diversity, trophic level, ecosystem modeling, sustainability, ecosystem functions, biodiversity measurement, biodiversity workshop, climate projects, ecosystem management, top predators, non-charismatic species, ecosystem services, ecosystem function, target species, endangered species, charismatic species, trophic pyramid, ecosystem service, ecological modeling, habitat forming species, smithsonian environmental research center, protected species, single species management, species index, food web species, food web", "concept_list": ["conservation organizations", "environmental ngo", "ecosystem-based management", "pollution", "species of conservation concern", "mangroves", "ecosystem resiliency", "invasive species", "species indices", "biodiversity", "environmental ngos", "ecosystem indicator", "biodiversity indices", "habitat destruction", "sustainable ecosystem", "ecosystem resilience", "ecosystem based management", "ecosystem stressors", "ecosystem structure", "climate change", "secondary predators", "harmful organisms", "species diversity", "trophic level", "ecosystem modeling", "sustainability", "ecosystem functions", "biodiversity measurement", "biodiversity workshop", "climate projects", "ecosystem management", "top predators", "non-charismatic species", "ecosystem services", "ecosystem function", "target species", "endangered species", "charismatic species", "trophic pyramid", "ecosystem service", "ecological modeling", "habitat forming species", "smithsonian environmental research center", "protected species", "single species management", "species index", "food web species", "food web"], "type": "cluster", "node_size": 159, "label": "Marine Recreation"}};
        const conceptData = {"fisher folks": {"concepts": "fisher folks", "type": "concept", "cluster": "Stakeholder Engagement", "node_size": 10, "label": "fisher folks"}, "human recreation": {"concepts": "human recreation", "type": "concept", "cluster": "Stakeholder Engagement", "node_size": 10, "label": "human recreation"}, "recreational sector": {"concepts": "recreational sector", "type": "concept", "cluster": "Stakeholder Engagement", "node_size": 10, "label": "recreational sector"}, "marine recreation": {"concepts": "marine recreation", "type": "concept", "cluster": "Stakeholder Engagement", "node_size": 10, "label": "marine recreation"}, "case studies": {"concepts": "case studies", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "case studies"}, "stakeholder perspectives": {"concepts": "stakeholder perspectives", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "stakeholder perspectives"}, "policy management": {"concepts": "policy management", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "policy management"}, "smithsonian": {"concepts": "smithsonian", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "smithsonian"}, "national systematics lab": {"concepts": "national systematics lab", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "national systematics lab"}, "councils": {"concepts": "councils", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "councils"}, "management agencies": {"concepts": "management agencies", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "management agencies"}, "system components": {"concepts": "system components", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "system components"}, "workshop recruitment": {"concepts": "workshop recruitment", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "workshop recruitment"}, "human consumption": {"concepts": "human consumption", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "human consumption"}, "research collaboration": {"concepts": "research collaboration", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "research collaboration"}, "negative effect": {"concepts": "negative effect", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "negative effect"}, "noaa chesapeake office": {"concepts": "noaa chesapeake office", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "noaa chesapeake office"}, "stakeholders": {"concepts": "stakeholders", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "stakeholders"}, "protected resources": {"concepts": "protected resources", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "protected resources"}, "executive director": {"concepts": "executive director", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "executive director"}, "interviews": {"concepts": "interviews", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "interviews"}, "economic value": {"concepts": "economic value", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "economic value"}, "administration": {"concepts": "administration", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "administration"}, "national scale": {"concepts": "national scale", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "national scale"}, "case study": {"concepts": "case study", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "case study"}, "positive effect": {"concepts": "positive effect", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "positive effect"}, "regional focus": {"concepts": "regional focus", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "regional focus"}, "chesapeake bay": {"concepts": "chesapeake bay", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "chesapeake bay"}, "management concept": {"concepts": "management concept", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "management concept"}, "science and technology": {"concepts": "science and technology", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "science and technology"}, "chesapeake bay foundation": {"concepts": "chesapeake bay foundation", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "chesapeake bay foundation"}, "amy freitag": {"concepts": "amy freitag", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "amy freitag"}, "workshop summaries": {"concepts": "workshop summaries", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "workshop summaries"}, "modeling workshops": {"concepts": "modeling workshops", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "modeling workshops"}, "expert perspectives": {"concepts": "expert perspectives", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "expert perspectives"}, "maryland dnr": {"concepts": "maryland dnr", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "maryland dnr"}, "relationship weight": {"concepts": "relationship weight", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "relationship weight"}, "resource users": {"concepts": "resource users", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "resource users"}, "mental model": {"concepts": "mental model", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "mental model"}, "commercial sector": {"concepts": "commercial sector", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "commercial sector"}, "gulf rehabilitation": {"concepts": "gulf rehabilitation", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "gulf rehabilitation"}, "overharvesting": {"concepts": "overharvesting", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "overharvesting"}, "mental modeling": {"concepts": "mental modeling", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "mental modeling"}, "data analysis": {"concepts": "data analysis", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "data analysis"}, "maryland watermen association": {"concepts": "maryland watermen association", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "maryland watermen association"}, "problem solving": {"concepts": "problem solving", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "problem solving"}, "stakeholder groups": {"concepts": "stakeholder groups", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "stakeholder groups"}, "manuscript": {"concepts": "manuscript", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "manuscript"}, "funders": {"concepts": "funders", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "funders"}, "chesapeake funders network": {"concepts": "chesapeake funders network", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "chesapeake funders network"}, "big picture perspective": {"concepts": "big picture perspective", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "big picture perspective"}, "stressor": {"concepts": "stressor", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "stressor"}, "feedback loops": {"concepts": "feedback loops", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "feedback loops"}, "gulf of mexico": {"concepts": "gulf of mexico", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "gulf of mexico"}, "state agencies": {"concepts": "state agencies", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "state agencies"}, "stakeholder networks": {"concepts": "stakeholder networks", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "stakeholder networks"}, "research methods": {"concepts": "research methods", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "research methods"}, "advocacy": {"concepts": "advocacy", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "advocacy"}, "system dynamics": {"concepts": "system dynamics", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "system dynamics"}, "shared perspectives": {"concepts": "shared perspectives", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "shared perspectives"}, "society": {"concepts": "society", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "society"}, "virginia marine resource commission": {"concepts": "virginia marine resource commission", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "virginia marine resource commission"}, "stressors": {"concepts": "stressors", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "stressors"}, "microplastics": {"concepts": "microplastics", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "microplastics"}, "stakeholder": {"concepts": "stakeholder", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "stakeholder"}, "scenario analysis": {"concepts": "scenario analysis", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "scenario analysis"}, "baseline data": {"concepts": "baseline data", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "baseline data"}, "tradeoffs": {"concepts": "tradeoffs", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "tradeoffs"}, "conservation": {"concepts": "conservation", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "conservation"}, "chesapeake conservation association": {"concepts": "chesapeake conservation association", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "chesapeake conservation association"}, "project lead": {"concepts": "project lead", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "project lead"}, "preservation": {"concepts": "preservation", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "preservation"}, "salish sea": {"concepts": "salish sea", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "salish sea"}, "atlantic marine fisheries commission": {"concepts": "atlantic marine fisheries commission", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "atlantic marine fisheries commission"}, "fisher people": {"concepts": "fisher people", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "fisher people"}, "fisheries councils": {"concepts": "fisheries councils", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "fisheries councils"}, "ecosystem based fisheries management": {"concepts": "ecosystem based fisheries management", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "ecosystem based fisheries management"}, "sustainable fisheries git": {"concepts": "sustainable fisheries git", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "sustainable fisheries git"}, "fisheries commissions": {"concepts": "fisheries commissions", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "fisheries commissions"}, "oyster harvests": {"concepts": "oyster harvests", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "oyster harvests"}, "fisheries management": {"concepts": "fisheries management", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "fisheries management"}, "chesapeake river fisheries commission": {"concepts": "chesapeake river fisheries commission", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "chesapeake river fisheries commission"}, "mid-atlantic fisheries council": {"concepts": "mid-atlantic fisheries council", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "mid-atlantic fisheries council"}, "fishing groups": {"concepts": "fishing groups", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "fishing groups"}, "south atlantic fisheries council": {"concepts": "south atlantic fisheries council", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "south atlantic fisheries council"}, "noaa fisheries": {"concepts": "noaa fisheries", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "noaa fisheries"}, "oyster stakeholders": {"concepts": "oyster stakeholders", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "oyster stakeholders"}, "oyster reefs": {"concepts": "oyster reefs", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "oyster reefs"}, "marine resources division": {"concepts": "marine resources division", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "marine resources division"}, "marine ecosystems": {"concepts": "marine ecosystems", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "marine ecosystems"}, "water quality": {"concepts": "water quality", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "water quality"}, "harmful algal blooms": {"concepts": "harmful algal blooms", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "harmful algal blooms"}, "marine resource management": {"concepts": "marine resource management", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "marine resource management"}, "corals": {"concepts": "corals", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "corals"}, "conservation organizations": {"concepts": "conservation organizations", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "conservation organizations"}, "environmental ngo": {"concepts": "environmental ngo", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "environmental ngo"}, "ecosystem-based management": {"concepts": "ecosystem-based management", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "ecosystem-based management"}, "pollution": {"concepts": "pollution", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "pollution"}, "species of conservation concern": {"concepts": "species of conservation concern", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "species of conservation concern"}, "mangroves": {"concepts": "mangroves", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "mangroves"}, "ecosystem resiliency": {"concepts": "ecosystem resiliency", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "ecosystem resiliency"}, "invasive species": {"concepts": "invasive species", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "invasive species"}, "species indices": {"concepts": "species indices", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "species indices"}, "biodiversity": {"concepts": "biodiversity", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "biodiversity"}, "environmental ngos": {"concepts": "environmental ngos", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "environmental ngos"}, "ecosystem indicator": {"concepts": "ecosystem indicator", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "ecosystem indicator"}, "biodiversity indices": {"concepts": "biodiversity indices", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "biodiversity indices"}, "habitat destruction": {"concepts": "habitat destruction", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "habitat destruction"}, "sustainable ecosystem": {"concepts": "sustainable ecosystem", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "sustainable ecosystem"}, "ecosystem resilience": {"concepts": "ecosystem resilience", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "ecosystem resilience"}, "ecosystem based management": {"concepts": "ecosystem based management", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "ecosystem based management"}, "ecosystem stressors": {"concepts": "ecosystem stressors", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "ecosystem stressors"}, "ecosystem structure": {"concepts": "ecosystem structure", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "ecosystem structure"}, "climate change": {"concepts": "climate change", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "climate change"}, "secondary predators": {"concepts": "secondary predators", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "secondary predators"}, "harmful organisms": {"concepts": "harmful organisms", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "harmful organisms"}, "species diversity": {"concepts": "species diversity", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "species diversity"}, "trophic level": {"concepts": "trophic level", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "trophic level"}, "ecosystem modeling": {"concepts": "ecosystem modeling", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "ecosystem modeling"}, "sustainability": {"concepts": "sustainability", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "sustainability"}, "ecosystem functions": {"concepts": "ecosystem functions", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "ecosystem functions"}, "biodiversity measurement": {"concepts": "biodiversity measurement", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "biodiversity measurement"}, "biodiversity workshop": {"concepts": "biodiversity workshop", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "biodiversity workshop"}, "climate projects": {"concepts": "climate projects", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "climate projects"}, "ecosystem management": {"concepts": "ecosystem management", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "ecosystem management"}, "top predators": {"concepts": "top predators", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "top predators"}, "non-charismatic species": {"concepts": "non-charismatic species", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "non-charismatic species"}, "ecosystem services": {"concepts": "ecosystem services", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "ecosystem services"}, "ecosystem function": {"concepts": "ecosystem function", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "ecosystem function"}, "target species": {"concepts": "target species", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "target species"}, "endangered species": {"concepts": "endangered species", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "endangered species"}, "charismatic species": {"concepts": "charismatic species", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "charismatic species"}, "trophic pyramid": {"concepts": "trophic pyramid", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "trophic pyramid"}, "ecosystem service": {"concepts": "ecosystem service", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "ecosystem service"}, "ecological modeling": {"concepts": "ecological modeling", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "ecological modeling"}, "habitat forming species": {"concepts": "habitat forming species", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "habitat forming species"}, "smithsonian environmental research center": {"concepts": "smithsonian environmental research center", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "smithsonian environmental research center"}, "protected species": {"concepts": "protected species", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "protected species"}, "single species management": {"concepts": "single species management", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "single species management"}, "species index": {"concepts": "species index", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "species index"}, "food web species": {"concepts": "food web species", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "food web species"}, "food web": {"concepts": "food web", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "food web"}};
        const interClusterEdges = [["Stakeholder Engagement", "Fisheries Management", {"weight": 1.0, "confidence": 0.6875, "type": "inter_cluster", "style": "solid"}], ["Stakeholder Engagement", "Marine Resources", {"weight": 1.0, "confidence": 0.7749999999999999, "type": "inter_cluster", "style": "solid"}], ["Stakeholder Engagement", "Marine Recreation", {"weight": 0.3333333333333333, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["Fisheries Management", "Marine Resources", {"weight": 1.0, "confidence": 0.74, "type": "inter_cluster", "style": "solid"}], ["Fisheries Management", "Marine Recreation", {"weight": 1.0, "confidence": 0.74, "type": "inter_cluster", "style": "solid"}], ["Fisheries Management", "Stakeholder Engagement", {"weight": 1.0, "confidence": 0.6875, "type": "inter_cluster", "style": "solid"}], ["Fisheries Management", "Ecosystem Conservation", {"weight": 0.6666666666666666, "confidence": 0.39999999999999997, "type": "inter_cluster", "style": "solid"}], ["Marine Resources", "Stakeholder Engagement", {"weight": 1.0, "confidence": 0.8250000000000001, "type": "inter_cluster", "style": "solid"}], ["Marine Resources", "Fisheries Management", {"weight": 0.8, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["Marine Resources", "Marine Recreation", {"weight": 1.0, "confidence": 0.8000000000000002, "type": "inter_cluster", "style": "solid"}], ["Marine Resources", "Ecosystem Conservation", {"weight": 0.75, "confidence": 0.5875, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Conservation", "Marine Recreation", {"weight": 1.0, "confidence": 0.77, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Conservation", "Stakeholder Engagement", {"weight": 1.0, "confidence": 0.7625, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Conservation", "Marine Resources", {"weight": 1.0, "confidence": 0.8166666666666668, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Conservation", "Fisheries Management", {"weight": 0.6666666666666666, "confidence": 0.39999999999999997, "type": "inter_cluster", "style": "solid"}], ["Marine Recreation", "Marine Resources", {"weight": 1.0, "confidence": 0.79, "type": "inter_cluster", "style": "solid"}], ["Marine Recreation", "Stakeholder Engagement", {"weight": 1.0, "confidence": 0.7375, "type": "inter_cluster", "style": "solid"}], ["Marine Recreation", "Ecosystem Conservation", {"weight": 1.0, "confidence": 0.775, "type": "inter_cluster", "style": "solid"}], ["Marine Recreation", "Fisheries Management", {"weight": 0.6666666666666666, "confidence": 0.43333333333333335, "type": "inter_cluster", "style": "solid"}]];
        const clusterConcepts = {"Stakeholder Engagement": [["fisher folks", {"concepts": "fisher folks", "type": "concept", "cluster": "Stakeholder Engagement", "node_size": 10, "label": "fisher folks"}], ["human recreation", {"concepts": "human recreation", "type": "concept", "cluster": "Stakeholder Engagement", "node_size": 10, "label": "human recreation"}], ["recreational sector", {"concepts": "recreational sector", "type": "concept", "cluster": "Stakeholder Engagement", "node_size": 10, "label": "recreational sector"}], ["marine recreation", {"concepts": "marine recreation", "type": "concept", "cluster": "Stakeholder Engagement", "node_size": 10, "label": "marine recreation"}]], "Fisheries Management": [["case studies", {"concepts": "case studies", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "case studies"}], ["stakeholder perspectives", {"concepts": "stakeholder perspectives", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "stakeholder perspectives"}], ["policy management", {"concepts": "policy management", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "policy management"}], ["smithsonian", {"concepts": "smithsonian", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "smithsonian"}], ["national systematics lab", {"concepts": "national systematics lab", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "national systematics lab"}], ["councils", {"concepts": "councils", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "councils"}], ["management agencies", {"concepts": "management agencies", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "management agencies"}], ["system components", {"concepts": "system components", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "system components"}], ["workshop recruitment", {"concepts": "workshop recruitment", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "workshop recruitment"}], ["human consumption", {"concepts": "human consumption", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "human consumption"}], ["research collaboration", {"concepts": "research collaboration", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "research collaboration"}], ["negative effect", {"concepts": "negative effect", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "negative effect"}], ["noaa chesapeake office", {"concepts": "noaa chesapeake office", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "noaa chesapeake office"}], ["stakeholders", {"concepts": "stakeholders", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "stakeholders"}], ["protected resources", {"concepts": "protected resources", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "protected resources"}], ["executive director", {"concepts": "executive director", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "executive director"}], ["interviews", {"concepts": "interviews", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "interviews"}], ["economic value", {"concepts": "economic value", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "economic value"}], ["administration", {"concepts": "administration", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "administration"}], ["national scale", {"concepts": "national scale", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "national scale"}], ["case study", {"concepts": "case study", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "case study"}], ["positive effect", {"concepts": "positive effect", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "positive effect"}], ["regional focus", {"concepts": "regional focus", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "regional focus"}], ["chesapeake bay", {"concepts": "chesapeake bay", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "chesapeake bay"}], ["management concept", {"concepts": "management concept", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "management concept"}], ["science and technology", {"concepts": "science and technology", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "science and technology"}], ["chesapeake bay foundation", {"concepts": "chesapeake bay foundation", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "chesapeake bay foundation"}], ["amy freitag", {"concepts": "amy freitag", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "amy freitag"}], ["workshop summaries", {"concepts": "workshop summaries", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "workshop summaries"}], ["modeling workshops", {"concepts": "modeling workshops", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "modeling workshops"}], ["expert perspectives", {"concepts": "expert perspectives", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "expert perspectives"}], ["maryland dnr", {"concepts": "maryland dnr", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "maryland dnr"}], ["relationship weight", {"concepts": "relationship weight", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "relationship weight"}], ["resource users", {"concepts": "resource users", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "resource users"}], ["mental model", {"concepts": "mental model", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "mental model"}], ["commercial sector", {"concepts": "commercial sector", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "commercial sector"}], ["gulf rehabilitation", {"concepts": "gulf rehabilitation", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "gulf rehabilitation"}], ["overharvesting", {"concepts": "overharvesting", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "overharvesting"}], ["mental modeling", {"concepts": "mental modeling", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "mental modeling"}], ["data analysis", {"concepts": "data analysis", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "data analysis"}], ["maryland watermen association", {"concepts": "maryland watermen association", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "maryland watermen association"}], ["problem solving", {"concepts": "problem solving", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "problem solving"}], ["stakeholder groups", {"concepts": "stakeholder groups", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "stakeholder groups"}], ["manuscript", {"concepts": "manuscript", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "manuscript"}], ["funders", {"concepts": "funders", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "funders"}], ["chesapeake funders network", {"concepts": "chesapeake funders network", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "chesapeake funders network"}], ["big picture perspective", {"concepts": "big picture perspective", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "big picture perspective"}], ["stressor", {"concepts": "stressor", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "stressor"}], ["feedback loops", {"concepts": "feedback loops", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "feedback loops"}], ["gulf of mexico", {"concepts": "gulf of mexico", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "gulf of mexico"}], ["state agencies", {"concepts": "state agencies", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "state agencies"}], ["stakeholder networks", {"concepts": "stakeholder networks", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "stakeholder networks"}], ["research methods", {"concepts": "research methods", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "research methods"}], ["advocacy", {"concepts": "advocacy", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "advocacy"}], ["system dynamics", {"concepts": "system dynamics", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "system dynamics"}], ["shared perspectives", {"concepts": "shared perspectives", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "shared perspectives"}], ["society", {"concepts": "society", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "society"}], ["virginia marine resource commission", {"concepts": "virginia marine resource commission", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "virginia marine resource commission"}], ["stressors", {"concepts": "stressors", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "stressors"}], ["microplastics", {"concepts": "microplastics", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "microplastics"}], ["stakeholder", {"concepts": "stakeholder", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "stakeholder"}], ["scenario analysis", {"concepts": "scenario analysis", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "scenario analysis"}], ["baseline data", {"concepts": "baseline data", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "baseline data"}], ["tradeoffs", {"concepts": "tradeoffs", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "tradeoffs"}], ["conservation", {"concepts": "conservation", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "conservation"}], ["chesapeake conservation association", {"concepts": "chesapeake conservation association", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "chesapeake conservation association"}], ["project lead", {"concepts": "project lead", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "project lead"}], ["preservation", {"concepts": "preservation", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "preservation"}], ["salish sea", {"concepts": "salish sea", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "salish sea"}]], "Marine Resources": [["atlantic marine fisheries commission", {"concepts": "atlantic marine fisheries commission", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "atlantic marine fisheries commission"}], ["fisher people", {"concepts": "fisher people", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "fisher people"}], ["fisheries councils", {"concepts": "fisheries councils", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "fisheries councils"}], ["ecosystem based fisheries management", {"concepts": "ecosystem based fisheries management", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "ecosystem based fisheries management"}], ["sustainable fisheries git", {"concepts": "sustainable fisheries git", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "sustainable fisheries git"}], ["fisheries commissions", {"concepts": "fisheries commissions", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "fisheries commissions"}], ["oyster harvests", {"concepts": "oyster harvests", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "oyster harvests"}], ["fisheries management", {"concepts": "fisheries management", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "fisheries management"}], ["chesapeake river fisheries commission", {"concepts": "chesapeake river fisheries commission", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "chesapeake river fisheries commission"}], ["mid-atlantic fisheries council", {"concepts": "mid-atlantic fisheries council", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "mid-atlantic fisheries council"}], ["fishing groups", {"concepts": "fishing groups", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "fishing groups"}], ["south atlantic fisheries council", {"concepts": "south atlantic fisheries council", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "south atlantic fisheries council"}], ["noaa fisheries", {"concepts": "noaa fisheries", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "noaa fisheries"}], ["oyster stakeholders", {"concepts": "oyster stakeholders", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "oyster stakeholders"}]], "Ecosystem Conservation": [["oyster reefs", {"concepts": "oyster reefs", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "oyster reefs"}], ["marine resources division", {"concepts": "marine resources division", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "marine resources division"}], ["marine ecosystems", {"concepts": "marine ecosystems", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "marine ecosystems"}], ["water quality", {"concepts": "water quality", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "water quality"}], ["harmful algal blooms", {"concepts": "harmful algal blooms", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "harmful algal blooms"}], ["marine resource management", {"concepts": "marine resource management", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "marine resource management"}], ["corals", {"concepts": "corals", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "corals"}]], "Marine Recreation": [["conservation organizations", {"concepts": "conservation organizations", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "conservation organizations"}], ["environmental ngo", {"concepts": "environmental ngo", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "environmental ngo"}], ["ecosystem-based management", {"concepts": "ecosystem-based management", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "ecosystem-based management"}], ["pollution", {"concepts": "pollution", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "pollution"}], ["species of conservation concern", {"concepts": "species of conservation concern", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "species of conservation concern"}], ["mangroves", {"concepts": "mangroves", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "mangroves"}], ["ecosystem resiliency", {"concepts": "ecosystem resiliency", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "ecosystem resiliency"}], ["invasive species", {"concepts": "invasive species", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "invasive species"}], ["species indices", {"concepts": "species indices", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "species indices"}], ["biodiversity", {"concepts": "biodiversity", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "biodiversity"}], ["environmental ngos", {"concepts": "environmental ngos", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "environmental ngos"}], ["ecosystem indicator", {"concepts": "ecosystem indicator", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "ecosystem indicator"}], ["biodiversity indices", {"concepts": "biodiversity indices", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "biodiversity indices"}], ["habitat destruction", {"concepts": "habitat destruction", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "habitat destruction"}], ["sustainable ecosystem", {"concepts": "sustainable ecosystem", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "sustainable ecosystem"}], ["ecosystem resilience", {"concepts": "ecosystem resilience", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "ecosystem resilience"}], ["ecosystem based management", {"concepts": "ecosystem based management", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "ecosystem based management"}], ["ecosystem stressors", {"concepts": "ecosystem stressors", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "ecosystem stressors"}], ["ecosystem structure", {"concepts": "ecosystem structure", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "ecosystem structure"}], ["climate change", {"concepts": "climate change", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "climate change"}], ["secondary predators", {"concepts": "secondary predators", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "secondary predators"}], ["harmful organisms", {"concepts": "harmful organisms", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "harmful organisms"}], ["species diversity", {"concepts": "species diversity", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "species diversity"}], ["trophic level", {"concepts": "trophic level", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "trophic level"}], ["ecosystem modeling", {"concepts": "ecosystem modeling", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "ecosystem modeling"}], ["sustainability", {"concepts": "sustainability", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "sustainability"}], ["ecosystem functions", {"concepts": "ecosystem functions", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "ecosystem functions"}], ["biodiversity measurement", {"concepts": "biodiversity measurement", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "biodiversity measurement"}], ["biodiversity workshop", {"concepts": "biodiversity workshop", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "biodiversity workshop"}], ["climate projects", {"concepts": "climate projects", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "climate projects"}], ["ecosystem management", {"concepts": "ecosystem management", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "ecosystem management"}], ["top predators", {"concepts": "top predators", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "top predators"}], ["non-charismatic species", {"concepts": "non-charismatic species", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "non-charismatic species"}], ["ecosystem services", {"concepts": "ecosystem services", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "ecosystem services"}], ["ecosystem function", {"concepts": "ecosystem function", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "ecosystem function"}], ["target species", {"concepts": "target species", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "target species"}], ["endangered species", {"concepts": "endangered species", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "endangered species"}], ["charismatic species", {"concepts": "charismatic species", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "charismatic species"}], ["trophic pyramid", {"concepts": "trophic pyramid", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "trophic pyramid"}], ["ecosystem service", {"concepts": "ecosystem service", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "ecosystem service"}], ["ecological modeling", {"concepts": "ecological modeling", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "ecological modeling"}], ["habitat forming species", {"concepts": "habitat forming species", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "habitat forming species"}], ["smithsonian environmental research center", {"concepts": "smithsonian environmental research center", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "smithsonian environmental research center"}], ["protected species", {"concepts": "protected species", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "protected species"}], ["single species management", {"concepts": "single species management", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "single species management"}], ["species index", {"concepts": "species index", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "species index"}], ["food web species", {"concepts": "food web species", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "food web species"}], ["food web", {"concepts": "food web", "type": "concept", "cluster": "Marine Recreation", "node_size": 10, "label": "food web"}]]};
        const clusterEdges = {"Stakeholder Engagement": [], "Fisheries Management": [], "Marine Resources": [], "Ecosystem Conservation": [], "Marine Recreation": []};
        
        let network;
        let currentView = 'clusters';
        let currentCluster = null;
        let minConfidence = 0.3;
        
        // Network options
        const options = {
            nodes: {
                font: { color: 'white', size: 14 },
                borderWidth: 2,
                shadow: true
            },
            edges: {
                arrows: { to: { enabled: true, scaleFactor: 1.2 } },
                shadow: true,
                smooth: { type: 'continuous' }
            },
            physics: {
                stabilization: { iterations: 100 },
                barnesHut: {
                    gravitationalConstant: -8000,
                    springConstant: 0.001,
                    springLength: 200
                }
            },
            interaction: {
                hover: true,
                selectConnectedEdges: false
            }
        };
        
        function initNetwork() {
            const container = document.getElementById('network');
            const data = getClusterViewData();
            network = new vis.Network(container, data, options);
            
            // Handle cluster clicks for drill-down
            network.on("click", function(params) {
                if (params.nodes.length > 0 && currentView === 'clusters') {
                    const clickedNode = params.nodes[0];
                    if (clusterConcepts[clickedNode]) {
                        showClusterDetail(clickedNode);
                    }
                }
            });
        }
        
        function getClusterViewData() {
            const nodes = [];
            const edges = [];
            
            // Add cluster nodes
            Object.entries(clusterData).forEach(([clusterId, data]) => {
                const concepts = data.concepts || [];
                const conceptsStr = Array.isArray(concepts) ? concepts.join(', ') : concepts;
                
                nodes.push({
                    id: clusterId,
                    label: clusterId,
                    title: `Cluster: ${clusterId}\nConcepts: ${conceptsStr}\nClick to explore internal relationships`,
                    color: '#4A90E2',
                    size: 25 + (conceptsStr.split(',').length * 2),
                    font: { color: 'white' }
                });
            });
            
            // Add inter-cluster edges
            interClusterEdges.forEach(([source, target, edgeData]) => {
                const confidence = edgeData.confidence || 1.0;
                const weight = edgeData.weight || 0;
                
                if (confidence >= minConfidence) {
                    edges.push({
                        from: source,
                        to: target,
                        color: weight > 0 ? '#28A745' : '#DC3545',
                        width: Math.abs(weight) * 3 + 1,
                        title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                        dashes: false
                    });
                }
            });
            
            return { nodes: nodes, edges: edges };
        }
        
        function getClusterDetailData(clusterId) {
            const nodes = [];
            const edges = [];
            
            // Add concept nodes for this cluster
            if (clusterConcepts[clusterId]) {
                clusterConcepts[clusterId].forEach(([conceptId, data]) => {
                    nodes.push({
                        id: conceptId,
                        label: conceptId,
                        title: `Concept: ${conceptId}\nFrom cluster: ${clusterId}`,
                        color: '#FF9500',
                        size: 20,
                        font: { color: 'white' }
                    });
                });
            }
            
            // Add intra-cluster edges
            if (clusterEdges[clusterId]) {
                clusterEdges[clusterId].forEach(([source, target, edgeData]) => {
                    const confidence = edgeData.confidence || 1.0;
                    const weight = edgeData.weight || 0;
                    
                    if (confidence >= minConfidence) {
                        edges.push({
                            from: source,
                            to: target,
                            color: weight > 0 ? '#28A745' : '#DC3545',
                            width: Math.abs(weight) * 3 + 1,
                            title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                            dashes: true
                        });
                    }
                });
            }
            
            return { nodes: nodes, edges: edges };
        }
        
        function showClusterView() {
            currentView = 'clusters';
            currentCluster = null;
            const data = getClusterViewData();
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'none';
            document.getElementById('current-view').textContent = 'Cluster Overview';
        }
        
        function showClusterDetail(clusterId) {
            currentView = 'concepts';
            currentCluster = clusterId;
            const data = getClusterDetailData(clusterId);
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'inline-block';
            document.getElementById('current-view').textContent = `Inside Cluster: ${clusterId}`;
        }
        
        function updateConfidenceFilter(value) {
            minConfidence = parseFloat(value);
            document.getElementById('confidence-value').textContent = value;
            
            // Refresh current view
            if (currentView === 'clusters') {
                showClusterView();
            } else {
                showClusterDetail(currentCluster);
            }
        }
        
        // Initialize the network when page loads
        window.onload = function() {
            initNetwork();
        };
    </script>
</body>
</html>
