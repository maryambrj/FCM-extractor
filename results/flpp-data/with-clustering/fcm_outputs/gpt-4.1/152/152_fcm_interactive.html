
<!DOCTYPE html>
<html>
<head>
    <title>Hierarchical FCM Visualization (Unconnected nodes removed)</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 0; 
            padding: 20px;
            background: #f5f5f5;
        }
        
        #network { 
            width: 100%; 
            height: 600px; 
            border: 2px solid #ccc; 
            background: white;
            border-radius: 8px;
        }
        
        #controls {
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn {
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        
        .btn-primary { background: #4A90E2; color: white; }
        .btn-primary:hover { background: #357ABD; }
        
        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #545b62; }
        
        #current-view {
            font-weight: bold;
            color: #333;
            margin-left: 10px;
        }
        
        #legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-size: 12px;
            max-width: 200px;
        }
        
        .legend-item {
            margin: 5px 0;
            display: flex;
            align-items: center;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .legend-line {
            width: 20px;
            height: 2px;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <h1>Fuzzy Cognitive Map - Hierarchical View</h1>
    
    <div id="controls">
        <button class="btn btn-secondary" id="back-btn" onclick="showClusterView()" style="display: none;">
            ‚Üê Back to Clusters
        </button>
        <span id="current-view">Cluster Overview</span>
        <div style="float: right;">
            <label>Min Confidence: </label>
            <input type="range" id="confidence-slider" min="0" max="1" step="0.1" value="0.3" 
                   onchange="updateConfidenceFilter(this.value)">
            <span id="confidence-value">0.3</span>
        </div>
    </div>
    
    <div id="network"></div>
    
    <div id="legend">
        <h4>Legend</h4>
        <div class="legend-item">
            <div class="legend-color" style="background: #4A90E2;"></div>
            <span>Clusters</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #FF9500;"></div>
            <span>Concepts</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #28A745;"></div>
            <span>Positive relationship</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #DC3545;"></div>
            <span>Negative relationship</span>
        </div>
        <div style="margin-top: 10px; font-style: italic; color: #666;">
            Click clusters to explore internal concepts
        </div>
    </div>

    <script>
        // Embedded data
        const clusterData = {"decision-making": {"concepts": "decision-making", "concept_list": ["decision-making"], "type": "cluster", "node_size": 18, "label": "decision-making"}, "Community Engagement": {"concepts": "network, connection strengths, social networks", "concept_list": ["network", "connection strengths", "social networks"], "type": "cluster", "node_size": 24, "label": "Community Engagement"}, "Social Dynamics": {"concepts": "social capital, neighborhood shopper, input opportunity, positive connection, individual agency, system inconvenience, pre-packaged sandwiches, resident prioritization, organizations, social inclusion, social participation, urban residency, retailer perspective, community engagement, sectors, retail, businesses, relationships, budget, program engagement, barrier, social relationships, package sandwich, neighborhood dynamics, mental health, system barriers, control, social outcomes, structural barriers, budget constraints, professional shopper, residential choice, retail perspective, program effectiveness, sister cities, resident income, barriers, budgets, power dynamics, system, shop stability, opportunity, residency choice, retail sector, brick and mortar, black economic development, packaged sandwich", "concept_list": ["social capital", "neighborhood shopper", "input opportunity", "positive connection", "individual agency", "system inconvenience", "pre-packaged sandwiches", "resident prioritization", "organizations", "social inclusion", "social participation", "urban residency", "retailer perspective", "community engagement", "sectors", "retail", "businesses", "relationships", "budget", "program engagement", "barrier", "social relationships", "package sandwich", "neighborhood dynamics", "mental health", "system barriers", "control", "social outcomes", "structural barriers", "budget constraints", "professional shopper", "residential choice", "retail perspective", "program effectiveness", "sister cities", "resident income", "barriers", "budgets", "power dynamics", "system", "shop stability", "opportunity", "residency choice", "retail sector", "brick and mortar", "black economic development", "packaged sandwich"], "type": "cluster", "node_size": 156, "label": "Social Dynamics"}, "Infrastructure & Location": {"concepts": "social identity, social context, social support, social norms, social processes, social expectations, social responsibility, cultural values, social structures, social integration, collective action, social programs, group dynamics, social equity, social dynamics, demographic groups, social change, social environment, social agency, social needs, cultural norms", "concept_list": ["social identity", "social context", "social support", "social norms", "social processes", "social expectations", "social responsibility", "cultural values", "social structures", "social integration", "collective action", "social programs", "group dynamics", "social equity", "social dynamics", "demographic groups", "social change", "social environment", "social agency", "social needs", "cultural norms"], "type": "cluster", "node_size": 78, "label": "Infrastructure & Location"}, "Food Systems": {"concepts": "transportation, infrastructure, system infrastructure, infrastructure side, location, parking, map", "concept_list": ["transportation", "infrastructure", "system infrastructure", "infrastructure side", "location", "parking", "map"], "type": "cluster", "node_size": 36, "label": "Food Systems"}, "Social Networks": {"concepts": "nutritional content, chain restaurants, food challenges, food baskets, food giveaways, shelf stability, grocery store, food market system, food trust, food programs, food system, food barriers, supplemental nutrition programs, food resources, food infrastructure, food market networks, convenience store, food market behavior, farmers markets, local food, food sources, food outlets, food market barriers, food source, food conversations, food banks, quality produce, food market community, food access, food market convenience, food utilization, food stamps, food market sources, food market perception, cooking, food amount, food buying, food store usage, food systems, food preferences, food market ingredients, nutrition, farmers market, food security, food engagement, fruits and vegetables, food distribution, food market hours, meat, quality of food, food market accessibility, convenience stores, food boxes, food choices, food support, food partnerships, food desert, food market operation, food market choices, local restaurants, food stakeholders, food giveaway, food influence, food collaboration, food market access, food system mapping, fresh food case, nutritious foods, fresh fruit, supplemental food, food sovereignty, food consumption, food market partnerships, nutritious offerings, food priorities, food skills, food market preference, local stores, food availability, food ingredients, food convenience, food consistency, nutrition education, preservatives, food market traffic, food needs, food market participation, grocery stores, food connection, food policy, food purchasing, fresh food, packaged food, frozen food, urban food access, food quality, food environment, food variety, food system research, food market relationships, livestock ordinances, food traffic, quality meat, food patterns, food market availability, food research, food production, food decision-making, canned food, food market transportation, food mapping, food behavior, food market shopping, food supply, store location, food shopping, food sector", "concept_list": ["nutritional content", "chain restaurants", "food challenges", "food baskets", "food giveaways", "shelf stability", "grocery store", "food market system", "food trust", "food programs", "food system", "food barriers", "supplemental nutrition programs", "food resources", "food infrastructure", "food market networks", "convenience store", "food market behavior", "farmers markets", "local food", "food sources", "food outlets", "food market barriers", "food source", "food conversations", "food banks", "quality produce", "food market community", "food access", "food market convenience", "food utilization", "food stamps", "food market sources", "food market perception", "cooking", "food amount", "food buying", "food store usage", "food systems", "food preferences", "food market ingredients", "nutrition", "farmers market", "food security", "food engagement", "fruits and vegetables", "food distribution", "food market hours", "meat", "quality of food", "food market accessibility", "convenience stores", "food boxes", "food choices", "food support", "food partnerships", "food desert", "food market operation", "food market choices", "local restaurants", "food stakeholders", "food giveaway", "food influence", "food collaboration", "food market access", "food system mapping", "fresh food case", "nutritious foods", "fresh fruit", "supplemental food", "food sovereignty", "food consumption", "food market partnerships", "nutritious offerings", "food priorities", "food skills", "food market preference", "local stores", "food availability", "food ingredients", "food convenience", "food consistency", "nutrition education", "preservatives", "food market traffic", "food needs", "food market participation", "grocery stores", "food connection", "food policy", "food purchasing", "fresh food", "packaged food", "frozen food", "urban food access", "food quality", "food environment", "food variety", "food system research", "food market relationships", "livestock ordinances", "food traffic", "quality meat", "food patterns", "food market availability", "food research", "food production", "food decision-making", "canned food", "food market transportation", "food mapping", "food behavior", "food market shopping", "food supply", "store location", "food shopping", "food sector"], "type": "cluster", "node_size": 366, "label": "Social Networks"}, "System Access": {"concepts": "accessibility, resource access, service delivery, system maintenance, ride access, system crashing, access, availability, system availability, system downtime, resource control, product availability, service availability, resource distribution, service provision, resource allocation", "concept_list": ["accessibility", "resource access", "service delivery", "system maintenance", "ride access", "system crashing", "access", "availability", "system availability", "system downtime", "resource control", "product availability", "service availability", "resource distribution", "service provision", "resource allocation"], "type": "cluster", "node_size": 63, "label": "System Access"}, "Institutional Partnerships": {"concepts": "local growers, public institutions, community trust, leverage points, organizational partnerships, collaboration, local partnerships, local community, institutional partnerships, trust, institutional trust, organizational collaboration, partnerships, social trust, private institutions, local institutions, collaborations, institutional roles, organizational relationships", "concept_list": ["local growers", "public institutions", "community trust", "leverage points", "organizational partnerships", "collaboration", "local partnerships", "local community", "institutional partnerships", "trust", "institutional trust", "organizational collaboration", "partnerships", "social trust", "private institutions", "local institutions", "collaborations", "institutional roles", "organizational relationships"], "type": "cluster", "node_size": 72, "label": "Institutional Partnerships"}, "Community Empowerment": {"concepts": "community resources, empowerment, community input, community agency, community involvement, community conversation, community members, community resilience, community member, project implementation, community needs, community-based organizations, community empowerment, community perception", "concept_list": ["community resources", "empowerment", "community input", "community agency", "community involvement", "community conversation", "community members", "community resilience", "community member", "project implementation", "community needs", "community-based organizations", "community empowerment", "community perception"], "type": "cluster", "node_size": 57, "label": "Community Empowerment"}, "Consumer Choice": {"concepts": "consumer choice, consumer agency, purchasing preference, demand, limited choices, affordability, personal choice, purchasing power, customer demand, consumer behavior, consumers, choice", "concept_list": ["consumer choice", "consumer agency", "purchasing preference", "demand", "limited choices", "affordability", "personal choice", "purchasing power", "customer demand", "consumer behavior", "consumers", "choice"], "type": "cluster", "node_size": 51, "label": "Consumer Choice"}, "Essential Workers": {"concepts": "third shift worker, workers, third shift workers, nurses, essential workers, professionals, resident priorities, gm workers", "concept_list": ["third shift worker", "workers", "third shift workers", "nurses", "essential workers", "professionals", "resident priorities", "gm workers"], "type": "cluster", "node_size": 39, "label": "Essential Workers"}, "Program Challenges": {"concepts": "analysis, change, dignity, common good, inconsistency, paperwork, salad, communication, technical terms, store operator, structural constraints, gardening, save a lot, mechanisms, burger, secondary goal, convenience, hurdles, values, respect, program design, perception, pamphlets, produce, problem solving, selection, msu extension, portion size, program constraints, leadership, city of flint, planning commission, bang for buck, ownership, paper trail, professional, perspectives, career development, creativity, safety, flint, limited ingredients, input, billboard, supplemental programs, additives, involvement, owner, resignation, agency, population, wic, knowledge, support, message, health, voice, covid-19, flint community, third shift, main reasons, comfort, entities, necessity, renewal process, snap", "concept_list": ["analysis", "change", "dignity", "common good", "inconsistency", "paperwork", "salad", "communication", "technical terms", "store operator", "structural constraints", "gardening", "save a lot", "mechanisms", "burger", "secondary goal", "convenience", "hurdles", "values", "respect", "program design", "perception", "pamphlets", "produce", "problem solving", "selection", "msu extension", "portion size", "program constraints", "leadership", "city of flint", "planning commission", "bang for buck", "ownership", "paper trail", "professional", "perspectives", "career development", "creativity", "safety", "flint", "limited ingredients", "input", "billboard", "supplemental programs", "additives", "involvement", "owner", "resignation", "agency", "population", "wic", "knowledge", "support", "message", "health", "voice", "covid-19", "flint community", "third shift", "main reasons", "comfort", "entities", "necessity", "renewal process", "snap"], "type": "cluster", "node_size": 213, "label": "Program Challenges"}, "Urban Governance": {"concepts": "city planning, urban development, urban policy, city governance", "concept_list": ["city planning", "urban development", "urban policy", "city governance"], "type": "cluster", "node_size": 27, "label": "Urban Governance"}, "Urban Barriers": {"concepts": "urban barriers, urban sustainability", "concept_list": ["urban barriers", "urban sustainability"], "type": "cluster", "node_size": 21, "label": "Urban Barriers"}, "Urban Agriculture": {"concepts": "urban farming, urban agriculture", "concept_list": ["urban farming", "urban agriculture"], "type": "cluster", "node_size": 21, "label": "Urban Agriculture"}, "Recipient Experience": {"concepts": "recipient experience, recipient control, recipient satisfaction", "concept_list": ["recipient experience", "recipient control", "recipient satisfaction"], "type": "cluster", "node_size": 24, "label": "Recipient Experience"}, "Social Impact": {"concepts": "social impact, negative impact, social influence", "concept_list": ["social impact", "negative impact", "social influence"], "type": "cluster", "node_size": 24, "label": "Social Impact"}, "Positive Outcomes": {"concepts": "positive outcomes, impacts, outcomes", "concept_list": ["positive outcomes", "impacts", "outcomes"], "type": "cluster", "node_size": 24, "label": "Positive Outcomes"}, "Life Quality": {"concepts": "quality of life, long-term impact, self-sufficiency", "concept_list": ["quality of life", "long-term impact", "self-sufficiency"], "type": "cluster", "node_size": 24, "label": "Life Quality"}, "Service Accessibility": {"concepts": "ease of use, hours of operation", "concept_list": ["ease of use", "hours of operation"], "type": "cluster", "node_size": 21, "label": "Service Accessibility"}};
        const conceptData = {};
        const interClusterEdges = [["decision-making", "Urban Barriers", {"weight": 0.25, "confidence": 0.44999999999999996, "type": "inter_cluster", "style": "solid"}], ["Community Engagement", "Community Empowerment", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["Community Engagement", "Social Dynamics", {"weight": 1.0, "confidence": 0.725, "type": "inter_cluster", "style": "solid"}], ["Community Engagement", "Social Networks", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["Social Dynamics", "Infrastructure & Location", {"weight": 0.8, "confidence": 0.61, "type": "inter_cluster", "style": "solid"}], ["Social Dynamics", "Urban Barriers", {"weight": 0.3333333333333333, "confidence": 0.7333333333333334, "type": "inter_cluster", "style": "solid"}], ["Social Dynamics", "Recipient Experience", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["Social Dynamics", "System Access", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["Social Dynamics", "Social Impact", {"weight": 0.5, "confidence": 0.35, "type": "inter_cluster", "style": "solid"}], ["Infrastructure & Location", "Urban Governance", {"weight": 0.4, "confidence": 0.5199999999999999, "type": "inter_cluster", "style": "solid"}], ["Infrastructure & Location", "Positive Outcomes", {"weight": 0.6666666666666666, "confidence": 0.5166666666666667, "type": "inter_cluster", "style": "solid"}], ["Infrastructure & Location", "decision-making", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["Food Systems", "Service Accessibility", {"weight": 1.0, "confidence": 0.82, "type": "inter_cluster", "style": "solid"}], ["Social Networks", "Recipient Experience", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["System Access", "Institutional Partnerships", {"weight": 0.8, "confidence": 0.49000000000000005, "type": "inter_cluster", "style": "solid"}], ["System Access", "Infrastructure & Location", {"weight": 0.75, "confidence": 0.5125, "type": "inter_cluster", "style": "solid"}], ["System Access", "Essential Workers", {"weight": 0.6666666666666666, "confidence": 0.5833333333333334, "type": "inter_cluster", "style": "solid"}], ["Institutional Partnerships", "Service Accessibility", {"weight": 0.8, "confidence": 0.48999999999999994, "type": "inter_cluster", "style": "solid"}], ["Consumer Choice", "Positive Outcomes", {"weight": 1.0, "confidence": 0.82, "type": "inter_cluster", "style": "solid"}], ["Consumer Choice", "Urban Agriculture", {"weight": 0.8, "confidence": 0.5399999999999999, "type": "inter_cluster", "style": "solid"}], ["Essential Workers", "Program Challenges", {"weight": 0.8, "confidence": 0.5, "type": "inter_cluster", "style": "solid"}], ["Program Challenges", "Community Engagement", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["Urban Governance", "Recipient Experience", {"weight": 0.6666666666666666, "confidence": 0.4166666666666667, "type": "inter_cluster", "style": "solid"}], ["Urban Governance", "Social Dynamics", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["Urban Governance", "Social Networks", {"weight": 0.5, "confidence": 0.4, "type": "inter_cluster", "style": "solid"}], ["Urban Barriers", "Urban Agriculture", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["Urban Barriers", "Recipient Experience", {"weight": -0.5, "confidence": 0.4, "type": "inter_cluster", "style": "solid"}], ["Urban Agriculture", "Social Networks", {"weight": 0.75, "confidence": 0.6125, "type": "inter_cluster", "style": "solid"}], ["Urban Agriculture", "Program Challenges", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["Recipient Experience", "Urban Agriculture", {"weight": 0.5, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Recipient Experience", "Social Dynamics", {"weight": 0.5, "confidence": 0.35, "type": "inter_cluster", "style": "solid"}], ["Social Impact", "Urban Barriers", {"weight": 1.0, "confidence": 0.6333333333333333, "type": "inter_cluster", "style": "solid"}], ["Positive Outcomes", "Service Accessibility", {"weight": 1.0, "confidence": 0.575, "type": "inter_cluster", "style": "solid"}], ["Life Quality", "Food Systems", {"weight": 1.0, "confidence": 0.6625, "type": "inter_cluster", "style": "solid"}], ["Service Accessibility", "Urban Agriculture", {"weight": 0.5, "confidence": 0.325, "type": "inter_cluster", "style": "solid"}], ["Service Accessibility", "Essential Workers", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}]];
        const clusterConcepts = {};
        const clusterEdges = {"Community Engagement": [], "Social Dynamics": [], "Infrastructure & Location": [], "Food Systems": [], "Social Networks": [], "System Access": [], "Institutional Partnerships": [], "Community Empowerment": [], "Consumer Choice": [], "Essential Workers": [], "Program Challenges": [], "Urban Governance": [], "Urban Barriers": [], "Urban Agriculture": [], "Recipient Experience": [], "Social Impact": [], "Positive Outcomes": [], "Life Quality": [], "Service Accessibility": []};
        
        let network;
        let currentView = 'clusters';
        let currentCluster = null;
        let minConfidence = 0.3;
        
        // Network options
        const options = {
            nodes: {
                font: { color: 'white', size: 14 },
                borderWidth: 2,
                shadow: true
            },
            edges: {
                arrows: { to: { enabled: true, scaleFactor: 1.2 } },
                shadow: true,
                smooth: { type: 'continuous' }
            },
            physics: {
                stabilization: { iterations: 100 },
                barnesHut: {
                    gravitationalConstant: -8000,
                    springConstant: 0.001,
                    springLength: 200
                }
            },
            interaction: {
                hover: true,
                selectConnectedEdges: false
            }
        };
        
        function initNetwork() {
            const container = document.getElementById('network');
            const data = getClusterViewData();
            network = new vis.Network(container, data, options);
            
            // Handle cluster clicks for drill-down
            network.on("click", function(params) {
                if (params.nodes.length > 0 && currentView === 'clusters') {
                    const clickedNode = params.nodes[0];
                    if (clusterConcepts[clickedNode]) {
                        showClusterDetail(clickedNode);
                    }
                }
            });
        }
        
        function getClusterViewData() {
            const nodes = [];
            const edges = [];
            
            // Add cluster nodes
            Object.entries(clusterData).forEach(([clusterId, data]) => {
                const concepts = data.concepts || [];
                const conceptsStr = Array.isArray(concepts) ? concepts.join(', ') : concepts;
                
                nodes.push({
                    id: clusterId,
                    label: clusterId,
                    title: `Cluster: ${clusterId}\nConcepts: ${conceptsStr}\nClick to explore internal relationships`,
                    color: '#4A90E2',
                    size: 25 + (conceptsStr.split(',').length * 2),
                    font: { color: 'white' }
                });
            });
            
            // Add inter-cluster edges
            interClusterEdges.forEach(([source, target, edgeData]) => {
                const confidence = edgeData.confidence || 1.0;
                const weight = edgeData.weight || 0;
                
                if (confidence >= minConfidence) {
                    edges.push({
                        from: source,
                        to: target,
                        color: weight > 0 ? '#28A745' : '#DC3545',
                        width: Math.abs(weight) * 3 + 1,
                        title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                        dashes: false
                    });
                }
            });
            
            return { nodes: nodes, edges: edges };
        }
        
        function getClusterDetailData(clusterId) {
            const nodes = [];
            const edges = [];
            
            // Add concept nodes for this cluster
            if (clusterConcepts[clusterId]) {
                clusterConcepts[clusterId].forEach(([conceptId, data]) => {
                    nodes.push({
                        id: conceptId,
                        label: conceptId,
                        title: `Concept: ${conceptId}\nFrom cluster: ${clusterId}`,
                        color: '#FF9500',
                        size: 20,
                        font: { color: 'white' }
                    });
                });
            }
            
            // Add intra-cluster edges
            if (clusterEdges[clusterId]) {
                clusterEdges[clusterId].forEach(([source, target, edgeData]) => {
                    const confidence = edgeData.confidence || 1.0;
                    const weight = edgeData.weight || 0;
                    
                    if (confidence >= minConfidence) {
                        edges.push({
                            from: source,
                            to: target,
                            color: weight > 0 ? '#28A745' : '#DC3545',
                            width: Math.abs(weight) * 3 + 1,
                            title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                            dashes: true
                        });
                    }
                });
            }
            
            return { nodes: nodes, edges: edges };
        }
        
        function showClusterView() {
            currentView = 'clusters';
            currentCluster = null;
            const data = getClusterViewData();
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'none';
            document.getElementById('current-view').textContent = 'Cluster Overview';
        }
        
        function showClusterDetail(clusterId) {
            currentView = 'concepts';
            currentCluster = clusterId;
            const data = getClusterDetailData(clusterId);
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'inline-block';
            document.getElementById('current-view').textContent = `Inside Cluster: ${clusterId}`;
        }
        
        function updateConfidenceFilter(value) {
            minConfidence = parseFloat(value);
            document.getElementById('confidence-value').textContent = value;
            
            // Refresh current view
            if (currentView === 'clusters') {
                showClusterView();
            } else {
                showClusterDetail(currentCluster);
            }
        }
        
        // Initialize the network when page loads
        window.onload = function() {
            initNetwork();
        };
    </script>
</body>
</html>
