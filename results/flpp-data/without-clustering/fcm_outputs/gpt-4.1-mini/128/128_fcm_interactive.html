
<!DOCTYPE html>
<html>
<head>
    <title>Hierarchical FCM Visualization (Unconnected nodes removed)</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 0; 
            padding: 20px;
            background: #f5f5f5;
        }
        
        #network { 
            width: 100%; 
            height: 600px; 
            border: 2px solid #ccc; 
            background: white;
            border-radius: 8px;
        }
        
        #controls {
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn {
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        
        .btn-primary { background: #4A90E2; color: white; }
        .btn-primary:hover { background: #357ABD; }
        
        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #545b62; }
        
        #current-view {
            font-weight: bold;
            color: #333;
            margin-left: 10px;
        }
        
        #legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-size: 12px;
            max-width: 200px;
        }
        
        .legend-item {
            margin: 5px 0;
            display: flex;
            align-items: center;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .legend-line {
            width: 20px;
            height: 2px;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <h1>Fuzzy Cognitive Map - Hierarchical View</h1>
    
    <div id="controls">
        <button class="btn btn-secondary" id="back-btn" onclick="showClusterView()" style="display: none;">
            ‚Üê Back to Clusters
        </button>
        <span id="current-view">Cluster Overview</span>
        <div style="float: right;">
            <label>Min Confidence: </label>
            <input type="range" id="confidence-slider" min="0" max="1" step="0.1" value="0.3" 
                   onchange="updateConfidenceFilter(this.value)">
            <span id="confidence-value">0.3</span>
        </div>
    </div>
    
    <div id="network"></div>
    
    <div id="legend">
        <h4>Legend</h4>
        <div class="legend-item">
            <div class="legend-color" style="background: #4A90E2;"></div>
            <span>Clusters</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #FF9500;"></div>
            <span>Concepts</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #28A745;"></div>
            <span>Positive relationship</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #DC3545;"></div>
            <span>Negative relationship</span>
        </div>
        <div style="margin-top: 10px; font-style: italic; color: #666;">
            Click clusters to explore internal concepts
        </div>
    </div>

    <script>
        // Embedded data
        const clusterData = {"income decline": {"concepts": "income decline", "concept_list": ["income decline"], "type": "cluster", "node_size": 18, "label": "income decline"}, "consumer behavior": {"concepts": "consumer behavior", "concept_list": ["consumer behavior"], "type": "cluster", "node_size": 18, "label": "consumer behavior"}, "supplemental programs": {"concepts": "supplemental programs", "concept_list": ["supplemental programs"], "type": "cluster", "node_size": 18, "label": "supplemental programs"}, "food purchasing strategies": {"concepts": "food purchasing strategies", "concept_list": ["food purchasing strategies"], "type": "cluster", "node_size": 18, "label": "food purchasing strategies"}, "label reading": {"concepts": "label reading", "concept_list": ["label reading"], "type": "cluster", "node_size": 18, "label": "label reading"}, "caseworker": {"concepts": "caseworker", "concept_list": ["caseworker"], "type": "cluster", "node_size": 18, "label": "caseworker"}, "education": {"concepts": "education", "concept_list": ["education"], "type": "cluster", "node_size": 18, "label": "education"}, "food availability": {"concepts": "food availability", "concept_list": ["food availability"], "type": "cluster", "node_size": 18, "label": "food availability"}, "food distribution": {"concepts": "food distribution", "concept_list": ["food distribution"], "type": "cluster", "node_size": 18, "label": "food distribution"}, "education access": {"concepts": "education access", "concept_list": ["education access"], "type": "cluster", "node_size": 18, "label": "education access"}, "economic status": {"concepts": "economic status", "concept_list": ["economic status"], "type": "cluster", "node_size": 18, "label": "economic status"}, "social trust": {"concepts": "social trust", "concept_list": ["social trust"], "type": "cluster", "node_size": 18, "label": "social trust"}, "flint dynamics": {"concepts": "flint dynamics", "concept_list": ["flint dynamics"], "type": "cluster", "node_size": 18, "label": "flint dynamics"}, "food preservation": {"concepts": "food preservation", "concept_list": ["food preservation"], "type": "cluster", "node_size": 18, "label": "food preservation"}, "social stability": {"concepts": "social stability", "concept_list": ["social stability"], "type": "cluster", "node_size": 18, "label": "social stability"}, "volunteerism": {"concepts": "volunteerism", "concept_list": ["volunteerism"], "type": "cluster", "node_size": 18, "label": "volunteerism"}, "food security": {"concepts": "food security", "concept_list": ["food security"], "type": "cluster", "node_size": 18, "label": "food security"}, "flint": {"concepts": "flint", "concept_list": ["flint"], "type": "cluster", "node_size": 18, "label": "flint"}, "cultural food availability": {"concepts": "cultural food availability", "concept_list": ["cultural food availability"], "type": "cluster", "node_size": 18, "label": "cultural food availability"}, "food literacy": {"concepts": "food literacy", "concept_list": ["food literacy"], "type": "cluster", "node_size": 18, "label": "food literacy"}, "mobility issues": {"concepts": "mobility issues", "concept_list": ["mobility issues"], "type": "cluster", "node_size": 18, "label": "mobility issues"}, "canning equipment": {"concepts": "canning equipment", "concept_list": ["canning equipment"], "type": "cluster", "node_size": 18, "label": "canning equipment"}, "cooking classes": {"concepts": "cooking classes", "concept_list": ["cooking classes"], "type": "cluster", "node_size": 18, "label": "cooking classes"}, "youth engagement": {"concepts": "youth engagement", "concept_list": ["youth engagement"], "type": "cluster", "node_size": 18, "label": "youth engagement"}, "community cohesion": {"concepts": "community cohesion", "concept_list": ["community cohesion"], "type": "cluster", "node_size": 18, "label": "community cohesion"}, "leverage points": {"concepts": "leverage points", "concept_list": ["leverage points"], "type": "cluster", "node_size": 18, "label": "leverage points"}, "time constraints": {"concepts": "time constraints", "concept_list": ["time constraints"], "type": "cluster", "node_size": 18, "label": "time constraints"}, "supplemental nutrition programs": {"concepts": "supplemental nutrition programs", "concept_list": ["supplemental nutrition programs"], "type": "cluster", "node_size": 18, "label": "supplemental nutrition programs"}, "community trust": {"concepts": "community trust", "concept_list": ["community trust"], "type": "cluster", "node_size": 18, "label": "community trust"}, "junk food marketing": {"concepts": "junk food marketing", "concept_list": ["junk food marketing"], "type": "cluster", "node_size": 18, "label": "junk food marketing"}, "decision making": {"concepts": "decision making", "concept_list": ["decision making"], "type": "cluster", "node_size": 18, "label": "decision making"}, "cooking": {"concepts": "cooking", "concept_list": ["cooking"], "type": "cluster", "node_size": 18, "label": "cooking"}, "marketing psychology": {"concepts": "marketing psychology", "concept_list": ["marketing psychology"], "type": "cluster", "node_size": 18, "label": "marketing psychology"}, "water crisis": {"concepts": "water crisis", "concept_list": ["water crisis"], "type": "cluster", "node_size": 18, "label": "water crisis"}, "produce": {"concepts": "produce", "concept_list": ["produce"], "type": "cluster", "node_size": 18, "label": "produce"}, "community respect": {"concepts": "community respect", "concept_list": ["community respect"], "type": "cluster", "node_size": 18, "label": "community respect"}, "financial instability": {"concepts": "financial instability", "concept_list": ["financial instability"], "type": "cluster", "node_size": 18, "label": "financial instability"}, "food system leadership": {"concepts": "food system leadership", "concept_list": ["food system leadership"], "type": "cluster", "node_size": 18, "label": "food system leadership"}, "food scams": {"concepts": "food scams", "concept_list": ["food scams"], "type": "cluster", "node_size": 18, "label": "food scams"}, "social services": {"concepts": "social services", "concept_list": ["social services"], "type": "cluster", "node_size": 18, "label": "social services"}, "food affordability": {"concepts": "food affordability", "concept_list": ["food affordability"], "type": "cluster", "node_size": 18, "label": "food affordability"}, "buy nothing movement": {"concepts": "buy nothing movement", "concept_list": ["buy nothing movement"], "type": "cluster", "node_size": 18, "label": "buy nothing movement"}, "social resources": {"concepts": "social resources", "concept_list": ["social resources"], "type": "cluster", "node_size": 18, "label": "social resources"}, "social attention": {"concepts": "social attention", "concept_list": ["social attention"], "type": "cluster", "node_size": 18, "label": "social attention"}, "nutrition": {"concepts": "nutrition", "concept_list": ["nutrition"], "type": "cluster", "node_size": 18, "label": "nutrition"}, "grocery store layout": {"concepts": "grocery store layout", "concept_list": ["grocery store layout"], "type": "cluster", "node_size": 18, "label": "grocery store layout"}, "food sharing": {"concepts": "food sharing", "concept_list": ["food sharing"], "type": "cluster", "node_size": 18, "label": "food sharing"}, "local economic development": {"concepts": "local economic development", "concept_list": ["local economic development"], "type": "cluster", "node_size": 18, "label": "local economic development"}, "food system": {"concepts": "food system", "concept_list": ["food system"], "type": "cluster", "node_size": 18, "label": "food system"}, "health constraints": {"concepts": "health constraints", "concept_list": ["health constraints"], "type": "cluster", "node_size": 18, "label": "health constraints"}, "food cost disparity": {"concepts": "food cost disparity", "concept_list": ["food cost disparity"], "type": "cluster", "node_size": 18, "label": "food cost disparity"}, "neighborhood safety": {"concepts": "neighborhood safety", "concept_list": ["neighborhood safety"], "type": "cluster", "node_size": 18, "label": "neighborhood safety"}, "illness": {"concepts": "illness", "concept_list": ["illness"], "type": "cluster", "node_size": 18, "label": "illness"}, "food budgeting": {"concepts": "food budgeting", "concept_list": ["food budgeting"], "type": "cluster", "node_size": 18, "label": "food budgeting"}, "canning skills": {"concepts": "canning skills", "concept_list": ["canning skills"], "type": "cluster", "node_size": 18, "label": "canning skills"}, "victory gardens": {"concepts": "victory gardens", "concept_list": ["victory gardens"], "type": "cluster", "node_size": 18, "label": "victory gardens"}, "food labeling": {"concepts": "food labeling", "concept_list": ["food labeling"], "type": "cluster", "node_size": 18, "label": "food labeling"}, "food marketing": {"concepts": "food marketing", "concept_list": ["food marketing"], "type": "cluster", "node_size": 18, "label": "food marketing"}, "food consumption": {"concepts": "food consumption", "concept_list": ["food consumption"], "type": "cluster", "node_size": 18, "label": "food consumption"}, "ethnic foods": {"concepts": "ethnic foods", "concept_list": ["ethnic foods"], "type": "cluster", "node_size": 18, "label": "ethnic foods"}, "food system comfort": {"concepts": "food system comfort", "concept_list": ["food system comfort"], "type": "cluster", "node_size": 18, "label": "food system comfort"}, "poverty level": {"concepts": "poverty level", "concept_list": ["poverty level"], "type": "cluster", "node_size": 18, "label": "poverty level"}, "caregiving": {"concepts": "caregiving", "concept_list": ["caregiving"], "type": "cluster", "node_size": 18, "label": "caregiving"}, "overweight": {"concepts": "overweight", "concept_list": ["overweight"], "type": "cluster", "node_size": 18, "label": "overweight"}, "pamphlet": {"concepts": "pamphlet", "concept_list": ["pamphlet"], "type": "cluster", "node_size": 18, "label": "pamphlet"}, "carbs": {"concepts": "carbs", "concept_list": ["carbs"], "type": "cluster", "node_size": 18, "label": "carbs"}, "income threshold": {"concepts": "income threshold", "concept_list": ["income threshold"], "type": "cluster", "node_size": 18, "label": "income threshold"}, "food insecurity": {"concepts": "food insecurity", "concept_list": ["food insecurity"], "type": "cluster", "node_size": 18, "label": "food insecurity"}, "benefits": {"concepts": "benefits", "concept_list": ["benefits"], "type": "cluster", "node_size": 18, "label": "benefits"}, "economic resources": {"concepts": "economic resources", "concept_list": ["economic resources"], "type": "cluster", "node_size": 18, "label": "economic resources"}, "food economy": {"concepts": "food economy", "concept_list": ["food economy"], "type": "cluster", "node_size": 18, "label": "food economy"}, "funding challenges": {"concepts": "funding challenges", "concept_list": ["funding challenges"], "type": "cluster", "node_size": 18, "label": "funding challenges"}, "food accessibility": {"concepts": "food accessibility", "concept_list": ["food accessibility"], "type": "cluster", "node_size": 18, "label": "food accessibility"}, "systemic change": {"concepts": "systemic change", "concept_list": ["systemic change"], "type": "cluster", "node_size": 18, "label": "systemic change"}, "food partnerships": {"concepts": "food partnerships", "concept_list": ["food partnerships"], "type": "cluster", "node_size": 18, "label": "food partnerships"}, "food system community": {"concepts": "food system community", "concept_list": ["food system community"], "type": "cluster", "node_size": 18, "label": "food system community"}, "pop tarts": {"concepts": "pop tarts", "concept_list": ["pop tarts"], "type": "cluster", "node_size": 18, "label": "pop tarts"}, "empowerment": {"concepts": "empowerment", "concept_list": ["empowerment"], "type": "cluster", "node_size": 18, "label": "empowerment"}, "food subsidies": {"concepts": "food subsidies", "concept_list": ["food subsidies"], "type": "cluster", "node_size": 18, "label": "food subsidies"}, "covid-19 impact": {"concepts": "covid-19 impact", "concept_list": ["covid-19 impact"], "type": "cluster", "node_size": 18, "label": "covid-19 impact"}, "food preparation": {"concepts": "food preparation", "concept_list": ["food preparation"], "type": "cluster", "node_size": 18, "label": "food preparation"}, "fast food": {"concepts": "fast food", "concept_list": ["fast food"], "type": "cluster", "node_size": 18, "label": "fast food"}, "handouts": {"concepts": "handouts", "concept_list": ["handouts"], "type": "cluster", "node_size": 18, "label": "handouts"}, "food waste": {"concepts": "food waste", "concept_list": ["food waste"], "type": "cluster", "node_size": 18, "label": "food waste"}, "double up food bucks": {"concepts": "double up food bucks", "concept_list": ["double up food bucks"], "type": "cluster", "node_size": 18, "label": "double up food bucks"}, "resilience": {"concepts": "resilience", "concept_list": ["resilience"], "type": "cluster", "node_size": 18, "label": "resilience"}, "mutual aid": {"concepts": "mutual aid", "concept_list": ["mutual aid"], "type": "cluster", "node_size": 18, "label": "mutual aid"}, "cultural values": {"concepts": "cultural values", "concept_list": ["cultural values"], "type": "cluster", "node_size": 18, "label": "cultural values"}, "canning": {"concepts": "canning", "concept_list": ["canning"], "type": "cluster", "node_size": 18, "label": "canning"}, "social movements": {"concepts": "social movements", "concept_list": ["social movements"], "type": "cluster", "node_size": 18, "label": "social movements"}, "social psychology": {"concepts": "social psychology", "concept_list": ["social psychology"], "type": "cluster", "node_size": 18, "label": "social psychology"}, "food system trust": {"concepts": "food system trust", "concept_list": ["food system trust"], "type": "cluster", "node_size": 18, "label": "food system trust"}, "social disparity": {"concepts": "social disparity", "concept_list": ["social disparity"], "type": "cluster", "node_size": 18, "label": "social disparity"}, "social programs": {"concepts": "social programs", "concept_list": ["social programs"], "type": "cluster", "node_size": 18, "label": "social programs"}, "food additives": {"concepts": "food additives", "concept_list": ["food additives"], "type": "cluster", "node_size": 18, "label": "food additives"}, "social equity": {"concepts": "social equity", "concept_list": ["social equity"], "type": "cluster", "node_size": 18, "label": "social equity"}, "trust": {"concepts": "trust", "concept_list": ["trust"], "type": "cluster", "node_size": 18, "label": "trust"}, "complacency": {"concepts": "complacency", "concept_list": ["complacency"], "type": "cluster", "node_size": 18, "label": "complacency"}, "pandemic": {"concepts": "pandemic", "concept_list": ["pandemic"], "type": "cluster", "node_size": 18, "label": "pandemic"}, "resource access": {"concepts": "resource access", "concept_list": ["resource access"], "type": "cluster", "node_size": 18, "label": "resource access"}, "universities": {"concepts": "universities", "concept_list": ["universities"], "type": "cluster", "node_size": 18, "label": "universities"}, "pandemic response": {"concepts": "pandemic response", "concept_list": ["pandemic response"], "type": "cluster", "node_size": 18, "label": "pandemic response"}, "food supplements": {"concepts": "food supplements", "concept_list": ["food supplements"], "type": "cluster", "node_size": 18, "label": "food supplements"}, "urban agriculture": {"concepts": "urban agriculture", "concept_list": ["urban agriculture"], "type": "cluster", "node_size": 18, "label": "urban agriculture"}, "food system sectors": {"concepts": "food system sectors", "concept_list": ["food system sectors"], "type": "cluster", "node_size": 18, "label": "food system sectors"}, "pandemic impact": {"concepts": "pandemic impact", "concept_list": ["pandemic impact"], "type": "cluster", "node_size": 18, "label": "pandemic impact"}, "social awareness": {"concepts": "social awareness", "concept_list": ["social awareness"], "type": "cluster", "node_size": 18, "label": "social awareness"}, "flint food system": {"concepts": "flint food system", "concept_list": ["flint food system"], "type": "cluster", "node_size": 18, "label": "flint food system"}, "social interaction": {"concepts": "social interaction", "concept_list": ["social interaction"], "type": "cluster", "node_size": 18, "label": "social interaction"}, "healthcare": {"concepts": "healthcare", "concept_list": ["healthcare"], "type": "cluster", "node_size": 18, "label": "healthcare"}, "social judgment": {"concepts": "social judgment", "concept_list": ["social judgment"], "type": "cluster", "node_size": 18, "label": "social judgment"}, "grocery stores": {"concepts": "grocery stores", "concept_list": ["grocery stores"], "type": "cluster", "node_size": 18, "label": "grocery stores"}, "social bias": {"concepts": "social bias", "concept_list": ["social bias"], "type": "cluster", "node_size": 18, "label": "social bias"}, "community groups": {"concepts": "community groups", "concept_list": ["community groups"], "type": "cluster", "node_size": 18, "label": "community groups"}, "food system safety": {"concepts": "food system safety", "concept_list": ["food system safety"], "type": "cluster", "node_size": 18, "label": "food system safety"}, "food preferences": {"concepts": "food preferences", "concept_list": ["food preferences"], "type": "cluster", "node_size": 18, "label": "food preferences"}, "community collaboration": {"concepts": "community collaboration", "concept_list": ["community collaboration"], "type": "cluster", "node_size": 18, "label": "community collaboration"}, "food system challenges": {"concepts": "food system challenges", "concept_list": ["food system challenges"], "type": "cluster", "node_size": 18, "label": "food system challenges"}, "food shopping": {"concepts": "food shopping", "concept_list": ["food shopping"], "type": "cluster", "node_size": 18, "label": "food shopping"}, "community education": {"concepts": "community education", "concept_list": ["community education"], "type": "cluster", "node_size": 18, "label": "community education"}, "community resilience": {"concepts": "community resilience", "concept_list": ["community resilience"], "type": "cluster", "node_size": 18, "label": "community resilience"}, "food system collaboration": {"concepts": "food system collaboration", "concept_list": ["food system collaboration"], "type": "cluster", "node_size": 18, "label": "food system collaboration"}, "food choices": {"concepts": "food choices", "concept_list": ["food choices"], "type": "cluster", "node_size": 18, "label": "food choices"}, "retail food sector": {"concepts": "retail food sector", "concept_list": ["retail food sector"], "type": "cluster", "node_size": 18, "label": "retail food sector"}, "communication": {"concepts": "communication", "concept_list": ["communication"], "type": "cluster", "node_size": 18, "label": "communication"}, "vegetables": {"concepts": "vegetables", "concept_list": ["vegetables"], "type": "cluster", "node_size": 18, "label": "vegetables"}, "cost offset": {"concepts": "cost offset", "concept_list": ["cost offset"], "type": "cluster", "node_size": 18, "label": "cost offset"}, "neighborhood networks": {"concepts": "neighborhood networks", "concept_list": ["neighborhood networks"], "type": "cluster", "node_size": 18, "label": "neighborhood networks"}, "food convenience": {"concepts": "food convenience", "concept_list": ["food convenience"], "type": "cluster", "node_size": 18, "label": "food convenience"}, "health outcomes": {"concepts": "health outcomes", "concept_list": ["health outcomes"], "type": "cluster", "node_size": 18, "label": "health outcomes"}, "tax dollars": {"concepts": "tax dollars", "concept_list": ["tax dollars"], "type": "cluster", "node_size": 18, "label": "tax dollars"}, "food environment": {"concepts": "food environment", "concept_list": ["food environment"], "type": "cluster", "node_size": 18, "label": "food environment"}, "food deserts": {"concepts": "food deserts", "concept_list": ["food deserts"], "type": "cluster", "node_size": 18, "label": "food deserts"}, "social chasm": {"concepts": "social chasm", "concept_list": ["social chasm"], "type": "cluster", "node_size": 18, "label": "social chasm"}, "food system support": {"concepts": "food system support", "concept_list": ["food system support"], "type": "cluster", "node_size": 18, "label": "food system support"}, "tax policy": {"concepts": "tax policy", "concept_list": ["tax policy"], "type": "cluster", "node_size": 18, "label": "tax policy"}, "social dynamics": {"concepts": "social dynamics", "concept_list": ["social dynamics"], "type": "cluster", "node_size": 18, "label": "social dynamics"}, "food judgment": {"concepts": "food judgment", "concept_list": ["food judgment"], "type": "cluster", "node_size": 18, "label": "food judgment"}, "convenience stores": {"concepts": "convenience stores", "concept_list": ["convenience stores"], "type": "cluster", "node_size": 18, "label": "convenience stores"}, "food system creativity": {"concepts": "food system creativity", "concept_list": ["food system creativity"], "type": "cluster", "node_size": 18, "label": "food system creativity"}, "judgment and decision making": {"concepts": "judgment and decision making", "concept_list": ["judgment and decision making"], "type": "cluster", "node_size": 18, "label": "judgment and decision making"}, "resource sharing": {"concepts": "resource sharing", "concept_list": ["resource sharing"], "type": "cluster", "node_size": 18, "label": "resource sharing"}, "food cost": {"concepts": "food cost", "concept_list": ["food cost"], "type": "cluster", "node_size": 18, "label": "food cost"}, "churches": {"concepts": "churches", "concept_list": ["churches"], "type": "cluster", "node_size": 18, "label": "churches"}, "welfare stigma": {"concepts": "welfare stigma", "concept_list": ["welfare stigma"], "type": "cluster", "node_size": 18, "label": "welfare stigma"}, "food demand": {"concepts": "food demand", "concept_list": ["food demand"], "type": "cluster", "node_size": 18, "label": "food demand"}, "resource availability": {"concepts": "resource availability", "concept_list": ["resource availability"], "type": "cluster", "node_size": 18, "label": "resource availability"}, "civil rights": {"concepts": "civil rights", "concept_list": ["civil rights"], "type": "cluster", "node_size": 18, "label": "civil rights"}, "dignity": {"concepts": "dignity", "concept_list": ["dignity"], "type": "cluster", "node_size": 18, "label": "dignity"}, "community gardens": {"concepts": "community gardens", "concept_list": ["community gardens"], "type": "cluster", "node_size": 18, "label": "community gardens"}, "food assistance programs": {"concepts": "food assistance programs", "concept_list": ["food assistance programs"], "type": "cluster", "node_size": 18, "label": "food assistance programs"}, "economic inequality": {"concepts": "economic inequality", "concept_list": ["economic inequality"], "type": "cluster", "node_size": 18, "label": "economic inequality"}, "food quantity": {"concepts": "food quantity", "concept_list": ["food quantity"], "type": "cluster", "node_size": 18, "label": "food quantity"}, "demographics": {"concepts": "demographics", "concept_list": ["demographics"], "type": "cluster", "node_size": 18, "label": "demographics"}, "snap": {"concepts": "snap", "concept_list": ["snap"], "type": "cluster", "node_size": 18, "label": "snap"}, "food skills": {"concepts": "food skills", "concept_list": ["food skills"], "type": "cluster", "node_size": 18, "label": "food skills"}, "convenience": {"concepts": "convenience", "concept_list": ["convenience"], "type": "cluster", "node_size": 18, "label": "convenience"}, "judgment": {"concepts": "judgment", "concept_list": ["judgment"], "type": "cluster", "node_size": 18, "label": "judgment"}, "food purchasing behavior": {"concepts": "food purchasing behavior", "concept_list": ["food purchasing behavior"], "type": "cluster", "node_size": 18, "label": "food purchasing behavior"}, "grocery store": {"concepts": "grocery store", "concept_list": ["grocery store"], "type": "cluster", "node_size": 18, "label": "grocery store"}, "cultural relevance": {"concepts": "cultural relevance", "concept_list": ["cultural relevance"], "type": "cluster", "node_size": 18, "label": "cultural relevance"}, "food education": {"concepts": "food education", "concept_list": ["food education"], "type": "cluster", "node_size": 18, "label": "food education"}, "social progress": {"concepts": "social progress", "concept_list": ["social progress"], "type": "cluster", "node_size": 18, "label": "social progress"}, "community activity": {"concepts": "community activity", "concept_list": ["community activity"], "type": "cluster", "node_size": 18, "label": "community activity"}, "nutritious foods": {"concepts": "nutritious foods", "concept_list": ["nutritious foods"], "type": "cluster", "node_size": 18, "label": "nutritious foods"}, "financial hardship": {"concepts": "financial hardship", "concept_list": ["financial hardship"], "type": "cluster", "node_size": 18, "label": "financial hardship"}, "police relations": {"concepts": "police relations", "concept_list": ["police relations"], "type": "cluster", "node_size": 18, "label": "police relations"}, "food policy": {"concepts": "food policy", "concept_list": ["food policy"], "type": "cluster", "node_size": 18, "label": "food policy"}, "community empowerment": {"concepts": "community empowerment", "concept_list": ["community empowerment"], "type": "cluster", "node_size": 18, "label": "community empowerment"}, "community mindset": {"concepts": "community mindset", "concept_list": ["community mindset"], "type": "cluster", "node_size": 18, "label": "community mindset"}, "food culture": {"concepts": "food culture", "concept_list": ["food culture"], "type": "cluster", "node_size": 18, "label": "food culture"}, "political system": {"concepts": "political system", "concept_list": ["political system"], "type": "cluster", "node_size": 18, "label": "political system"}, "farmers markets": {"concepts": "farmers markets", "concept_list": ["farmers markets"], "type": "cluster", "node_size": 18, "label": "farmers markets"}, "vandalism prevention": {"concepts": "vandalism prevention", "concept_list": ["vandalism prevention"], "type": "cluster", "node_size": 18, "label": "vandalism prevention"}, "food habits": {"concepts": "food habits", "concept_list": ["food habits"], "type": "cluster", "node_size": 18, "label": "food habits"}, "collaboration": {"concepts": "collaboration", "concept_list": ["collaboration"], "type": "cluster", "node_size": 18, "label": "collaboration"}, "affordability": {"concepts": "affordability", "concept_list": ["affordability"], "type": "cluster", "node_size": 18, "label": "affordability"}, "food system communication": {"concepts": "food system communication", "concept_list": ["food system communication"], "type": "cluster", "node_size": 18, "label": "food system communication"}, "social inequality": {"concepts": "social inequality", "concept_list": ["social inequality"], "type": "cluster", "node_size": 18, "label": "social inequality"}, "social support": {"concepts": "social support", "concept_list": ["social support"], "type": "cluster", "node_size": 18, "label": "social support"}, "food system values": {"concepts": "food system values", "concept_list": ["food system values"], "type": "cluster", "node_size": 18, "label": "food system values"}, "community activism": {"concepts": "community activism", "concept_list": ["community activism"], "type": "cluster", "node_size": 18, "label": "community activism"}, "career development": {"concepts": "career development", "concept_list": ["career development"], "type": "cluster", "node_size": 18, "label": "career development"}, "candy counter": {"concepts": "candy counter", "concept_list": ["candy counter"], "type": "cluster", "node_size": 18, "label": "candy counter"}, "gardening": {"concepts": "gardening", "concept_list": ["gardening"], "type": "cluster", "node_size": 18, "label": "gardening"}, "cut of meat": {"concepts": "cut of meat", "concept_list": ["cut of meat"], "type": "cluster", "node_size": 18, "label": "cut of meat"}, "food benefits": {"concepts": "food benefits", "concept_list": ["food benefits"], "type": "cluster", "node_size": 18, "label": "food benefits"}, "social networks": {"concepts": "social networks", "concept_list": ["social networks"], "type": "cluster", "node_size": 18, "label": "social networks"}};
        const conceptData = {};
        const interClusterEdges = [["income decline", "victory gardens", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["income decline", "food benefits", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["consumer behavior", "pop tarts", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["consumer behavior", "food cost disparity", {"weight": -1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["consumer behavior", "gardening", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["supplemental programs", "food affordability", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["supplemental programs", "churches", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["food purchasing strategies", "social dynamics", {"weight": 1.0, "confidence": 0.6499999999999999, "type": "inter_cluster", "style": "solid"}], ["label reading", "convenience stores", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["caseworker", "health outcomes", {"weight": 1.0, "confidence": 0.5, "type": "inter_cluster", "style": "solid"}], ["economic status", "resilience", {"weight": 1.0, "confidence": 0.675, "type": "inter_cluster", "style": "solid"}], ["economic status", "benefits", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["social trust", "youth engagement", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["social trust", "judgment", {"weight": -1.0, "confidence": 0.95, "type": "inter_cluster", "style": "solid"}], ["flint dynamics", "social awareness", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["food preservation", "consumer behavior", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["food preservation", "food system values", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["social stability", "vegetables", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["volunteerism", "social inequality", {"weight": -1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["food security", "food system support", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["flint", "ethnic foods", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["cultural food availability", "food assistance programs", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["mobility issues", "grocery store", {"weight": -1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["canning equipment", "food skills", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["youth engagement", "nutrition", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["leverage points", "food system community", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["leverage points", "food quantity", {"weight": 1.0, "confidence": 0.5, "type": "inter_cluster", "style": "solid"}], ["time constraints", "education access", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["supplemental nutrition programs", "junk food marketing", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["supplemental nutrition programs", "pandemic", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["supplemental nutrition programs", "volunteerism", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["community trust", "social psychology", {"weight": -1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["decision making", "food supplements", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["cooking", "retail food sector", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["water crisis", "food education", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["water crisis", "cooking classes", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["water crisis", "victory gardens", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["community respect", "food shopping", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["food system leadership", "pamphlet", {"weight": -1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["food scams", "food skills", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["social services", "food quantity", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["food affordability", "local economic development", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["buy nothing movement", "flint dynamics", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["social attention", "food cost disparity", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["social attention", "flint food system", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["grocery store layout", "food system challenges", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["local economic development", "flint dynamics", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["local economic development", "food consumption", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["local economic development", "canning", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["health constraints", "convenience", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["neighborhood safety", "financial instability", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["neighborhood safety", "food system comfort", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["illness", "community trust", {"weight": -1.0, "confidence": 0.5, "type": "inter_cluster", "style": "solid"}], ["food budgeting", "social disparity", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["canning skills", "food purchasing behavior", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["food labeling", "ethnic foods", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["food system comfort", "food benefits", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["food system comfort", "resource availability", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["poverty level", "social progress", {"weight": -1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["caregiving", "food policy", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["caregiving", "systemic change", {"weight": 0.5, "confidence": 0.25, "type": "inter_cluster", "style": "solid"}], ["overweight", "grocery stores", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["income threshold", "pop tarts", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["income threshold", "community resilience", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["food insecurity", "food environment", {"weight": -1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["benefits", "economic resources", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["economic resources", "judgment and decision making", {"weight": -1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["food economy", "label reading", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["funding challenges", "food distribution", {"weight": -1.0, "confidence": 0.725, "type": "inter_cluster", "style": "solid"}], ["funding challenges", "community cohesion", {"weight": -1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["funding challenges", "income threshold", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["food accessibility", "resource sharing", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["systemic change", "supplemental nutrition programs", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["food partnerships", "food purchasing behavior", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["food partnerships", "community collaboration", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["empowerment", "junk food marketing", {"weight": -1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["empowerment", "affordability", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["covid-19 impact", "food literacy", {"weight": 1.0, "confidence": 0.625, "type": "inter_cluster", "style": "solid"}], ["food preparation", "cut of meat", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["food preparation", "flint", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["fast food", "community education", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["handouts", "food availability", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["handouts", "social trust", {"weight": -1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["food waste", "food purchasing behavior", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["resilience", "complacency", {"weight": -1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["mutual aid", "collaboration", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["social psychology", "empowerment", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["food system trust", "cultural values", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["social disparity", "food system values", {"weight": -1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["social disparity", "food additives", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["social disparity", "food system collaboration", {"weight": -1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["social disparity", "supplemental programs", {"weight": -1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["food additives", "food system safety", {"weight": -1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["food additives", "education", {"weight": -1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["food additives", "cultural relevance", {"weight": -1.0, "confidence": 0.5, "type": "inter_cluster", "style": "solid"}], ["social equity", "junk food marketing", {"weight": -1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["trust", "funding challenges", {"weight": -1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["universities", "social interaction", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["food supplements", "social resources", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["food supplements", "health constraints", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["food system sectors", "urban agriculture", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["social awareness", "neighborhood safety", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["social awareness", "resource access", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["social interaction", "food system community", {"weight": 1.0, "confidence": 0.8666666666666667, "type": "inter_cluster", "style": "solid"}], ["social interaction", "food economy", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["social interaction", "food supplements", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["social interaction", "community education", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["social judgment", "food insecurity", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["social bias", "community trust", {"weight": -1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["community groups", "food system support", {"weight": 1.0, "confidence": 0.9, "type": "inter_cluster", "style": "solid"}], ["community groups", "social judgment", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["food system safety", "food budgeting", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["food preferences", "food habits", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["community collaboration", "produce", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["community collaboration", "social awareness", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["community resilience", "junk food marketing", {"weight": -1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["food choices", "nutrition", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["retail food sector", "dignity", {"weight": -1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["communication", "pamphlet", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["cost offset", "tax policy", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["cost offset", "resource sharing", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["cost offset", "food deserts", {"weight": -1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["cost offset", "food system collaboration", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["neighborhood networks", "cooking", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["food convenience", "grocery stores", {"weight": 1.0, "confidence": 0.8666666666666667, "type": "inter_cluster", "style": "solid"}], ["food convenience", "food environment", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["food convenience", "carbs", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["tax dollars", "economic resources", {"weight": 1.0, "confidence": 0.7250000000000001, "type": "inter_cluster", "style": "solid"}], ["food environment", "affordability", {"weight": -1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["food deserts", "economic inequality", {"weight": 1.0, "confidence": 0.8000000000000002, "type": "inter_cluster", "style": "solid"}], ["food deserts", "handouts", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["social chasm", "neighborhood safety", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["food system support", "food partnerships", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["tax policy", "social programs", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["social dynamics", "food demand", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["social dynamics", "food policy", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["food judgment", "cultural food availability", {"weight": -1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["convenience stores", "food preservation", {"weight": -1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["food system creativity", "food system support", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["judgment and decision making", "food subsidies", {"weight": -1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["food cost", "leverage points", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["welfare stigma", "neighborhood safety", {"weight": -1.0, "confidence": 0.575, "type": "inter_cluster", "style": "solid"}], ["food demand", "judgment", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["food demand", "community gardens", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["civil rights", "food deserts", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["community gardens", "food system leadership", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["food assistance programs", "community collaboration", {"weight": 1.0, "confidence": 0.675, "type": "inter_cluster", "style": "solid"}], ["economic inequality", "poverty level", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["demographics", "social movements", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["snap", "food subsidies", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["snap", "pandemic response", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["food purchasing behavior", "food economy", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["grocery store", "farmers markets", {"weight": -1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["community activity", "food system", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["nutritious foods", "social support", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["financial hardship", "food marketing", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["police relations", "pandemic impact", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["community empowerment", "nutritious foods", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["community empowerment", "food system leadership", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["community empowerment", "food system collaboration", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["food culture", "canning skills", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["political system", "complacency", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["farmers markets", "mutual aid", {"weight": 1.0, "confidence": 0.5, "type": "inter_cluster", "style": "solid"}], ["vandalism prevention", "food system challenges", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["vandalism prevention", "food education", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["food system communication", "social services", {"weight": -1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["food system communication", "food sharing", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["social inequality", "food distribution", {"weight": -1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["social support", "social resources", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["social support", "healthcare", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["food system values", "marketing psychology", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["food system values", "double up food bucks", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["community activism", "junk food marketing", {"weight": -1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["community activism", "social awareness", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["community activism", "food assistance programs", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["career development", "social psychology", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["candy counter", "community mindset", {"weight": -1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["gardening", "food preparation", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["gardening", "food literacy", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["gardening", "victory gardens", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["social networks", "community activism", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}]];
        const clusterConcepts = {};
        const clusterEdges = {};
        
        let network;
        let currentView = 'clusters';
        let currentCluster = null;
        let minConfidence = 0.3;
        
        // Network options
        const options = {
            nodes: {
                font: { color: 'white', size: 14 },
                borderWidth: 2,
                shadow: true
            },
            edges: {
                arrows: { to: { enabled: true, scaleFactor: 1.2 } },
                shadow: true,
                smooth: { type: 'continuous' }
            },
            physics: {
                stabilization: { iterations: 100 },
                barnesHut: {
                    gravitationalConstant: -8000,
                    springConstant: 0.001,
                    springLength: 200
                }
            },
            interaction: {
                hover: true,
                selectConnectedEdges: false
            }
        };
        
        function initNetwork() {
            const container = document.getElementById('network');
            const data = getClusterViewData();
            network = new vis.Network(container, data, options);
            
            // Handle cluster clicks for drill-down
            network.on("click", function(params) {
                if (params.nodes.length > 0 && currentView === 'clusters') {
                    const clickedNode = params.nodes[0];
                    if (clusterConcepts[clickedNode]) {
                        showClusterDetail(clickedNode);
                    }
                }
            });
        }
        
        function getClusterViewData() {
            const nodes = [];
            const edges = [];
            
            // Add cluster nodes
            Object.entries(clusterData).forEach(([clusterId, data]) => {
                const concepts = data.concepts || [];
                const conceptsStr = Array.isArray(concepts) ? concepts.join(', ') : concepts;
                
                nodes.push({
                    id: clusterId,
                    label: clusterId,
                    title: `Cluster: ${clusterId}\nConcepts: ${conceptsStr}\nClick to explore internal relationships`,
                    color: '#4A90E2',
                    size: 25 + (conceptsStr.split(',').length * 2),
                    font: { color: 'white' }
                });
            });
            
            // Add inter-cluster edges
            interClusterEdges.forEach(([source, target, edgeData]) => {
                const confidence = edgeData.confidence || 1.0;
                const weight = edgeData.weight || 0;
                
                if (confidence >= minConfidence) {
                    edges.push({
                        from: source,
                        to: target,
                        color: weight > 0 ? '#28A745' : '#DC3545',
                        width: Math.abs(weight) * 3 + 1,
                        title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                        dashes: false
                    });
                }
            });
            
            return { nodes: nodes, edges: edges };
        }
        
        function getClusterDetailData(clusterId) {
            const nodes = [];
            const edges = [];
            
            // Add concept nodes for this cluster
            if (clusterConcepts[clusterId]) {
                clusterConcepts[clusterId].forEach(([conceptId, data]) => {
                    nodes.push({
                        id: conceptId,
                        label: conceptId,
                        title: `Concept: ${conceptId}\nFrom cluster: ${clusterId}`,
                        color: '#FF9500',
                        size: 20,
                        font: { color: 'white' }
                    });
                });
            }
            
            // Add intra-cluster edges
            if (clusterEdges[clusterId]) {
                clusterEdges[clusterId].forEach(([source, target, edgeData]) => {
                    const confidence = edgeData.confidence || 1.0;
                    const weight = edgeData.weight || 0;
                    
                    if (confidence >= minConfidence) {
                        edges.push({
                            from: source,
                            to: target,
                            color: weight > 0 ? '#28A745' : '#DC3545',
                            width: Math.abs(weight) * 3 + 1,
                            title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                            dashes: true
                        });
                    }
                });
            }
            
            return { nodes: nodes, edges: edges };
        }
        
        function showClusterView() {
            currentView = 'clusters';
            currentCluster = null;
            const data = getClusterViewData();
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'none';
            document.getElementById('current-view').textContent = 'Cluster Overview';
        }
        
        function showClusterDetail(clusterId) {
            currentView = 'concepts';
            currentCluster = clusterId;
            const data = getClusterDetailData(clusterId);
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'inline-block';
            document.getElementById('current-view').textContent = `Inside Cluster: ${clusterId}`;
        }
        
        function updateConfidenceFilter(value) {
            minConfidence = parseFloat(value);
            document.getElementById('confidence-value').textContent = value;
            
            // Refresh current view
            if (currentView === 'clusters') {
                showClusterView();
            } else {
                showClusterDetail(currentCluster);
            }
        }
        
        // Initialize the network when page loads
        window.onload = function() {
            initNetwork();
        };
    </script>
</body>
</html>
