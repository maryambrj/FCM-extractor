
<!DOCTYPE html>
<html>
<head>
    <title>Hierarchical FCM Visualization</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 0; 
            padding: 20px;
            background: #f5f5f5;
        }
        
        #network { 
            width: 100%; 
            height: 600px; 
            border: 2px solid #ccc; 
            background: white;
            border-radius: 8px;
        }
        
        #controls {
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn {
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        
        .btn-primary { background: #4A90E2; color: white; }
        .btn-primary:hover { background: #357ABD; }
        
        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #545b62; }
        
        #current-view {
            font-weight: bold;
            color: #333;
            margin-left: 10px;
        }
        
        #legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-size: 12px;
            max-width: 200px;
        }
        
        .legend-item {
            margin: 5px 0;
            display: flex;
            align-items: center;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .legend-line {
            width: 20px;
            height: 2px;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <h1>Fuzzy Cognitive Map - Hierarchical View</h1>
    
    <div id="controls">
        <button class="btn btn-secondary" id="back-btn" onclick="showClusterView()" style="display: none;">
            ‚Üê Back to Clusters
        </button>
        <span id="current-view">Cluster Overview</span>
        <div style="float: right;">
            <label>Min Confidence: </label>
            <input type="range" id="confidence-slider" min="0" max="1" step="0.1" value="0.3" 
                   onchange="updateConfidenceFilter(this.value)">
            <span id="confidence-value">0.3</span>
        </div>
    </div>
    
    <div id="network"></div>
    
    <div id="legend">
        <h4>Legend</h4>
        <div class="legend-item">
            <div class="legend-color" style="background: #4A90E2;"></div>
            <span>Clusters</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #FF9500;"></div>
            <span>Concepts</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #28A745;"></div>
            <span>Positive relationship</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #DC3545;"></div>
            <span>Negative relationship</span>
        </div>
        <div style="margin-top: 10px; font-style: italic; color: #666;">
            Click clusters to explore internal concepts
        </div>
    </div>

    <script>
        // Embedded data
        const clusterData = {"Species Management": {"concepts": "habitat restoration, ecosystem protection, bacteria, ecosystem restoration", "concept_list": ["habitat restoration", "ecosystem protection", "bacteria", "ecosystem restoration"], "type": "cluster", "node_size": 27, "label": "Species Management"}, "Ecosystem Health": {"concepts": "non-native species, native species, invasive species removal", "concept_list": ["non-native species", "native species", "invasive species removal"], "type": "cluster", "node_size": 24, "label": "Ecosystem Health"}, "Marine Conservation": {"concepts": "blue carbon, healthy ecosystems, nutrient flux, excess nutrients, natural balance, healthy ecosystem, top predators, ecosystem complexity, harmful organisms, natural inventory, ecosystem balance, nutrient influx, ecosystem health", "concept_list": ["blue carbon", "healthy ecosystems", "nutrient flux", "excess nutrients", "natural balance", "healthy ecosystem", "top predators", "ecosystem complexity", "harmful organisms", "natural inventory", "ecosystem balance", "nutrient influx", "ecosystem health"], "type": "cluster", "node_size": 54, "label": "Marine Conservation"}, "Management Strategies": {"concepts": "fisheries policy, marine ecosystems, sea turtles, stressors, anadromous fish, marine policy, nearshore waters, marine mammals, oyster reef restoration, lionfish, marine ecosystem, pollutants, marine biology, salmon, sea level rise, contaminant spills, coral reefs, marine, marine ecology, pollutant spills, aquatic biology, contaminants, storm surge, oyster reefs, tropical storms, marine conservation, oil spill damage, marine assessment, marine resource management, shellfish", "concept_list": ["fisheries policy", "marine ecosystems", "sea turtles", "stressors", "anadromous fish", "marine policy", "nearshore waters", "marine mammals", "oyster reef restoration", "lionfish", "marine ecosystem", "pollutants", "marine biology", "salmon", "sea level rise", "contaminant spills", "coral reefs", "marine", "marine ecology", "pollutant spills", "aquatic biology", "contaminants", "storm surge", "oyster reefs", "tropical storms", "marine conservation", "oil spill damage", "marine assessment", "marine resource management", "shellfish"], "type": "cluster", "node_size": 105, "label": "Management Strategies"}, "Ecosystem Restoration": {"concepts": "consulting firms, management approaches, management action, upstream management, management approach, management components", "concept_list": ["consulting firms", "management approaches", "management action", "upstream management", "management approach", "management components"], "type": "cluster", "node_size": 33, "label": "Ecosystem Restoration"}, "Conservation Strategies": {"concepts": "qualitative aggregation, meeting, stakeholders, human action, university of washington, importation bans, quantitative process, comprehensive model, conservation, non-natives, experts, army corps of engineers, relationships, interviewing, travel arrangements, policies., concepts, area of expertise, no-take areas, uc santa barbara, geospatial analysis, arrangements, current work, gulf of mexico, sedimentation, master\u2019s degree, mapping, no take areas, workshop, time, urchins, qualitative process, travel office, nature conservancy, everglades restoration", "concept_list": ["qualitative aggregation", "meeting", "stakeholders", "human action", "university of washington", "importation bans", "quantitative process", "comprehensive model", "conservation", "non-natives", "experts", "army corps of engineers", "relationships", "interviewing", "travel arrangements", "policies.", "concepts", "area of expertise", "no-take areas", "uc santa barbara", "geospatial analysis", "arrangements", "current work", "gulf of mexico", "sedimentation", "master\u2019s degree", "mapping", "no take areas", "workshop", "time", "urchins", "qualitative process", "travel office", "nature conservancy", "everglades restoration"], "type": "cluster", "node_size": 120, "label": "Conservation Strategies"}, "Ecosystem Conservation": {"concepts": "food web, broad ecosystem protection, balance, ecosystem protections, invasive species, baseline biodiversity data, food sources, mangrove forests, species of conservation concern, conservation concern, biodiversity measurement, habitat forming species, baseline biodiversity", "concept_list": ["food web", "broad ecosystem protection", "balance", "ecosystem protections", "invasive species", "baseline biodiversity data", "food sources", "mangrove forests", "species of conservation concern", "conservation concern", "biodiversity measurement", "habitat forming species", "baseline biodiversity"], "type": "cluster", "node_size": 54, "label": "Ecosystem Conservation"}, "Species Ecology": {"concepts": "native organism abundance, species distribution, species richness, species diversity", "concept_list": ["native organism abundance", "species distribution", "species richness", "species diversity"], "type": "cluster", "node_size": 27, "label": "Species Ecology"}, "Food Web Dynamics": {"concepts": "key food web species, key food web supporting species, species support", "concept_list": ["key food web species", "key food web supporting species", "species support"], "type": "cluster", "node_size": 24, "label": "Food Web Dynamics"}, "Stakeholder Collaboration": {"concepts": "biodiversity, microbial communities, species removal", "concept_list": ["biodiversity", "microbial communities", "species removal"], "type": "cluster", "node_size": 24, "label": "Stakeholder Collaboration"}, "Wetland Impact": {"concepts": "wetlands, wetland filling", "concept_list": ["wetlands", "wetland filling"], "type": "cluster", "node_size": 21, "label": "Wetland Impact"}, "Estuary Systems": {"concepts": "estuaries, estuary ecosystem, estuarine systems, estuary", "concept_list": ["estuaries", "estuary ecosystem", "estuarine systems", "estuary"], "type": "cluster", "node_size": 27, "label": "Estuary Systems"}, "Coastal Resilience": {"concepts": "coastal ecosystems, coastal ecosystem, coastal resilience", "concept_list": ["coastal ecosystems", "coastal ecosystem", "coastal resilience"], "type": "cluster", "node_size": 24, "label": "Coastal Resilience"}};
        const conceptData = {"habitat restoration": {"concepts": "habitat restoration", "type": "concept", "cluster": "Species Management", "node_size": 10, "label": "habitat restoration"}, "ecosystem protection": {"concepts": "ecosystem protection", "type": "concept", "cluster": "Species Management", "node_size": 10, "label": "ecosystem protection"}, "bacteria": {"concepts": "bacteria", "type": "concept", "cluster": "Species Management", "node_size": 10, "label": "bacteria"}, "ecosystem restoration": {"concepts": "ecosystem restoration", "type": "concept", "cluster": "Species Management", "node_size": 10, "label": "ecosystem restoration"}, "non-native species": {"concepts": "non-native species", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "non-native species"}, "native species": {"concepts": "native species", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "native species"}, "invasive species removal": {"concepts": "invasive species removal", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "invasive species removal"}, "blue carbon": {"concepts": "blue carbon", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "blue carbon"}, "healthy ecosystems": {"concepts": "healthy ecosystems", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "healthy ecosystems"}, "nutrient flux": {"concepts": "nutrient flux", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "nutrient flux"}, "excess nutrients": {"concepts": "excess nutrients", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "excess nutrients"}, "natural balance": {"concepts": "natural balance", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "natural balance"}, "healthy ecosystem": {"concepts": "healthy ecosystem", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "healthy ecosystem"}, "top predators": {"concepts": "top predators", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "top predators"}, "ecosystem complexity": {"concepts": "ecosystem complexity", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "ecosystem complexity"}, "harmful organisms": {"concepts": "harmful organisms", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "harmful organisms"}, "natural inventory": {"concepts": "natural inventory", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "natural inventory"}, "ecosystem balance": {"concepts": "ecosystem balance", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "ecosystem balance"}, "nutrient influx": {"concepts": "nutrient influx", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "nutrient influx"}, "ecosystem health": {"concepts": "ecosystem health", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "ecosystem health"}, "fisheries policy": {"concepts": "fisheries policy", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "fisheries policy"}, "marine ecosystems": {"concepts": "marine ecosystems", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "marine ecosystems"}, "sea turtles": {"concepts": "sea turtles", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "sea turtles"}, "stressors": {"concepts": "stressors", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "stressors"}, "anadromous fish": {"concepts": "anadromous fish", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "anadromous fish"}, "marine policy": {"concepts": "marine policy", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "marine policy"}, "nearshore waters": {"concepts": "nearshore waters", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "nearshore waters"}, "marine mammals": {"concepts": "marine mammals", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "marine mammals"}, "oyster reef restoration": {"concepts": "oyster reef restoration", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "oyster reef restoration"}, "lionfish": {"concepts": "lionfish", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "lionfish"}, "marine ecosystem": {"concepts": "marine ecosystem", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "marine ecosystem"}, "pollutants": {"concepts": "pollutants", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "pollutants"}, "marine biology": {"concepts": "marine biology", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "marine biology"}, "salmon": {"concepts": "salmon", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "salmon"}, "sea level rise": {"concepts": "sea level rise", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "sea level rise"}, "contaminant spills": {"concepts": "contaminant spills", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "contaminant spills"}, "coral reefs": {"concepts": "coral reefs", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "coral reefs"}, "marine": {"concepts": "marine", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "marine"}, "marine ecology": {"concepts": "marine ecology", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "marine ecology"}, "pollutant spills": {"concepts": "pollutant spills", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "pollutant spills"}, "aquatic biology": {"concepts": "aquatic biology", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "aquatic biology"}, "contaminants": {"concepts": "contaminants", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "contaminants"}, "storm surge": {"concepts": "storm surge", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "storm surge"}, "oyster reefs": {"concepts": "oyster reefs", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "oyster reefs"}, "tropical storms": {"concepts": "tropical storms", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "tropical storms"}, "marine conservation": {"concepts": "marine conservation", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "marine conservation"}, "oil spill damage": {"concepts": "oil spill damage", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "oil spill damage"}, "marine assessment": {"concepts": "marine assessment", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "marine assessment"}, "marine resource management": {"concepts": "marine resource management", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "marine resource management"}, "shellfish": {"concepts": "shellfish", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "shellfish"}, "consulting firms": {"concepts": "consulting firms", "type": "concept", "cluster": "Ecosystem Restoration", "node_size": 10, "label": "consulting firms"}, "management approaches": {"concepts": "management approaches", "type": "concept", "cluster": "Ecosystem Restoration", "node_size": 10, "label": "management approaches"}, "management action": {"concepts": "management action", "type": "concept", "cluster": "Ecosystem Restoration", "node_size": 10, "label": "management action"}, "upstream management": {"concepts": "upstream management", "type": "concept", "cluster": "Ecosystem Restoration", "node_size": 10, "label": "upstream management"}, "management approach": {"concepts": "management approach", "type": "concept", "cluster": "Ecosystem Restoration", "node_size": 10, "label": "management approach"}, "management components": {"concepts": "management components", "type": "concept", "cluster": "Ecosystem Restoration", "node_size": 10, "label": "management components"}, "qualitative aggregation": {"concepts": "qualitative aggregation", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "qualitative aggregation"}, "meeting": {"concepts": "meeting", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "meeting"}, "stakeholders": {"concepts": "stakeholders", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "stakeholders"}, "human action": {"concepts": "human action", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "human action"}, "university of washington": {"concepts": "university of washington", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "university of washington"}, "importation bans": {"concepts": "importation bans", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "importation bans"}, "quantitative process": {"concepts": "quantitative process", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "quantitative process"}, "comprehensive model": {"concepts": "comprehensive model", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "comprehensive model"}, "conservation": {"concepts": "conservation", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "conservation"}, "non-natives": {"concepts": "non-natives", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "non-natives"}, "experts": {"concepts": "experts", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "experts"}, "army corps of engineers": {"concepts": "army corps of engineers", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "army corps of engineers"}, "relationships": {"concepts": "relationships", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "relationships"}, "interviewing": {"concepts": "interviewing", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "interviewing"}, "travel arrangements": {"concepts": "travel arrangements", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "travel arrangements"}, "policies.": {"concepts": "policies.", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "policies."}, "concepts": {"concepts": "concepts", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "concepts"}, "area of expertise": {"concepts": "area of expertise", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "area of expertise"}, "no-take areas": {"concepts": "no-take areas", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "no-take areas"}, "uc santa barbara": {"concepts": "uc santa barbara", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "uc santa barbara"}, "geospatial analysis": {"concepts": "geospatial analysis", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "geospatial analysis"}, "arrangements": {"concepts": "arrangements", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "arrangements"}, "current work": {"concepts": "current work", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "current work"}, "gulf of mexico": {"concepts": "gulf of mexico", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "gulf of mexico"}, "sedimentation": {"concepts": "sedimentation", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "sedimentation"}, "master\u2019s degree": {"concepts": "master\u2019s degree", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "master\u2019s degree"}, "mapping": {"concepts": "mapping", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "mapping"}, "no take areas": {"concepts": "no take areas", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "no take areas"}, "workshop": {"concepts": "workshop", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "workshop"}, "time": {"concepts": "time", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "time"}, "urchins": {"concepts": "urchins", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "urchins"}, "qualitative process": {"concepts": "qualitative process", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "qualitative process"}, "travel office": {"concepts": "travel office", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "travel office"}, "nature conservancy": {"concepts": "nature conservancy", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "nature conservancy"}, "everglades restoration": {"concepts": "everglades restoration", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "everglades restoration"}, "food web": {"concepts": "food web", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "food web"}, "broad ecosystem protection": {"concepts": "broad ecosystem protection", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "broad ecosystem protection"}, "balance": {"concepts": "balance", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "balance"}, "ecosystem protections": {"concepts": "ecosystem protections", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "ecosystem protections"}, "invasive species": {"concepts": "invasive species", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "invasive species"}, "baseline biodiversity data": {"concepts": "baseline biodiversity data", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "baseline biodiversity data"}, "food sources": {"concepts": "food sources", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "food sources"}, "mangrove forests": {"concepts": "mangrove forests", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "mangrove forests"}, "species of conservation concern": {"concepts": "species of conservation concern", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "species of conservation concern"}, "conservation concern": {"concepts": "conservation concern", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "conservation concern"}, "biodiversity measurement": {"concepts": "biodiversity measurement", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "biodiversity measurement"}, "habitat forming species": {"concepts": "habitat forming species", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "habitat forming species"}, "baseline biodiversity": {"concepts": "baseline biodiversity", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "baseline biodiversity"}, "native organism abundance": {"concepts": "native organism abundance", "type": "concept", "cluster": "Species Ecology", "node_size": 10, "label": "native organism abundance"}, "species distribution": {"concepts": "species distribution", "type": "concept", "cluster": "Species Ecology", "node_size": 10, "label": "species distribution"}, "species richness": {"concepts": "species richness", "type": "concept", "cluster": "Species Ecology", "node_size": 10, "label": "species richness"}, "species diversity": {"concepts": "species diversity", "type": "concept", "cluster": "Species Ecology", "node_size": 10, "label": "species diversity"}, "key food web species": {"concepts": "key food web species", "type": "concept", "cluster": "Food Web Dynamics", "node_size": 10, "label": "key food web species"}, "key food web supporting species": {"concepts": "key food web supporting species", "type": "concept", "cluster": "Food Web Dynamics", "node_size": 10, "label": "key food web supporting species"}, "species support": {"concepts": "species support", "type": "concept", "cluster": "Food Web Dynamics", "node_size": 10, "label": "species support"}, "biodiversity": {"concepts": "biodiversity", "type": "concept", "cluster": "Stakeholder Collaboration", "node_size": 10, "label": "biodiversity"}, "microbial communities": {"concepts": "microbial communities", "type": "concept", "cluster": "Stakeholder Collaboration", "node_size": 10, "label": "microbial communities"}, "species removal": {"concepts": "species removal", "type": "concept", "cluster": "Stakeholder Collaboration", "node_size": 10, "label": "species removal"}, "wetlands": {"concepts": "wetlands", "type": "concept", "cluster": "Wetland Impact", "node_size": 10, "label": "wetlands"}, "wetland filling": {"concepts": "wetland filling", "type": "concept", "cluster": "Wetland Impact", "node_size": 10, "label": "wetland filling"}, "estuaries": {"concepts": "estuaries", "type": "concept", "cluster": "Estuary Systems", "node_size": 10, "label": "estuaries"}, "estuary ecosystem": {"concepts": "estuary ecosystem", "type": "concept", "cluster": "Estuary Systems", "node_size": 10, "label": "estuary ecosystem"}, "estuarine systems": {"concepts": "estuarine systems", "type": "concept", "cluster": "Estuary Systems", "node_size": 10, "label": "estuarine systems"}, "estuary": {"concepts": "estuary", "type": "concept", "cluster": "Estuary Systems", "node_size": 10, "label": "estuary"}, "coastal ecosystems": {"concepts": "coastal ecosystems", "type": "concept", "cluster": "Coastal Resilience", "node_size": 10, "label": "coastal ecosystems"}, "coastal ecosystem": {"concepts": "coastal ecosystem", "type": "concept", "cluster": "Coastal Resilience", "node_size": 10, "label": "coastal ecosystem"}, "coastal resilience": {"concepts": "coastal resilience", "type": "concept", "cluster": "Coastal Resilience", "node_size": 10, "label": "coastal resilience"}};
        const interClusterEdges = [["Species Management", "Stakeholder Collaboration", {"weight": 1.0, "confidence": 0.7875, "type": "inter_cluster", "style": "solid"}], ["Species Management", "Conservation Strategies", {"weight": 0.8, "confidence": 0.64, "type": "inter_cluster", "style": "solid"}], ["Species Management", "Ecosystem Health", {"weight": 1.0, "confidence": 0.7999999999999999, "type": "inter_cluster", "style": "solid"}], ["Species Management", "Species Ecology", {"weight": 0.25, "confidence": 0.6125, "type": "inter_cluster", "style": "solid"}], ["Species Management", "Coastal Resilience", {"weight": 0.75, "confidence": 0.6125, "type": "inter_cluster", "style": "solid"}], ["Species Management", "Ecosystem Conservation", {"weight": 0.4, "confidence": 0.32999999999999996, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Health", "Food Web Dynamics", {"weight": 0.4, "confidence": 0.66, "type": "inter_cluster", "style": "solid"}], ["Marine Conservation", "Management Strategies", {"weight": 0.8, "confidence": 0.67, "type": "inter_cluster", "style": "solid"}], ["Marine Conservation", "Ecosystem Restoration", {"weight": 1.0, "confidence": 0.7999999999999999, "type": "inter_cluster", "style": "solid"}], ["Marine Conservation", "Species Ecology", {"weight": 0.75, "confidence": 0.6375, "type": "inter_cluster", "style": "solid"}], ["Marine Conservation", "Conservation Strategies", {"weight": 0.6, "confidence": 0.45999999999999996, "type": "inter_cluster", "style": "solid"}], ["Management Strategies", "Conservation Strategies", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["Management Strategies", "Wetland Impact", {"weight": -0.4, "confidence": 0.6299999999999999, "type": "inter_cluster", "style": "solid"}], ["Management Strategies", "Estuary Systems", {"weight": 0.6, "confidence": 0.49000000000000005, "type": "inter_cluster", "style": "solid"}], ["Management Strategies", "Ecosystem Health", {"weight": 0.6, "confidence": 0.47000000000000003, "type": "inter_cluster", "style": "solid"}], ["Management Strategies", "Coastal Resilience", {"weight": 0.5, "confidence": 0.4, "type": "inter_cluster", "style": "solid"}], ["Management Strategies", "Species Ecology", {"weight": 0.4, "confidence": 0.32999999999999996, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Restoration", "Estuary Systems", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Restoration", "Ecosystem Health", {"weight": 0.4, "confidence": 0.63, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Restoration", "Conservation Strategies", {"weight": -0.25, "confidence": 0.5875, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Restoration", "Marine Conservation", {"weight": 0.6, "confidence": 0.45999999999999996, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Restoration", "Management Strategies", {"weight": 0.3333333333333333, "confidence": 0.25, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Restoration", "Species Ecology", {"weight": -0.3333333333333333, "confidence": 0.25, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Conservation", "Conservation Strategies", {"weight": 0.4, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Conservation", "Marine Conservation", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Conservation", "Estuary Systems", {"weight": 0.8, "confidence": 0.5800000000000001, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Conservation", "Species Management", {"weight": 0.4, "confidence": 0.32999999999999996, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Conservation", "Coastal Resilience", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["Species Ecology", "Stakeholder Collaboration", {"weight": 0.8, "confidence": 0.6300000000000001, "type": "inter_cluster", "style": "solid"}], ["Species Ecology", "Wetland Impact", {"weight": -0.2, "confidence": 0.47000000000000003, "type": "inter_cluster", "style": "solid"}], ["Species Ecology", "Coastal Resilience", {"weight": 0.2, "confidence": 0.47000000000000003, "type": "inter_cluster", "style": "solid"}], ["Food Web Dynamics", "Stakeholder Collaboration", {"weight": 0.4, "confidence": 0.31, "type": "inter_cluster", "style": "solid"}], ["Food Web Dynamics", "Species Ecology", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["Stakeholder Collaboration", "Coastal Resilience", {"weight": 1.0, "confidence": 0.7799999999999999, "type": "inter_cluster", "style": "solid"}], ["Stakeholder Collaboration", "Species Management", {"weight": 0.75, "confidence": 0.625, "type": "inter_cluster", "style": "solid"}], ["Stakeholder Collaboration", "Ecosystem Conservation", {"weight": 0.6, "confidence": 0.45, "type": "inter_cluster", "style": "solid"}], ["Stakeholder Collaboration", "Marine Conservation", {"weight": 0.5, "confidence": 0.4, "type": "inter_cluster", "style": "solid"}], ["Wetland Impact", "Estuary Systems", {"weight": -0.25, "confidence": 0.5875, "type": "inter_cluster", "style": "solid"}], ["Wetland Impact", "Species Ecology", {"weight": -0.2, "confidence": 0.45999999999999996, "type": "inter_cluster", "style": "solid"}], ["Wetland Impact", "Species Management", {"weight": -0.2, "confidence": 0.4699999999999999, "type": "inter_cluster", "style": "solid"}], ["Wetland Impact", "Stakeholder Collaboration", {"weight": -0.4, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Estuary Systems", "Ecosystem Restoration", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["Estuary Systems", "Management Strategies", {"weight": 0.8, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["Estuary Systems", "Food Web Dynamics", {"weight": 0.5, "confidence": 0.3875, "type": "inter_cluster", "style": "solid"}], ["Coastal Resilience", "Management Strategies", {"weight": 0.5, "confidence": 0.7625, "type": "inter_cluster", "style": "solid"}], ["Coastal Resilience", "Ecosystem Health", {"weight": 0.8, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["Coastal Resilience", "Conservation Strategies", {"weight": 0.6, "confidence": 0.45999999999999996, "type": "inter_cluster", "style": "solid"}], ["Coastal Resilience", "Wetland Impact", {"weight": -0.6, "confidence": 0.44000000000000006, "type": "inter_cluster", "style": "solid"}], ["Coastal Resilience", "Stakeholder Collaboration", {"weight": 0.2, "confidence": 0.49000000000000005, "type": "inter_cluster", "style": "solid"}], ["Coastal Resilience", "Species Ecology", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["Coastal Resilience", "Species Management", {"weight": 0.6666666666666666, "confidence": 0.5333333333333333, "type": "inter_cluster", "style": "solid"}], ["Coastal Resilience", "Marine Conservation", {"weight": 0.5, "confidence": 0.425, "type": "inter_cluster", "style": "solid"}], ["Coastal Resilience", "Ecosystem Restoration", {"weight": -0.5, "confidence": 0.425, "type": "inter_cluster", "style": "solid"}], ["Coastal Resilience", "Food Web Dynamics", {"weight": 0.3333333333333333, "confidence": 0.26666666666666666, "type": "inter_cluster", "style": "solid"}]];
        const clusterConcepts = {"Species Management": [["habitat restoration", {"concepts": "habitat restoration", "type": "concept", "cluster": "Species Management", "node_size": 10, "label": "habitat restoration"}], ["ecosystem protection", {"concepts": "ecosystem protection", "type": "concept", "cluster": "Species Management", "node_size": 10, "label": "ecosystem protection"}], ["bacteria", {"concepts": "bacteria", "type": "concept", "cluster": "Species Management", "node_size": 10, "label": "bacteria"}], ["ecosystem restoration", {"concepts": "ecosystem restoration", "type": "concept", "cluster": "Species Management", "node_size": 10, "label": "ecosystem restoration"}]], "Ecosystem Health": [["non-native species", {"concepts": "non-native species", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "non-native species"}], ["native species", {"concepts": "native species", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "native species"}], ["invasive species removal", {"concepts": "invasive species removal", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "invasive species removal"}]], "Marine Conservation": [["blue carbon", {"concepts": "blue carbon", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "blue carbon"}], ["healthy ecosystems", {"concepts": "healthy ecosystems", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "healthy ecosystems"}], ["nutrient flux", {"concepts": "nutrient flux", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "nutrient flux"}], ["excess nutrients", {"concepts": "excess nutrients", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "excess nutrients"}], ["natural balance", {"concepts": "natural balance", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "natural balance"}], ["healthy ecosystem", {"concepts": "healthy ecosystem", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "healthy ecosystem"}], ["top predators", {"concepts": "top predators", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "top predators"}], ["ecosystem complexity", {"concepts": "ecosystem complexity", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "ecosystem complexity"}], ["harmful organisms", {"concepts": "harmful organisms", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "harmful organisms"}], ["natural inventory", {"concepts": "natural inventory", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "natural inventory"}], ["ecosystem balance", {"concepts": "ecosystem balance", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "ecosystem balance"}], ["nutrient influx", {"concepts": "nutrient influx", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "nutrient influx"}], ["ecosystem health", {"concepts": "ecosystem health", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "ecosystem health"}]], "Management Strategies": [["fisheries policy", {"concepts": "fisheries policy", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "fisheries policy"}], ["marine ecosystems", {"concepts": "marine ecosystems", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "marine ecosystems"}], ["sea turtles", {"concepts": "sea turtles", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "sea turtles"}], ["stressors", {"concepts": "stressors", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "stressors"}], ["anadromous fish", {"concepts": "anadromous fish", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "anadromous fish"}], ["marine policy", {"concepts": "marine policy", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "marine policy"}], ["nearshore waters", {"concepts": "nearshore waters", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "nearshore waters"}], ["marine mammals", {"concepts": "marine mammals", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "marine mammals"}], ["oyster reef restoration", {"concepts": "oyster reef restoration", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "oyster reef restoration"}], ["lionfish", {"concepts": "lionfish", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "lionfish"}], ["marine ecosystem", {"concepts": "marine ecosystem", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "marine ecosystem"}], ["pollutants", {"concepts": "pollutants", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "pollutants"}], ["marine biology", {"concepts": "marine biology", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "marine biology"}], ["salmon", {"concepts": "salmon", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "salmon"}], ["sea level rise", {"concepts": "sea level rise", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "sea level rise"}], ["contaminant spills", {"concepts": "contaminant spills", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "contaminant spills"}], ["coral reefs", {"concepts": "coral reefs", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "coral reefs"}], ["marine", {"concepts": "marine", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "marine"}], ["marine ecology", {"concepts": "marine ecology", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "marine ecology"}], ["pollutant spills", {"concepts": "pollutant spills", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "pollutant spills"}], ["aquatic biology", {"concepts": "aquatic biology", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "aquatic biology"}], ["contaminants", {"concepts": "contaminants", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "contaminants"}], ["storm surge", {"concepts": "storm surge", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "storm surge"}], ["oyster reefs", {"concepts": "oyster reefs", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "oyster reefs"}], ["tropical storms", {"concepts": "tropical storms", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "tropical storms"}], ["marine conservation", {"concepts": "marine conservation", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "marine conservation"}], ["oil spill damage", {"concepts": "oil spill damage", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "oil spill damage"}], ["marine assessment", {"concepts": "marine assessment", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "marine assessment"}], ["marine resource management", {"concepts": "marine resource management", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "marine resource management"}], ["shellfish", {"concepts": "shellfish", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "shellfish"}]], "Ecosystem Restoration": [["consulting firms", {"concepts": "consulting firms", "type": "concept", "cluster": "Ecosystem Restoration", "node_size": 10, "label": "consulting firms"}], ["management approaches", {"concepts": "management approaches", "type": "concept", "cluster": "Ecosystem Restoration", "node_size": 10, "label": "management approaches"}], ["management action", {"concepts": "management action", "type": "concept", "cluster": "Ecosystem Restoration", "node_size": 10, "label": "management action"}], ["upstream management", {"concepts": "upstream management", "type": "concept", "cluster": "Ecosystem Restoration", "node_size": 10, "label": "upstream management"}], ["management approach", {"concepts": "management approach", "type": "concept", "cluster": "Ecosystem Restoration", "node_size": 10, "label": "management approach"}], ["management components", {"concepts": "management components", "type": "concept", "cluster": "Ecosystem Restoration", "node_size": 10, "label": "management components"}]], "Conservation Strategies": [["qualitative aggregation", {"concepts": "qualitative aggregation", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "qualitative aggregation"}], ["meeting", {"concepts": "meeting", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "meeting"}], ["stakeholders", {"concepts": "stakeholders", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "stakeholders"}], ["human action", {"concepts": "human action", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "human action"}], ["university of washington", {"concepts": "university of washington", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "university of washington"}], ["importation bans", {"concepts": "importation bans", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "importation bans"}], ["quantitative process", {"concepts": "quantitative process", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "quantitative process"}], ["comprehensive model", {"concepts": "comprehensive model", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "comprehensive model"}], ["conservation", {"concepts": "conservation", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "conservation"}], ["non-natives", {"concepts": "non-natives", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "non-natives"}], ["experts", {"concepts": "experts", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "experts"}], ["army corps of engineers", {"concepts": "army corps of engineers", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "army corps of engineers"}], ["relationships", {"concepts": "relationships", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "relationships"}], ["interviewing", {"concepts": "interviewing", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "interviewing"}], ["travel arrangements", {"concepts": "travel arrangements", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "travel arrangements"}], ["policies.", {"concepts": "policies.", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "policies."}], ["concepts", {"concepts": "concepts", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "concepts"}], ["area of expertise", {"concepts": "area of expertise", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "area of expertise"}], ["no-take areas", {"concepts": "no-take areas", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "no-take areas"}], ["uc santa barbara", {"concepts": "uc santa barbara", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "uc santa barbara"}], ["geospatial analysis", {"concepts": "geospatial analysis", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "geospatial analysis"}], ["arrangements", {"concepts": "arrangements", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "arrangements"}], ["current work", {"concepts": "current work", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "current work"}], ["gulf of mexico", {"concepts": "gulf of mexico", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "gulf of mexico"}], ["sedimentation", {"concepts": "sedimentation", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "sedimentation"}], ["master\u2019s degree", {"concepts": "master\u2019s degree", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "master\u2019s degree"}], ["mapping", {"concepts": "mapping", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "mapping"}], ["no take areas", {"concepts": "no take areas", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "no take areas"}], ["workshop", {"concepts": "workshop", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "workshop"}], ["time", {"concepts": "time", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "time"}], ["urchins", {"concepts": "urchins", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "urchins"}], ["qualitative process", {"concepts": "qualitative process", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "qualitative process"}], ["travel office", {"concepts": "travel office", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "travel office"}], ["nature conservancy", {"concepts": "nature conservancy", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "nature conservancy"}], ["everglades restoration", {"concepts": "everglades restoration", "type": "concept", "cluster": "Conservation Strategies", "node_size": 10, "label": "everglades restoration"}]], "Ecosystem Conservation": [["food web", {"concepts": "food web", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "food web"}], ["broad ecosystem protection", {"concepts": "broad ecosystem protection", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "broad ecosystem protection"}], ["balance", {"concepts": "balance", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "balance"}], ["ecosystem protections", {"concepts": "ecosystem protections", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "ecosystem protections"}], ["invasive species", {"concepts": "invasive species", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "invasive species"}], ["baseline biodiversity data", {"concepts": "baseline biodiversity data", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "baseline biodiversity data"}], ["food sources", {"concepts": "food sources", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "food sources"}], ["mangrove forests", {"concepts": "mangrove forests", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "mangrove forests"}], ["species of conservation concern", {"concepts": "species of conservation concern", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "species of conservation concern"}], ["conservation concern", {"concepts": "conservation concern", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "conservation concern"}], ["biodiversity measurement", {"concepts": "biodiversity measurement", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "biodiversity measurement"}], ["habitat forming species", {"concepts": "habitat forming species", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "habitat forming species"}], ["baseline biodiversity", {"concepts": "baseline biodiversity", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "baseline biodiversity"}]], "Species Ecology": [["native organism abundance", {"concepts": "native organism abundance", "type": "concept", "cluster": "Species Ecology", "node_size": 10, "label": "native organism abundance"}], ["species distribution", {"concepts": "species distribution", "type": "concept", "cluster": "Species Ecology", "node_size": 10, "label": "species distribution"}], ["species richness", {"concepts": "species richness", "type": "concept", "cluster": "Species Ecology", "node_size": 10, "label": "species richness"}], ["species diversity", {"concepts": "species diversity", "type": "concept", "cluster": "Species Ecology", "node_size": 10, "label": "species diversity"}]], "Food Web Dynamics": [["key food web species", {"concepts": "key food web species", "type": "concept", "cluster": "Food Web Dynamics", "node_size": 10, "label": "key food web species"}], ["key food web supporting species", {"concepts": "key food web supporting species", "type": "concept", "cluster": "Food Web Dynamics", "node_size": 10, "label": "key food web supporting species"}], ["species support", {"concepts": "species support", "type": "concept", "cluster": "Food Web Dynamics", "node_size": 10, "label": "species support"}]], "Stakeholder Collaboration": [["biodiversity", {"concepts": "biodiversity", "type": "concept", "cluster": "Stakeholder Collaboration", "node_size": 10, "label": "biodiversity"}], ["microbial communities", {"concepts": "microbial communities", "type": "concept", "cluster": "Stakeholder Collaboration", "node_size": 10, "label": "microbial communities"}], ["species removal", {"concepts": "species removal", "type": "concept", "cluster": "Stakeholder Collaboration", "node_size": 10, "label": "species removal"}]], "Wetland Impact": [["wetlands", {"concepts": "wetlands", "type": "concept", "cluster": "Wetland Impact", "node_size": 10, "label": "wetlands"}], ["wetland filling", {"concepts": "wetland filling", "type": "concept", "cluster": "Wetland Impact", "node_size": 10, "label": "wetland filling"}]], "Estuary Systems": [["estuaries", {"concepts": "estuaries", "type": "concept", "cluster": "Estuary Systems", "node_size": 10, "label": "estuaries"}], ["estuary ecosystem", {"concepts": "estuary ecosystem", "type": "concept", "cluster": "Estuary Systems", "node_size": 10, "label": "estuary ecosystem"}], ["estuarine systems", {"concepts": "estuarine systems", "type": "concept", "cluster": "Estuary Systems", "node_size": 10, "label": "estuarine systems"}], ["estuary", {"concepts": "estuary", "type": "concept", "cluster": "Estuary Systems", "node_size": 10, "label": "estuary"}]], "Coastal Resilience": [["coastal ecosystems", {"concepts": "coastal ecosystems", "type": "concept", "cluster": "Coastal Resilience", "node_size": 10, "label": "coastal ecosystems"}], ["coastal ecosystem", {"concepts": "coastal ecosystem", "type": "concept", "cluster": "Coastal Resilience", "node_size": 10, "label": "coastal ecosystem"}], ["coastal resilience", {"concepts": "coastal resilience", "type": "concept", "cluster": "Coastal Resilience", "node_size": 10, "label": "coastal resilience"}]]};
        const clusterEdges = {"Species Management": [], "Ecosystem Health": [], "Marine Conservation": [], "Management Strategies": [], "Ecosystem Restoration": [], "Conservation Strategies": [], "Ecosystem Conservation": [], "Species Ecology": [], "Food Web Dynamics": [], "Stakeholder Collaboration": [], "Wetland Impact": [], "Estuary Systems": [], "Coastal Resilience": []};
        
        let network;
        let currentView = 'clusters';
        let currentCluster = null;
        let minConfidence = 0.3;
        
        // Network options
        const options = {
            nodes: {
                font: { color: 'white', size: 14 },
                borderWidth: 2,
                shadow: true
            },
            edges: {
                arrows: { to: { enabled: true, scaleFactor: 1.2 } },
                shadow: true,
                smooth: { type: 'continuous' }
            },
            physics: {
                stabilization: { iterations: 100 },
                barnesHut: {
                    gravitationalConstant: -8000,
                    springConstant: 0.001,
                    springLength: 200
                }
            },
            interaction: {
                hover: true,
                selectConnectedEdges: false
            }
        };
        
        function initNetwork() {
            const container = document.getElementById('network');
            const data = getClusterViewData();
            network = new vis.Network(container, data, options);
            
            // Handle cluster clicks for drill-down
            network.on("click", function(params) {
                if (params.nodes.length > 0 && currentView === 'clusters') {
                    const clickedNode = params.nodes[0];
                    if (clusterConcepts[clickedNode]) {
                        showClusterDetail(clickedNode);
                    }
                }
            });
        }
        
        function getClusterViewData() {
            const nodes = [];
            const edges = [];
            
            // Add cluster nodes
            Object.entries(clusterData).forEach(([clusterId, data]) => {
                const concepts = data.concepts || [];
                const conceptsStr = Array.isArray(concepts) ? concepts.join(', ') : concepts;
                
                nodes.push({
                    id: clusterId,
                    label: clusterId,
                    title: `Cluster: ${clusterId}\nConcepts: ${conceptsStr}\nClick to explore internal relationships`,
                    color: '#4A90E2',
                    size: 25 + (conceptsStr.split(',').length * 2),
                    font: { color: 'white' }
                });
            });
            
            // Add inter-cluster edges
            interClusterEdges.forEach(([source, target, edgeData]) => {
                const confidence = edgeData.confidence || 1.0;
                const weight = edgeData.weight || 0;
                
                if (confidence >= minConfidence) {
                    edges.push({
                        from: source,
                        to: target,
                        color: weight > 0 ? '#28A745' : '#DC3545',
                        width: Math.abs(weight) * 3 + 1,
                        title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                        dashes: false
                    });
                }
            });
            
            return { nodes: nodes, edges: edges };
        }
        
        function getClusterDetailData(clusterId) {
            const nodes = [];
            const edges = [];
            
            // Add concept nodes for this cluster
            if (clusterConcepts[clusterId]) {
                clusterConcepts[clusterId].forEach(([conceptId, data]) => {
                    nodes.push({
                        id: conceptId,
                        label: conceptId,
                        title: `Concept: ${conceptId}\nFrom cluster: ${clusterId}`,
                        color: '#FF9500',
                        size: 20,
                        font: { color: 'white' }
                    });
                });
            }
            
            // Add intra-cluster edges
            if (clusterEdges[clusterId]) {
                clusterEdges[clusterId].forEach(([source, target, edgeData]) => {
                    const confidence = edgeData.confidence || 1.0;
                    const weight = edgeData.weight || 0;
                    
                    if (confidence >= minConfidence) {
                        edges.push({
                            from: source,
                            to: target,
                            color: weight > 0 ? '#28A745' : '#DC3545',
                            width: Math.abs(weight) * 3 + 1,
                            title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                            dashes: true
                        });
                    }
                });
            }
            
            return { nodes: nodes, edges: edges };
        }
        
        function showClusterView() {
            currentView = 'clusters';
            currentCluster = null;
            const data = getClusterViewData();
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'none';
            document.getElementById('current-view').textContent = 'Cluster Overview';
        }
        
        function showClusterDetail(clusterId) {
            currentView = 'concepts';
            currentCluster = clusterId;
            const data = getClusterDetailData(clusterId);
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'inline-block';
            document.getElementById('current-view').textContent = `Inside Cluster: ${clusterId}`;
        }
        
        function updateConfidenceFilter(value) {
            minConfidence = parseFloat(value);
            document.getElementById('confidence-value').textContent = value;
            
            // Refresh current view
            if (currentView === 'clusters') {
                showClusterView();
            } else {
                showClusterDetail(currentCluster);
            }
        }
        
        // Initialize the network when page loads
        window.onload = function() {
            initNetwork();
        };
    </script>
</body>
</html>
