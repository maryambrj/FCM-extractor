
<!DOCTYPE html>
<html>
<head>
    <title>Hierarchical FCM Visualization</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 0; 
            padding: 20px;
            background: #f5f5f5;
        }
        
        #network { 
            width: 100%; 
            height: 600px; 
            border: 2px solid #ccc; 
            background: white;
            border-radius: 8px;
        }
        
        #controls {
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn {
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        
        .btn-primary { background: #4A90E2; color: white; }
        .btn-primary:hover { background: #357ABD; }
        
        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #545b62; }
        
        #current-view {
            font-weight: bold;
            color: #333;
            margin-left: 10px;
        }
        
        #legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-size: 12px;
            max-width: 200px;
        }
        
        .legend-item {
            margin: 5px 0;
            display: flex;
            align-items: center;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .legend-line {
            width: 20px;
            height: 2px;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <h1>Fuzzy Cognitive Map - Hierarchical View</h1>
    
    <div id="controls">
        <button class="btn btn-secondary" id="back-btn" onclick="showClusterView()" style="display: none;">
            ‚Üê Back to Clusters
        </button>
        <span id="current-view">Cluster Overview</span>
        <div style="float: right;">
            <label>Min Confidence: </label>
            <input type="range" id="confidence-slider" min="0" max="1" step="0.1" value="0.3" 
                   onchange="updateConfidenceFilter(this.value)">
            <span id="confidence-value">0.3</span>
        </div>
    </div>
    
    <div id="network"></div>
    
    <div id="legend">
        <h4>Legend</h4>
        <div class="legend-item">
            <div class="legend-color" style="background: #4A90E2;"></div>
            <span>Clusters</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #FF9500;"></div>
            <span>Concepts</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #28A745;"></div>
            <span>Positive relationship</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #DC3545;"></div>
            <span>Negative relationship</span>
        </div>
        <div style="margin-top: 10px; font-style: italic; color: #666;">
            Click clusters to explore internal concepts
        </div>
    </div>

    <script>
        // Embedded data
        const clusterData = {"Marsh Dynamics": {"concepts": "marsh plants, growing season", "concept_list": ["marsh plants", "growing season"], "type": "cluster", "node_size": 21, "label": "Marsh Dynamics"}, "Shoreline Management": {"concepts": "marsh migration, marshes, salish sea, low marsh, salt marsh sparrow, sav beds, sea level rise, storms, natural marsh, salt tolerance, high marsh, salinity changes, climate change, elevation gradient, marsh drowning", "concept_list": ["marsh migration", "marshes", "salish sea", "low marsh", "salt marsh sparrow", "sav beds", "sea level rise", "storms", "natural marsh", "salt tolerance", "high marsh", "salinity changes", "climate change", "elevation gradient", "marsh drowning"], "type": "cluster", "node_size": 60, "label": "Shoreline Management"}, "Ecosystem Resilience": {"concepts": "regulatory agencies, shoreline design, marine resource management, living shoreline law, submerged aquatic vegetation, shoreline law, shoreline, legal compliance, migratory waterfowl, living shoreline, environmental law, living shorelines, marine resource users, water quality, permitters, shoreline management, shoreline hardening, seagrass beds", "concept_list": ["regulatory agencies", "shoreline design", "marine resource management", "living shoreline law", "submerged aquatic vegetation", "shoreline law", "shoreline", "legal compliance", "migratory waterfowl", "living shoreline", "environmental law", "living shorelines", "marine resource users", "water quality", "permitters", "shoreline management", "shoreline hardening", "seagrass beds"], "type": "cluster", "node_size": 69, "label": "Ecosystem Resilience"}, "Species Diversity": {"concepts": "project sustainability, ecological benefit, ecosystem stability, maryland department of the environment, ecosystem services, flooding tolerance, socio-ecological dynamics, environmental trade-offs, ecological goals, system resilience, ecological impact, ecological outcomes, ecosystem resilience, ecosystem benefits, marsh resilience", "concept_list": ["project sustainability", "ecological benefit", "ecosystem stability", "maryland department of the environment", "ecosystem services", "flooding tolerance", "socio-ecological dynamics", "environmental trade-offs", "ecological goals", "system resilience", "ecological impact", "ecological outcomes", "ecosystem resilience", "ecosystem benefits", "marsh resilience"], "type": "cluster", "node_size": 60, "label": "Species Diversity"}, "Marsh Plant Growth": {"concepts": "biodiversity, species diversity, species of conservation concern, species recruitment, key species, keystone species", "concept_list": ["biodiversity", "species diversity", "species of conservation concern", "species recruitment", "key species", "keystone species"], "type": "cluster", "node_size": 33, "label": "Marsh Plant Growth"}, "Coastal Sediment Management": {"concepts": "nutrient storage, sediment layer replacement, sediment supply, snails, fish, facilitator species, thin layer placement, coastal communities, marsh plant diversity, conservation concern, department of natural resources, dredging, erosion mitigation, plant diversity, sediment stressor, species of concern, sediment dynamics, plant communities", "concept_list": ["nutrient storage", "sediment layer replacement", "sediment supply", "snails", "fish", "facilitator species", "thin layer placement", "coastal communities", "marsh plant diversity", "conservation concern", "department of natural resources", "dredging", "erosion mitigation", "plant diversity", "sediment stressor", "species of concern", "sediment dynamics", "plant communities"], "type": "cluster", "node_size": 69, "label": "Coastal Sediment Management"}, "Management Strategies": {"concepts": "management dynamics, organizational interests, regional managers, resource managers, stakeholder dynamics, project success, management approaches", "concept_list": ["management dynamics", "organizational interests", "regional managers", "resource managers", "stakeholder dynamics", "project success", "management approaches"], "type": "cluster", "node_size": 36, "label": "Management Strategies"}, "Coastal Ecosystem Management": {"concepts": "food web, aesthetics, competing interests, relationships, diverse communities, innovative approaches, customer satisfaction, harmful organisms, microbes, high energy environment, cost, property owners, biological organisms, maintenance cost, mental models, non-profits, risk assessment, restoration, erosion, bacteria, for-profit aspect, human alterations, system dynamics, gulf of mexico, practitioners, mucus, perceptions, aesthetic values, system components, chesapeake bay, stressors, algovats, economic impact, policy, cost concerns, knowledge, conservation, diversity, temperature, permits, marsh creation", "concept_list": ["food web", "aesthetics", "competing interests", "relationships", "diverse communities", "innovative approaches", "customer satisfaction", "harmful organisms", "microbes", "high energy environment", "cost", "property owners", "biological organisms", "maintenance cost", "mental models", "non-profits", "risk assessment", "restoration", "erosion", "bacteria", "for-profit aspect", "human alterations", "system dynamics", "gulf of mexico", "practitioners", "mucus", "perceptions", "aesthetic values", "system components", "chesapeake bay", "stressors", "algovats", "economic impact", "policy", "cost concerns", "knowledge", "conservation", "diversity", "temperature", "permits", "marsh creation"], "type": "cluster", "node_size": 138, "label": "Coastal Ecosystem Management"}, "Habitat Management & Restoration": {"concepts": "habitat, adjacent habitat, habitat management, habitat impacts, nesting, habitat restoration, habitat forming species", "concept_list": ["habitat", "adjacent habitat", "habitat management", "habitat impacts", "nesting", "habitat restoration", "habitat forming species"], "type": "cluster", "node_size": 36, "label": "Habitat Management & Restoration"}};
        const conceptData = {"marsh plants": {"concepts": "marsh plants", "type": "concept", "cluster": "Marsh Dynamics", "node_size": 10, "label": "marsh plants"}, "growing season": {"concepts": "growing season", "type": "concept", "cluster": "Marsh Dynamics", "node_size": 10, "label": "growing season"}, "marsh migration": {"concepts": "marsh migration", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "marsh migration"}, "marshes": {"concepts": "marshes", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "marshes"}, "salish sea": {"concepts": "salish sea", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "salish sea"}, "low marsh": {"concepts": "low marsh", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "low marsh"}, "salt marsh sparrow": {"concepts": "salt marsh sparrow", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "salt marsh sparrow"}, "sav beds": {"concepts": "sav beds", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "sav beds"}, "sea level rise": {"concepts": "sea level rise", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "sea level rise"}, "storms": {"concepts": "storms", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "storms"}, "natural marsh": {"concepts": "natural marsh", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "natural marsh"}, "salt tolerance": {"concepts": "salt tolerance", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "salt tolerance"}, "high marsh": {"concepts": "high marsh", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "high marsh"}, "salinity changes": {"concepts": "salinity changes", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "salinity changes"}, "climate change": {"concepts": "climate change", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "climate change"}, "elevation gradient": {"concepts": "elevation gradient", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "elevation gradient"}, "marsh drowning": {"concepts": "marsh drowning", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "marsh drowning"}, "regulatory agencies": {"concepts": "regulatory agencies", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "regulatory agencies"}, "shoreline design": {"concepts": "shoreline design", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "shoreline design"}, "marine resource management": {"concepts": "marine resource management", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "marine resource management"}, "living shoreline law": {"concepts": "living shoreline law", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "living shoreline law"}, "submerged aquatic vegetation": {"concepts": "submerged aquatic vegetation", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "submerged aquatic vegetation"}, "shoreline law": {"concepts": "shoreline law", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "shoreline law"}, "shoreline": {"concepts": "shoreline", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "shoreline"}, "legal compliance": {"concepts": "legal compliance", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "legal compliance"}, "migratory waterfowl": {"concepts": "migratory waterfowl", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "migratory waterfowl"}, "living shoreline": {"concepts": "living shoreline", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "living shoreline"}, "environmental law": {"concepts": "environmental law", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "environmental law"}, "living shorelines": {"concepts": "living shorelines", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "living shorelines"}, "marine resource users": {"concepts": "marine resource users", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "marine resource users"}, "water quality": {"concepts": "water quality", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "water quality"}, "permitters": {"concepts": "permitters", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "permitters"}, "shoreline management": {"concepts": "shoreline management", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "shoreline management"}, "shoreline hardening": {"concepts": "shoreline hardening", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "shoreline hardening"}, "seagrass beds": {"concepts": "seagrass beds", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "seagrass beds"}, "project sustainability": {"concepts": "project sustainability", "type": "concept", "cluster": "Species Diversity", "node_size": 10, "label": "project sustainability"}, "ecological benefit": {"concepts": "ecological benefit", "type": "concept", "cluster": "Species Diversity", "node_size": 10, "label": "ecological benefit"}, "ecosystem stability": {"concepts": "ecosystem stability", "type": "concept", "cluster": "Species Diversity", "node_size": 10, "label": "ecosystem stability"}, "maryland department of the environment": {"concepts": "maryland department of the environment", "type": "concept", "cluster": "Species Diversity", "node_size": 10, "label": "maryland department of the environment"}, "ecosystem services": {"concepts": "ecosystem services", "type": "concept", "cluster": "Species Diversity", "node_size": 10, "label": "ecosystem services"}, "flooding tolerance": {"concepts": "flooding tolerance", "type": "concept", "cluster": "Species Diversity", "node_size": 10, "label": "flooding tolerance"}, "socio-ecological dynamics": {"concepts": "socio-ecological dynamics", "type": "concept", "cluster": "Species Diversity", "node_size": 10, "label": "socio-ecological dynamics"}, "environmental trade-offs": {"concepts": "environmental trade-offs", "type": "concept", "cluster": "Species Diversity", "node_size": 10, "label": "environmental trade-offs"}, "ecological goals": {"concepts": "ecological goals", "type": "concept", "cluster": "Species Diversity", "node_size": 10, "label": "ecological goals"}, "system resilience": {"concepts": "system resilience", "type": "concept", "cluster": "Species Diversity", "node_size": 10, "label": "system resilience"}, "ecological impact": {"concepts": "ecological impact", "type": "concept", "cluster": "Species Diversity", "node_size": 10, "label": "ecological impact"}, "ecological outcomes": {"concepts": "ecological outcomes", "type": "concept", "cluster": "Species Diversity", "node_size": 10, "label": "ecological outcomes"}, "ecosystem resilience": {"concepts": "ecosystem resilience", "type": "concept", "cluster": "Species Diversity", "node_size": 10, "label": "ecosystem resilience"}, "ecosystem benefits": {"concepts": "ecosystem benefits", "type": "concept", "cluster": "Species Diversity", "node_size": 10, "label": "ecosystem benefits"}, "marsh resilience": {"concepts": "marsh resilience", "type": "concept", "cluster": "Species Diversity", "node_size": 10, "label": "marsh resilience"}, "biodiversity": {"concepts": "biodiversity", "type": "concept", "cluster": "Marsh Plant Growth", "node_size": 10, "label": "biodiversity"}, "species diversity": {"concepts": "species diversity", "type": "concept", "cluster": "Marsh Plant Growth", "node_size": 10, "label": "species diversity"}, "species of conservation concern": {"concepts": "species of conservation concern", "type": "concept", "cluster": "Marsh Plant Growth", "node_size": 10, "label": "species of conservation concern"}, "species recruitment": {"concepts": "species recruitment", "type": "concept", "cluster": "Marsh Plant Growth", "node_size": 10, "label": "species recruitment"}, "key species": {"concepts": "key species", "type": "concept", "cluster": "Marsh Plant Growth", "node_size": 10, "label": "key species"}, "keystone species": {"concepts": "keystone species", "type": "concept", "cluster": "Marsh Plant Growth", "node_size": 10, "label": "keystone species"}, "nutrient storage": {"concepts": "nutrient storage", "type": "concept", "cluster": "Coastal Sediment Management", "node_size": 10, "label": "nutrient storage"}, "sediment layer replacement": {"concepts": "sediment layer replacement", "type": "concept", "cluster": "Coastal Sediment Management", "node_size": 10, "label": "sediment layer replacement"}, "sediment supply": {"concepts": "sediment supply", "type": "concept", "cluster": "Coastal Sediment Management", "node_size": 10, "label": "sediment supply"}, "snails": {"concepts": "snails", "type": "concept", "cluster": "Coastal Sediment Management", "node_size": 10, "label": "snails"}, "fish": {"concepts": "fish", "type": "concept", "cluster": "Coastal Sediment Management", "node_size": 10, "label": "fish"}, "facilitator species": {"concepts": "facilitator species", "type": "concept", "cluster": "Coastal Sediment Management", "node_size": 10, "label": "facilitator species"}, "thin layer placement": {"concepts": "thin layer placement", "type": "concept", "cluster": "Coastal Sediment Management", "node_size": 10, "label": "thin layer placement"}, "coastal communities": {"concepts": "coastal communities", "type": "concept", "cluster": "Coastal Sediment Management", "node_size": 10, "label": "coastal communities"}, "marsh plant diversity": {"concepts": "marsh plant diversity", "type": "concept", "cluster": "Coastal Sediment Management", "node_size": 10, "label": "marsh plant diversity"}, "conservation concern": {"concepts": "conservation concern", "type": "concept", "cluster": "Coastal Sediment Management", "node_size": 10, "label": "conservation concern"}, "department of natural resources": {"concepts": "department of natural resources", "type": "concept", "cluster": "Coastal Sediment Management", "node_size": 10, "label": "department of natural resources"}, "dredging": {"concepts": "dredging", "type": "concept", "cluster": "Coastal Sediment Management", "node_size": 10, "label": "dredging"}, "erosion mitigation": {"concepts": "erosion mitigation", "type": "concept", "cluster": "Coastal Sediment Management", "node_size": 10, "label": "erosion mitigation"}, "plant diversity": {"concepts": "plant diversity", "type": "concept", "cluster": "Coastal Sediment Management", "node_size": 10, "label": "plant diversity"}, "sediment stressor": {"concepts": "sediment stressor", "type": "concept", "cluster": "Coastal Sediment Management", "node_size": 10, "label": "sediment stressor"}, "species of concern": {"concepts": "species of concern", "type": "concept", "cluster": "Coastal Sediment Management", "node_size": 10, "label": "species of concern"}, "sediment dynamics": {"concepts": "sediment dynamics", "type": "concept", "cluster": "Coastal Sediment Management", "node_size": 10, "label": "sediment dynamics"}, "plant communities": {"concepts": "plant communities", "type": "concept", "cluster": "Coastal Sediment Management", "node_size": 10, "label": "plant communities"}, "management dynamics": {"concepts": "management dynamics", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "management dynamics"}, "organizational interests": {"concepts": "organizational interests", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "organizational interests"}, "regional managers": {"concepts": "regional managers", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "regional managers"}, "resource managers": {"concepts": "resource managers", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "resource managers"}, "stakeholder dynamics": {"concepts": "stakeholder dynamics", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "stakeholder dynamics"}, "project success": {"concepts": "project success", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "project success"}, "management approaches": {"concepts": "management approaches", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "management approaches"}, "food web": {"concepts": "food web", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "food web"}, "aesthetics": {"concepts": "aesthetics", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "aesthetics"}, "competing interests": {"concepts": "competing interests", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "competing interests"}, "relationships": {"concepts": "relationships", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "relationships"}, "diverse communities": {"concepts": "diverse communities", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "diverse communities"}, "innovative approaches": {"concepts": "innovative approaches", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "innovative approaches"}, "customer satisfaction": {"concepts": "customer satisfaction", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "customer satisfaction"}, "harmful organisms": {"concepts": "harmful organisms", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "harmful organisms"}, "microbes": {"concepts": "microbes", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "microbes"}, "high energy environment": {"concepts": "high energy environment", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "high energy environment"}, "cost": {"concepts": "cost", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "cost"}, "property owners": {"concepts": "property owners", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "property owners"}, "biological organisms": {"concepts": "biological organisms", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "biological organisms"}, "maintenance cost": {"concepts": "maintenance cost", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "maintenance cost"}, "mental models": {"concepts": "mental models", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "mental models"}, "non-profits": {"concepts": "non-profits", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "non-profits"}, "risk assessment": {"concepts": "risk assessment", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "risk assessment"}, "restoration": {"concepts": "restoration", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "restoration"}, "erosion": {"concepts": "erosion", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "erosion"}, "bacteria": {"concepts": "bacteria", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "bacteria"}, "for-profit aspect": {"concepts": "for-profit aspect", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "for-profit aspect"}, "human alterations": {"concepts": "human alterations", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "human alterations"}, "system dynamics": {"concepts": "system dynamics", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "system dynamics"}, "gulf of mexico": {"concepts": "gulf of mexico", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "gulf of mexico"}, "practitioners": {"concepts": "practitioners", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "practitioners"}, "mucus": {"concepts": "mucus", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "mucus"}, "perceptions": {"concepts": "perceptions", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "perceptions"}, "aesthetic values": {"concepts": "aesthetic values", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "aesthetic values"}, "system components": {"concepts": "system components", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "system components"}, "chesapeake bay": {"concepts": "chesapeake bay", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "chesapeake bay"}, "stressors": {"concepts": "stressors", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "stressors"}, "algovats": {"concepts": "algovats", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "algovats"}, "economic impact": {"concepts": "economic impact", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "economic impact"}, "policy": {"concepts": "policy", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "policy"}, "cost concerns": {"concepts": "cost concerns", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "cost concerns"}, "knowledge": {"concepts": "knowledge", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "knowledge"}, "conservation": {"concepts": "conservation", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "conservation"}, "diversity": {"concepts": "diversity", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "diversity"}, "temperature": {"concepts": "temperature", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "temperature"}, "permits": {"concepts": "permits", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "permits"}, "marsh creation": {"concepts": "marsh creation", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "marsh creation"}, "habitat": {"concepts": "habitat", "type": "concept", "cluster": "Habitat Management & Restoration", "node_size": 10, "label": "habitat"}, "adjacent habitat": {"concepts": "adjacent habitat", "type": "concept", "cluster": "Habitat Management & Restoration", "node_size": 10, "label": "adjacent habitat"}, "habitat management": {"concepts": "habitat management", "type": "concept", "cluster": "Habitat Management & Restoration", "node_size": 10, "label": "habitat management"}, "habitat impacts": {"concepts": "habitat impacts", "type": "concept", "cluster": "Habitat Management & Restoration", "node_size": 10, "label": "habitat impacts"}, "nesting": {"concepts": "nesting", "type": "concept", "cluster": "Habitat Management & Restoration", "node_size": 10, "label": "nesting"}, "habitat restoration": {"concepts": "habitat restoration", "type": "concept", "cluster": "Habitat Management & Restoration", "node_size": 10, "label": "habitat restoration"}, "habitat forming species": {"concepts": "habitat forming species", "type": "concept", "cluster": "Habitat Management & Restoration", "node_size": 10, "label": "habitat forming species"}};
        const interClusterEdges = [["Marsh Dynamics", "Coastal Sediment Management", {"weight": 1.0, "confidence": 0.8500000000000001, "type": "inter_cluster", "style": "solid"}], ["Marsh Dynamics", "Habitat Management & Restoration", {"weight": 1.0, "confidence": 0.8333333333333334, "type": "inter_cluster", "style": "solid"}], ["Marsh Dynamics", "Marsh Plant Growth", {"weight": 1.0, "confidence": 0.9, "type": "inter_cluster", "style": "solid"}], ["Marsh Dynamics", "Coastal Ecosystem Management", {"weight": 0.6666666666666666, "confidence": 0.5333333333333333, "type": "inter_cluster", "style": "solid"}], ["Marsh Dynamics", "Species Diversity", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["Marsh Dynamics", "Management Strategies", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["Shoreline Management", "Marsh Dynamics", {"weight": -0.5, "confidence": 0.8125, "type": "inter_cluster", "style": "solid"}], ["Shoreline Management", "Habitat Management & Restoration", {"weight": 0.5, "confidence": 0.8125, "type": "inter_cluster", "style": "solid"}], ["Shoreline Management", "Coastal Sediment Management", {"weight": -0.3333333333333333, "confidence": 0.8333333333333334, "type": "inter_cluster", "style": "solid"}], ["Shoreline Management", "Coastal Ecosystem Management", {"weight": -0.3333333333333333, "confidence": 0.7666666666666666, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Resilience", "Coastal Ecosystem Management", {"weight": 1.0, "confidence": 0.7749999999999999, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Resilience", "Habitat Management & Restoration", {"weight": 1.0, "confidence": 0.8333333333333334, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Resilience", "Species Diversity", {"weight": 0.6666666666666666, "confidence": 0.5666666666666667, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Resilience", "Coastal Sediment Management", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["Species Diversity", "Management Strategies", {"weight": 1.0, "confidence": 0.8400000000000001, "type": "inter_cluster", "style": "solid"}], ["Species Diversity", "Coastal Sediment Management", {"weight": 1.0, "confidence": 0.825, "type": "inter_cluster", "style": "solid"}], ["Species Diversity", "Habitat Management & Restoration", {"weight": 1.0, "confidence": 0.8624999999999999, "type": "inter_cluster", "style": "solid"}], ["Species Diversity", "Coastal Ecosystem Management", {"weight": 1.0, "confidence": 0.8000000000000002, "type": "inter_cluster", "style": "solid"}], ["Species Diversity", "Marsh Plant Growth", {"weight": 1.0, "confidence": 0.9, "type": "inter_cluster", "style": "solid"}], ["Species Diversity", "Ecosystem Resilience", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["Species Diversity", "Marsh Dynamics", {"weight": 1.0, "confidence": 0.7749999999999999, "type": "inter_cluster", "style": "solid"}], ["Marsh Plant Growth", "Habitat Management & Restoration", {"weight": 1.0, "confidence": 0.9125000000000001, "type": "inter_cluster", "style": "solid"}], ["Marsh Plant Growth", "Management Strategies", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["Marsh Plant Growth", "Marsh Dynamics", {"weight": 1.0, "confidence": 0.8625, "type": "inter_cluster", "style": "solid"}], ["Marsh Plant Growth", "Species Diversity", {"weight": 1.0, "confidence": 0.9166666666666666, "type": "inter_cluster", "style": "solid"}], ["Marsh Plant Growth", "Coastal Sediment Management", {"weight": 1.0, "confidence": 0.9, "type": "inter_cluster", "style": "solid"}], ["Marsh Plant Growth", "Ecosystem Resilience", {"weight": 1.0, "confidence": 0.7999999999999999, "type": "inter_cluster", "style": "solid"}], ["Marsh Plant Growth", "Coastal Ecosystem Management", {"weight": 1.0, "confidence": 0.8999999999999999, "type": "inter_cluster", "style": "solid"}], ["Coastal Sediment Management", "Shoreline Management", {"weight": 0.5, "confidence": 0.875, "type": "inter_cluster", "style": "solid"}], ["Coastal Sediment Management", "Marsh Plant Growth", {"weight": 1.0, "confidence": 0.8833333333333333, "type": "inter_cluster", "style": "solid"}], ["Coastal Sediment Management", "Coastal Ecosystem Management", {"weight": 1.0, "confidence": 0.8166666666666668, "type": "inter_cluster", "style": "solid"}], ["Coastal Sediment Management", "Ecosystem Resilience", {"weight": 1.0, "confidence": 0.8166666666666668, "type": "inter_cluster", "style": "solid"}], ["Coastal Sediment Management", "Species Diversity", {"weight": 1.0, "confidence": 0.875, "type": "inter_cluster", "style": "solid"}], ["Coastal Sediment Management", "Habitat Management & Restoration", {"weight": 0.6666666666666666, "confidence": 0.5666666666666667, "type": "inter_cluster", "style": "solid"}], ["Coastal Sediment Management", "Management Strategies", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["Management Strategies", "Coastal Sediment Management", {"weight": 1.0, "confidence": 0.8375, "type": "inter_cluster", "style": "solid"}], ["Management Strategies", "Marsh Dynamics", {"weight": 1.0, "confidence": 0.775, "type": "inter_cluster", "style": "solid"}], ["Coastal Ecosystem Management", "Species Diversity", {"weight": 1.0, "confidence": 0.79, "type": "inter_cluster", "style": "solid"}], ["Coastal Ecosystem Management", "Coastal Sediment Management", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["Coastal Ecosystem Management", "Shoreline Management", {"weight": 1.0, "confidence": 0.7124999999999999, "type": "inter_cluster", "style": "solid"}], ["Coastal Ecosystem Management", "Habitat Management & Restoration", {"weight": 1.0, "confidence": 0.7999999999999999, "type": "inter_cluster", "style": "solid"}], ["Coastal Ecosystem Management", "Marsh Dynamics", {"weight": 1.0, "confidence": 0.775, "type": "inter_cluster", "style": "solid"}], ["Coastal Ecosystem Management", "Marsh Plant Growth", {"weight": 1.0, "confidence": 0.9, "type": "inter_cluster", "style": "solid"}], ["Habitat Management & Restoration", "Management Strategies", {"weight": 1.0, "confidence": 0.82, "type": "inter_cluster", "style": "solid"}], ["Habitat Management & Restoration", "Coastal Ecosystem Management", {"weight": 1.0, "confidence": 0.8499999999999999, "type": "inter_cluster", "style": "solid"}], ["Habitat Management & Restoration", "Marsh Dynamics", {"weight": 1.0, "confidence": 0.7625, "type": "inter_cluster", "style": "solid"}], ["Habitat Management & Restoration", "Marsh Plant Growth", {"weight": 1.0, "confidence": 0.925, "type": "inter_cluster", "style": "solid"}], ["Habitat Management & Restoration", "Shoreline Management", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}]];
        const clusterConcepts = {"Marsh Dynamics": [["marsh plants", {"concepts": "marsh plants", "type": "concept", "cluster": "Marsh Dynamics", "node_size": 10, "label": "marsh plants"}], ["growing season", {"concepts": "growing season", "type": "concept", "cluster": "Marsh Dynamics", "node_size": 10, "label": "growing season"}]], "Shoreline Management": [["marsh migration", {"concepts": "marsh migration", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "marsh migration"}], ["marshes", {"concepts": "marshes", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "marshes"}], ["salish sea", {"concepts": "salish sea", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "salish sea"}], ["low marsh", {"concepts": "low marsh", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "low marsh"}], ["salt marsh sparrow", {"concepts": "salt marsh sparrow", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "salt marsh sparrow"}], ["sav beds", {"concepts": "sav beds", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "sav beds"}], ["sea level rise", {"concepts": "sea level rise", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "sea level rise"}], ["storms", {"concepts": "storms", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "storms"}], ["natural marsh", {"concepts": "natural marsh", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "natural marsh"}], ["salt tolerance", {"concepts": "salt tolerance", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "salt tolerance"}], ["high marsh", {"concepts": "high marsh", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "high marsh"}], ["salinity changes", {"concepts": "salinity changes", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "salinity changes"}], ["climate change", {"concepts": "climate change", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "climate change"}], ["elevation gradient", {"concepts": "elevation gradient", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "elevation gradient"}], ["marsh drowning", {"concepts": "marsh drowning", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "marsh drowning"}]], "Ecosystem Resilience": [["regulatory agencies", {"concepts": "regulatory agencies", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "regulatory agencies"}], ["shoreline design", {"concepts": "shoreline design", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "shoreline design"}], ["marine resource management", {"concepts": "marine resource management", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "marine resource management"}], ["living shoreline law", {"concepts": "living shoreline law", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "living shoreline law"}], ["submerged aquatic vegetation", {"concepts": "submerged aquatic vegetation", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "submerged aquatic vegetation"}], ["shoreline law", {"concepts": "shoreline law", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "shoreline law"}], ["shoreline", {"concepts": "shoreline", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "shoreline"}], ["legal compliance", {"concepts": "legal compliance", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "legal compliance"}], ["migratory waterfowl", {"concepts": "migratory waterfowl", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "migratory waterfowl"}], ["living shoreline", {"concepts": "living shoreline", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "living shoreline"}], ["environmental law", {"concepts": "environmental law", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "environmental law"}], ["living shorelines", {"concepts": "living shorelines", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "living shorelines"}], ["marine resource users", {"concepts": "marine resource users", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "marine resource users"}], ["water quality", {"concepts": "water quality", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "water quality"}], ["permitters", {"concepts": "permitters", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "permitters"}], ["shoreline management", {"concepts": "shoreline management", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "shoreline management"}], ["shoreline hardening", {"concepts": "shoreline hardening", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "shoreline hardening"}], ["seagrass beds", {"concepts": "seagrass beds", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "seagrass beds"}]], "Species Diversity": [["project sustainability", {"concepts": "project sustainability", "type": "concept", "cluster": "Species Diversity", "node_size": 10, "label": "project sustainability"}], ["ecological benefit", {"concepts": "ecological benefit", "type": "concept", "cluster": "Species Diversity", "node_size": 10, "label": "ecological benefit"}], ["ecosystem stability", {"concepts": "ecosystem stability", "type": "concept", "cluster": "Species Diversity", "node_size": 10, "label": "ecosystem stability"}], ["maryland department of the environment", {"concepts": "maryland department of the environment", "type": "concept", "cluster": "Species Diversity", "node_size": 10, "label": "maryland department of the environment"}], ["ecosystem services", {"concepts": "ecosystem services", "type": "concept", "cluster": "Species Diversity", "node_size": 10, "label": "ecosystem services"}], ["flooding tolerance", {"concepts": "flooding tolerance", "type": "concept", "cluster": "Species Diversity", "node_size": 10, "label": "flooding tolerance"}], ["socio-ecological dynamics", {"concepts": "socio-ecological dynamics", "type": "concept", "cluster": "Species Diversity", "node_size": 10, "label": "socio-ecological dynamics"}], ["environmental trade-offs", {"concepts": "environmental trade-offs", "type": "concept", "cluster": "Species Diversity", "node_size": 10, "label": "environmental trade-offs"}], ["ecological goals", {"concepts": "ecological goals", "type": "concept", "cluster": "Species Diversity", "node_size": 10, "label": "ecological goals"}], ["system resilience", {"concepts": "system resilience", "type": "concept", "cluster": "Species Diversity", "node_size": 10, "label": "system resilience"}], ["ecological impact", {"concepts": "ecological impact", "type": "concept", "cluster": "Species Diversity", "node_size": 10, "label": "ecological impact"}], ["ecological outcomes", {"concepts": "ecological outcomes", "type": "concept", "cluster": "Species Diversity", "node_size": 10, "label": "ecological outcomes"}], ["ecosystem resilience", {"concepts": "ecosystem resilience", "type": "concept", "cluster": "Species Diversity", "node_size": 10, "label": "ecosystem resilience"}], ["ecosystem benefits", {"concepts": "ecosystem benefits", "type": "concept", "cluster": "Species Diversity", "node_size": 10, "label": "ecosystem benefits"}], ["marsh resilience", {"concepts": "marsh resilience", "type": "concept", "cluster": "Species Diversity", "node_size": 10, "label": "marsh resilience"}]], "Marsh Plant Growth": [["biodiversity", {"concepts": "biodiversity", "type": "concept", "cluster": "Marsh Plant Growth", "node_size": 10, "label": "biodiversity"}], ["species diversity", {"concepts": "species diversity", "type": "concept", "cluster": "Marsh Plant Growth", "node_size": 10, "label": "species diversity"}], ["species of conservation concern", {"concepts": "species of conservation concern", "type": "concept", "cluster": "Marsh Plant Growth", "node_size": 10, "label": "species of conservation concern"}], ["species recruitment", {"concepts": "species recruitment", "type": "concept", "cluster": "Marsh Plant Growth", "node_size": 10, "label": "species recruitment"}], ["key species", {"concepts": "key species", "type": "concept", "cluster": "Marsh Plant Growth", "node_size": 10, "label": "key species"}], ["keystone species", {"concepts": "keystone species", "type": "concept", "cluster": "Marsh Plant Growth", "node_size": 10, "label": "keystone species"}]], "Coastal Sediment Management": [["nutrient storage", {"concepts": "nutrient storage", "type": "concept", "cluster": "Coastal Sediment Management", "node_size": 10, "label": "nutrient storage"}], ["sediment layer replacement", {"concepts": "sediment layer replacement", "type": "concept", "cluster": "Coastal Sediment Management", "node_size": 10, "label": "sediment layer replacement"}], ["sediment supply", {"concepts": "sediment supply", "type": "concept", "cluster": "Coastal Sediment Management", "node_size": 10, "label": "sediment supply"}], ["snails", {"concepts": "snails", "type": "concept", "cluster": "Coastal Sediment Management", "node_size": 10, "label": "snails"}], ["fish", {"concepts": "fish", "type": "concept", "cluster": "Coastal Sediment Management", "node_size": 10, "label": "fish"}], ["facilitator species", {"concepts": "facilitator species", "type": "concept", "cluster": "Coastal Sediment Management", "node_size": 10, "label": "facilitator species"}], ["thin layer placement", {"concepts": "thin layer placement", "type": "concept", "cluster": "Coastal Sediment Management", "node_size": 10, "label": "thin layer placement"}], ["coastal communities", {"concepts": "coastal communities", "type": "concept", "cluster": "Coastal Sediment Management", "node_size": 10, "label": "coastal communities"}], ["marsh plant diversity", {"concepts": "marsh plant diversity", "type": "concept", "cluster": "Coastal Sediment Management", "node_size": 10, "label": "marsh plant diversity"}], ["conservation concern", {"concepts": "conservation concern", "type": "concept", "cluster": "Coastal Sediment Management", "node_size": 10, "label": "conservation concern"}], ["department of natural resources", {"concepts": "department of natural resources", "type": "concept", "cluster": "Coastal Sediment Management", "node_size": 10, "label": "department of natural resources"}], ["dredging", {"concepts": "dredging", "type": "concept", "cluster": "Coastal Sediment Management", "node_size": 10, "label": "dredging"}], ["erosion mitigation", {"concepts": "erosion mitigation", "type": "concept", "cluster": "Coastal Sediment Management", "node_size": 10, "label": "erosion mitigation"}], ["plant diversity", {"concepts": "plant diversity", "type": "concept", "cluster": "Coastal Sediment Management", "node_size": 10, "label": "plant diversity"}], ["sediment stressor", {"concepts": "sediment stressor", "type": "concept", "cluster": "Coastal Sediment Management", "node_size": 10, "label": "sediment stressor"}], ["species of concern", {"concepts": "species of concern", "type": "concept", "cluster": "Coastal Sediment Management", "node_size": 10, "label": "species of concern"}], ["sediment dynamics", {"concepts": "sediment dynamics", "type": "concept", "cluster": "Coastal Sediment Management", "node_size": 10, "label": "sediment dynamics"}], ["plant communities", {"concepts": "plant communities", "type": "concept", "cluster": "Coastal Sediment Management", "node_size": 10, "label": "plant communities"}]], "Management Strategies": [["management dynamics", {"concepts": "management dynamics", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "management dynamics"}], ["organizational interests", {"concepts": "organizational interests", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "organizational interests"}], ["regional managers", {"concepts": "regional managers", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "regional managers"}], ["resource managers", {"concepts": "resource managers", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "resource managers"}], ["stakeholder dynamics", {"concepts": "stakeholder dynamics", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "stakeholder dynamics"}], ["project success", {"concepts": "project success", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "project success"}], ["management approaches", {"concepts": "management approaches", "type": "concept", "cluster": "Management Strategies", "node_size": 10, "label": "management approaches"}]], "Coastal Ecosystem Management": [["food web", {"concepts": "food web", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "food web"}], ["aesthetics", {"concepts": "aesthetics", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "aesthetics"}], ["competing interests", {"concepts": "competing interests", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "competing interests"}], ["relationships", {"concepts": "relationships", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "relationships"}], ["diverse communities", {"concepts": "diverse communities", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "diverse communities"}], ["innovative approaches", {"concepts": "innovative approaches", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "innovative approaches"}], ["customer satisfaction", {"concepts": "customer satisfaction", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "customer satisfaction"}], ["harmful organisms", {"concepts": "harmful organisms", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "harmful organisms"}], ["microbes", {"concepts": "microbes", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "microbes"}], ["high energy environment", {"concepts": "high energy environment", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "high energy environment"}], ["cost", {"concepts": "cost", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "cost"}], ["property owners", {"concepts": "property owners", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "property owners"}], ["biological organisms", {"concepts": "biological organisms", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "biological organisms"}], ["maintenance cost", {"concepts": "maintenance cost", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "maintenance cost"}], ["mental models", {"concepts": "mental models", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "mental models"}], ["non-profits", {"concepts": "non-profits", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "non-profits"}], ["risk assessment", {"concepts": "risk assessment", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "risk assessment"}], ["restoration", {"concepts": "restoration", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "restoration"}], ["erosion", {"concepts": "erosion", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "erosion"}], ["bacteria", {"concepts": "bacteria", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "bacteria"}], ["for-profit aspect", {"concepts": "for-profit aspect", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "for-profit aspect"}], ["human alterations", {"concepts": "human alterations", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "human alterations"}], ["system dynamics", {"concepts": "system dynamics", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "system dynamics"}], ["gulf of mexico", {"concepts": "gulf of mexico", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "gulf of mexico"}], ["practitioners", {"concepts": "practitioners", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "practitioners"}], ["mucus", {"concepts": "mucus", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "mucus"}], ["perceptions", {"concepts": "perceptions", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "perceptions"}], ["aesthetic values", {"concepts": "aesthetic values", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "aesthetic values"}], ["system components", {"concepts": "system components", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "system components"}], ["chesapeake bay", {"concepts": "chesapeake bay", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "chesapeake bay"}], ["stressors", {"concepts": "stressors", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "stressors"}], ["algovats", {"concepts": "algovats", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "algovats"}], ["economic impact", {"concepts": "economic impact", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "economic impact"}], ["policy", {"concepts": "policy", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "policy"}], ["cost concerns", {"concepts": "cost concerns", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "cost concerns"}], ["knowledge", {"concepts": "knowledge", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "knowledge"}], ["conservation", {"concepts": "conservation", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "conservation"}], ["diversity", {"concepts": "diversity", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "diversity"}], ["temperature", {"concepts": "temperature", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "temperature"}], ["permits", {"concepts": "permits", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "permits"}], ["marsh creation", {"concepts": "marsh creation", "type": "concept", "cluster": "Coastal Ecosystem Management", "node_size": 10, "label": "marsh creation"}]], "Habitat Management & Restoration": [["habitat", {"concepts": "habitat", "type": "concept", "cluster": "Habitat Management & Restoration", "node_size": 10, "label": "habitat"}], ["adjacent habitat", {"concepts": "adjacent habitat", "type": "concept", "cluster": "Habitat Management & Restoration", "node_size": 10, "label": "adjacent habitat"}], ["habitat management", {"concepts": "habitat management", "type": "concept", "cluster": "Habitat Management & Restoration", "node_size": 10, "label": "habitat management"}], ["habitat impacts", {"concepts": "habitat impacts", "type": "concept", "cluster": "Habitat Management & Restoration", "node_size": 10, "label": "habitat impacts"}], ["nesting", {"concepts": "nesting", "type": "concept", "cluster": "Habitat Management & Restoration", "node_size": 10, "label": "nesting"}], ["habitat restoration", {"concepts": "habitat restoration", "type": "concept", "cluster": "Habitat Management & Restoration", "node_size": 10, "label": "habitat restoration"}], ["habitat forming species", {"concepts": "habitat forming species", "type": "concept", "cluster": "Habitat Management & Restoration", "node_size": 10, "label": "habitat forming species"}]]};
        const clusterEdges = {"Marsh Dynamics": [], "Shoreline Management": [], "Ecosystem Resilience": [], "Species Diversity": [], "Marsh Plant Growth": [], "Coastal Sediment Management": [], "Management Strategies": [], "Coastal Ecosystem Management": [], "Habitat Management & Restoration": []};
        
        let network;
        let currentView = 'clusters';
        let currentCluster = null;
        let minConfidence = 0.3;
        
        // Network options
        const options = {
            nodes: {
                font: { color: 'white', size: 14 },
                borderWidth: 2,
                shadow: true
            },
            edges: {
                arrows: { to: { enabled: true, scaleFactor: 1.2 } },
                shadow: true,
                smooth: { type: 'continuous' }
            },
            physics: {
                stabilization: { iterations: 100 },
                barnesHut: {
                    gravitationalConstant: -8000,
                    springConstant: 0.001,
                    springLength: 200
                }
            },
            interaction: {
                hover: true,
                selectConnectedEdges: false
            }
        };
        
        function initNetwork() {
            const container = document.getElementById('network');
            const data = getClusterViewData();
            network = new vis.Network(container, data, options);
            
            // Handle cluster clicks for drill-down
            network.on("click", function(params) {
                if (params.nodes.length > 0 && currentView === 'clusters') {
                    const clickedNode = params.nodes[0];
                    if (clusterConcepts[clickedNode]) {
                        showClusterDetail(clickedNode);
                    }
                }
            });
        }
        
        function getClusterViewData() {
            const nodes = [];
            const edges = [];
            
            // Add cluster nodes
            Object.entries(clusterData).forEach(([clusterId, data]) => {
                const concepts = data.concepts || [];
                const conceptsStr = Array.isArray(concepts) ? concepts.join(', ') : concepts;
                
                nodes.push({
                    id: clusterId,
                    label: clusterId,
                    title: `Cluster: ${clusterId}\nConcepts: ${conceptsStr}\nClick to explore internal relationships`,
                    color: '#4A90E2',
                    size: 25 + (conceptsStr.split(',').length * 2),
                    font: { color: 'white' }
                });
            });
            
            // Add inter-cluster edges
            interClusterEdges.forEach(([source, target, edgeData]) => {
                const confidence = edgeData.confidence || 1.0;
                const weight = edgeData.weight || 0;
                
                if (confidence >= minConfidence) {
                    edges.push({
                        from: source,
                        to: target,
                        color: weight > 0 ? '#28A745' : '#DC3545',
                        width: Math.abs(weight) * 3 + 1,
                        title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                        dashes: false
                    });
                }
            });
            
            return { nodes: nodes, edges: edges };
        }
        
        function getClusterDetailData(clusterId) {
            const nodes = [];
            const edges = [];
            
            // Add concept nodes for this cluster
            if (clusterConcepts[clusterId]) {
                clusterConcepts[clusterId].forEach(([conceptId, data]) => {
                    nodes.push({
                        id: conceptId,
                        label: conceptId,
                        title: `Concept: ${conceptId}\nFrom cluster: ${clusterId}`,
                        color: '#FF9500',
                        size: 20,
                        font: { color: 'white' }
                    });
                });
            }
            
            // Add intra-cluster edges
            if (clusterEdges[clusterId]) {
                clusterEdges[clusterId].forEach(([source, target, edgeData]) => {
                    const confidence = edgeData.confidence || 1.0;
                    const weight = edgeData.weight || 0;
                    
                    if (confidence >= minConfidence) {
                        edges.push({
                            from: source,
                            to: target,
                            color: weight > 0 ? '#28A745' : '#DC3545',
                            width: Math.abs(weight) * 3 + 1,
                            title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                            dashes: true
                        });
                    }
                });
            }
            
            return { nodes: nodes, edges: edges };
        }
        
        function showClusterView() {
            currentView = 'clusters';
            currentCluster = null;
            const data = getClusterViewData();
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'none';
            document.getElementById('current-view').textContent = 'Cluster Overview';
        }
        
        function showClusterDetail(clusterId) {
            currentView = 'concepts';
            currentCluster = clusterId;
            const data = getClusterDetailData(clusterId);
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'inline-block';
            document.getElementById('current-view').textContent = `Inside Cluster: ${clusterId}`;
        }
        
        function updateConfidenceFilter(value) {
            minConfidence = parseFloat(value);
            document.getElementById('confidence-value').textContent = value;
            
            // Refresh current view
            if (currentView === 'clusters') {
                showClusterView();
            } else {
                showClusterDetail(currentCluster);
            }
        }
        
        // Initialize the network when page loads
        window.onload = function() {
            initNetwork();
        };
    </script>
</body>
</html>
