
<!DOCTYPE html>
<html>
<head>
    <title>Hierarchical FCM Visualization</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 0; 
            padding: 20px;
            background: #f5f5f5;
        }
        
        #network { 
            width: 100%; 
            height: 600px; 
            border: 2px solid #ccc; 
            background: white;
            border-radius: 8px;
        }
        
        #controls {
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn {
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        
        .btn-primary { background: #4A90E2; color: white; }
        .btn-primary:hover { background: #357ABD; }
        
        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #545b62; }
        
        #current-view {
            font-weight: bold;
            color: #333;
            margin-left: 10px;
        }
        
        #legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-size: 12px;
            max-width: 200px;
        }
        
        .legend-item {
            margin: 5px 0;
            display: flex;
            align-items: center;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .legend-line {
            width: 20px;
            height: 2px;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <h1>Fuzzy Cognitive Map - Hierarchical View</h1>
    
    <div id="controls">
        <button class="btn btn-secondary" id="back-btn" onclick="showClusterView()" style="display: none;">
            ‚Üê Back to Clusters
        </button>
        <span id="current-view">Cluster Overview</span>
        <div style="float: right;">
            <label>Min Confidence: </label>
            <input type="range" id="confidence-slider" min="0" max="1" step="0.1" value="0.3" 
                   onchange="updateConfidenceFilter(this.value)">
            <span id="confidence-value">0.3</span>
        </div>
    </div>
    
    <div id="network"></div>
    
    <div id="legend">
        <h4>Legend</h4>
        <div class="legend-item">
            <div class="legend-color" style="background: #4A90E2;"></div>
            <span>Clusters</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #FF9500;"></div>
            <span>Concepts</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #28A745;"></div>
            <span>Positive relationship</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #DC3545;"></div>
            <span>Negative relationship</span>
        </div>
        <div style="margin-top: 10px; font-style: italic; color: #666;">
            Click clusters to explore internal concepts
        </div>
    </div>

    <script>
        // Embedded data
        const clusterData = {"nearshore systems": {"concepts": "nearshore systems", "concept_list": ["nearshore systems"], "type": "cluster", "node_size": 18, "label": "nearshore systems"}, "waste management": {"concepts": "waste management", "concept_list": ["waste management"], "type": "cluster", "node_size": 18, "label": "waste management"}, "nutrients": {"concepts": "nutrients", "concept_list": ["nutrients"], "type": "cluster", "node_size": 18, "label": "nutrients"}, "infrastructure development": {"concepts": "infrastructure development", "concept_list": ["infrastructure development"], "type": "cluster", "node_size": 18, "label": "infrastructure development"}, "robust ecosystem": {"concepts": "robust ecosystem", "concept_list": ["robust ecosystem"], "type": "cluster", "node_size": 18, "label": "robust ecosystem"}, "harmful organisms": {"concepts": "harmful organisms", "concept_list": ["harmful organisms"], "type": "cluster", "node_size": 18, "label": "harmful organisms"}, "food web dynamics": {"concepts": "food web dynamics", "concept_list": ["food web dynamics"], "type": "cluster", "node_size": 18, "label": "food web dynamics"}, "robustness": {"concepts": "robustness", "concept_list": ["robustness"], "type": "cluster", "node_size": 18, "label": "robustness"}, "Coral Reef Taskforce": {"concepts": "coral reefs, coral reef ecosystems, corals, coral protection, coral health", "concept_list": ["coral reefs", "coral reef ecosystems", "corals", "coral protection", "coral health"], "type": "cluster", "node_size": 30, "label": "Coral Reef Taskforce"}, "Coral Health Issues": {"concepts": "us coral reef task force, coral reef task force, corals program, national coral reef team, u.s. coral reef task force", "concept_list": ["us coral reef task force", "coral reef task force", "corals program", "national coral reef team", "u.s. coral reef task force"], "type": "cluster", "node_size": 30, "label": "Coral Health Issues"}, "Reef Construction Materials": {"concepts": "zooxanthellae, coral stress, stony coral tissue loss", "concept_list": ["zooxanthellae", "coral stress", "stony coral tissue loss"], "type": "cluster", "node_size": 24, "label": "Reef Construction Materials"}, "Local Resources & Work": {"concepts": "artificial reefs, ancient corals, oyster shells", "concept_list": ["artificial reefs", "ancient corals", "oyster shells"], "type": "cluster", "node_size": 24, "label": "Local Resources & Work"}, "Temperature Changes": {"concepts": "temperature rise, local temperature, temperature changes, sea surface temperatures, temperature change", "concept_list": ["temperature rise", "local temperature", "temperature changes", "sea surface temperatures", "temperature change"], "type": "cluster", "node_size": 30, "label": "Temperature Changes"}, "Ocean Climate Change": {"concepts": "warming waters, ocean acidification, atmospheric co2, climate change", "concept_list": ["warming waters", "ocean acidification", "atmospheric co2", "climate change"], "type": "cluster", "node_size": 27, "label": "Ocean Climate Change"}, "Coastal Hazards": {"concepts": "storm events, sea level rise", "concept_list": ["storm events", "sea level rise"], "type": "cluster", "node_size": 21, "label": "Coastal Hazards"}, "Federal Agencies": {"concepts": "department of defense, department of interior, naval academy, army corps, noaa", "concept_list": ["department of defense", "department of interior", "naval academy", "army corps", "noaa"], "type": "cluster", "node_size": 30, "label": "Federal Agencies"}, "[Temperature Increases]": {"concepts": "guam, hawaii, islands, american samoa, virgin islands, puerto rico", "concept_list": ["guam", "hawaii", "islands", "american samoa", "virgin islands", "puerto rico"], "type": "cluster", "node_size": 33, "label": "[Temperature Increases]"}, "AAAS Fellows": {"concepts": "susan jackson, aaas fellowship, giancarlo ciccetti", "concept_list": ["susan jackson", "aaas fellowship", "giancarlo ciccetti"], "type": "cluster", "node_size": 24, "label": "AAAS Fellows"}, "Environmental Impacts": {"concepts": "bleaching, biocriteria, co2, negative impact, local ph, ph changes, growth rates", "concept_list": ["bleaching", "biocriteria", "co2", "negative impact", "local ph", "ph changes", "growth rates"], "type": "cluster", "node_size": 36, "label": "Environmental Impacts"}, "EPA & Chesapeake Bay": {"concepts": "epa regions, chesapeake bay program", "concept_list": ["epa regions", "chesapeake bay program"], "type": "cluster", "node_size": 21, "label": "EPA & Chesapeake Bay"}, "Management & Coordination": {"concepts": "responsible use, interagency meetings, system dynamics, fuzzy cognitive mapping, management bins, regulatory work, interagency coordination, best management practices, management practices, positive impact", "concept_list": ["responsible use", "interagency meetings", "system dynamics", "fuzzy cognitive mapping", "management bins", "regulatory work", "interagency coordination", "best management practices", "management practices", "positive impact"], "type": "cluster", "node_size": 45, "label": "Management & Coordination"}, "EPA System Security": {"concepts": "system components, mental modeler, epa, job security", "concept_list": ["system components", "mental modeler", "epa", "job security"], "type": "cluster", "node_size": 27, "label": "EPA System Security"}, "Coastal Resource Management": {"concepts": "marine resource management, coastal issues, fishing communities, coast guard", "concept_list": ["marine resource management", "coastal issues", "fishing communities", "coast guard"], "type": "cluster", "node_size": 27, "label": "Coastal Resource Management"}, "Earth Composition": {"concepts": "geology, geochemistry", "concept_list": ["geology", "geochemistry"], "type": "cluster", "node_size": 21, "label": "Earth Composition"}, "Water Quality Analysis": {"concepts": "water quality, turbidity, water chemistry, water clarity", "concept_list": ["water quality", "turbidity", "water chemistry", "water clarity"], "type": "cluster", "node_size": 27, "label": "Water Quality Analysis"}, "Water Acidity": {"concepts": "acidic water, calcium carbonate", "concept_list": ["acidic water", "calcium carbonate"], "type": "cluster", "node_size": 21, "label": "Water Acidity"}, "Stress Sources": {"concepts": "global stressors, stressors", "concept_list": ["global stressors", "stressors"], "type": "cluster", "node_size": 21, "label": "Stress Sources"}, "Local Stressors": {"concepts": "localized stressors, local stressors", "concept_list": ["localized stressors", "local stressors"], "type": "cluster", "node_size": 21, "label": "Local Stressors"}, "Cultural Value": {"concepts": "cultural significance, cultural services", "concept_list": ["cultural significance", "cultural services"], "type": "cluster", "node_size": 21, "label": "Cultural Value"}, "Pollution Sources": {"concepts": "land-based pollution, nutrient loads, vessel discharges, pollution sources", "concept_list": ["land-based pollution", "nutrient loads", "vessel discharges", "pollution sources"], "type": "cluster", "node_size": 27, "label": "Pollution Sources"}, "Sustainable Farming": {"concepts": "farming practices, sustainable farming", "concept_list": ["farming practices", "sustainable farming"], "type": "cluster", "node_size": 21, "label": "Sustainable Farming"}, "Invasive Aquatics": {"concepts": "aquatic nuisance species, invasive species", "concept_list": ["aquatic nuisance species", "invasive species"], "type": "cluster", "node_size": 21, "label": "Invasive Aquatics"}, "Habitat Conservation Assessments": {"concepts": "habitat forming species, conservation concern, bioassessments", "concept_list": ["habitat forming species", "conservation concern", "bioassessments"], "type": "cluster", "node_size": 24, "label": "Habitat Conservation Assessments"}, "Stakeholder Income": {"concepts": "income opportunities, stakeholders", "concept_list": ["income opportunities", "stakeholders"], "type": "cluster", "node_size": 21, "label": "Stakeholder Income"}, "Local Communities": {"concepts": "local community, rural groups, local communities, local funds, local resources, remote work", "concept_list": ["local community", "rural groups", "local communities", "local funds", "local resources", "remote work"], "type": "cluster", "node_size": 33, "label": "Local Communities"}, "Paleo Soil Distribution": {"concepts": "ancient soils, ancient climates, spatial distribution", "concept_list": ["ancient soils", "ancient climates", "spatial distribution"], "type": "cluster", "node_size": 24, "label": "Paleo Soil Distribution"}, "Government Resources": {"concepts": "federal agencies, military agencies, government resources", "concept_list": ["federal agencies", "military agencies", "government resources"], "type": "cluster", "node_size": 24, "label": "Government Resources"}, "Territorial Governance": {"concepts": "territories, territorial governments, pacific territories, caribbean territories", "concept_list": ["territories", "territorial governments", "pacific territories", "caribbean territories"], "type": "cluster", "node_size": 27, "label": "Territorial Governance"}, "Ecosystem Biodiversity": {"concepts": "biodiversity, ecosystems, ecosystem, ecosystem services, environmental social sciences", "concept_list": ["biodiversity", "ecosystems", "ecosystem", "ecosystem services", "environmental social sciences"], "type": "cluster", "node_size": 30, "label": "Ecosystem Biodiversity"}, "Food & Nutrition": {"concepts": "food web, nutrition", "concept_list": ["food web", "nutrition"], "type": "cluster", "node_size": 21, "label": "Food & Nutrition"}, "Disease Agents": {"concepts": "disease, pathogens", "concept_list": ["disease", "pathogens"], "type": "cluster", "node_size": 21, "label": "Disease Agents"}};
        const conceptData = {"coral reefs": {"concepts": "coral reefs", "type": "concept", "cluster": "Coral Reef Taskforce", "node_size": 10, "label": "coral reefs"}, "coral reef ecosystems": {"concepts": "coral reef ecosystems", "type": "concept", "cluster": "Coral Reef Taskforce", "node_size": 10, "label": "coral reef ecosystems"}, "corals": {"concepts": "corals", "type": "concept", "cluster": "Coral Reef Taskforce", "node_size": 10, "label": "corals"}, "coral protection": {"concepts": "coral protection", "type": "concept", "cluster": "Coral Reef Taskforce", "node_size": 10, "label": "coral protection"}, "coral health": {"concepts": "coral health", "type": "concept", "cluster": "Coral Reef Taskforce", "node_size": 10, "label": "coral health"}, "us coral reef task force": {"concepts": "us coral reef task force", "type": "concept", "cluster": "Coral Health Issues", "node_size": 10, "label": "us coral reef task force"}, "coral reef task force": {"concepts": "coral reef task force", "type": "concept", "cluster": "Coral Health Issues", "node_size": 10, "label": "coral reef task force"}, "corals program": {"concepts": "corals program", "type": "concept", "cluster": "Coral Health Issues", "node_size": 10, "label": "corals program"}, "national coral reef team": {"concepts": "national coral reef team", "type": "concept", "cluster": "Coral Health Issues", "node_size": 10, "label": "national coral reef team"}, "u.s. coral reef task force": {"concepts": "u.s. coral reef task force", "type": "concept", "cluster": "Coral Health Issues", "node_size": 10, "label": "u.s. coral reef task force"}, "zooxanthellae": {"concepts": "zooxanthellae", "type": "concept", "cluster": "Reef Construction Materials", "node_size": 10, "label": "zooxanthellae"}, "coral stress": {"concepts": "coral stress", "type": "concept", "cluster": "Reef Construction Materials", "node_size": 10, "label": "coral stress"}, "stony coral tissue loss": {"concepts": "stony coral tissue loss", "type": "concept", "cluster": "Reef Construction Materials", "node_size": 10, "label": "stony coral tissue loss"}, "artificial reefs": {"concepts": "artificial reefs", "type": "concept", "cluster": "Local Resources & Work", "node_size": 10, "label": "artificial reefs"}, "ancient corals": {"concepts": "ancient corals", "type": "concept", "cluster": "Local Resources & Work", "node_size": 10, "label": "ancient corals"}, "oyster shells": {"concepts": "oyster shells", "type": "concept", "cluster": "Local Resources & Work", "node_size": 10, "label": "oyster shells"}, "temperature rise": {"concepts": "temperature rise", "type": "concept", "cluster": "Temperature Changes", "node_size": 10, "label": "temperature rise"}, "local temperature": {"concepts": "local temperature", "type": "concept", "cluster": "Temperature Changes", "node_size": 10, "label": "local temperature"}, "temperature changes": {"concepts": "temperature changes", "type": "concept", "cluster": "Temperature Changes", "node_size": 10, "label": "temperature changes"}, "sea surface temperatures": {"concepts": "sea surface temperatures", "type": "concept", "cluster": "Temperature Changes", "node_size": 10, "label": "sea surface temperatures"}, "temperature change": {"concepts": "temperature change", "type": "concept", "cluster": "Temperature Changes", "node_size": 10, "label": "temperature change"}, "warming waters": {"concepts": "warming waters", "type": "concept", "cluster": "Ocean Climate Change", "node_size": 10, "label": "warming waters"}, "ocean acidification": {"concepts": "ocean acidification", "type": "concept", "cluster": "Ocean Climate Change", "node_size": 10, "label": "ocean acidification"}, "atmospheric co2": {"concepts": "atmospheric co2", "type": "concept", "cluster": "Ocean Climate Change", "node_size": 10, "label": "atmospheric co2"}, "climate change": {"concepts": "climate change", "type": "concept", "cluster": "Ocean Climate Change", "node_size": 10, "label": "climate change"}, "storm events": {"concepts": "storm events", "type": "concept", "cluster": "Coastal Hazards", "node_size": 10, "label": "storm events"}, "sea level rise": {"concepts": "sea level rise", "type": "concept", "cluster": "Coastal Hazards", "node_size": 10, "label": "sea level rise"}, "department of defense": {"concepts": "department of defense", "type": "concept", "cluster": "Federal Agencies", "node_size": 10, "label": "department of defense"}, "department of interior": {"concepts": "department of interior", "type": "concept", "cluster": "Federal Agencies", "node_size": 10, "label": "department of interior"}, "naval academy": {"concepts": "naval academy", "type": "concept", "cluster": "Federal Agencies", "node_size": 10, "label": "naval academy"}, "army corps": {"concepts": "army corps", "type": "concept", "cluster": "Federal Agencies", "node_size": 10, "label": "army corps"}, "noaa": {"concepts": "noaa", "type": "concept", "cluster": "Federal Agencies", "node_size": 10, "label": "noaa"}, "guam": {"concepts": "guam", "type": "concept", "cluster": "[Temperature Increases]", "node_size": 10, "label": "guam"}, "hawaii": {"concepts": "hawaii", "type": "concept", "cluster": "[Temperature Increases]", "node_size": 10, "label": "hawaii"}, "islands": {"concepts": "islands", "type": "concept", "cluster": "[Temperature Increases]", "node_size": 10, "label": "islands"}, "american samoa": {"concepts": "american samoa", "type": "concept", "cluster": "[Temperature Increases]", "node_size": 10, "label": "american samoa"}, "virgin islands": {"concepts": "virgin islands", "type": "concept", "cluster": "[Temperature Increases]", "node_size": 10, "label": "virgin islands"}, "puerto rico": {"concepts": "puerto rico", "type": "concept", "cluster": "[Temperature Increases]", "node_size": 10, "label": "puerto rico"}, "susan jackson": {"concepts": "susan jackson", "type": "concept", "cluster": "AAAS Fellows", "node_size": 10, "label": "susan jackson"}, "aaas fellowship": {"concepts": "aaas fellowship", "type": "concept", "cluster": "AAAS Fellows", "node_size": 10, "label": "aaas fellowship"}, "giancarlo ciccetti": {"concepts": "giancarlo ciccetti", "type": "concept", "cluster": "AAAS Fellows", "node_size": 10, "label": "giancarlo ciccetti"}, "bleaching": {"concepts": "bleaching", "type": "concept", "cluster": "Environmental Impacts", "node_size": 10, "label": "bleaching"}, "biocriteria": {"concepts": "biocriteria", "type": "concept", "cluster": "Environmental Impacts", "node_size": 10, "label": "biocriteria"}, "co2": {"concepts": "co2", "type": "concept", "cluster": "Environmental Impacts", "node_size": 10, "label": "co2"}, "negative impact": {"concepts": "negative impact", "type": "concept", "cluster": "Environmental Impacts", "node_size": 10, "label": "negative impact"}, "local ph": {"concepts": "local ph", "type": "concept", "cluster": "Environmental Impacts", "node_size": 10, "label": "local ph"}, "ph changes": {"concepts": "ph changes", "type": "concept", "cluster": "Environmental Impacts", "node_size": 10, "label": "ph changes"}, "growth rates": {"concepts": "growth rates", "type": "concept", "cluster": "Environmental Impacts", "node_size": 10, "label": "growth rates"}, "epa regions": {"concepts": "epa regions", "type": "concept", "cluster": "EPA & Chesapeake Bay", "node_size": 10, "label": "epa regions"}, "chesapeake bay program": {"concepts": "chesapeake bay program", "type": "concept", "cluster": "EPA & Chesapeake Bay", "node_size": 10, "label": "chesapeake bay program"}, "responsible use": {"concepts": "responsible use", "type": "concept", "cluster": "Management & Coordination", "node_size": 10, "label": "responsible use"}, "interagency meetings": {"concepts": "interagency meetings", "type": "concept", "cluster": "Management & Coordination", "node_size": 10, "label": "interagency meetings"}, "system dynamics": {"concepts": "system dynamics", "type": "concept", "cluster": "Management & Coordination", "node_size": 10, "label": "system dynamics"}, "fuzzy cognitive mapping": {"concepts": "fuzzy cognitive mapping", "type": "concept", "cluster": "Management & Coordination", "node_size": 10, "label": "fuzzy cognitive mapping"}, "management bins": {"concepts": "management bins", "type": "concept", "cluster": "Management & Coordination", "node_size": 10, "label": "management bins"}, "regulatory work": {"concepts": "regulatory work", "type": "concept", "cluster": "Management & Coordination", "node_size": 10, "label": "regulatory work"}, "interagency coordination": {"concepts": "interagency coordination", "type": "concept", "cluster": "Management & Coordination", "node_size": 10, "label": "interagency coordination"}, "best management practices": {"concepts": "best management practices", "type": "concept", "cluster": "Management & Coordination", "node_size": 10, "label": "best management practices"}, "management practices": {"concepts": "management practices", "type": "concept", "cluster": "Management & Coordination", "node_size": 10, "label": "management practices"}, "positive impact": {"concepts": "positive impact", "type": "concept", "cluster": "Management & Coordination", "node_size": 10, "label": "positive impact"}, "system components": {"concepts": "system components", "type": "concept", "cluster": "EPA System Security", "node_size": 10, "label": "system components"}, "mental modeler": {"concepts": "mental modeler", "type": "concept", "cluster": "EPA System Security", "node_size": 10, "label": "mental modeler"}, "epa": {"concepts": "epa", "type": "concept", "cluster": "EPA System Security", "node_size": 10, "label": "epa"}, "job security": {"concepts": "job security", "type": "concept", "cluster": "EPA System Security", "node_size": 10, "label": "job security"}, "marine resource management": {"concepts": "marine resource management", "type": "concept", "cluster": "Coastal Resource Management", "node_size": 10, "label": "marine resource management"}, "coastal issues": {"concepts": "coastal issues", "type": "concept", "cluster": "Coastal Resource Management", "node_size": 10, "label": "coastal issues"}, "fishing communities": {"concepts": "fishing communities", "type": "concept", "cluster": "Coastal Resource Management", "node_size": 10, "label": "fishing communities"}, "coast guard": {"concepts": "coast guard", "type": "concept", "cluster": "Coastal Resource Management", "node_size": 10, "label": "coast guard"}, "geology": {"concepts": "geology", "type": "concept", "cluster": "Earth Composition", "node_size": 10, "label": "geology"}, "geochemistry": {"concepts": "geochemistry", "type": "concept", "cluster": "Earth Composition", "node_size": 10, "label": "geochemistry"}, "water quality": {"concepts": "water quality", "type": "concept", "cluster": "Water Quality Analysis", "node_size": 10, "label": "water quality"}, "turbidity": {"concepts": "turbidity", "type": "concept", "cluster": "Water Quality Analysis", "node_size": 10, "label": "turbidity"}, "water chemistry": {"concepts": "water chemistry", "type": "concept", "cluster": "Water Quality Analysis", "node_size": 10, "label": "water chemistry"}, "water clarity": {"concepts": "water clarity", "type": "concept", "cluster": "Water Quality Analysis", "node_size": 10, "label": "water clarity"}, "acidic water": {"concepts": "acidic water", "type": "concept", "cluster": "Water Acidity", "node_size": 10, "label": "acidic water"}, "calcium carbonate": {"concepts": "calcium carbonate", "type": "concept", "cluster": "Water Acidity", "node_size": 10, "label": "calcium carbonate"}, "global stressors": {"concepts": "global stressors", "type": "concept", "cluster": "Stress Sources", "node_size": 10, "label": "global stressors"}, "stressors": {"concepts": "stressors", "type": "concept", "cluster": "Stress Sources", "node_size": 10, "label": "stressors"}, "localized stressors": {"concepts": "localized stressors", "type": "concept", "cluster": "Local Stressors", "node_size": 10, "label": "localized stressors"}, "local stressors": {"concepts": "local stressors", "type": "concept", "cluster": "Local Stressors", "node_size": 10, "label": "local stressors"}, "cultural significance": {"concepts": "cultural significance", "type": "concept", "cluster": "Cultural Value", "node_size": 10, "label": "cultural significance"}, "cultural services": {"concepts": "cultural services", "type": "concept", "cluster": "Cultural Value", "node_size": 10, "label": "cultural services"}, "land-based pollution": {"concepts": "land-based pollution", "type": "concept", "cluster": "Pollution Sources", "node_size": 10, "label": "land-based pollution"}, "nutrient loads": {"concepts": "nutrient loads", "type": "concept", "cluster": "Pollution Sources", "node_size": 10, "label": "nutrient loads"}, "vessel discharges": {"concepts": "vessel discharges", "type": "concept", "cluster": "Pollution Sources", "node_size": 10, "label": "vessel discharges"}, "pollution sources": {"concepts": "pollution sources", "type": "concept", "cluster": "Pollution Sources", "node_size": 10, "label": "pollution sources"}, "farming practices": {"concepts": "farming practices", "type": "concept", "cluster": "Sustainable Farming", "node_size": 10, "label": "farming practices"}, "sustainable farming": {"concepts": "sustainable farming", "type": "concept", "cluster": "Sustainable Farming", "node_size": 10, "label": "sustainable farming"}, "aquatic nuisance species": {"concepts": "aquatic nuisance species", "type": "concept", "cluster": "Invasive Aquatics", "node_size": 10, "label": "aquatic nuisance species"}, "invasive species": {"concepts": "invasive species", "type": "concept", "cluster": "Invasive Aquatics", "node_size": 10, "label": "invasive species"}, "habitat forming species": {"concepts": "habitat forming species", "type": "concept", "cluster": "Habitat Conservation Assessments", "node_size": 10, "label": "habitat forming species"}, "conservation concern": {"concepts": "conservation concern", "type": "concept", "cluster": "Habitat Conservation Assessments", "node_size": 10, "label": "conservation concern"}, "bioassessments": {"concepts": "bioassessments", "type": "concept", "cluster": "Habitat Conservation Assessments", "node_size": 10, "label": "bioassessments"}, "income opportunities": {"concepts": "income opportunities", "type": "concept", "cluster": "Stakeholder Income", "node_size": 10, "label": "income opportunities"}, "stakeholders": {"concepts": "stakeholders", "type": "concept", "cluster": "Stakeholder Income", "node_size": 10, "label": "stakeholders"}, "local community": {"concepts": "local community", "type": "concept", "cluster": "Local Communities", "node_size": 10, "label": "local community"}, "rural groups": {"concepts": "rural groups", "type": "concept", "cluster": "Local Communities", "node_size": 10, "label": "rural groups"}, "local communities": {"concepts": "local communities", "type": "concept", "cluster": "Local Communities", "node_size": 10, "label": "local communities"}, "local funds": {"concepts": "local funds", "type": "concept", "cluster": "Local Communities", "node_size": 10, "label": "local funds"}, "local resources": {"concepts": "local resources", "type": "concept", "cluster": "Local Communities", "node_size": 10, "label": "local resources"}, "remote work": {"concepts": "remote work", "type": "concept", "cluster": "Local Communities", "node_size": 10, "label": "remote work"}, "ancient soils": {"concepts": "ancient soils", "type": "concept", "cluster": "Paleo Soil Distribution", "node_size": 10, "label": "ancient soils"}, "ancient climates": {"concepts": "ancient climates", "type": "concept", "cluster": "Paleo Soil Distribution", "node_size": 10, "label": "ancient climates"}, "spatial distribution": {"concepts": "spatial distribution", "type": "concept", "cluster": "Paleo Soil Distribution", "node_size": 10, "label": "spatial distribution"}, "federal agencies": {"concepts": "federal agencies", "type": "concept", "cluster": "Government Resources", "node_size": 10, "label": "federal agencies"}, "military agencies": {"concepts": "military agencies", "type": "concept", "cluster": "Government Resources", "node_size": 10, "label": "military agencies"}, "government resources": {"concepts": "government resources", "type": "concept", "cluster": "Government Resources", "node_size": 10, "label": "government resources"}, "territories": {"concepts": "territories", "type": "concept", "cluster": "Territorial Governance", "node_size": 10, "label": "territories"}, "territorial governments": {"concepts": "territorial governments", "type": "concept", "cluster": "Territorial Governance", "node_size": 10, "label": "territorial governments"}, "pacific territories": {"concepts": "pacific territories", "type": "concept", "cluster": "Territorial Governance", "node_size": 10, "label": "pacific territories"}, "caribbean territories": {"concepts": "caribbean territories", "type": "concept", "cluster": "Territorial Governance", "node_size": 10, "label": "caribbean territories"}, "biodiversity": {"concepts": "biodiversity", "type": "concept", "cluster": "Ecosystem Biodiversity", "node_size": 10, "label": "biodiversity"}, "ecosystems": {"concepts": "ecosystems", "type": "concept", "cluster": "Ecosystem Biodiversity", "node_size": 10, "label": "ecosystems"}, "ecosystem": {"concepts": "ecosystem", "type": "concept", "cluster": "Ecosystem Biodiversity", "node_size": 10, "label": "ecosystem"}, "ecosystem services": {"concepts": "ecosystem services", "type": "concept", "cluster": "Ecosystem Biodiversity", "node_size": 10, "label": "ecosystem services"}, "environmental social sciences": {"concepts": "environmental social sciences", "type": "concept", "cluster": "Ecosystem Biodiversity", "node_size": 10, "label": "environmental social sciences"}, "food web": {"concepts": "food web", "type": "concept", "cluster": "Food & Nutrition", "node_size": 10, "label": "food web"}, "nutrition": {"concepts": "nutrition", "type": "concept", "cluster": "Food & Nutrition", "node_size": 10, "label": "nutrition"}, "disease": {"concepts": "disease", "type": "concept", "cluster": "Disease Agents", "node_size": 10, "label": "disease"}, "pathogens": {"concepts": "pathogens", "type": "concept", "cluster": "Disease Agents", "node_size": 10, "label": "pathogens"}};
        const interClusterEdges = [["nearshore systems", "nutrients", {"weight": 1.0, "confidence": 0.5, "type": "inter_cluster", "style": "solid"}], ["nearshore systems", "Environmental Impacts", {"weight": -0.3333333333333333, "confidence": 0.5, "type": "inter_cluster", "style": "solid"}], ["nearshore systems", "Coastal Hazards", {"weight": 1.0, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["waste management", "[Temperature Increases]", {"weight": 0.8, "confidence": 0.24, "type": "inter_cluster", "style": "solid"}], ["waste management", "Federal Agencies", {"weight": 1.0, "confidence": 0.15, "type": "inter_cluster", "style": "solid"}], ["nutrients", "harmful organisms", {"weight": 1.0, "confidence": 0.3666666666666667, "type": "inter_cluster", "style": "solid"}], ["nutrients", "Habitat Conservation Assessments", {"weight": -1.0, "confidence": 0.35, "type": "inter_cluster", "style": "solid"}], ["robust ecosystem", "Ecosystem Biodiversity", {"weight": 1.0, "confidence": 0.9166666666666666, "type": "inter_cluster", "style": "solid"}], ["robust ecosystem", "Pollution Sources", {"weight": -1.0, "confidence": 0.5399999999999999, "type": "inter_cluster", "style": "solid"}], ["robust ecosystem", "Reef Construction Materials", {"weight": -1.0, "confidence": 0.725, "type": "inter_cluster", "style": "solid"}], ["robust ecosystem", "Invasive Aquatics", {"weight": -1.0, "confidence": 0.5, "type": "inter_cluster", "style": "solid"}], ["robust ecosystem", "waste management", {"weight": -1.0, "confidence": 0.35, "type": "inter_cluster", "style": "solid"}], ["food web dynamics", "Local Resources & Work", {"weight": 1.0, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["robustness", "harmful organisms", {"weight": -1.0, "confidence": 0.4666666666666666, "type": "inter_cluster", "style": "solid"}], ["robustness", "Management & Coordination", {"weight": 1.0, "confidence": 0.375, "type": "inter_cluster", "style": "solid"}], ["robustness", "Local Resources & Work", {"weight": 1.0, "confidence": 0.35, "type": "inter_cluster", "style": "solid"}], ["robustness", "Disease Agents", {"weight": -1.0, "confidence": 0.2, "type": "inter_cluster", "style": "solid"}], ["Coral Reef Taskforce", "Habitat Conservation Assessments", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["Coral Health Issues", "EPA & Chesapeake Bay", {"weight": 1.0, "confidence": 0.3875, "type": "inter_cluster", "style": "solid"}], ["Coral Health Issues", "Federal Agencies", {"weight": 1.0, "confidence": 0.35, "type": "inter_cluster", "style": "solid"}], ["Coral Health Issues", "Local Stressors", {"weight": -1.0, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Reef Construction Materials", "Disease Agents", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["Local Resources & Work", "Ecosystem Biodiversity", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["Local Resources & Work", "Water Acidity", {"weight": 1.0, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Temperature Changes", "Local Stressors", {"weight": 0.75, "confidence": 0.48750000000000004, "type": "inter_cluster", "style": "solid"}], ["Temperature Changes", "nearshore systems", {"weight": 1.0, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Temperature Changes", "[Temperature Increases]", {"weight": -1.0, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Coastal Hazards", "robust ecosystem", {"weight": -1.0, "confidence": 0.5333333333333333, "type": "inter_cluster", "style": "solid"}], ["Coastal Hazards", "Water Quality Analysis", {"weight": -1.0, "confidence": 0.5, "type": "inter_cluster", "style": "solid"}], ["[Temperature Increases]", "Pollution Sources", {"weight": 1.0, "confidence": 0.42499999999999993, "type": "inter_cluster", "style": "solid"}], ["[Temperature Increases]", "Ocean Climate Change", {"weight": 1.0, "confidence": 0.42500000000000004, "type": "inter_cluster", "style": "solid"}], ["Environmental Impacts", "Management & Coordination", {"weight": -0.6, "confidence": 0.4, "type": "inter_cluster", "style": "solid"}], ["Management & Coordination", "Habitat Conservation Assessments", {"weight": 1.0, "confidence": 0.4, "type": "inter_cluster", "style": "solid"}], ["Coastal Resource Management", "Coral Reef Taskforce", {"weight": 1.0, "confidence": 0.6166666666666667, "type": "inter_cluster", "style": "solid"}], ["Coastal Resource Management", "Territorial Governance", {"weight": 1.0, "confidence": 0.425, "type": "inter_cluster", "style": "solid"}], ["Coastal Resource Management", "AAAS Fellows", {"weight": 0.6666666666666666, "confidence": 0.16666666666666666, "type": "inter_cluster", "style": "solid"}], ["Earth Composition", "Ocean Climate Change", {"weight": 1.0, "confidence": 0.25, "type": "inter_cluster", "style": "solid"}], ["Water Quality Analysis", "Environmental Impacts", {"weight": -1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["Water Quality Analysis", "Sustainable Farming", {"weight": 1.0, "confidence": 0.35000000000000003, "type": "inter_cluster", "style": "solid"}], ["Water Acidity", "Earth Composition", {"weight": 1.0, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Stress Sources", "Temperature Changes", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["Stress Sources", "Coral Reef Taskforce", {"weight": -1.0, "confidence": 0.8125, "type": "inter_cluster", "style": "solid"}], ["Stress Sources", "Water Quality Analysis", {"weight": -1.0, "confidence": 0.6833333333333332, "type": "inter_cluster", "style": "solid"}], ["Stress Sources", "nearshore systems", {"weight": 0.5, "confidence": 0.325, "type": "inter_cluster", "style": "solid"}], ["Stress Sources", "harmful organisms", {"weight": 1.0, "confidence": 0.35, "type": "inter_cluster", "style": "solid"}], ["Stress Sources", "Coral Health Issues", {"weight": 1.0, "confidence": 0.2, "type": "inter_cluster", "style": "solid"}], ["Local Stressors", "Environmental Impacts", {"weight": 0.3333333333333333, "confidence": 0.7833333333333333, "type": "inter_cluster", "style": "solid"}], ["Local Stressors", "Habitat Conservation Assessments", {"weight": -1.0, "confidence": 0.45999999999999996, "type": "inter_cluster", "style": "solid"}], ["Local Stressors", "Reef Construction Materials", {"weight": 1.0, "confidence": 0.6666666666666666, "type": "inter_cluster", "style": "solid"}], ["Local Stressors", "Management & Coordination", {"weight": 1.0, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Cultural Value", "[Temperature Increases]", {"weight": 1.0, "confidence": 0.475, "type": "inter_cluster", "style": "solid"}], ["Cultural Value", "Coastal Hazards", {"weight": 1.0, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Sustainable Farming", "Water Acidity", {"weight": 1.0, "confidence": 0.26666666666666666, "type": "inter_cluster", "style": "solid"}], ["Sustainable Farming", "robust ecosystem", {"weight": 1.0, "confidence": 0.35, "type": "inter_cluster", "style": "solid"}], ["Sustainable Farming", "infrastructure development", {"weight": 1.0, "confidence": 0.5, "type": "inter_cluster", "style": "solid"}], ["Sustainable Farming", "Invasive Aquatics", {"weight": -1.0, "confidence": 0.4, "type": "inter_cluster", "style": "solid"}], ["Sustainable Farming", "Territorial Governance", {"weight": 1.0, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Invasive Aquatics", "Reef Construction Materials", {"weight": 1.0, "confidence": 0.7124999999999999, "type": "inter_cluster", "style": "solid"}], ["Invasive Aquatics", "Habitat Conservation Assessments", {"weight": -1.0, "confidence": 0.5333333333333333, "type": "inter_cluster", "style": "solid"}], ["Habitat Conservation Assessments", "Stress Sources", {"weight": -0.3333333333333333, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Stakeholder Income", "Management & Coordination", {"weight": 1.0, "confidence": 0.5125, "type": "inter_cluster", "style": "solid"}], ["Stakeholder Income", "[Temperature Increases]", {"weight": 1.0, "confidence": 0.4375, "type": "inter_cluster", "style": "solid"}], ["Stakeholder Income", "Environmental Impacts", {"weight": -1.0, "confidence": 0.35, "type": "inter_cluster", "style": "solid"}], ["Stakeholder Income", "Sustainable Farming", {"weight": 1.0, "confidence": 0.4, "type": "inter_cluster", "style": "solid"}], ["Local Communities", "robustness", {"weight": 1.0, "confidence": 0.4, "type": "inter_cluster", "style": "solid"}], ["Paleo Soil Distribution", "Earth Composition", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["Paleo Soil Distribution", "Stress Sources", {"weight": 1.0, "confidence": 0.22499999999999998, "type": "inter_cluster", "style": "solid"}], ["Government Resources", "Cultural Value", {"weight": 1.0, "confidence": 0.25, "type": "inter_cluster", "style": "solid"}], ["Government Resources", "Sustainable Farming", {"weight": 1.0, "confidence": 0.4, "type": "inter_cluster", "style": "solid"}], ["Territorial Governance", "[Temperature Increases]", {"weight": 1.0, "confidence": 0.9, "type": "inter_cluster", "style": "solid"}], ["Territorial Governance", "Local Communities", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["Territorial Governance", "Coastal Hazards", {"weight": 1.0, "confidence": 0.275, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Biodiversity", "Pollution Sources", {"weight": -1.0, "confidence": 0.5666666666666665, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Biodiversity", "EPA System Security", {"weight": 1.0, "confidence": 0.5, "type": "inter_cluster", "style": "solid"}], ["Food & Nutrition", "Local Resources & Work", {"weight": 1.0, "confidence": 0.3333333333333333, "type": "inter_cluster", "style": "solid"}], ["Food & Nutrition", "Pollution Sources", {"weight": -1.0, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Disease Agents", "infrastructure development", {"weight": -0.5, "confidence": 0.25, "type": "inter_cluster", "style": "solid"}]];
        const clusterConcepts = {"Coral Reef Taskforce": [["coral reefs", {"concepts": "coral reefs", "type": "concept", "cluster": "Coral Reef Taskforce", "node_size": 10, "label": "coral reefs"}], ["coral reef ecosystems", {"concepts": "coral reef ecosystems", "type": "concept", "cluster": "Coral Reef Taskforce", "node_size": 10, "label": "coral reef ecosystems"}], ["corals", {"concepts": "corals", "type": "concept", "cluster": "Coral Reef Taskforce", "node_size": 10, "label": "corals"}], ["coral protection", {"concepts": "coral protection", "type": "concept", "cluster": "Coral Reef Taskforce", "node_size": 10, "label": "coral protection"}], ["coral health", {"concepts": "coral health", "type": "concept", "cluster": "Coral Reef Taskforce", "node_size": 10, "label": "coral health"}]], "Coral Health Issues": [["us coral reef task force", {"concepts": "us coral reef task force", "type": "concept", "cluster": "Coral Health Issues", "node_size": 10, "label": "us coral reef task force"}], ["coral reef task force", {"concepts": "coral reef task force", "type": "concept", "cluster": "Coral Health Issues", "node_size": 10, "label": "coral reef task force"}], ["corals program", {"concepts": "corals program", "type": "concept", "cluster": "Coral Health Issues", "node_size": 10, "label": "corals program"}], ["national coral reef team", {"concepts": "national coral reef team", "type": "concept", "cluster": "Coral Health Issues", "node_size": 10, "label": "national coral reef team"}], ["u.s. coral reef task force", {"concepts": "u.s. coral reef task force", "type": "concept", "cluster": "Coral Health Issues", "node_size": 10, "label": "u.s. coral reef task force"}]], "Reef Construction Materials": [["zooxanthellae", {"concepts": "zooxanthellae", "type": "concept", "cluster": "Reef Construction Materials", "node_size": 10, "label": "zooxanthellae"}], ["coral stress", {"concepts": "coral stress", "type": "concept", "cluster": "Reef Construction Materials", "node_size": 10, "label": "coral stress"}], ["stony coral tissue loss", {"concepts": "stony coral tissue loss", "type": "concept", "cluster": "Reef Construction Materials", "node_size": 10, "label": "stony coral tissue loss"}]], "Local Resources & Work": [["artificial reefs", {"concepts": "artificial reefs", "type": "concept", "cluster": "Local Resources & Work", "node_size": 10, "label": "artificial reefs"}], ["ancient corals", {"concepts": "ancient corals", "type": "concept", "cluster": "Local Resources & Work", "node_size": 10, "label": "ancient corals"}], ["oyster shells", {"concepts": "oyster shells", "type": "concept", "cluster": "Local Resources & Work", "node_size": 10, "label": "oyster shells"}]], "Temperature Changes": [["temperature rise", {"concepts": "temperature rise", "type": "concept", "cluster": "Temperature Changes", "node_size": 10, "label": "temperature rise"}], ["local temperature", {"concepts": "local temperature", "type": "concept", "cluster": "Temperature Changes", "node_size": 10, "label": "local temperature"}], ["temperature changes", {"concepts": "temperature changes", "type": "concept", "cluster": "Temperature Changes", "node_size": 10, "label": "temperature changes"}], ["sea surface temperatures", {"concepts": "sea surface temperatures", "type": "concept", "cluster": "Temperature Changes", "node_size": 10, "label": "sea surface temperatures"}], ["temperature change", {"concepts": "temperature change", "type": "concept", "cluster": "Temperature Changes", "node_size": 10, "label": "temperature change"}]], "Ocean Climate Change": [["warming waters", {"concepts": "warming waters", "type": "concept", "cluster": "Ocean Climate Change", "node_size": 10, "label": "warming waters"}], ["ocean acidification", {"concepts": "ocean acidification", "type": "concept", "cluster": "Ocean Climate Change", "node_size": 10, "label": "ocean acidification"}], ["atmospheric co2", {"concepts": "atmospheric co2", "type": "concept", "cluster": "Ocean Climate Change", "node_size": 10, "label": "atmospheric co2"}], ["climate change", {"concepts": "climate change", "type": "concept", "cluster": "Ocean Climate Change", "node_size": 10, "label": "climate change"}]], "Coastal Hazards": [["storm events", {"concepts": "storm events", "type": "concept", "cluster": "Coastal Hazards", "node_size": 10, "label": "storm events"}], ["sea level rise", {"concepts": "sea level rise", "type": "concept", "cluster": "Coastal Hazards", "node_size": 10, "label": "sea level rise"}]], "Federal Agencies": [["department of defense", {"concepts": "department of defense", "type": "concept", "cluster": "Federal Agencies", "node_size": 10, "label": "department of defense"}], ["department of interior", {"concepts": "department of interior", "type": "concept", "cluster": "Federal Agencies", "node_size": 10, "label": "department of interior"}], ["naval academy", {"concepts": "naval academy", "type": "concept", "cluster": "Federal Agencies", "node_size": 10, "label": "naval academy"}], ["army corps", {"concepts": "army corps", "type": "concept", "cluster": "Federal Agencies", "node_size": 10, "label": "army corps"}], ["noaa", {"concepts": "noaa", "type": "concept", "cluster": "Federal Agencies", "node_size": 10, "label": "noaa"}]], "[Temperature Increases]": [["guam", {"concepts": "guam", "type": "concept", "cluster": "[Temperature Increases]", "node_size": 10, "label": "guam"}], ["hawaii", {"concepts": "hawaii", "type": "concept", "cluster": "[Temperature Increases]", "node_size": 10, "label": "hawaii"}], ["islands", {"concepts": "islands", "type": "concept", "cluster": "[Temperature Increases]", "node_size": 10, "label": "islands"}], ["american samoa", {"concepts": "american samoa", "type": "concept", "cluster": "[Temperature Increases]", "node_size": 10, "label": "american samoa"}], ["virgin islands", {"concepts": "virgin islands", "type": "concept", "cluster": "[Temperature Increases]", "node_size": 10, "label": "virgin islands"}], ["puerto rico", {"concepts": "puerto rico", "type": "concept", "cluster": "[Temperature Increases]", "node_size": 10, "label": "puerto rico"}]], "AAAS Fellows": [["susan jackson", {"concepts": "susan jackson", "type": "concept", "cluster": "AAAS Fellows", "node_size": 10, "label": "susan jackson"}], ["aaas fellowship", {"concepts": "aaas fellowship", "type": "concept", "cluster": "AAAS Fellows", "node_size": 10, "label": "aaas fellowship"}], ["giancarlo ciccetti", {"concepts": "giancarlo ciccetti", "type": "concept", "cluster": "AAAS Fellows", "node_size": 10, "label": "giancarlo ciccetti"}]], "Environmental Impacts": [["bleaching", {"concepts": "bleaching", "type": "concept", "cluster": "Environmental Impacts", "node_size": 10, "label": "bleaching"}], ["biocriteria", {"concepts": "biocriteria", "type": "concept", "cluster": "Environmental Impacts", "node_size": 10, "label": "biocriteria"}], ["co2", {"concepts": "co2", "type": "concept", "cluster": "Environmental Impacts", "node_size": 10, "label": "co2"}], ["negative impact", {"concepts": "negative impact", "type": "concept", "cluster": "Environmental Impacts", "node_size": 10, "label": "negative impact"}], ["local ph", {"concepts": "local ph", "type": "concept", "cluster": "Environmental Impacts", "node_size": 10, "label": "local ph"}], ["ph changes", {"concepts": "ph changes", "type": "concept", "cluster": "Environmental Impacts", "node_size": 10, "label": "ph changes"}], ["growth rates", {"concepts": "growth rates", "type": "concept", "cluster": "Environmental Impacts", "node_size": 10, "label": "growth rates"}]], "EPA & Chesapeake Bay": [["epa regions", {"concepts": "epa regions", "type": "concept", "cluster": "EPA & Chesapeake Bay", "node_size": 10, "label": "epa regions"}], ["chesapeake bay program", {"concepts": "chesapeake bay program", "type": "concept", "cluster": "EPA & Chesapeake Bay", "node_size": 10, "label": "chesapeake bay program"}]], "Management & Coordination": [["responsible use", {"concepts": "responsible use", "type": "concept", "cluster": "Management & Coordination", "node_size": 10, "label": "responsible use"}], ["interagency meetings", {"concepts": "interagency meetings", "type": "concept", "cluster": "Management & Coordination", "node_size": 10, "label": "interagency meetings"}], ["system dynamics", {"concepts": "system dynamics", "type": "concept", "cluster": "Management & Coordination", "node_size": 10, "label": "system dynamics"}], ["fuzzy cognitive mapping", {"concepts": "fuzzy cognitive mapping", "type": "concept", "cluster": "Management & Coordination", "node_size": 10, "label": "fuzzy cognitive mapping"}], ["management bins", {"concepts": "management bins", "type": "concept", "cluster": "Management & Coordination", "node_size": 10, "label": "management bins"}], ["regulatory work", {"concepts": "regulatory work", "type": "concept", "cluster": "Management & Coordination", "node_size": 10, "label": "regulatory work"}], ["interagency coordination", {"concepts": "interagency coordination", "type": "concept", "cluster": "Management & Coordination", "node_size": 10, "label": "interagency coordination"}], ["best management practices", {"concepts": "best management practices", "type": "concept", "cluster": "Management & Coordination", "node_size": 10, "label": "best management practices"}], ["management practices", {"concepts": "management practices", "type": "concept", "cluster": "Management & Coordination", "node_size": 10, "label": "management practices"}], ["positive impact", {"concepts": "positive impact", "type": "concept", "cluster": "Management & Coordination", "node_size": 10, "label": "positive impact"}]], "EPA System Security": [["system components", {"concepts": "system components", "type": "concept", "cluster": "EPA System Security", "node_size": 10, "label": "system components"}], ["mental modeler", {"concepts": "mental modeler", "type": "concept", "cluster": "EPA System Security", "node_size": 10, "label": "mental modeler"}], ["epa", {"concepts": "epa", "type": "concept", "cluster": "EPA System Security", "node_size": 10, "label": "epa"}], ["job security", {"concepts": "job security", "type": "concept", "cluster": "EPA System Security", "node_size": 10, "label": "job security"}]], "Coastal Resource Management": [["marine resource management", {"concepts": "marine resource management", "type": "concept", "cluster": "Coastal Resource Management", "node_size": 10, "label": "marine resource management"}], ["coastal issues", {"concepts": "coastal issues", "type": "concept", "cluster": "Coastal Resource Management", "node_size": 10, "label": "coastal issues"}], ["fishing communities", {"concepts": "fishing communities", "type": "concept", "cluster": "Coastal Resource Management", "node_size": 10, "label": "fishing communities"}], ["coast guard", {"concepts": "coast guard", "type": "concept", "cluster": "Coastal Resource Management", "node_size": 10, "label": "coast guard"}]], "Earth Composition": [["geology", {"concepts": "geology", "type": "concept", "cluster": "Earth Composition", "node_size": 10, "label": "geology"}], ["geochemistry", {"concepts": "geochemistry", "type": "concept", "cluster": "Earth Composition", "node_size": 10, "label": "geochemistry"}]], "Water Quality Analysis": [["water quality", {"concepts": "water quality", "type": "concept", "cluster": "Water Quality Analysis", "node_size": 10, "label": "water quality"}], ["turbidity", {"concepts": "turbidity", "type": "concept", "cluster": "Water Quality Analysis", "node_size": 10, "label": "turbidity"}], ["water chemistry", {"concepts": "water chemistry", "type": "concept", "cluster": "Water Quality Analysis", "node_size": 10, "label": "water chemistry"}], ["water clarity", {"concepts": "water clarity", "type": "concept", "cluster": "Water Quality Analysis", "node_size": 10, "label": "water clarity"}]], "Water Acidity": [["acidic water", {"concepts": "acidic water", "type": "concept", "cluster": "Water Acidity", "node_size": 10, "label": "acidic water"}], ["calcium carbonate", {"concepts": "calcium carbonate", "type": "concept", "cluster": "Water Acidity", "node_size": 10, "label": "calcium carbonate"}]], "Stress Sources": [["global stressors", {"concepts": "global stressors", "type": "concept", "cluster": "Stress Sources", "node_size": 10, "label": "global stressors"}], ["stressors", {"concepts": "stressors", "type": "concept", "cluster": "Stress Sources", "node_size": 10, "label": "stressors"}]], "Local Stressors": [["localized stressors", {"concepts": "localized stressors", "type": "concept", "cluster": "Local Stressors", "node_size": 10, "label": "localized stressors"}], ["local stressors", {"concepts": "local stressors", "type": "concept", "cluster": "Local Stressors", "node_size": 10, "label": "local stressors"}]], "Cultural Value": [["cultural significance", {"concepts": "cultural significance", "type": "concept", "cluster": "Cultural Value", "node_size": 10, "label": "cultural significance"}], ["cultural services", {"concepts": "cultural services", "type": "concept", "cluster": "Cultural Value", "node_size": 10, "label": "cultural services"}]], "Pollution Sources": [["land-based pollution", {"concepts": "land-based pollution", "type": "concept", "cluster": "Pollution Sources", "node_size": 10, "label": "land-based pollution"}], ["nutrient loads", {"concepts": "nutrient loads", "type": "concept", "cluster": "Pollution Sources", "node_size": 10, "label": "nutrient loads"}], ["vessel discharges", {"concepts": "vessel discharges", "type": "concept", "cluster": "Pollution Sources", "node_size": 10, "label": "vessel discharges"}], ["pollution sources", {"concepts": "pollution sources", "type": "concept", "cluster": "Pollution Sources", "node_size": 10, "label": "pollution sources"}]], "Sustainable Farming": [["farming practices", {"concepts": "farming practices", "type": "concept", "cluster": "Sustainable Farming", "node_size": 10, "label": "farming practices"}], ["sustainable farming", {"concepts": "sustainable farming", "type": "concept", "cluster": "Sustainable Farming", "node_size": 10, "label": "sustainable farming"}]], "Invasive Aquatics": [["aquatic nuisance species", {"concepts": "aquatic nuisance species", "type": "concept", "cluster": "Invasive Aquatics", "node_size": 10, "label": "aquatic nuisance species"}], ["invasive species", {"concepts": "invasive species", "type": "concept", "cluster": "Invasive Aquatics", "node_size": 10, "label": "invasive species"}]], "Habitat Conservation Assessments": [["habitat forming species", {"concepts": "habitat forming species", "type": "concept", "cluster": "Habitat Conservation Assessments", "node_size": 10, "label": "habitat forming species"}], ["conservation concern", {"concepts": "conservation concern", "type": "concept", "cluster": "Habitat Conservation Assessments", "node_size": 10, "label": "conservation concern"}], ["bioassessments", {"concepts": "bioassessments", "type": "concept", "cluster": "Habitat Conservation Assessments", "node_size": 10, "label": "bioassessments"}]], "Stakeholder Income": [["income opportunities", {"concepts": "income opportunities", "type": "concept", "cluster": "Stakeholder Income", "node_size": 10, "label": "income opportunities"}], ["stakeholders", {"concepts": "stakeholders", "type": "concept", "cluster": "Stakeholder Income", "node_size": 10, "label": "stakeholders"}]], "Local Communities": [["local community", {"concepts": "local community", "type": "concept", "cluster": "Local Communities", "node_size": 10, "label": "local community"}], ["rural groups", {"concepts": "rural groups", "type": "concept", "cluster": "Local Communities", "node_size": 10, "label": "rural groups"}], ["local communities", {"concepts": "local communities", "type": "concept", "cluster": "Local Communities", "node_size": 10, "label": "local communities"}], ["local funds", {"concepts": "local funds", "type": "concept", "cluster": "Local Communities", "node_size": 10, "label": "local funds"}], ["local resources", {"concepts": "local resources", "type": "concept", "cluster": "Local Communities", "node_size": 10, "label": "local resources"}], ["remote work", {"concepts": "remote work", "type": "concept", "cluster": "Local Communities", "node_size": 10, "label": "remote work"}]], "Paleo Soil Distribution": [["ancient soils", {"concepts": "ancient soils", "type": "concept", "cluster": "Paleo Soil Distribution", "node_size": 10, "label": "ancient soils"}], ["ancient climates", {"concepts": "ancient climates", "type": "concept", "cluster": "Paleo Soil Distribution", "node_size": 10, "label": "ancient climates"}], ["spatial distribution", {"concepts": "spatial distribution", "type": "concept", "cluster": "Paleo Soil Distribution", "node_size": 10, "label": "spatial distribution"}]], "Government Resources": [["federal agencies", {"concepts": "federal agencies", "type": "concept", "cluster": "Government Resources", "node_size": 10, "label": "federal agencies"}], ["military agencies", {"concepts": "military agencies", "type": "concept", "cluster": "Government Resources", "node_size": 10, "label": "military agencies"}], ["government resources", {"concepts": "government resources", "type": "concept", "cluster": "Government Resources", "node_size": 10, "label": "government resources"}]], "Territorial Governance": [["territories", {"concepts": "territories", "type": "concept", "cluster": "Territorial Governance", "node_size": 10, "label": "territories"}], ["territorial governments", {"concepts": "territorial governments", "type": "concept", "cluster": "Territorial Governance", "node_size": 10, "label": "territorial governments"}], ["pacific territories", {"concepts": "pacific territories", "type": "concept", "cluster": "Territorial Governance", "node_size": 10, "label": "pacific territories"}], ["caribbean territories", {"concepts": "caribbean territories", "type": "concept", "cluster": "Territorial Governance", "node_size": 10, "label": "caribbean territories"}]], "Ecosystem Biodiversity": [["biodiversity", {"concepts": "biodiversity", "type": "concept", "cluster": "Ecosystem Biodiversity", "node_size": 10, "label": "biodiversity"}], ["ecosystems", {"concepts": "ecosystems", "type": "concept", "cluster": "Ecosystem Biodiversity", "node_size": 10, "label": "ecosystems"}], ["ecosystem", {"concepts": "ecosystem", "type": "concept", "cluster": "Ecosystem Biodiversity", "node_size": 10, "label": "ecosystem"}], ["ecosystem services", {"concepts": "ecosystem services", "type": "concept", "cluster": "Ecosystem Biodiversity", "node_size": 10, "label": "ecosystem services"}], ["environmental social sciences", {"concepts": "environmental social sciences", "type": "concept", "cluster": "Ecosystem Biodiversity", "node_size": 10, "label": "environmental social sciences"}]], "Food & Nutrition": [["food web", {"concepts": "food web", "type": "concept", "cluster": "Food & Nutrition", "node_size": 10, "label": "food web"}], ["nutrition", {"concepts": "nutrition", "type": "concept", "cluster": "Food & Nutrition", "node_size": 10, "label": "nutrition"}]], "Disease Agents": [["disease", {"concepts": "disease", "type": "concept", "cluster": "Disease Agents", "node_size": 10, "label": "disease"}], ["pathogens", {"concepts": "pathogens", "type": "concept", "cluster": "Disease Agents", "node_size": 10, "label": "pathogens"}]]};
        const clusterEdges = {"Coral Reef Taskforce": [], "Coral Health Issues": [], "Reef Construction Materials": [], "Local Resources & Work": [], "Temperature Changes": [], "Ocean Climate Change": [], "Coastal Hazards": [], "Federal Agencies": [], "[Temperature Increases]": [], "AAAS Fellows": [], "Environmental Impacts": [], "EPA & Chesapeake Bay": [], "Management & Coordination": [], "EPA System Security": [], "Coastal Resource Management": [], "Earth Composition": [], "Water Quality Analysis": [], "Water Acidity": [], "Stress Sources": [], "Local Stressors": [], "Cultural Value": [], "Pollution Sources": [], "Sustainable Farming": [], "Invasive Aquatics": [], "Habitat Conservation Assessments": [], "Stakeholder Income": [], "Local Communities": [], "Paleo Soil Distribution": [], "Government Resources": [], "Territorial Governance": [], "Ecosystem Biodiversity": [], "Food & Nutrition": [], "Disease Agents": []};
        
        let network;
        let currentView = 'clusters';
        let currentCluster = null;
        let minConfidence = 0.3;
        
        // Network options
        const options = {
            nodes: {
                font: { color: 'white', size: 14 },
                borderWidth: 2,
                shadow: true
            },
            edges: {
                arrows: { to: { enabled: true, scaleFactor: 1.2 } },
                shadow: true,
                smooth: { type: 'continuous' }
            },
            physics: {
                stabilization: { iterations: 100 },
                barnesHut: {
                    gravitationalConstant: -8000,
                    springConstant: 0.001,
                    springLength: 200
                }
            },
            interaction: {
                hover: true,
                selectConnectedEdges: false
            }
        };
        
        function initNetwork() {
            const container = document.getElementById('network');
            const data = getClusterViewData();
            network = new vis.Network(container, data, options);
            
            // Handle cluster clicks for drill-down
            network.on("click", function(params) {
                if (params.nodes.length > 0 && currentView === 'clusters') {
                    const clickedNode = params.nodes[0];
                    if (clusterConcepts[clickedNode]) {
                        showClusterDetail(clickedNode);
                    }
                }
            });
        }
        
        function getClusterViewData() {
            const nodes = [];
            const edges = [];
            
            // Add cluster nodes
            Object.entries(clusterData).forEach(([clusterId, data]) => {
                const concepts = data.concepts || [];
                const conceptsStr = Array.isArray(concepts) ? concepts.join(', ') : concepts;
                
                nodes.push({
                    id: clusterId,
                    label: clusterId,
                    title: `Cluster: ${clusterId}\nConcepts: ${conceptsStr}\nClick to explore internal relationships`,
                    color: '#4A90E2',
                    size: 25 + (conceptsStr.split(',').length * 2),
                    font: { color: 'white' }
                });
            });
            
            // Add inter-cluster edges
            interClusterEdges.forEach(([source, target, edgeData]) => {
                const confidence = edgeData.confidence || 1.0;
                const weight = edgeData.weight || 0;
                
                if (confidence >= minConfidence) {
                    edges.push({
                        from: source,
                        to: target,
                        color: weight > 0 ? '#28A745' : '#DC3545',
                        width: Math.abs(weight) * 3 + 1,
                        title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                        dashes: false
                    });
                }
            });
            
            return { nodes: nodes, edges: edges };
        }
        
        function getClusterDetailData(clusterId) {
            const nodes = [];
            const edges = [];
            
            // Add concept nodes for this cluster
            if (clusterConcepts[clusterId]) {
                clusterConcepts[clusterId].forEach(([conceptId, data]) => {
                    nodes.push({
                        id: conceptId,
                        label: conceptId,
                        title: `Concept: ${conceptId}\nFrom cluster: ${clusterId}`,
                        color: '#FF9500',
                        size: 20,
                        font: { color: 'white' }
                    });
                });
            }
            
            // Add intra-cluster edges
            if (clusterEdges[clusterId]) {
                clusterEdges[clusterId].forEach(([source, target, edgeData]) => {
                    const confidence = edgeData.confidence || 1.0;
                    const weight = edgeData.weight || 0;
                    
                    if (confidence >= minConfidence) {
                        edges.push({
                            from: source,
                            to: target,
                            color: weight > 0 ? '#28A745' : '#DC3545',
                            width: Math.abs(weight) * 3 + 1,
                            title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                            dashes: true
                        });
                    }
                });
            }
            
            return { nodes: nodes, edges: edges };
        }
        
        function showClusterView() {
            currentView = 'clusters';
            currentCluster = null;
            const data = getClusterViewData();
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'none';
            document.getElementById('current-view').textContent = 'Cluster Overview';
        }
        
        function showClusterDetail(clusterId) {
            currentView = 'concepts';
            currentCluster = clusterId;
            const data = getClusterDetailData(clusterId);
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'inline-block';
            document.getElementById('current-view').textContent = `Inside Cluster: ${clusterId}`;
        }
        
        function updateConfidenceFilter(value) {
            minConfidence = parseFloat(value);
            document.getElementById('confidence-value').textContent = value;
            
            // Refresh current view
            if (currentView === 'clusters') {
                showClusterView();
            } else {
                showClusterDetail(currentCluster);
            }
        }
        
        // Initialize the network when page loads
        window.onload = function() {
            initNetwork();
        };
    </script>
</body>
</html>
