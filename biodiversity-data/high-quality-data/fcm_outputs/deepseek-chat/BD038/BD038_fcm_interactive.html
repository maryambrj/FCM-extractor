
<!DOCTYPE html>
<html>
<head>
    <title>Hierarchical FCM Visualization</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 0; 
            padding: 20px;
            background: #f5f5f5;
        }
        
        #network { 
            width: 100%; 
            height: 600px; 
            border: 2px solid #ccc; 
            background: white;
            border-radius: 8px;
        }
        
        #controls {
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn {
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        
        .btn-primary { background: #4A90E2; color: white; }
        .btn-primary:hover { background: #357ABD; }
        
        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #545b62; }
        
        #current-view {
            font-weight: bold;
            color: #333;
            margin-left: 10px;
        }
        
        #legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-size: 12px;
            max-width: 200px;
        }
        
        .legend-item {
            margin: 5px 0;
            display: flex;
            align-items: center;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .legend-line {
            width: 20px;
            height: 2px;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <h1>Fuzzy Cognitive Map - Hierarchical View</h1>
    
    <div id="controls">
        <button class="btn btn-secondary" id="back-btn" onclick="showClusterView()" style="display: none;">
            ‚Üê Back to Clusters
        </button>
        <span id="current-view">Cluster Overview</span>
        <div style="float: right;">
            <label>Min Confidence: </label>
            <input type="range" id="confidence-slider" min="0" max="1" step="0.1" value="0.3" 
                   onchange="updateConfidenceFilter(this.value)">
            <span id="confidence-value">0.3</span>
        </div>
    </div>
    
    <div id="network"></div>
    
    <div id="legend">
        <h4>Legend</h4>
        <div class="legend-item">
            <div class="legend-color" style="background: #4A90E2;"></div>
            <span>Clusters</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #FF9500;"></div>
            <span>Concepts</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #28A745;"></div>
            <span>Positive relationship</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #DC3545;"></div>
            <span>Negative relationship</span>
        </div>
        <div style="margin-top: 10px; font-style: italic; color: #666;">
            Click clusters to explore internal concepts
        </div>
    </div>

    <script>
        // Embedded data
        const clusterData = {"Habitat Management Policies": {"concepts": "local experts, policy, public, mitigation banks", "concept_list": ["local experts", "policy", "public", "mitigation banks"], "type": "cluster", "node_size": 27, "label": "Habitat Management Policies"}, "Environmental Collaboration Tools": {"concepts": "industrial uses, management concepts, oyster restoration, habitats, preferred state, management policies, seasonality, fish consumption, wetlands protection, permit, permit compliance, invasive vegetation, protected species, conservation science, incentives, organizational structures, citizen scientists, sackett decision, pollution intervention, marine biodiversity, conservation concern, fish, food web, wetland clearing, army corps of engineers, public engagement, permits, species protection, native vegetation", "concept_list": ["industrial uses", "management concepts", "oyster restoration", "habitats", "preferred state", "management policies", "seasonality", "fish consumption", "wetlands protection", "permit", "permit compliance", "invasive vegetation", "protected species", "conservation science", "incentives", "organizational structures", "citizen scientists", "sackett decision", "pollution intervention", "marine biodiversity", "conservation concern", "fish", "food web", "wetland clearing", "army corps of engineers", "public engagement", "permits", "species protection", "native vegetation"], "type": "cluster", "node_size": 102, "label": "Environmental Collaboration Tools"}, "Ecosystem Health Value": {"concepts": "epa enforcement, waterkeeper alliance, data collection, public access, alabama, epa, relationship strength, visualization tool, improvement plans, team retreat, apps, dali, us army corps of engineers, mental modeler, filtration services, mobile bay, leadership, fragmentation, diversity of organisms, audubon society, swimming, fishing, degradation, picasso paintings, collaboration, rorschach test, corridor, hierarchy, workflow, social dynamics, staff scientist, migration, workshop tool", "concept_list": ["epa enforcement", "waterkeeper alliance", "data collection", "public access", "alabama", "epa", "relationship strength", "visualization tool", "improvement plans", "team retreat", "apps", "dali", "us army corps of engineers", "mental modeler", "filtration services", "mobile bay", "leadership", "fragmentation", "diversity of organisms", "audubon society", "swimming", "fishing", "degradation", "picasso paintings", "collaboration", "rorschach test", "corridor", "hierarchy", "workflow", "social dynamics", "staff scientist", "migration", "workshop tool"], "type": "cluster", "node_size": 114, "label": "Ecosystem Health Value"}, "Water Quality Management": {"concepts": "ecological value, ecosystem function, ecosystem, environmental nonprofit, ecosystem diversity, ecosystem health, human impacts", "concept_list": ["ecological value", "ecosystem function", "ecosystem", "environmental nonprofit", "ecosystem diversity", "ecosystem health", "human impacts"], "type": "cluster", "node_size": 36, "label": "Water Quality Management"}, "Local Policy Experts": {"concepts": "water improvement plans, impaired waterways, water improvement, water quality enforcement, wetlands, riparian buffer, coastal waters, watershed, effluent, clean water act, seagrass beds, water quality monitoring, tributary waters, waterway designation, water quality, water quality thresholds", "concept_list": ["water improvement plans", "impaired waterways", "water improvement", "water quality enforcement", "wetlands", "riparian buffer", "coastal waters", "watershed", "effluent", "clean water act", "seagrass beds", "water quality monitoring", "tributary waters", "waterway designation", "water quality", "water quality thresholds"], "type": "cluster", "node_size": 63, "label": "Local Policy Experts"}, "Species Conservation": {"concepts": "listed species, supporting species, sensitive species, poster child species, species, harmful organisms, food web supporting species", "concept_list": ["listed species", "supporting species", "sensitive species", "poster child species", "species", "harmful organisms", "food web supporting species"], "type": "cluster", "node_size": 36, "label": "Species Conservation"}, "Biodiversity Conservation": {"concepts": "species diversity, species conservation, keystone species, biodiversity data, biodiversity, species counts", "concept_list": ["species diversity", "species conservation", "keystone species", "biodiversity data", "biodiversity", "species counts"], "type": "cluster", "node_size": 33, "label": "Biodiversity Conservation"}, "Regulatory Compliance": {"concepts": "development credits, state standards, regulatory agencies, federal standards, regulatory enforcement, litigation, jurisdictional protection, state agencies, court involvement, enforcement, federal enforcement", "concept_list": ["development credits", "state standards", "regulatory agencies", "federal standards", "regulatory enforcement", "litigation", "jurisdictional protection", "state agencies", "court involvement", "enforcement", "federal enforcement"], "type": "cluster", "node_size": 48, "label": "Regulatory Compliance"}, "Habitat Conservation": {"concepts": "habitat forming species, habitat, habitat protection, urban wildlife, ecosystem protection, habitat functionality, recreational use, wildlife, protected species habitat, habitat fragmentation", "concept_list": ["habitat forming species", "habitat", "habitat protection", "urban wildlife", "ecosystem protection", "habitat functionality", "recreational use", "wildlife", "protected species habitat", "habitat fragmentation"], "type": "cluster", "node_size": 45, "label": "Habitat Conservation"}};
        const conceptData = {"local experts": {"concepts": "local experts", "type": "concept", "cluster": "Habitat Management Policies", "node_size": 10, "label": "local experts"}, "policy": {"concepts": "policy", "type": "concept", "cluster": "Habitat Management Policies", "node_size": 10, "label": "policy"}, "public": {"concepts": "public", "type": "concept", "cluster": "Habitat Management Policies", "node_size": 10, "label": "public"}, "mitigation banks": {"concepts": "mitigation banks", "type": "concept", "cluster": "Habitat Management Policies", "node_size": 10, "label": "mitigation banks"}, "industrial uses": {"concepts": "industrial uses", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "industrial uses"}, "management concepts": {"concepts": "management concepts", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "management concepts"}, "oyster restoration": {"concepts": "oyster restoration", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "oyster restoration"}, "habitats": {"concepts": "habitats", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "habitats"}, "preferred state": {"concepts": "preferred state", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "preferred state"}, "management policies": {"concepts": "management policies", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "management policies"}, "seasonality": {"concepts": "seasonality", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "seasonality"}, "fish consumption": {"concepts": "fish consumption", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "fish consumption"}, "wetlands protection": {"concepts": "wetlands protection", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "wetlands protection"}, "permit": {"concepts": "permit", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "permit"}, "permit compliance": {"concepts": "permit compliance", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "permit compliance"}, "invasive vegetation": {"concepts": "invasive vegetation", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "invasive vegetation"}, "protected species": {"concepts": "protected species", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "protected species"}, "conservation science": {"concepts": "conservation science", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "conservation science"}, "incentives": {"concepts": "incentives", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "incentives"}, "organizational structures": {"concepts": "organizational structures", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "organizational structures"}, "citizen scientists": {"concepts": "citizen scientists", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "citizen scientists"}, "sackett decision": {"concepts": "sackett decision", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "sackett decision"}, "pollution intervention": {"concepts": "pollution intervention", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "pollution intervention"}, "marine biodiversity": {"concepts": "marine biodiversity", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "marine biodiversity"}, "conservation concern": {"concepts": "conservation concern", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "conservation concern"}, "fish": {"concepts": "fish", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "fish"}, "food web": {"concepts": "food web", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "food web"}, "wetland clearing": {"concepts": "wetland clearing", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "wetland clearing"}, "army corps of engineers": {"concepts": "army corps of engineers", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "army corps of engineers"}, "public engagement": {"concepts": "public engagement", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "public engagement"}, "permits": {"concepts": "permits", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "permits"}, "species protection": {"concepts": "species protection", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "species protection"}, "native vegetation": {"concepts": "native vegetation", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "native vegetation"}, "epa enforcement": {"concepts": "epa enforcement", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "epa enforcement"}, "waterkeeper alliance": {"concepts": "waterkeeper alliance", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "waterkeeper alliance"}, "data collection": {"concepts": "data collection", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "data collection"}, "public access": {"concepts": "public access", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "public access"}, "alabama": {"concepts": "alabama", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "alabama"}, "epa": {"concepts": "epa", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "epa"}, "relationship strength": {"concepts": "relationship strength", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "relationship strength"}, "visualization tool": {"concepts": "visualization tool", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "visualization tool"}, "improvement plans": {"concepts": "improvement plans", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "improvement plans"}, "team retreat": {"concepts": "team retreat", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "team retreat"}, "apps": {"concepts": "apps", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "apps"}, "dali": {"concepts": "dali", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "dali"}, "us army corps of engineers": {"concepts": "us army corps of engineers", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "us army corps of engineers"}, "mental modeler": {"concepts": "mental modeler", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "mental modeler"}, "filtration services": {"concepts": "filtration services", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "filtration services"}, "mobile bay": {"concepts": "mobile bay", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "mobile bay"}, "leadership": {"concepts": "leadership", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "leadership"}, "fragmentation": {"concepts": "fragmentation", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "fragmentation"}, "diversity of organisms": {"concepts": "diversity of organisms", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "diversity of organisms"}, "audubon society": {"concepts": "audubon society", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "audubon society"}, "swimming": {"concepts": "swimming", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "swimming"}, "fishing": {"concepts": "fishing", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "fishing"}, "degradation": {"concepts": "degradation", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "degradation"}, "picasso paintings": {"concepts": "picasso paintings", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "picasso paintings"}, "collaboration": {"concepts": "collaboration", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "collaboration"}, "rorschach test": {"concepts": "rorschach test", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "rorschach test"}, "corridor": {"concepts": "corridor", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "corridor"}, "hierarchy": {"concepts": "hierarchy", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "hierarchy"}, "workflow": {"concepts": "workflow", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "workflow"}, "social dynamics": {"concepts": "social dynamics", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "social dynamics"}, "staff scientist": {"concepts": "staff scientist", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "staff scientist"}, "migration": {"concepts": "migration", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "migration"}, "workshop tool": {"concepts": "workshop tool", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "workshop tool"}, "ecological value": {"concepts": "ecological value", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "ecological value"}, "ecosystem function": {"concepts": "ecosystem function", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "ecosystem function"}, "ecosystem": {"concepts": "ecosystem", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "ecosystem"}, "environmental nonprofit": {"concepts": "environmental nonprofit", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "environmental nonprofit"}, "ecosystem diversity": {"concepts": "ecosystem diversity", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "ecosystem diversity"}, "ecosystem health": {"concepts": "ecosystem health", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "ecosystem health"}, "human impacts": {"concepts": "human impacts", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "human impacts"}, "water improvement plans": {"concepts": "water improvement plans", "type": "concept", "cluster": "Local Policy Experts", "node_size": 10, "label": "water improvement plans"}, "impaired waterways": {"concepts": "impaired waterways", "type": "concept", "cluster": "Local Policy Experts", "node_size": 10, "label": "impaired waterways"}, "water improvement": {"concepts": "water improvement", "type": "concept", "cluster": "Local Policy Experts", "node_size": 10, "label": "water improvement"}, "water quality enforcement": {"concepts": "water quality enforcement", "type": "concept", "cluster": "Local Policy Experts", "node_size": 10, "label": "water quality enforcement"}, "wetlands": {"concepts": "wetlands", "type": "concept", "cluster": "Local Policy Experts", "node_size": 10, "label": "wetlands"}, "riparian buffer": {"concepts": "riparian buffer", "type": "concept", "cluster": "Local Policy Experts", "node_size": 10, "label": "riparian buffer"}, "coastal waters": {"concepts": "coastal waters", "type": "concept", "cluster": "Local Policy Experts", "node_size": 10, "label": "coastal waters"}, "watershed": {"concepts": "watershed", "type": "concept", "cluster": "Local Policy Experts", "node_size": 10, "label": "watershed"}, "effluent": {"concepts": "effluent", "type": "concept", "cluster": "Local Policy Experts", "node_size": 10, "label": "effluent"}, "clean water act": {"concepts": "clean water act", "type": "concept", "cluster": "Local Policy Experts", "node_size": 10, "label": "clean water act"}, "seagrass beds": {"concepts": "seagrass beds", "type": "concept", "cluster": "Local Policy Experts", "node_size": 10, "label": "seagrass beds"}, "water quality monitoring": {"concepts": "water quality monitoring", "type": "concept", "cluster": "Local Policy Experts", "node_size": 10, "label": "water quality monitoring"}, "tributary waters": {"concepts": "tributary waters", "type": "concept", "cluster": "Local Policy Experts", "node_size": 10, "label": "tributary waters"}, "waterway designation": {"concepts": "waterway designation", "type": "concept", "cluster": "Local Policy Experts", "node_size": 10, "label": "waterway designation"}, "water quality": {"concepts": "water quality", "type": "concept", "cluster": "Local Policy Experts", "node_size": 10, "label": "water quality"}, "water quality thresholds": {"concepts": "water quality thresholds", "type": "concept", "cluster": "Local Policy Experts", "node_size": 10, "label": "water quality thresholds"}, "listed species": {"concepts": "listed species", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "listed species"}, "supporting species": {"concepts": "supporting species", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "supporting species"}, "sensitive species": {"concepts": "sensitive species", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "sensitive species"}, "poster child species": {"concepts": "poster child species", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "poster child species"}, "species": {"concepts": "species", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "species"}, "harmful organisms": {"concepts": "harmful organisms", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "harmful organisms"}, "food web supporting species": {"concepts": "food web supporting species", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "food web supporting species"}, "species diversity": {"concepts": "species diversity", "type": "concept", "cluster": "Biodiversity Conservation", "node_size": 10, "label": "species diversity"}, "species conservation": {"concepts": "species conservation", "type": "concept", "cluster": "Biodiversity Conservation", "node_size": 10, "label": "species conservation"}, "keystone species": {"concepts": "keystone species", "type": "concept", "cluster": "Biodiversity Conservation", "node_size": 10, "label": "keystone species"}, "biodiversity data": {"concepts": "biodiversity data", "type": "concept", "cluster": "Biodiversity Conservation", "node_size": 10, "label": "biodiversity data"}, "biodiversity": {"concepts": "biodiversity", "type": "concept", "cluster": "Biodiversity Conservation", "node_size": 10, "label": "biodiversity"}, "species counts": {"concepts": "species counts", "type": "concept", "cluster": "Biodiversity Conservation", "node_size": 10, "label": "species counts"}, "development credits": {"concepts": "development credits", "type": "concept", "cluster": "Regulatory Compliance", "node_size": 10, "label": "development credits"}, "state standards": {"concepts": "state standards", "type": "concept", "cluster": "Regulatory Compliance", "node_size": 10, "label": "state standards"}, "regulatory agencies": {"concepts": "regulatory agencies", "type": "concept", "cluster": "Regulatory Compliance", "node_size": 10, "label": "regulatory agencies"}, "federal standards": {"concepts": "federal standards", "type": "concept", "cluster": "Regulatory Compliance", "node_size": 10, "label": "federal standards"}, "regulatory enforcement": {"concepts": "regulatory enforcement", "type": "concept", "cluster": "Regulatory Compliance", "node_size": 10, "label": "regulatory enforcement"}, "litigation": {"concepts": "litigation", "type": "concept", "cluster": "Regulatory Compliance", "node_size": 10, "label": "litigation"}, "jurisdictional protection": {"concepts": "jurisdictional protection", "type": "concept", "cluster": "Regulatory Compliance", "node_size": 10, "label": "jurisdictional protection"}, "state agencies": {"concepts": "state agencies", "type": "concept", "cluster": "Regulatory Compliance", "node_size": 10, "label": "state agencies"}, "court involvement": {"concepts": "court involvement", "type": "concept", "cluster": "Regulatory Compliance", "node_size": 10, "label": "court involvement"}, "enforcement": {"concepts": "enforcement", "type": "concept", "cluster": "Regulatory Compliance", "node_size": 10, "label": "enforcement"}, "federal enforcement": {"concepts": "federal enforcement", "type": "concept", "cluster": "Regulatory Compliance", "node_size": 10, "label": "federal enforcement"}, "habitat forming species": {"concepts": "habitat forming species", "type": "concept", "cluster": "Habitat Conservation", "node_size": 10, "label": "habitat forming species"}, "habitat": {"concepts": "habitat", "type": "concept", "cluster": "Habitat Conservation", "node_size": 10, "label": "habitat"}, "habitat protection": {"concepts": "habitat protection", "type": "concept", "cluster": "Habitat Conservation", "node_size": 10, "label": "habitat protection"}, "urban wildlife": {"concepts": "urban wildlife", "type": "concept", "cluster": "Habitat Conservation", "node_size": 10, "label": "urban wildlife"}, "ecosystem protection": {"concepts": "ecosystem protection", "type": "concept", "cluster": "Habitat Conservation", "node_size": 10, "label": "ecosystem protection"}, "habitat functionality": {"concepts": "habitat functionality", "type": "concept", "cluster": "Habitat Conservation", "node_size": 10, "label": "habitat functionality"}, "recreational use": {"concepts": "recreational use", "type": "concept", "cluster": "Habitat Conservation", "node_size": 10, "label": "recreational use"}, "wildlife": {"concepts": "wildlife", "type": "concept", "cluster": "Habitat Conservation", "node_size": 10, "label": "wildlife"}, "protected species habitat": {"concepts": "protected species habitat", "type": "concept", "cluster": "Habitat Conservation", "node_size": 10, "label": "protected species habitat"}, "habitat fragmentation": {"concepts": "habitat fragmentation", "type": "concept", "cluster": "Habitat Conservation", "node_size": 10, "label": "habitat fragmentation"}};
        const interClusterEdges = [["Habitat Management Policies", "Local Policy Experts", {"weight": 0.6, "confidence": 0.7300000000000001, "type": "inter_cluster", "style": "solid"}], ["Habitat Management Policies", "Biodiversity Conservation", {"weight": 1.0, "confidence": 0.725, "type": "inter_cluster", "style": "solid"}], ["Habitat Management Policies", "Habitat Conservation", {"weight": 0.75, "confidence": 0.5375, "type": "inter_cluster", "style": "solid"}], ["Habitat Management Policies", "Regulatory Compliance", {"weight": 1.0, "confidence": 0.675, "type": "inter_cluster", "style": "solid"}], ["Environmental Collaboration Tools", "Local Policy Experts", {"weight": 1.0, "confidence": 0.8299999999999998, "type": "inter_cluster", "style": "solid"}], ["Environmental Collaboration Tools", "Biodiversity Conservation", {"weight": 0.6, "confidence": 0.8099999999999999, "type": "inter_cluster", "style": "solid"}], ["Environmental Collaboration Tools", "Species Conservation", {"weight": 0.8, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["Environmental Collaboration Tools", "Habitat Conservation", {"weight": 0.5, "confidence": 0.8125, "type": "inter_cluster", "style": "solid"}], ["Environmental Collaboration Tools", "Regulatory Compliance", {"weight": 0.5, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["Environmental Collaboration Tools", "Habitat Management Policies", {"weight": 0.75, "confidence": 0.5249999999999999, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Health Value", "Biodiversity Conservation", {"weight": 0.75, "confidence": 0.575, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Health Value", "Regulatory Compliance", {"weight": 0.6666666666666666, "confidence": 0.5499999999999999, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Health Value", "Environmental Collaboration Tools", {"weight": 0.5, "confidence": 0.375, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Health Value", "Species Conservation", {"weight": 0.3333333333333333, "confidence": 0.25, "type": "inter_cluster", "style": "solid"}], ["Water Quality Management", "Habitat Conservation", {"weight": 1.0, "confidence": 0.8800000000000001, "type": "inter_cluster", "style": "solid"}], ["Water Quality Management", "Local Policy Experts", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["Water Quality Management", "Environmental Collaboration Tools", {"weight": 0.6, "confidence": 0.82, "type": "inter_cluster", "style": "solid"}], ["Water Quality Management", "Regulatory Compliance", {"weight": 1.0, "confidence": 0.74, "type": "inter_cluster", "style": "solid"}], ["Water Quality Management", "Biodiversity Conservation", {"weight": 1.0, "confidence": 0.8750000000000001, "type": "inter_cluster", "style": "solid"}], ["Water Quality Management", "Species Conservation", {"weight": 1.0, "confidence": 0.825, "type": "inter_cluster", "style": "solid"}], ["Local Policy Experts", "Biodiversity Conservation", {"weight": 1.0, "confidence": 0.8699999999999999, "type": "inter_cluster", "style": "solid"}], ["Local Policy Experts", "Species Conservation", {"weight": 1.0, "confidence": 0.8399999999999999, "type": "inter_cluster", "style": "solid"}], ["Local Policy Experts", "Regulatory Compliance", {"weight": 1.0, "confidence": 0.76, "type": "inter_cluster", "style": "solid"}], ["Local Policy Experts", "Water Quality Management", {"weight": 1.0, "confidence": 0.8750000000000001, "type": "inter_cluster", "style": "solid"}], ["Local Policy Experts", "Habitat Conservation", {"weight": 1.0, "confidence": 0.8500000000000001, "type": "inter_cluster", "style": "solid"}], ["Local Policy Experts", "Habitat Management Policies", {"weight": 0.4, "confidence": 0.5900000000000001, "type": "inter_cluster", "style": "solid"}], ["Local Policy Experts", "Environmental Collaboration Tools", {"weight": 0.5, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["Species Conservation", "Biodiversity Conservation", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["Species Conservation", "Habitat Conservation", {"weight": 1.0, "confidence": 0.8625, "type": "inter_cluster", "style": "solid"}], ["Species Conservation", "Water Quality Management", {"weight": 0.5, "confidence": 0.7875, "type": "inter_cluster", "style": "solid"}], ["Species Conservation", "Regulatory Compliance", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["Species Conservation", "Environmental Collaboration Tools", {"weight": 1.0, "confidence": 0.7666666666666666, "type": "inter_cluster", "style": "solid"}], ["Biodiversity Conservation", "Habitat Conservation", {"weight": 1.0, "confidence": 0.82, "type": "inter_cluster", "style": "solid"}], ["Biodiversity Conservation", "Species Conservation", {"weight": 1.0, "confidence": 0.8250000000000001, "type": "inter_cluster", "style": "solid"}], ["Biodiversity Conservation", "Ecosystem Health Value", {"weight": 0.8, "confidence": 0.58, "type": "inter_cluster", "style": "solid"}], ["Biodiversity Conservation", "Environmental Collaboration Tools", {"weight": 1.0, "confidence": 0.7666666666666666, "type": "inter_cluster", "style": "solid"}], ["Biodiversity Conservation", "Habitat Management Policies", {"weight": 1.0, "confidence": 0.7166666666666667, "type": "inter_cluster", "style": "solid"}], ["Regulatory Compliance", "Species Conservation", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["Regulatory Compliance", "Local Policy Experts", {"weight": 1.0, "confidence": 0.78, "type": "inter_cluster", "style": "solid"}], ["Regulatory Compliance", "Habitat Conservation", {"weight": 1.0, "confidence": 0.7625, "type": "inter_cluster", "style": "solid"}], ["Regulatory Compliance", "Environmental Collaboration Tools", {"weight": 1.0, "confidence": 0.7625, "type": "inter_cluster", "style": "solid"}], ["Regulatory Compliance", "Water Quality Management", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["Regulatory Compliance", "Habitat Management Policies", {"weight": -0.5, "confidence": 0.6874999999999999, "type": "inter_cluster", "style": "solid"}], ["Regulatory Compliance", "Biodiversity Conservation", {"weight": 1.0, "confidence": 0.7666666666666666, "type": "inter_cluster", "style": "solid"}], ["Habitat Conservation", "Species Conservation", {"weight": 1.0, "confidence": 0.8700000000000001, "type": "inter_cluster", "style": "solid"}], ["Habitat Conservation", "Local Policy Experts", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["Habitat Conservation", "Environmental Collaboration Tools", {"weight": 1.0, "confidence": 0.8300000000000001, "type": "inter_cluster", "style": "solid"}], ["Habitat Conservation", "Water Quality Management", {"weight": 1.0, "confidence": 0.875, "type": "inter_cluster", "style": "solid"}]];
        const clusterConcepts = {"Habitat Management Policies": [["local experts", {"concepts": "local experts", "type": "concept", "cluster": "Habitat Management Policies", "node_size": 10, "label": "local experts"}], ["policy", {"concepts": "policy", "type": "concept", "cluster": "Habitat Management Policies", "node_size": 10, "label": "policy"}], ["public", {"concepts": "public", "type": "concept", "cluster": "Habitat Management Policies", "node_size": 10, "label": "public"}], ["mitigation banks", {"concepts": "mitigation banks", "type": "concept", "cluster": "Habitat Management Policies", "node_size": 10, "label": "mitigation banks"}]], "Environmental Collaboration Tools": [["industrial uses", {"concepts": "industrial uses", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "industrial uses"}], ["management concepts", {"concepts": "management concepts", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "management concepts"}], ["oyster restoration", {"concepts": "oyster restoration", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "oyster restoration"}], ["habitats", {"concepts": "habitats", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "habitats"}], ["preferred state", {"concepts": "preferred state", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "preferred state"}], ["management policies", {"concepts": "management policies", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "management policies"}], ["seasonality", {"concepts": "seasonality", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "seasonality"}], ["fish consumption", {"concepts": "fish consumption", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "fish consumption"}], ["wetlands protection", {"concepts": "wetlands protection", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "wetlands protection"}], ["permit", {"concepts": "permit", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "permit"}], ["permit compliance", {"concepts": "permit compliance", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "permit compliance"}], ["invasive vegetation", {"concepts": "invasive vegetation", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "invasive vegetation"}], ["protected species", {"concepts": "protected species", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "protected species"}], ["conservation science", {"concepts": "conservation science", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "conservation science"}], ["incentives", {"concepts": "incentives", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "incentives"}], ["organizational structures", {"concepts": "organizational structures", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "organizational structures"}], ["citizen scientists", {"concepts": "citizen scientists", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "citizen scientists"}], ["sackett decision", {"concepts": "sackett decision", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "sackett decision"}], ["pollution intervention", {"concepts": "pollution intervention", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "pollution intervention"}], ["marine biodiversity", {"concepts": "marine biodiversity", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "marine biodiversity"}], ["conservation concern", {"concepts": "conservation concern", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "conservation concern"}], ["fish", {"concepts": "fish", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "fish"}], ["food web", {"concepts": "food web", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "food web"}], ["wetland clearing", {"concepts": "wetland clearing", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "wetland clearing"}], ["army corps of engineers", {"concepts": "army corps of engineers", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "army corps of engineers"}], ["public engagement", {"concepts": "public engagement", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "public engagement"}], ["permits", {"concepts": "permits", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "permits"}], ["species protection", {"concepts": "species protection", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "species protection"}], ["native vegetation", {"concepts": "native vegetation", "type": "concept", "cluster": "Environmental Collaboration Tools", "node_size": 10, "label": "native vegetation"}]], "Ecosystem Health Value": [["epa enforcement", {"concepts": "epa enforcement", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "epa enforcement"}], ["waterkeeper alliance", {"concepts": "waterkeeper alliance", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "waterkeeper alliance"}], ["data collection", {"concepts": "data collection", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "data collection"}], ["public access", {"concepts": "public access", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "public access"}], ["alabama", {"concepts": "alabama", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "alabama"}], ["epa", {"concepts": "epa", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "epa"}], ["relationship strength", {"concepts": "relationship strength", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "relationship strength"}], ["visualization tool", {"concepts": "visualization tool", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "visualization tool"}], ["improvement plans", {"concepts": "improvement plans", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "improvement plans"}], ["team retreat", {"concepts": "team retreat", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "team retreat"}], ["apps", {"concepts": "apps", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "apps"}], ["dali", {"concepts": "dali", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "dali"}], ["us army corps of engineers", {"concepts": "us army corps of engineers", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "us army corps of engineers"}], ["mental modeler", {"concepts": "mental modeler", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "mental modeler"}], ["filtration services", {"concepts": "filtration services", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "filtration services"}], ["mobile bay", {"concepts": "mobile bay", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "mobile bay"}], ["leadership", {"concepts": "leadership", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "leadership"}], ["fragmentation", {"concepts": "fragmentation", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "fragmentation"}], ["diversity of organisms", {"concepts": "diversity of organisms", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "diversity of organisms"}], ["audubon society", {"concepts": "audubon society", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "audubon society"}], ["swimming", {"concepts": "swimming", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "swimming"}], ["fishing", {"concepts": "fishing", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "fishing"}], ["degradation", {"concepts": "degradation", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "degradation"}], ["picasso paintings", {"concepts": "picasso paintings", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "picasso paintings"}], ["collaboration", {"concepts": "collaboration", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "collaboration"}], ["rorschach test", {"concepts": "rorschach test", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "rorschach test"}], ["corridor", {"concepts": "corridor", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "corridor"}], ["hierarchy", {"concepts": "hierarchy", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "hierarchy"}], ["workflow", {"concepts": "workflow", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "workflow"}], ["social dynamics", {"concepts": "social dynamics", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "social dynamics"}], ["staff scientist", {"concepts": "staff scientist", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "staff scientist"}], ["migration", {"concepts": "migration", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "migration"}], ["workshop tool", {"concepts": "workshop tool", "type": "concept", "cluster": "Ecosystem Health Value", "node_size": 10, "label": "workshop tool"}]], "Water Quality Management": [["ecological value", {"concepts": "ecological value", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "ecological value"}], ["ecosystem function", {"concepts": "ecosystem function", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "ecosystem function"}], ["ecosystem", {"concepts": "ecosystem", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "ecosystem"}], ["environmental nonprofit", {"concepts": "environmental nonprofit", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "environmental nonprofit"}], ["ecosystem diversity", {"concepts": "ecosystem diversity", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "ecosystem diversity"}], ["ecosystem health", {"concepts": "ecosystem health", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "ecosystem health"}], ["human impacts", {"concepts": "human impacts", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "human impacts"}]], "Local Policy Experts": [["water improvement plans", {"concepts": "water improvement plans", "type": "concept", "cluster": "Local Policy Experts", "node_size": 10, "label": "water improvement plans"}], ["impaired waterways", {"concepts": "impaired waterways", "type": "concept", "cluster": "Local Policy Experts", "node_size": 10, "label": "impaired waterways"}], ["water improvement", {"concepts": "water improvement", "type": "concept", "cluster": "Local Policy Experts", "node_size": 10, "label": "water improvement"}], ["water quality enforcement", {"concepts": "water quality enforcement", "type": "concept", "cluster": "Local Policy Experts", "node_size": 10, "label": "water quality enforcement"}], ["wetlands", {"concepts": "wetlands", "type": "concept", "cluster": "Local Policy Experts", "node_size": 10, "label": "wetlands"}], ["riparian buffer", {"concepts": "riparian buffer", "type": "concept", "cluster": "Local Policy Experts", "node_size": 10, "label": "riparian buffer"}], ["coastal waters", {"concepts": "coastal waters", "type": "concept", "cluster": "Local Policy Experts", "node_size": 10, "label": "coastal waters"}], ["watershed", {"concepts": "watershed", "type": "concept", "cluster": "Local Policy Experts", "node_size": 10, "label": "watershed"}], ["effluent", {"concepts": "effluent", "type": "concept", "cluster": "Local Policy Experts", "node_size": 10, "label": "effluent"}], ["clean water act", {"concepts": "clean water act", "type": "concept", "cluster": "Local Policy Experts", "node_size": 10, "label": "clean water act"}], ["seagrass beds", {"concepts": "seagrass beds", "type": "concept", "cluster": "Local Policy Experts", "node_size": 10, "label": "seagrass beds"}], ["water quality monitoring", {"concepts": "water quality monitoring", "type": "concept", "cluster": "Local Policy Experts", "node_size": 10, "label": "water quality monitoring"}], ["tributary waters", {"concepts": "tributary waters", "type": "concept", "cluster": "Local Policy Experts", "node_size": 10, "label": "tributary waters"}], ["waterway designation", {"concepts": "waterway designation", "type": "concept", "cluster": "Local Policy Experts", "node_size": 10, "label": "waterway designation"}], ["water quality", {"concepts": "water quality", "type": "concept", "cluster": "Local Policy Experts", "node_size": 10, "label": "water quality"}], ["water quality thresholds", {"concepts": "water quality thresholds", "type": "concept", "cluster": "Local Policy Experts", "node_size": 10, "label": "water quality thresholds"}]], "Species Conservation": [["listed species", {"concepts": "listed species", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "listed species"}], ["supporting species", {"concepts": "supporting species", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "supporting species"}], ["sensitive species", {"concepts": "sensitive species", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "sensitive species"}], ["poster child species", {"concepts": "poster child species", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "poster child species"}], ["species", {"concepts": "species", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "species"}], ["harmful organisms", {"concepts": "harmful organisms", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "harmful organisms"}], ["food web supporting species", {"concepts": "food web supporting species", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "food web supporting species"}]], "Biodiversity Conservation": [["species diversity", {"concepts": "species diversity", "type": "concept", "cluster": "Biodiversity Conservation", "node_size": 10, "label": "species diversity"}], ["species conservation", {"concepts": "species conservation", "type": "concept", "cluster": "Biodiversity Conservation", "node_size": 10, "label": "species conservation"}], ["keystone species", {"concepts": "keystone species", "type": "concept", "cluster": "Biodiversity Conservation", "node_size": 10, "label": "keystone species"}], ["biodiversity data", {"concepts": "biodiversity data", "type": "concept", "cluster": "Biodiversity Conservation", "node_size": 10, "label": "biodiversity data"}], ["biodiversity", {"concepts": "biodiversity", "type": "concept", "cluster": "Biodiversity Conservation", "node_size": 10, "label": "biodiversity"}], ["species counts", {"concepts": "species counts", "type": "concept", "cluster": "Biodiversity Conservation", "node_size": 10, "label": "species counts"}]], "Regulatory Compliance": [["development credits", {"concepts": "development credits", "type": "concept", "cluster": "Regulatory Compliance", "node_size": 10, "label": "development credits"}], ["state standards", {"concepts": "state standards", "type": "concept", "cluster": "Regulatory Compliance", "node_size": 10, "label": "state standards"}], ["regulatory agencies", {"concepts": "regulatory agencies", "type": "concept", "cluster": "Regulatory Compliance", "node_size": 10, "label": "regulatory agencies"}], ["federal standards", {"concepts": "federal standards", "type": "concept", "cluster": "Regulatory Compliance", "node_size": 10, "label": "federal standards"}], ["regulatory enforcement", {"concepts": "regulatory enforcement", "type": "concept", "cluster": "Regulatory Compliance", "node_size": 10, "label": "regulatory enforcement"}], ["litigation", {"concepts": "litigation", "type": "concept", "cluster": "Regulatory Compliance", "node_size": 10, "label": "litigation"}], ["jurisdictional protection", {"concepts": "jurisdictional protection", "type": "concept", "cluster": "Regulatory Compliance", "node_size": 10, "label": "jurisdictional protection"}], ["state agencies", {"concepts": "state agencies", "type": "concept", "cluster": "Regulatory Compliance", "node_size": 10, "label": "state agencies"}], ["court involvement", {"concepts": "court involvement", "type": "concept", "cluster": "Regulatory Compliance", "node_size": 10, "label": "court involvement"}], ["enforcement", {"concepts": "enforcement", "type": "concept", "cluster": "Regulatory Compliance", "node_size": 10, "label": "enforcement"}], ["federal enforcement", {"concepts": "federal enforcement", "type": "concept", "cluster": "Regulatory Compliance", "node_size": 10, "label": "federal enforcement"}]], "Habitat Conservation": [["habitat forming species", {"concepts": "habitat forming species", "type": "concept", "cluster": "Habitat Conservation", "node_size": 10, "label": "habitat forming species"}], ["habitat", {"concepts": "habitat", "type": "concept", "cluster": "Habitat Conservation", "node_size": 10, "label": "habitat"}], ["habitat protection", {"concepts": "habitat protection", "type": "concept", "cluster": "Habitat Conservation", "node_size": 10, "label": "habitat protection"}], ["urban wildlife", {"concepts": "urban wildlife", "type": "concept", "cluster": "Habitat Conservation", "node_size": 10, "label": "urban wildlife"}], ["ecosystem protection", {"concepts": "ecosystem protection", "type": "concept", "cluster": "Habitat Conservation", "node_size": 10, "label": "ecosystem protection"}], ["habitat functionality", {"concepts": "habitat functionality", "type": "concept", "cluster": "Habitat Conservation", "node_size": 10, "label": "habitat functionality"}], ["recreational use", {"concepts": "recreational use", "type": "concept", "cluster": "Habitat Conservation", "node_size": 10, "label": "recreational use"}], ["wildlife", {"concepts": "wildlife", "type": "concept", "cluster": "Habitat Conservation", "node_size": 10, "label": "wildlife"}], ["protected species habitat", {"concepts": "protected species habitat", "type": "concept", "cluster": "Habitat Conservation", "node_size": 10, "label": "protected species habitat"}], ["habitat fragmentation", {"concepts": "habitat fragmentation", "type": "concept", "cluster": "Habitat Conservation", "node_size": 10, "label": "habitat fragmentation"}]]};
        const clusterEdges = {"Habitat Management Policies": [], "Environmental Collaboration Tools": [], "Ecosystem Health Value": [], "Water Quality Management": [], "Local Policy Experts": [], "Species Conservation": [], "Biodiversity Conservation": [], "Regulatory Compliance": [], "Habitat Conservation": []};
        
        let network;
        let currentView = 'clusters';
        let currentCluster = null;
        let minConfidence = 0.3;
        
        // Network options
        const options = {
            nodes: {
                font: { color: 'white', size: 14 },
                borderWidth: 2,
                shadow: true
            },
            edges: {
                arrows: { to: { enabled: true, scaleFactor: 1.2 } },
                shadow: true,
                smooth: { type: 'continuous' }
            },
            physics: {
                stabilization: { iterations: 100 },
                barnesHut: {
                    gravitationalConstant: -8000,
                    springConstant: 0.001,
                    springLength: 200
                }
            },
            interaction: {
                hover: true,
                selectConnectedEdges: false
            }
        };
        
        function initNetwork() {
            const container = document.getElementById('network');
            const data = getClusterViewData();
            network = new vis.Network(container, data, options);
            
            // Handle cluster clicks for drill-down
            network.on("click", function(params) {
                if (params.nodes.length > 0 && currentView === 'clusters') {
                    const clickedNode = params.nodes[0];
                    if (clusterConcepts[clickedNode]) {
                        showClusterDetail(clickedNode);
                    }
                }
            });
        }
        
        function getClusterViewData() {
            const nodes = [];
            const edges = [];
            
            // Add cluster nodes
            Object.entries(clusterData).forEach(([clusterId, data]) => {
                const concepts = data.concepts || [];
                const conceptsStr = Array.isArray(concepts) ? concepts.join(', ') : concepts;
                
                nodes.push({
                    id: clusterId,
                    label: clusterId,
                    title: `Cluster: ${clusterId}\nConcepts: ${conceptsStr}\nClick to explore internal relationships`,
                    color: '#4A90E2',
                    size: 25 + (conceptsStr.split(',').length * 2),
                    font: { color: 'white' }
                });
            });
            
            // Add inter-cluster edges
            interClusterEdges.forEach(([source, target, edgeData]) => {
                const confidence = edgeData.confidence || 1.0;
                const weight = edgeData.weight || 0;
                
                if (confidence >= minConfidence) {
                    edges.push({
                        from: source,
                        to: target,
                        color: weight > 0 ? '#28A745' : '#DC3545',
                        width: Math.abs(weight) * 3 + 1,
                        title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                        dashes: false
                    });
                }
            });
            
            return { nodes: nodes, edges: edges };
        }
        
        function getClusterDetailData(clusterId) {
            const nodes = [];
            const edges = [];
            
            // Add concept nodes for this cluster
            if (clusterConcepts[clusterId]) {
                clusterConcepts[clusterId].forEach(([conceptId, data]) => {
                    nodes.push({
                        id: conceptId,
                        label: conceptId,
                        title: `Concept: ${conceptId}\nFrom cluster: ${clusterId}`,
                        color: '#FF9500',
                        size: 20,
                        font: { color: 'white' }
                    });
                });
            }
            
            // Add intra-cluster edges
            if (clusterEdges[clusterId]) {
                clusterEdges[clusterId].forEach(([source, target, edgeData]) => {
                    const confidence = edgeData.confidence || 1.0;
                    const weight = edgeData.weight || 0;
                    
                    if (confidence >= minConfidence) {
                        edges.push({
                            from: source,
                            to: target,
                            color: weight > 0 ? '#28A745' : '#DC3545',
                            width: Math.abs(weight) * 3 + 1,
                            title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                            dashes: true
                        });
                    }
                });
            }
            
            return { nodes: nodes, edges: edges };
        }
        
        function showClusterView() {
            currentView = 'clusters';
            currentCluster = null;
            const data = getClusterViewData();
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'none';
            document.getElementById('current-view').textContent = 'Cluster Overview';
        }
        
        function showClusterDetail(clusterId) {
            currentView = 'concepts';
            currentCluster = clusterId;
            const data = getClusterDetailData(clusterId);
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'inline-block';
            document.getElementById('current-view').textContent = `Inside Cluster: ${clusterId}`;
        }
        
        function updateConfidenceFilter(value) {
            minConfidence = parseFloat(value);
            document.getElementById('confidence-value').textContent = value;
            
            // Refresh current view
            if (currentView === 'clusters') {
                showClusterView();
            } else {
                showClusterDetail(currentCluster);
            }
        }
        
        // Initialize the network when page loads
        window.onload = function() {
            initNetwork();
        };
    </script>
</body>
</html>
