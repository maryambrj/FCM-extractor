
<!DOCTYPE html>
<html>
<head>
    <title>Hierarchical FCM Visualization</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 0; 
            padding: 20px;
            background: #f5f5f5;
        }
        
        #network { 
            width: 100%; 
            height: 600px; 
            border: 2px solid #ccc; 
            background: white;
            border-radius: 8px;
        }
        
        #controls {
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn {
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        
        .btn-primary { background: #4A90E2; color: white; }
        .btn-primary:hover { background: #357ABD; }
        
        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #545b62; }
        
        #current-view {
            font-weight: bold;
            color: #333;
            margin-left: 10px;
        }
        
        #legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-size: 12px;
            max-width: 200px;
        }
        
        .legend-item {
            margin: 5px 0;
            display: flex;
            align-items: center;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .legend-line {
            width: 20px;
            height: 2px;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <h1>Fuzzy Cognitive Map - Hierarchical View</h1>
    
    <div id="controls">
        <button class="btn btn-secondary" id="back-btn" onclick="showClusterView()" style="display: none;">
            ‚Üê Back to Clusters
        </button>
        <span id="current-view">Cluster Overview</span>
        <div style="float: right;">
            <label>Min Confidence: </label>
            <input type="range" id="confidence-slider" min="0" max="1" step="0.1" value="0.3" 
                   onchange="updateConfidenceFilter(this.value)">
            <span id="confidence-value">0.3</span>
        </div>
    </div>
    
    <div id="network"></div>
    
    <div id="legend">
        <h4>Legend</h4>
        <div class="legend-item">
            <div class="legend-color" style="background: #4A90E2;"></div>
            <span>Clusters</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #FF9500;"></div>
            <span>Concepts</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #28A745;"></div>
            <span>Positive relationship</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #DC3545;"></div>
            <span>Negative relationship</span>
        </div>
        <div style="margin-top: 10px; font-style: italic; color: #666;">
            Click clusters to explore internal concepts
        </div>
    </div>

    <script>
        // Embedded data
        const clusterData = {"Water Quality Management": {"concepts": "data sharing, salvador dali, rorschach test, us army corps of engineers, epa vs sackett, sackett decision, army corps, team retreat, ai, improvement plans, mental modeler, picasso, epa, army corps of engineers, tool usage, mobile baykeeper, diversity of organisms, workshop, mobile bay, audubon society, waterkeeper alliance, michigan state, alvin, perception of nature, management policies, dali, staff scientist, relationship strength, preferred state, industrial use, poster child species, red belly slider turtle, epa enforcement, state standards", "concept_list": ["data sharing", "salvador dali", "rorschach test", "us army corps of engineers", "epa vs sackett", "sackett decision", "army corps", "team retreat", "ai", "improvement plans", "mental modeler", "picasso", "epa", "army corps of engineers", "tool usage", "mobile baykeeper", "diversity of organisms", "workshop", "mobile bay", "audubon society", "waterkeeper alliance", "michigan state", "alvin", "perception of nature", "management policies", "dali", "staff scientist", "relationship strength", "preferred state", "industrial use", "poster child species", "red belly slider turtle", "epa enforcement", "state standards"], "type": "cluster", "node_size": 117, "label": "Water Quality Management"}, "Regulatory Enforcement": {"concepts": "water improvement plans, water quality, wetland clearing, water quality enforcement, wetland clearance, water quality thresholds, water quality improvement plans, tributary waters, recreational waterways, water quality monitoring, clean water act, wastewater treatment, waterways, watershed, wetlands, impaired waterways, effluent discharge, coastal waters, waterway designation", "concept_list": ["water improvement plans", "water quality", "wetland clearing", "water quality enforcement", "wetland clearance", "water quality thresholds", "water quality improvement plans", "tributary waters", "recreational waterways", "water quality monitoring", "clean water act", "wastewater treatment", "waterways", "watershed", "wetlands", "impaired waterways", "effluent discharge", "coastal waters", "waterway designation"], "type": "cluster", "node_size": 72, "label": "Regulatory Enforcement"}, "Biodiversity Conservation": {"concepts": "policy enforcement, state agencies, policy incentivization, enforcement, federal enforcement, regulatory agencies, development credits, court involvement, litigation, jurisdictional protection, mitigation banks, regulatory enforcement, federal standards, mitigation credits", "concept_list": ["policy enforcement", "state agencies", "policy incentivization", "enforcement", "federal enforcement", "regulatory agencies", "development credits", "court involvement", "litigation", "jurisdictional protection", "mitigation banks", "regulatory enforcement", "federal standards", "mitigation credits"], "type": "cluster", "node_size": 57, "label": "Biodiversity Conservation"}, "Habitat Protection": {"concepts": "ecosystem function, biodiversity management, sensitive species, biodiversity, harmful organisms, ecosystem protection, marine resource management, riparian bank, protected species, ecosystem diversity, environmental policy, food webs, restoration ecologist, bird migration, seagrass restoration, biodiversity data, fish consumption, fish and wildlife propagation, fish propagation, species of conservation concern, seasonality effects, us fish and wildlife service, conservation science, species migration, ecological value, wildlife protection, keystone species, filtration services, environmental nonprofit, citizen science, species monitoring, species counts, public engagement, pollution intervention, ecosystem management, food web, wildlife propagation, migration patterns, public species counts, citizen scientists, ecosystem functionality, fish consumption safety, listed species, food web supporting species, oyster restoration, human impacts, biodiversity protection", "concept_list": ["ecosystem function", "biodiversity management", "sensitive species", "biodiversity", "harmful organisms", "ecosystem protection", "marine resource management", "riparian bank", "protected species", "ecosystem diversity", "environmental policy", "food webs", "restoration ecologist", "bird migration", "seagrass restoration", "biodiversity data", "fish consumption", "fish and wildlife propagation", "fish propagation", "species of conservation concern", "seasonality effects", "us fish and wildlife service", "conservation science", "species migration", "ecological value", "wildlife protection", "keystone species", "filtration services", "environmental nonprofit", "citizen science", "species monitoring", "species counts", "public engagement", "pollution intervention", "ecosystem management", "food web", "wildlife propagation", "migration patterns", "public species counts", "citizen scientists", "ecosystem functionality", "fish consumption safety", "listed species", "food web supporting species", "oyster restoration", "human impacts", "biodiversity protection"], "type": "cluster", "node_size": 156, "label": "Habitat Protection"}, "Environmental Collaboration": {"concepts": "habitat functionality, habitat enforcement, habitat management, native vegetation, habitat restoration, urbanized wildlife interactions, access to habitats, invasive vegetation, listed habitat, habitat loss, habitat, submerged aquatic vegetation, habitat production, agricultural use, habitat forming species, habitat protection, habitat fragmentation, protected species habitat", "concept_list": ["habitat functionality", "habitat enforcement", "habitat management", "native vegetation", "habitat restoration", "urbanized wildlife interactions", "access to habitats", "invasive vegetation", "listed habitat", "habitat loss", "habitat", "submerged aquatic vegetation", "habitat production", "agricultural use", "habitat forming species", "habitat protection", "habitat fragmentation", "protected species habitat"], "type": "cluster", "node_size": 69, "label": "Environmental Collaboration"}};
        const conceptData = {"data sharing": {"concepts": "data sharing", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "data sharing"}, "salvador dali": {"concepts": "salvador dali", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "salvador dali"}, "rorschach test": {"concepts": "rorschach test", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "rorschach test"}, "us army corps of engineers": {"concepts": "us army corps of engineers", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "us army corps of engineers"}, "epa vs sackett": {"concepts": "epa vs sackett", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "epa vs sackett"}, "sackett decision": {"concepts": "sackett decision", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "sackett decision"}, "army corps": {"concepts": "army corps", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "army corps"}, "team retreat": {"concepts": "team retreat", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "team retreat"}, "ai": {"concepts": "ai", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "ai"}, "improvement plans": {"concepts": "improvement plans", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "improvement plans"}, "mental modeler": {"concepts": "mental modeler", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "mental modeler"}, "picasso": {"concepts": "picasso", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "picasso"}, "epa": {"concepts": "epa", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "epa"}, "army corps of engineers": {"concepts": "army corps of engineers", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "army corps of engineers"}, "tool usage": {"concepts": "tool usage", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "tool usage"}, "mobile baykeeper": {"concepts": "mobile baykeeper", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "mobile baykeeper"}, "diversity of organisms": {"concepts": "diversity of organisms", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "diversity of organisms"}, "workshop": {"concepts": "workshop", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "workshop"}, "mobile bay": {"concepts": "mobile bay", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "mobile bay"}, "audubon society": {"concepts": "audubon society", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "audubon society"}, "waterkeeper alliance": {"concepts": "waterkeeper alliance", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "waterkeeper alliance"}, "michigan state": {"concepts": "michigan state", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "michigan state"}, "alvin": {"concepts": "alvin", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "alvin"}, "perception of nature": {"concepts": "perception of nature", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "perception of nature"}, "management policies": {"concepts": "management policies", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "management policies"}, "dali": {"concepts": "dali", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "dali"}, "staff scientist": {"concepts": "staff scientist", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "staff scientist"}, "relationship strength": {"concepts": "relationship strength", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "relationship strength"}, "preferred state": {"concepts": "preferred state", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "preferred state"}, "industrial use": {"concepts": "industrial use", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "industrial use"}, "poster child species": {"concepts": "poster child species", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "poster child species"}, "red belly slider turtle": {"concepts": "red belly slider turtle", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "red belly slider turtle"}, "epa enforcement": {"concepts": "epa enforcement", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "epa enforcement"}, "state standards": {"concepts": "state standards", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "state standards"}, "water improvement plans": {"concepts": "water improvement plans", "type": "concept", "cluster": "Regulatory Enforcement", "node_size": 10, "label": "water improvement plans"}, "water quality": {"concepts": "water quality", "type": "concept", "cluster": "Regulatory Enforcement", "node_size": 10, "label": "water quality"}, "wetland clearing": {"concepts": "wetland clearing", "type": "concept", "cluster": "Regulatory Enforcement", "node_size": 10, "label": "wetland clearing"}, "water quality enforcement": {"concepts": "water quality enforcement", "type": "concept", "cluster": "Regulatory Enforcement", "node_size": 10, "label": "water quality enforcement"}, "wetland clearance": {"concepts": "wetland clearance", "type": "concept", "cluster": "Regulatory Enforcement", "node_size": 10, "label": "wetland clearance"}, "water quality thresholds": {"concepts": "water quality thresholds", "type": "concept", "cluster": "Regulatory Enforcement", "node_size": 10, "label": "water quality thresholds"}, "water quality improvement plans": {"concepts": "water quality improvement plans", "type": "concept", "cluster": "Regulatory Enforcement", "node_size": 10, "label": "water quality improvement plans"}, "tributary waters": {"concepts": "tributary waters", "type": "concept", "cluster": "Regulatory Enforcement", "node_size": 10, "label": "tributary waters"}, "recreational waterways": {"concepts": "recreational waterways", "type": "concept", "cluster": "Regulatory Enforcement", "node_size": 10, "label": "recreational waterways"}, "water quality monitoring": {"concepts": "water quality monitoring", "type": "concept", "cluster": "Regulatory Enforcement", "node_size": 10, "label": "water quality monitoring"}, "clean water act": {"concepts": "clean water act", "type": "concept", "cluster": "Regulatory Enforcement", "node_size": 10, "label": "clean water act"}, "wastewater treatment": {"concepts": "wastewater treatment", "type": "concept", "cluster": "Regulatory Enforcement", "node_size": 10, "label": "wastewater treatment"}, "waterways": {"concepts": "waterways", "type": "concept", "cluster": "Regulatory Enforcement", "node_size": 10, "label": "waterways"}, "watershed": {"concepts": "watershed", "type": "concept", "cluster": "Regulatory Enforcement", "node_size": 10, "label": "watershed"}, "wetlands": {"concepts": "wetlands", "type": "concept", "cluster": "Regulatory Enforcement", "node_size": 10, "label": "wetlands"}, "impaired waterways": {"concepts": "impaired waterways", "type": "concept", "cluster": "Regulatory Enforcement", "node_size": 10, "label": "impaired waterways"}, "effluent discharge": {"concepts": "effluent discharge", "type": "concept", "cluster": "Regulatory Enforcement", "node_size": 10, "label": "effluent discharge"}, "coastal waters": {"concepts": "coastal waters", "type": "concept", "cluster": "Regulatory Enforcement", "node_size": 10, "label": "coastal waters"}, "waterway designation": {"concepts": "waterway designation", "type": "concept", "cluster": "Regulatory Enforcement", "node_size": 10, "label": "waterway designation"}, "policy enforcement": {"concepts": "policy enforcement", "type": "concept", "cluster": "Biodiversity Conservation", "node_size": 10, "label": "policy enforcement"}, "state agencies": {"concepts": "state agencies", "type": "concept", "cluster": "Biodiversity Conservation", "node_size": 10, "label": "state agencies"}, "policy incentivization": {"concepts": "policy incentivization", "type": "concept", "cluster": "Biodiversity Conservation", "node_size": 10, "label": "policy incentivization"}, "enforcement": {"concepts": "enforcement", "type": "concept", "cluster": "Biodiversity Conservation", "node_size": 10, "label": "enforcement"}, "federal enforcement": {"concepts": "federal enforcement", "type": "concept", "cluster": "Biodiversity Conservation", "node_size": 10, "label": "federal enforcement"}, "regulatory agencies": {"concepts": "regulatory agencies", "type": "concept", "cluster": "Biodiversity Conservation", "node_size": 10, "label": "regulatory agencies"}, "development credits": {"concepts": "development credits", "type": "concept", "cluster": "Biodiversity Conservation", "node_size": 10, "label": "development credits"}, "court involvement": {"concepts": "court involvement", "type": "concept", "cluster": "Biodiversity Conservation", "node_size": 10, "label": "court involvement"}, "litigation": {"concepts": "litigation", "type": "concept", "cluster": "Biodiversity Conservation", "node_size": 10, "label": "litigation"}, "jurisdictional protection": {"concepts": "jurisdictional protection", "type": "concept", "cluster": "Biodiversity Conservation", "node_size": 10, "label": "jurisdictional protection"}, "mitigation banks": {"concepts": "mitigation banks", "type": "concept", "cluster": "Biodiversity Conservation", "node_size": 10, "label": "mitigation banks"}, "regulatory enforcement": {"concepts": "regulatory enforcement", "type": "concept", "cluster": "Biodiversity Conservation", "node_size": 10, "label": "regulatory enforcement"}, "federal standards": {"concepts": "federal standards", "type": "concept", "cluster": "Biodiversity Conservation", "node_size": 10, "label": "federal standards"}, "mitigation credits": {"concepts": "mitigation credits", "type": "concept", "cluster": "Biodiversity Conservation", "node_size": 10, "label": "mitigation credits"}, "ecosystem function": {"concepts": "ecosystem function", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "ecosystem function"}, "biodiversity management": {"concepts": "biodiversity management", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "biodiversity management"}, "sensitive species": {"concepts": "sensitive species", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "sensitive species"}, "biodiversity": {"concepts": "biodiversity", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "biodiversity"}, "harmful organisms": {"concepts": "harmful organisms", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "harmful organisms"}, "ecosystem protection": {"concepts": "ecosystem protection", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "ecosystem protection"}, "marine resource management": {"concepts": "marine resource management", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "marine resource management"}, "riparian bank": {"concepts": "riparian bank", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "riparian bank"}, "protected species": {"concepts": "protected species", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "protected species"}, "ecosystem diversity": {"concepts": "ecosystem diversity", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "ecosystem diversity"}, "environmental policy": {"concepts": "environmental policy", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "environmental policy"}, "food webs": {"concepts": "food webs", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "food webs"}, "restoration ecologist": {"concepts": "restoration ecologist", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "restoration ecologist"}, "bird migration": {"concepts": "bird migration", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "bird migration"}, "seagrass restoration": {"concepts": "seagrass restoration", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "seagrass restoration"}, "biodiversity data": {"concepts": "biodiversity data", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "biodiversity data"}, "fish consumption": {"concepts": "fish consumption", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "fish consumption"}, "fish and wildlife propagation": {"concepts": "fish and wildlife propagation", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "fish and wildlife propagation"}, "fish propagation": {"concepts": "fish propagation", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "fish propagation"}, "species of conservation concern": {"concepts": "species of conservation concern", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "species of conservation concern"}, "seasonality effects": {"concepts": "seasonality effects", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "seasonality effects"}, "us fish and wildlife service": {"concepts": "us fish and wildlife service", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "us fish and wildlife service"}, "conservation science": {"concepts": "conservation science", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "conservation science"}, "species migration": {"concepts": "species migration", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "species migration"}, "ecological value": {"concepts": "ecological value", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "ecological value"}, "wildlife protection": {"concepts": "wildlife protection", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "wildlife protection"}, "keystone species": {"concepts": "keystone species", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "keystone species"}, "filtration services": {"concepts": "filtration services", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "filtration services"}, "environmental nonprofit": {"concepts": "environmental nonprofit", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "environmental nonprofit"}, "citizen science": {"concepts": "citizen science", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "citizen science"}, "species monitoring": {"concepts": "species monitoring", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "species monitoring"}, "species counts": {"concepts": "species counts", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "species counts"}, "public engagement": {"concepts": "public engagement", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "public engagement"}, "pollution intervention": {"concepts": "pollution intervention", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "pollution intervention"}, "ecosystem management": {"concepts": "ecosystem management", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "ecosystem management"}, "food web": {"concepts": "food web", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "food web"}, "wildlife propagation": {"concepts": "wildlife propagation", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "wildlife propagation"}, "migration patterns": {"concepts": "migration patterns", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "migration patterns"}, "public species counts": {"concepts": "public species counts", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "public species counts"}, "citizen scientists": {"concepts": "citizen scientists", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "citizen scientists"}, "ecosystem functionality": {"concepts": "ecosystem functionality", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "ecosystem functionality"}, "fish consumption safety": {"concepts": "fish consumption safety", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "fish consumption safety"}, "listed species": {"concepts": "listed species", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "listed species"}, "food web supporting species": {"concepts": "food web supporting species", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "food web supporting species"}, "oyster restoration": {"concepts": "oyster restoration", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "oyster restoration"}, "human impacts": {"concepts": "human impacts", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "human impacts"}, "biodiversity protection": {"concepts": "biodiversity protection", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "biodiversity protection"}, "habitat functionality": {"concepts": "habitat functionality", "type": "concept", "cluster": "Environmental Collaboration", "node_size": 10, "label": "habitat functionality"}, "habitat enforcement": {"concepts": "habitat enforcement", "type": "concept", "cluster": "Environmental Collaboration", "node_size": 10, "label": "habitat enforcement"}, "habitat management": {"concepts": "habitat management", "type": "concept", "cluster": "Environmental Collaboration", "node_size": 10, "label": "habitat management"}, "native vegetation": {"concepts": "native vegetation", "type": "concept", "cluster": "Environmental Collaboration", "node_size": 10, "label": "native vegetation"}, "habitat restoration": {"concepts": "habitat restoration", "type": "concept", "cluster": "Environmental Collaboration", "node_size": 10, "label": "habitat restoration"}, "urbanized wildlife interactions": {"concepts": "urbanized wildlife interactions", "type": "concept", "cluster": "Environmental Collaboration", "node_size": 10, "label": "urbanized wildlife interactions"}, "access to habitats": {"concepts": "access to habitats", "type": "concept", "cluster": "Environmental Collaboration", "node_size": 10, "label": "access to habitats"}, "invasive vegetation": {"concepts": "invasive vegetation", "type": "concept", "cluster": "Environmental Collaboration", "node_size": 10, "label": "invasive vegetation"}, "listed habitat": {"concepts": "listed habitat", "type": "concept", "cluster": "Environmental Collaboration", "node_size": 10, "label": "listed habitat"}, "habitat loss": {"concepts": "habitat loss", "type": "concept", "cluster": "Environmental Collaboration", "node_size": 10, "label": "habitat loss"}, "habitat": {"concepts": "habitat", "type": "concept", "cluster": "Environmental Collaboration", "node_size": 10, "label": "habitat"}, "submerged aquatic vegetation": {"concepts": "submerged aquatic vegetation", "type": "concept", "cluster": "Environmental Collaboration", "node_size": 10, "label": "submerged aquatic vegetation"}, "habitat production": {"concepts": "habitat production", "type": "concept", "cluster": "Environmental Collaboration", "node_size": 10, "label": "habitat production"}, "agricultural use": {"concepts": "agricultural use", "type": "concept", "cluster": "Environmental Collaboration", "node_size": 10, "label": "agricultural use"}, "habitat forming species": {"concepts": "habitat forming species", "type": "concept", "cluster": "Environmental Collaboration", "node_size": 10, "label": "habitat forming species"}, "habitat protection": {"concepts": "habitat protection", "type": "concept", "cluster": "Environmental Collaboration", "node_size": 10, "label": "habitat protection"}, "habitat fragmentation": {"concepts": "habitat fragmentation", "type": "concept", "cluster": "Environmental Collaboration", "node_size": 10, "label": "habitat fragmentation"}, "protected species habitat": {"concepts": "protected species habitat", "type": "concept", "cluster": "Environmental Collaboration", "node_size": 10, "label": "protected species habitat"}};
        const interClusterEdges = [["Water Quality Management", "Habitat Protection", {"weight": 0.8, "confidence": 0.5660000000000001, "type": "inter_cluster", "style": "solid"}], ["Water Quality Management", "Environmental Collaboration", {"weight": 0.75, "confidence": 0.52, "type": "inter_cluster", "style": "solid"}], ["Water Quality Management", "Biodiversity Conservation", {"weight": 0.6666666666666666, "confidence": 0.4166666666666667, "type": "inter_cluster", "style": "solid"}], ["Water Quality Management", "Regulatory Enforcement", {"weight": 0.6666666666666666, "confidence": 0.39999999999999997, "type": "inter_cluster", "style": "solid"}], ["Regulatory Enforcement", "Environmental Collaboration", {"weight": 1.0, "confidence": 0.8960000000000001, "type": "inter_cluster", "style": "solid"}], ["Regulatory Enforcement", "Habitat Protection", {"weight": 1.0, "confidence": 0.876, "type": "inter_cluster", "style": "solid"}], ["Regulatory Enforcement", "Biodiversity Conservation", {"weight": 0.8, "confidence": 0.6140000000000001, "type": "inter_cluster", "style": "solid"}], ["Regulatory Enforcement", "Water Quality Management", {"weight": 0.8, "confidence": 0.506, "type": "inter_cluster", "style": "solid"}], ["Biodiversity Conservation", "Habitat Protection", {"weight": 1.0, "confidence": 0.8800000000000001, "type": "inter_cluster", "style": "solid"}], ["Biodiversity Conservation", "Environmental Collaboration", {"weight": 1.0, "confidence": 0.8600000000000001, "type": "inter_cluster", "style": "solid"}], ["Biodiversity Conservation", "Regulatory Enforcement", {"weight": 1.0, "confidence": 0.8500000000000001, "type": "inter_cluster", "style": "solid"}], ["Biodiversity Conservation", "Water Quality Management", {"weight": 0.75, "confidence": 0.47500000000000003, "type": "inter_cluster", "style": "solid"}], ["Habitat Protection", "Environmental Collaboration", {"weight": 0.8, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["Habitat Protection", "Biodiversity Conservation", {"weight": 1.0, "confidence": 0.8566666666666666, "type": "inter_cluster", "style": "solid"}], ["Habitat Protection", "Regulatory Enforcement", {"weight": 1.0, "confidence": 0.8566666666666666, "type": "inter_cluster", "style": "solid"}], ["Habitat Protection", "Water Quality Management", {"weight": 0.75, "confidence": 0.48750000000000004, "type": "inter_cluster", "style": "solid"}], ["Environmental Collaboration", "Biodiversity Conservation", {"weight": 1.0, "confidence": 0.7699999999999999, "type": "inter_cluster", "style": "solid"}], ["Environmental Collaboration", "Habitat Protection", {"weight": 1.0, "confidence": 0.9333333333333332, "type": "inter_cluster", "style": "solid"}], ["Environmental Collaboration", "Regulatory Enforcement", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["Environmental Collaboration", "Water Quality Management", {"weight": 0.6666666666666666, "confidence": 0.41, "type": "inter_cluster", "style": "solid"}]];
        const clusterConcepts = {"Water Quality Management": [["data sharing", {"concepts": "data sharing", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "data sharing"}], ["salvador dali", {"concepts": "salvador dali", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "salvador dali"}], ["rorschach test", {"concepts": "rorschach test", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "rorschach test"}], ["us army corps of engineers", {"concepts": "us army corps of engineers", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "us army corps of engineers"}], ["epa vs sackett", {"concepts": "epa vs sackett", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "epa vs sackett"}], ["sackett decision", {"concepts": "sackett decision", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "sackett decision"}], ["army corps", {"concepts": "army corps", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "army corps"}], ["team retreat", {"concepts": "team retreat", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "team retreat"}], ["ai", {"concepts": "ai", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "ai"}], ["improvement plans", {"concepts": "improvement plans", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "improvement plans"}], ["mental modeler", {"concepts": "mental modeler", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "mental modeler"}], ["picasso", {"concepts": "picasso", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "picasso"}], ["epa", {"concepts": "epa", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "epa"}], ["army corps of engineers", {"concepts": "army corps of engineers", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "army corps of engineers"}], ["tool usage", {"concepts": "tool usage", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "tool usage"}], ["mobile baykeeper", {"concepts": "mobile baykeeper", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "mobile baykeeper"}], ["diversity of organisms", {"concepts": "diversity of organisms", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "diversity of organisms"}], ["workshop", {"concepts": "workshop", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "workshop"}], ["mobile bay", {"concepts": "mobile bay", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "mobile bay"}], ["audubon society", {"concepts": "audubon society", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "audubon society"}], ["waterkeeper alliance", {"concepts": "waterkeeper alliance", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "waterkeeper alliance"}], ["michigan state", {"concepts": "michigan state", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "michigan state"}], ["alvin", {"concepts": "alvin", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "alvin"}], ["perception of nature", {"concepts": "perception of nature", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "perception of nature"}], ["management policies", {"concepts": "management policies", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "management policies"}], ["dali", {"concepts": "dali", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "dali"}], ["staff scientist", {"concepts": "staff scientist", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "staff scientist"}], ["relationship strength", {"concepts": "relationship strength", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "relationship strength"}], ["preferred state", {"concepts": "preferred state", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "preferred state"}], ["industrial use", {"concepts": "industrial use", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "industrial use"}], ["poster child species", {"concepts": "poster child species", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "poster child species"}], ["red belly slider turtle", {"concepts": "red belly slider turtle", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "red belly slider turtle"}], ["epa enforcement", {"concepts": "epa enforcement", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "epa enforcement"}], ["state standards", {"concepts": "state standards", "type": "concept", "cluster": "Water Quality Management", "node_size": 10, "label": "state standards"}]], "Regulatory Enforcement": [["water improvement plans", {"concepts": "water improvement plans", "type": "concept", "cluster": "Regulatory Enforcement", "node_size": 10, "label": "water improvement plans"}], ["water quality", {"concepts": "water quality", "type": "concept", "cluster": "Regulatory Enforcement", "node_size": 10, "label": "water quality"}], ["wetland clearing", {"concepts": "wetland clearing", "type": "concept", "cluster": "Regulatory Enforcement", "node_size": 10, "label": "wetland clearing"}], ["water quality enforcement", {"concepts": "water quality enforcement", "type": "concept", "cluster": "Regulatory Enforcement", "node_size": 10, "label": "water quality enforcement"}], ["wetland clearance", {"concepts": "wetland clearance", "type": "concept", "cluster": "Regulatory Enforcement", "node_size": 10, "label": "wetland clearance"}], ["water quality thresholds", {"concepts": "water quality thresholds", "type": "concept", "cluster": "Regulatory Enforcement", "node_size": 10, "label": "water quality thresholds"}], ["water quality improvement plans", {"concepts": "water quality improvement plans", "type": "concept", "cluster": "Regulatory Enforcement", "node_size": 10, "label": "water quality improvement plans"}], ["tributary waters", {"concepts": "tributary waters", "type": "concept", "cluster": "Regulatory Enforcement", "node_size": 10, "label": "tributary waters"}], ["recreational waterways", {"concepts": "recreational waterways", "type": "concept", "cluster": "Regulatory Enforcement", "node_size": 10, "label": "recreational waterways"}], ["water quality monitoring", {"concepts": "water quality monitoring", "type": "concept", "cluster": "Regulatory Enforcement", "node_size": 10, "label": "water quality monitoring"}], ["clean water act", {"concepts": "clean water act", "type": "concept", "cluster": "Regulatory Enforcement", "node_size": 10, "label": "clean water act"}], ["wastewater treatment", {"concepts": "wastewater treatment", "type": "concept", "cluster": "Regulatory Enforcement", "node_size": 10, "label": "wastewater treatment"}], ["waterways", {"concepts": "waterways", "type": "concept", "cluster": "Regulatory Enforcement", "node_size": 10, "label": "waterways"}], ["watershed", {"concepts": "watershed", "type": "concept", "cluster": "Regulatory Enforcement", "node_size": 10, "label": "watershed"}], ["wetlands", {"concepts": "wetlands", "type": "concept", "cluster": "Regulatory Enforcement", "node_size": 10, "label": "wetlands"}], ["impaired waterways", {"concepts": "impaired waterways", "type": "concept", "cluster": "Regulatory Enforcement", "node_size": 10, "label": "impaired waterways"}], ["effluent discharge", {"concepts": "effluent discharge", "type": "concept", "cluster": "Regulatory Enforcement", "node_size": 10, "label": "effluent discharge"}], ["coastal waters", {"concepts": "coastal waters", "type": "concept", "cluster": "Regulatory Enforcement", "node_size": 10, "label": "coastal waters"}], ["waterway designation", {"concepts": "waterway designation", "type": "concept", "cluster": "Regulatory Enforcement", "node_size": 10, "label": "waterway designation"}]], "Biodiversity Conservation": [["policy enforcement", {"concepts": "policy enforcement", "type": "concept", "cluster": "Biodiversity Conservation", "node_size": 10, "label": "policy enforcement"}], ["state agencies", {"concepts": "state agencies", "type": "concept", "cluster": "Biodiversity Conservation", "node_size": 10, "label": "state agencies"}], ["policy incentivization", {"concepts": "policy incentivization", "type": "concept", "cluster": "Biodiversity Conservation", "node_size": 10, "label": "policy incentivization"}], ["enforcement", {"concepts": "enforcement", "type": "concept", "cluster": "Biodiversity Conservation", "node_size": 10, "label": "enforcement"}], ["federal enforcement", {"concepts": "federal enforcement", "type": "concept", "cluster": "Biodiversity Conservation", "node_size": 10, "label": "federal enforcement"}], ["regulatory agencies", {"concepts": "regulatory agencies", "type": "concept", "cluster": "Biodiversity Conservation", "node_size": 10, "label": "regulatory agencies"}], ["development credits", {"concepts": "development credits", "type": "concept", "cluster": "Biodiversity Conservation", "node_size": 10, "label": "development credits"}], ["court involvement", {"concepts": "court involvement", "type": "concept", "cluster": "Biodiversity Conservation", "node_size": 10, "label": "court involvement"}], ["litigation", {"concepts": "litigation", "type": "concept", "cluster": "Biodiversity Conservation", "node_size": 10, "label": "litigation"}], ["jurisdictional protection", {"concepts": "jurisdictional protection", "type": "concept", "cluster": "Biodiversity Conservation", "node_size": 10, "label": "jurisdictional protection"}], ["mitigation banks", {"concepts": "mitigation banks", "type": "concept", "cluster": "Biodiversity Conservation", "node_size": 10, "label": "mitigation banks"}], ["regulatory enforcement", {"concepts": "regulatory enforcement", "type": "concept", "cluster": "Biodiversity Conservation", "node_size": 10, "label": "regulatory enforcement"}], ["federal standards", {"concepts": "federal standards", "type": "concept", "cluster": "Biodiversity Conservation", "node_size": 10, "label": "federal standards"}], ["mitigation credits", {"concepts": "mitigation credits", "type": "concept", "cluster": "Biodiversity Conservation", "node_size": 10, "label": "mitigation credits"}]], "Habitat Protection": [["ecosystem function", {"concepts": "ecosystem function", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "ecosystem function"}], ["biodiversity management", {"concepts": "biodiversity management", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "biodiversity management"}], ["sensitive species", {"concepts": "sensitive species", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "sensitive species"}], ["biodiversity", {"concepts": "biodiversity", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "biodiversity"}], ["harmful organisms", {"concepts": "harmful organisms", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "harmful organisms"}], ["ecosystem protection", {"concepts": "ecosystem protection", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "ecosystem protection"}], ["marine resource management", {"concepts": "marine resource management", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "marine resource management"}], ["riparian bank", {"concepts": "riparian bank", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "riparian bank"}], ["protected species", {"concepts": "protected species", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "protected species"}], ["ecosystem diversity", {"concepts": "ecosystem diversity", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "ecosystem diversity"}], ["environmental policy", {"concepts": "environmental policy", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "environmental policy"}], ["food webs", {"concepts": "food webs", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "food webs"}], ["restoration ecologist", {"concepts": "restoration ecologist", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "restoration ecologist"}], ["bird migration", {"concepts": "bird migration", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "bird migration"}], ["seagrass restoration", {"concepts": "seagrass restoration", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "seagrass restoration"}], ["biodiversity data", {"concepts": "biodiversity data", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "biodiversity data"}], ["fish consumption", {"concepts": "fish consumption", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "fish consumption"}], ["fish and wildlife propagation", {"concepts": "fish and wildlife propagation", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "fish and wildlife propagation"}], ["fish propagation", {"concepts": "fish propagation", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "fish propagation"}], ["species of conservation concern", {"concepts": "species of conservation concern", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "species of conservation concern"}], ["seasonality effects", {"concepts": "seasonality effects", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "seasonality effects"}], ["us fish and wildlife service", {"concepts": "us fish and wildlife service", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "us fish and wildlife service"}], ["conservation science", {"concepts": "conservation science", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "conservation science"}], ["species migration", {"concepts": "species migration", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "species migration"}], ["ecological value", {"concepts": "ecological value", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "ecological value"}], ["wildlife protection", {"concepts": "wildlife protection", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "wildlife protection"}], ["keystone species", {"concepts": "keystone species", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "keystone species"}], ["filtration services", {"concepts": "filtration services", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "filtration services"}], ["environmental nonprofit", {"concepts": "environmental nonprofit", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "environmental nonprofit"}], ["citizen science", {"concepts": "citizen science", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "citizen science"}], ["species monitoring", {"concepts": "species monitoring", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "species monitoring"}], ["species counts", {"concepts": "species counts", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "species counts"}], ["public engagement", {"concepts": "public engagement", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "public engagement"}], ["pollution intervention", {"concepts": "pollution intervention", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "pollution intervention"}], ["ecosystem management", {"concepts": "ecosystem management", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "ecosystem management"}], ["food web", {"concepts": "food web", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "food web"}], ["wildlife propagation", {"concepts": "wildlife propagation", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "wildlife propagation"}], ["migration patterns", {"concepts": "migration patterns", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "migration patterns"}], ["public species counts", {"concepts": "public species counts", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "public species counts"}], ["citizen scientists", {"concepts": "citizen scientists", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "citizen scientists"}], ["ecosystem functionality", {"concepts": "ecosystem functionality", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "ecosystem functionality"}], ["fish consumption safety", {"concepts": "fish consumption safety", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "fish consumption safety"}], ["listed species", {"concepts": "listed species", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "listed species"}], ["food web supporting species", {"concepts": "food web supporting species", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "food web supporting species"}], ["oyster restoration", {"concepts": "oyster restoration", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "oyster restoration"}], ["human impacts", {"concepts": "human impacts", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "human impacts"}], ["biodiversity protection", {"concepts": "biodiversity protection", "type": "concept", "cluster": "Habitat Protection", "node_size": 10, "label": "biodiversity protection"}]], "Environmental Collaboration": [["habitat functionality", {"concepts": "habitat functionality", "type": "concept", "cluster": "Environmental Collaboration", "node_size": 10, "label": "habitat functionality"}], ["habitat enforcement", {"concepts": "habitat enforcement", "type": "concept", "cluster": "Environmental Collaboration", "node_size": 10, "label": "habitat enforcement"}], ["habitat management", {"concepts": "habitat management", "type": "concept", "cluster": "Environmental Collaboration", "node_size": 10, "label": "habitat management"}], ["native vegetation", {"concepts": "native vegetation", "type": "concept", "cluster": "Environmental Collaboration", "node_size": 10, "label": "native vegetation"}], ["habitat restoration", {"concepts": "habitat restoration", "type": "concept", "cluster": "Environmental Collaboration", "node_size": 10, "label": "habitat restoration"}], ["urbanized wildlife interactions", {"concepts": "urbanized wildlife interactions", "type": "concept", "cluster": "Environmental Collaboration", "node_size": 10, "label": "urbanized wildlife interactions"}], ["access to habitats", {"concepts": "access to habitats", "type": "concept", "cluster": "Environmental Collaboration", "node_size": 10, "label": "access to habitats"}], ["invasive vegetation", {"concepts": "invasive vegetation", "type": "concept", "cluster": "Environmental Collaboration", "node_size": 10, "label": "invasive vegetation"}], ["listed habitat", {"concepts": "listed habitat", "type": "concept", "cluster": "Environmental Collaboration", "node_size": 10, "label": "listed habitat"}], ["habitat loss", {"concepts": "habitat loss", "type": "concept", "cluster": "Environmental Collaboration", "node_size": 10, "label": "habitat loss"}], ["habitat", {"concepts": "habitat", "type": "concept", "cluster": "Environmental Collaboration", "node_size": 10, "label": "habitat"}], ["submerged aquatic vegetation", {"concepts": "submerged aquatic vegetation", "type": "concept", "cluster": "Environmental Collaboration", "node_size": 10, "label": "submerged aquatic vegetation"}], ["habitat production", {"concepts": "habitat production", "type": "concept", "cluster": "Environmental Collaboration", "node_size": 10, "label": "habitat production"}], ["agricultural use", {"concepts": "agricultural use", "type": "concept", "cluster": "Environmental Collaboration", "node_size": 10, "label": "agricultural use"}], ["habitat forming species", {"concepts": "habitat forming species", "type": "concept", "cluster": "Environmental Collaboration", "node_size": 10, "label": "habitat forming species"}], ["habitat protection", {"concepts": "habitat protection", "type": "concept", "cluster": "Environmental Collaboration", "node_size": 10, "label": "habitat protection"}], ["habitat fragmentation", {"concepts": "habitat fragmentation", "type": "concept", "cluster": "Environmental Collaboration", "node_size": 10, "label": "habitat fragmentation"}], ["protected species habitat", {"concepts": "protected species habitat", "type": "concept", "cluster": "Environmental Collaboration", "node_size": 10, "label": "protected species habitat"}]]};
        const clusterEdges = {"Water Quality Management": [], "Regulatory Enforcement": [], "Biodiversity Conservation": [], "Habitat Protection": [], "Environmental Collaboration": []};
        
        let network;
        let currentView = 'clusters';
        let currentCluster = null;
        let minConfidence = 0.3;
        
        // Network options
        const options = {
            nodes: {
                font: { color: 'white', size: 14 },
                borderWidth: 2,
                shadow: true
            },
            edges: {
                arrows: { to: { enabled: true, scaleFactor: 1.2 } },
                shadow: true,
                smooth: { type: 'continuous' }
            },
            physics: {
                stabilization: { iterations: 100 },
                barnesHut: {
                    gravitationalConstant: -8000,
                    springConstant: 0.001,
                    springLength: 200
                }
            },
            interaction: {
                hover: true,
                selectConnectedEdges: false
            }
        };
        
        function initNetwork() {
            const container = document.getElementById('network');
            const data = getClusterViewData();
            network = new vis.Network(container, data, options);
            
            // Handle cluster clicks for drill-down
            network.on("click", function(params) {
                if (params.nodes.length > 0 && currentView === 'clusters') {
                    const clickedNode = params.nodes[0];
                    if (clusterConcepts[clickedNode]) {
                        showClusterDetail(clickedNode);
                    }
                }
            });
        }
        
        function getClusterViewData() {
            const nodes = [];
            const edges = [];
            
            // Add cluster nodes
            Object.entries(clusterData).forEach(([clusterId, data]) => {
                const concepts = data.concepts || [];
                const conceptsStr = Array.isArray(concepts) ? concepts.join(', ') : concepts;
                
                nodes.push({
                    id: clusterId,
                    label: clusterId,
                    title: `Cluster: ${clusterId}\nConcepts: ${conceptsStr}\nClick to explore internal relationships`,
                    color: '#4A90E2',
                    size: 25 + (conceptsStr.split(',').length * 2),
                    font: { color: 'white' }
                });
            });
            
            // Add inter-cluster edges
            interClusterEdges.forEach(([source, target, edgeData]) => {
                const confidence = edgeData.confidence || 1.0;
                const weight = edgeData.weight || 0;
                
                if (confidence >= minConfidence) {
                    edges.push({
                        from: source,
                        to: target,
                        color: weight > 0 ? '#28A745' : '#DC3545',
                        width: Math.abs(weight) * 3 + 1,
                        title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                        dashes: false
                    });
                }
            });
            
            return { nodes: nodes, edges: edges };
        }
        
        function getClusterDetailData(clusterId) {
            const nodes = [];
            const edges = [];
            
            // Add concept nodes for this cluster
            if (clusterConcepts[clusterId]) {
                clusterConcepts[clusterId].forEach(([conceptId, data]) => {
                    nodes.push({
                        id: conceptId,
                        label: conceptId,
                        title: `Concept: ${conceptId}\nFrom cluster: ${clusterId}`,
                        color: '#FF9500',
                        size: 20,
                        font: { color: 'white' }
                    });
                });
            }
            
            // Add intra-cluster edges
            if (clusterEdges[clusterId]) {
                clusterEdges[clusterId].forEach(([source, target, edgeData]) => {
                    const confidence = edgeData.confidence || 1.0;
                    const weight = edgeData.weight || 0;
                    
                    if (confidence >= minConfidence) {
                        edges.push({
                            from: source,
                            to: target,
                            color: weight > 0 ? '#28A745' : '#DC3545',
                            width: Math.abs(weight) * 3 + 1,
                            title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                            dashes: true
                        });
                    }
                });
            }
            
            return { nodes: nodes, edges: edges };
        }
        
        function showClusterView() {
            currentView = 'clusters';
            currentCluster = null;
            const data = getClusterViewData();
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'none';
            document.getElementById('current-view').textContent = 'Cluster Overview';
        }
        
        function showClusterDetail(clusterId) {
            currentView = 'concepts';
            currentCluster = clusterId;
            const data = getClusterDetailData(clusterId);
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'inline-block';
            document.getElementById('current-view').textContent = `Inside Cluster: ${clusterId}`;
        }
        
        function updateConfidenceFilter(value) {
            minConfidence = parseFloat(value);
            document.getElementById('confidence-value').textContent = value;
            
            // Refresh current view
            if (currentView === 'clusters') {
                showClusterView();
            } else {
                showClusterDetail(currentCluster);
            }
        }
        
        // Initialize the network when page loads
        window.onload = function() {
            initNetwork();
        };
    </script>
</body>
</html>
