
<!DOCTYPE html>
<html>
<head>
    <title>Hierarchical FCM Visualization (Unconnected nodes removed)</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 0; 
            padding: 20px;
            background: #f5f5f5;
        }
        
        #network { 
            width: 100%; 
            height: 600px; 
            border: 2px solid #ccc; 
            background: white;
            border-radius: 8px;
        }
        
        #controls {
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn {
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        
        .btn-primary { background: #4A90E2; color: white; }
        .btn-primary:hover { background: #357ABD; }
        
        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #545b62; }
        
        #current-view {
            font-weight: bold;
            color: #333;
            margin-left: 10px;
        }
        
        #legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-size: 12px;
            max-width: 200px;
        }
        
        .legend-item {
            margin: 5px 0;
            display: flex;
            align-items: center;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .legend-line {
            width: 20px;
            height: 2px;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <h1>Fuzzy Cognitive Map - Hierarchical View</h1>
    
    <div id="controls">
        <button class="btn btn-secondary" id="back-btn" onclick="showClusterView()" style="display: none;">
            ← Back to Clusters
        </button>
        <span id="current-view">Cluster Overview</span>
        <div style="float: right;">
            <label>Min Confidence: </label>
            <input type="range" id="confidence-slider" min="0" max="1" step="0.1" value="0.3" 
                   onchange="updateConfidenceFilter(this.value)">
            <span id="confidence-value">0.3</span>
        </div>
    </div>
    
    <div id="network"></div>
    
    <div id="legend">
        <h4>Legend</h4>
        <div class="legend-item">
            <div class="legend-color" style="background: #4A90E2;"></div>
            <span>Clusters</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #FF9500;"></div>
            <span>Concepts</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #28A745;"></div>
            <span>Positive relationship</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #DC3545;"></div>
            <span>Negative relationship</span>
        </div>
        <div style="margin-top: 10px; font-style: italic; color: #666;">
            Click clusters to explore internal concepts
        </div>
    </div>

    <script>
        // Embedded data
        const clusterData = {"participation": {"concepts": "participation", "concept_list": ["participation"], "type": "cluster", "node_size": 18, "label": "participation"}, "reef destruction": {"concepts": "reef destruction", "concept_list": ["reef destruction"], "type": "cluster", "node_size": 18, "label": "reef destruction"}, "community norms": {"concepts": "community norms", "concept_list": ["community norms"], "type": "cluster", "node_size": 18, "label": "community norms"}, "Environmental Resource Use": {"concepts": "social resource sharing, social resource management", "concept_list": ["social resource sharing", "social resource management"], "type": "cluster", "node_size": 21, "label": "Environmental Resource Use"}, "Economic Resource Sharing": {"concepts": "environmental stewardship, environmental resource networks, environmental resource use", "concept_list": ["environmental stewardship", "environmental resource networks", "environmental resource use"], "type": "cluster", "node_size": 24, "label": "Economic Resource Sharing"}, "Economic Stability": {"concepts": "economic resource sharing, resource depletion", "concept_list": ["economic resource sharing", "resource depletion"], "type": "cluster", "node_size": 21, "label": "Economic Stability"}, "Marine Safety": {"concepts": "economic resilience, economic vulnerability", "concept_list": ["economic resilience", "economic vulnerability"], "type": "cluster", "node_size": 21, "label": "Marine Safety"}, "Social Resource Sharing": {"concepts": "boat traffic, diver safety", "concept_list": ["boat traffic", "diver safety"], "type": "cluster", "node_size": 21, "label": "Social Resource Sharing"}, "Regulatory Processes": {"concepts": "regulatory processes, expression, regulatory structures, regulation", "concept_list": ["regulatory processes", "expression", "regulatory structures", "regulation"], "type": "cluster", "node_size": 27, "label": "Regulatory Processes"}, "Community Resource Management": {"concepts": "dependency, public outreach, international waters, information sharing, organizational processes, new recruits, environmental factors, social capital development, knowledge management, director, conflicts, conflict, knowledge transfer, lobster harvesting, community resilience, livelihoods, meetings, community cohesion, agricultural facilities, environmental resource sharing, frustration, big vessels, community resource management, environmental conditions, environmental resource management, resource management practices, poaching, livelihood, community, community support systems, relationships, environmental training, economic livelihoods, information dissemination, rescue operations, soil runoff, community adaptation, environmental awareness programs, regulatory engagement, knowledge resource management, community resource sharing, economic knowledge sharing, announcement, cargo vessels, species interactions, regulatory adaptation, safety concerns, radio announcements, vessel safety, overprotection, regulatory systems, healthy food, processed food, town hall meetings, overregulation, social networks, social support networks, lobster holes, social learning processes, social learning, social capital, resource management strategies, organizational structure, community training, support networks, environmental adaptation, meeting participation, tide flags, resource abuse, algae control, customer relations, resource dependence, environmental resilience, economic resource use, assistance networks, lobster populations, market, sea grass loss, social resource networks, social support, social support systems, communication barriers, conflict resolution, resource conflict, resource knowledge management, environmental adaptation strategies, regulatory knowledge systems, economic networks, community resilience strategies, economic knowledge management, economic resource management, social training, ecosystem services, local meetings, algae, environmental stressors, social knowledge management, vessels, group dynamics, adaptation, social resilience, information access, lobster abundance, organizational roles", "concept_list": ["dependency", "public outreach", "international waters", "information sharing", "organizational processes", "new recruits", "environmental factors", "social capital development", "knowledge management", "director", "conflicts", "conflict", "knowledge transfer", "lobster harvesting", "community resilience", "livelihoods", "meetings", "community cohesion", "agricultural facilities", "environmental resource sharing", "frustration", "big vessels", "community resource management", "environmental conditions", "environmental resource management", "resource management practices", "poaching", "livelihood", "community", "community support systems", "relationships", "environmental training", "economic livelihoods", "information dissemination", "rescue operations", "soil runoff", "community adaptation", "environmental awareness programs", "regulatory engagement", "knowledge resource management", "community resource sharing", "economic knowledge sharing", "announcement", "cargo vessels", "species interactions", "regulatory adaptation", "safety concerns", "radio announcements", "vessel safety", "overprotection", "regulatory systems", "healthy food", "processed food", "town hall meetings", "overregulation", "social networks", "social support networks", "lobster holes", "social learning processes", "social learning", "social capital", "resource management strategies", "organizational structure", "community training", "support networks", "environmental adaptation", "meeting participation", "tide flags", "resource abuse", "algae control", "customer relations", "resource dependence", "environmental resilience", "economic resource use", "assistance networks", "lobster populations", "market", "sea grass loss", "social resource networks", "social support", "social support systems", "communication barriers", "conflict resolution", "resource conflict", "resource knowledge management", "environmental adaptation strategies", "regulatory knowledge systems", "economic networks", "community resilience strategies", "economic knowledge management", "economic resource management", "social training", "ecosystem services", "local meetings", "algae", "environmental stressors", "social knowledge management", "vessels", "group dynamics", "adaptation", "social resilience", "information access", "lobster abundance", "organizational roles"], "type": "cluster", "node_size": 327, "label": "Community Resource Management"}, "Social Dynamics": {"concepts": "intergroup relations, social management, social utilization, social awareness, social adaptation, social cooperation, social relations, social interaction, social dynamics, social behavior, social organization, social hierarchy, social integration, social cohesion, social structure, drug users, social relationships, social changes, social norms", "concept_list": ["intergroup relations", "social management", "social utilization", "social awareness", "social adaptation", "social cooperation", "social relations", "social interaction", "social dynamics", "social behavior", "social organization", "social hierarchy", "social integration", "social cohesion", "social structure", "drug users", "social relationships", "social changes", "social norms"], "type": "cluster", "node_size": 72, "label": "Social Dynamics"}, "Fish Resources": {"concepts": "fish scalers, local fish, local fish supply, fish stocks, fish and wildlife, fish migration, fish sales, sturgeon fish, white sea urchin, puffer fish, fish pots", "concept_list": ["fish scalers", "local fish", "local fish supply", "fish stocks", "fish and wildlife", "fish migration", "fish sales", "sturgeon fish", "white sea urchin", "puffer fish", "fish pots"], "type": "cluster", "node_size": 48, "label": "Fish Resources"}, "Policy Compliance": {"concepts": "policy compliance, regulatory frameworks, compliance, policy development, regulatory knowledge, policy challenges, lawmaking process, regulatory compliance, regulatory fairness, enforcement, policy training, mandate, compliance issues, agenda setting, rule awareness, lawsuits, rule compliance, lawmaking, regulatory awareness, policy impact, regulatory challenges, regulatory resource management, regulatory process, policy implementation, regulatory enforcement, policy awareness, regulatory agenda, lawmakers, policy enforcement", "concept_list": ["policy compliance", "regulatory frameworks", "compliance", "policy development", "regulatory knowledge", "policy challenges", "lawmaking process", "regulatory compliance", "regulatory fairness", "enforcement", "policy training", "mandate", "compliance issues", "agenda setting", "rule awareness", "lawsuits", "rule compliance", "lawmaking", "regulatory awareness", "policy impact", "regulatory challenges", "regulatory resource management", "regulatory process", "policy implementation", "regulatory enforcement", "policy awareness", "regulatory agenda", "lawmakers", "policy enforcement"], "type": "cluster", "node_size": 102, "label": "Policy Compliance"}, "Technical Communication": {"concepts": "income, technical communication, cultural diversity, technical language, world players, sedimentation, scientific research, survival, ranking issues, queen conch, full-time jobs, spawning closures, future, new generations, commercial catch reports, st. croix, hard work, rescue, information flow, saint croix, procedure, conch season, american waters, soaking time, commercial catch, commercial license, net casting, long liners, overfishing, ngo, usvi, researchers, greed, technical terms, culture, seafood, process, licenses, damage, background, experience, virgin islands, resolution, divers, communication, reproduction, nature conservancy, sargassum, preparation, decision-making, understanding, saint thomas, fishing, abundance, regulations, office, scientific names, written communication, misinterpretation, spawning", "concept_list": ["income", "technical communication", "cultural diversity", "technical language", "world players", "sedimentation", "scientific research", "survival", "ranking issues", "queen conch", "full-time jobs", "spawning closures", "future", "new generations", "commercial catch reports", "st. croix", "hard work", "rescue", "information flow", "saint croix", "procedure", "conch season", "american waters", "soaking time", "commercial catch", "commercial license", "net casting", "long liners", "overfishing", "ngo", "usvi", "researchers", "greed", "technical terms", "culture", "seafood", "process", "licenses", "damage", "background", "experience", "virgin islands", "resolution", "divers", "communication", "reproduction", "nature conservancy", "sargassum", "preparation", "decision-making", "understanding", "saint thomas", "fishing", "abundance", "regulations", "office", "scientific names", "written communication", "misinterpretation", "spawning"], "type": "cluster", "node_size": 195, "label": "Technical Communication"}, "Government Involvement": {"concepts": "local governance, government support, government intervention, government communication, official support, federal government, local economy, government, government regulations, local knowledge, local governance structures, local residents, local government", "concept_list": ["local governance", "government support", "government intervention", "government communication", "official support", "federal government", "local economy", "government", "government regulations", "local knowledge", "local governance structures", "local residents", "local government"], "type": "cluster", "node_size": 54, "label": "Government Involvement"}, "Climate Impacts": {"concepts": "population decline, climate change, global warming, environmental change, seasonal closures, climate effects, climate awareness, hurricanes, local climate, seasonal changes, environmental changes", "concept_list": ["population decline", "climate change", "global warming", "environmental change", "seasonal closures", "climate effects", "climate awareness", "hurricanes", "local climate", "seasonal changes", "environmental changes"], "type": "cluster", "node_size": 48, "label": "Climate Impacts"}, "Area Closures": {"concepts": "closures, area location, high end closed area, safety zone, area closures, system closures, safe zone, boat registration, closed areas, snapper closed area, nautic zones, location, safe zones, nautical zones", "concept_list": ["closures", "area location", "high end closed area", "safety zone", "area closures", "system closures", "safe zone", "boat registration", "closed areas", "snapper closed area", "nautic zones", "location", "safe zones", "nautical zones"], "type": "cluster", "node_size": 57, "label": "Area Closures"}, "Fisher Community": {"concepts": "fishermen, registered fishermen, fishers, fisher education, fishermen involvement, commercial fisherman, fisher relationships, fisheries dependence, inter-fisher relationships", "concept_list": ["fishermen", "registered fishermen", "fishers", "fisher education", "fishermen involvement", "commercial fisherman", "fisher relationships", "fisheries dependence", "inter-fisher relationships"], "type": "cluster", "node_size": 42, "label": "Fisher Community"}, "Occupational Dynamics": {"concepts": "occupational roles, occupational groups, occupational practices, occupational networks, occupational communities, occupational adaptation, occupational dependency, occupational resilience, occupational education, occupational experience, occupational knowledge, occupation, occupational resource management, occupational knowledge systems, occupational challenges, occupational training, occupational identity", "concept_list": ["occupational roles", "occupational groups", "occupational practices", "occupational networks", "occupational communities", "occupational adaptation", "occupational dependency", "occupational resilience", "occupational education", "occupational experience", "occupational knowledge", "occupation", "occupational resource management", "occupational knowledge systems", "occupational challenges", "occupational training", "occupational identity"], "type": "cluster", "node_size": 66, "label": "Occupational Dynamics"}, "Leadership Qualities": {"concepts": "leadership, patience", "concept_list": ["leadership", "patience"], "type": "cluster", "node_size": 21, "label": "Leadership Qualities"}, "Sales Activities": {"concepts": "sales, selling", "concept_list": ["sales", "selling"], "type": "cluster", "node_size": 21, "label": "Sales Activities"}, "Supply Chain Management": {"concepts": "supply chains, restaurant supply", "concept_list": ["supply chains", "restaurant supply"], "type": "cluster", "node_size": 21, "label": "Supply Chain Management"}, "Community Engagement": {"concepts": "community relationships, community awareness, community leadership, community events", "concept_list": ["community relationships", "community awareness", "community leadership", "community events"], "type": "cluster", "node_size": 27, "label": "Community Engagement"}, "Community Involvement": {"concepts": "community participation, community engagement, community support, community involvement", "concept_list": ["community participation", "community engagement", "community support", "community involvement"], "type": "cluster", "node_size": 27, "label": "Community Involvement"}, "Stakeholder Groups": {"concepts": "resource stakeholders, resource stakeholder, stakeholders, stakeholder group", "concept_list": ["resource stakeholders", "resource stakeholder", "stakeholders", "stakeholder group"], "type": "cluster", "node_size": 27, "label": "Stakeholder Groups"}, "Stakeholder Engagement": {"concepts": "stakeholder engagement, stakeholder participation, stakeholder involvement, stakeholder input", "concept_list": ["stakeholder engagement", "stakeholder participation", "stakeholder involvement", "stakeholder input"], "type": "cluster", "node_size": 27, "label": "Stakeholder Engagement"}, "Stakeholder Communication": {"concepts": "stakeholder communication, stakeholder relationships, stakeholder awareness", "concept_list": ["stakeholder communication", "stakeholder relationships", "stakeholder awareness"], "type": "cluster", "node_size": 24, "label": "Stakeholder Communication"}, "Stakeholder Training & Conflict": {"concepts": "stakeholder training, stakeholder conflict", "concept_list": ["stakeholder training", "stakeholder conflict"], "type": "cluster", "node_size": 21, "label": "Stakeholder Training & Conflict"}, "Resource Knowledge": {"concepts": "resource knowledge, knowledge acquisition, knowledge resources", "concept_list": ["resource knowledge", "knowledge acquisition", "knowledge resources"], "type": "cluster", "node_size": 24, "label": "Resource Knowledge"}, "Traditional Knowledge": {"concepts": "traditional knowledge, knowledge systems", "concept_list": ["traditional knowledge", "knowledge systems"], "type": "cluster", "node_size": 21, "label": "Traditional Knowledge"}, "Economic Knowledge": {"concepts": "economic knowledge systems, economic resource knowledge, economic knowledge", "concept_list": ["economic knowledge systems", "economic resource knowledge", "economic knowledge"], "type": "cluster", "node_size": 24, "label": "Economic Knowledge"}, "Social Knowledge": {"concepts": "social resource knowledge, social knowledge systems, knowledge networks, social knowledge", "concept_list": ["social resource knowledge", "social knowledge systems", "knowledge networks", "social knowledge"], "type": "cluster", "node_size": 27, "label": "Social Knowledge"}, "Economic Strategies": {"concepts": "economic opportunity, economic diversification, economic activity, economic utilization, economic impact, economic resource networks, economic adaptation, market access, economic awareness, economic activities, economic strategies, economic adaptation strategies, economic management, economic training, economic practices", "concept_list": ["economic opportunity", "economic diversification", "economic activity", "economic utilization", "economic impact", "economic resource networks", "economic adaptation", "market access", "economic awareness", "economic activities", "economic strategies", "economic adaptation strategies", "economic management", "economic training", "economic practices"], "type": "cluster", "node_size": 60, "label": "Economic Strategies"}, "Economic Hardship & Violence": {"concepts": "economic challenges, violence", "concept_list": ["economic challenges", "violence"], "type": "cluster", "node_size": 21, "label": "Economic Hardship & Violence"}, "Economic & Job Dependence": {"concepts": "economic reliance, economic dependence, ecosystem dependence, job reliance", "concept_list": ["economic reliance", "economic dependence", "ecosystem dependence", "job reliance"], "type": "cluster", "node_size": 27, "label": "Economic & Job Dependence"}, "Marine Resource Management": {"concepts": "marine resource sustainability, coastal construction, resource conservation, east end marine park, marine conservation policy, marine ecosystems, marine livelihoods, marine resources, algae removal, sea grass, marine habitats, shoreline behavior, marine resource use, marine biodiversity, marine knowledge, marine conservation, marine resource networks, shoreline construction, marine resource conservation, marine resource management, coastal communities, marine industries, marine policy, sediment control, marine resource sharing, environmental resource conservation, marine resource knowledge", "concept_list": ["marine resource sustainability", "coastal construction", "resource conservation", "east end marine park", "marine conservation policy", "marine ecosystems", "marine livelihoods", "marine resources", "algae removal", "sea grass", "marine habitats", "shoreline behavior", "marine resource use", "marine biodiversity", "marine knowledge", "marine conservation", "marine resource networks", "shoreline construction", "marine resource conservation", "marine resource management", "coastal communities", "marine industries", "marine policy", "sediment control", "marine resource sharing", "environmental resource conservation", "marine resource knowledge"], "type": "cluster", "node_size": 96, "label": "Marine Resource Management"}, "Environmental Issues": {"concepts": "environmental challenges, environmental monitoring, environmental policy, environmental management, environmental protection, pollution, environmental awareness, environmental threats, environmental impact, environmental utilization, environmental concerns, environmental problems", "concept_list": ["environmental challenges", "environmental monitoring", "environmental policy", "environmental management", "environmental protection", "pollution", "environmental awareness", "environmental threats", "environmental impact", "environmental utilization", "environmental concerns", "environmental problems"], "type": "cluster", "node_size": 51, "label": "Environmental Issues"}, "Decision-Making Bodies": {"concepts": "district advisory panels, lobster, commissioner, decision authority, responsibility, decision makers, senators, ignorance, decision making, advocacy, chair", "concept_list": ["district advisory panels", "lobster", "commissioner", "decision authority", "responsibility", "decision makers", "senators", "ignorance", "decision making", "advocacy", "chair"], "type": "cluster", "node_size": 48, "label": "Decision-Making Bodies"}, "Community Knowledge Sharing": {"concepts": "community resource knowledge, knowledge sharing, knowledge gaps, knowledge dissemination, community knowledge management, community knowledge, community knowledge systems, knowledge exchange, community knowledge sharing", "concept_list": ["community resource knowledge", "knowledge sharing", "knowledge gaps", "knowledge dissemination", "community knowledge management", "community knowledge", "community knowledge systems", "knowledge exchange", "community knowledge sharing"], "type": "cluster", "node_size": 42, "label": "Community Knowledge Sharing"}, "Sustainability Strategies": {"concepts": "social sustainability, resource sustainability strategies, environmental sustainability, resource sustainability, economic sustainability, economic sustainability strategies", "concept_list": ["social sustainability", "resource sustainability strategies", "environmental sustainability", "resource sustainability", "economic sustainability", "economic sustainability strategies"], "type": "cluster", "node_size": 33, "label": "Sustainability Strategies"}, "Fishing Practices": {"concepts": "safe fishing zone, fishing restrictions, fishing zones, fishing income, fishing community, fishing methods, fishing gear, gear destruction, fishing closures, fishing dependency, deep water fishing, fishing numbers, fishing industry, fishing practices, fishing communities, fishing smart, commercial fishing, fishing regulations, fishing abilities", "concept_list": ["safe fishing zone", "fishing restrictions", "fishing zones", "fishing income", "fishing community", "fishing methods", "fishing gear", "gear destruction", "fishing closures", "fishing dependency", "deep water fishing", "fishing numbers", "fishing industry", "fishing practices", "fishing communities", "fishing smart", "commercial fishing", "fishing regulations", "fishing abilities"], "type": "cluster", "node_size": 72, "label": "Fishing Practices"}, "Resource Management": {"concepts": "resource management, resource access, resource protection, resource use, resource allocation, resource utilization, resource availability, resource sharing, fairness", "concept_list": ["resource management", "resource access", "resource protection", "resource use", "resource allocation", "resource utilization", "resource availability", "resource sharing", "fairness"], "type": "cluster", "node_size": 42, "label": "Resource Management"}, "Community Education": {"concepts": "educational attainment, education, education level, educational outreach, environmental education, community education, educational awareness, environmental education programs", "concept_list": ["educational attainment", "education", "education level", "educational outreach", "environmental education", "community education", "educational awareness", "environmental education programs"], "type": "cluster", "node_size": 39, "label": "Community Education"}, "Environmental Knowledge Management": {"concepts": "environmental knowledge systems, environmental knowledge, environmental knowledge sharing, environmental resource knowledge, knowledge sustainability, marine knowledge management, environmental knowledge management", "concept_list": ["environmental knowledge systems", "environmental knowledge", "environmental knowledge sharing", "environmental resource knowledge", "knowledge sustainability", "marine knowledge management", "environmental knowledge management"], "type": "cluster", "node_size": 36, "label": "Environmental Knowledge Management"}, "Coral Health Trends": {"concepts": "elkhorn coral, staghorn corals, elkhorn corals, coral decline, coral health, coral recovery, staghorn coral", "concept_list": ["elkhorn coral", "staghorn corals", "elkhorn corals", "coral decline", "coral health", "coral recovery", "staghorn coral"], "type": "cluster", "node_size": 36, "label": "Coral Health Trends"}, "Coral Reef Ecosystems": {"concepts": "reefs, reef bottom, coral reefs", "concept_list": ["reefs", "reef bottom", "coral reefs"], "type": "cluster", "node_size": 24, "label": "Coral Reef Ecosystems"}, "Reef Health": {"concepts": "reef ecosystem, reef health", "concept_list": ["reef ecosystem", "reef health"], "type": "cluster", "node_size": 21, "label": "Reef Health"}, "Community Organization": {"concepts": "community dynamics, community structure", "concept_list": ["community dynamics", "community structure"], "type": "cluster", "node_size": 21, "label": "Community Organization"}, "Community Networks": {"concepts": "community networks, community resource networks", "concept_list": ["community networks", "community resource networks"], "type": "cluster", "node_size": 21, "label": "Community Networks"}, "Fisheries": {"concepts": "usvi fisheries, fisheries", "concept_list": ["usvi fisheries", "fisheries"], "type": "cluster", "node_size": 21, "label": "Fisheries"}, "Fishery Policy": {"concepts": "fishery policy, fishery management", "concept_list": ["fishery policy", "fishery management"], "type": "cluster", "node_size": 21, "label": "Fishery Policy"}, "Fishery Managers": {"concepts": "fishery managers, fishery advisory committee, usvi fishery managers, fishery manager conflict", "concept_list": ["fishery managers", "fishery advisory committee", "usvi fishery managers", "fishery manager conflict"], "type": "cluster", "node_size": 27, "label": "Fishery Managers"}, "Advisory Committees": {"concepts": "fisheries advisory committee, caribbean fishery management council", "concept_list": ["fisheries advisory committee", "caribbean fishery management council"], "type": "cluster", "node_size": 21, "label": "Advisory Committees"}};
        const conceptData = {};
        const interClusterEdges = [["participation", "Sustainability Strategies", {"weight": 0.75, "confidence": 0.6125, "type": "inter_cluster", "style": "solid"}], ["participation", "Stakeholder Communication", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["participation", "Environmental Resource Use", {"weight": 0.3333333333333333, "confidence": 0.26666666666666666, "type": "inter_cluster", "style": "solid"}], ["reef destruction", "Stakeholder Communication", {"weight": 0.75, "confidence": 0.5125, "type": "inter_cluster", "style": "solid"}], ["community norms", "Advisory Committees", {"weight": 1.0, "confidence": 0.725, "type": "inter_cluster", "style": "solid"}], ["Economic Resource Sharing", "Leadership Qualities", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["Social Resource Sharing", "Fishing Practices", {"weight": -0.3333333333333333, "confidence": 0.2833333333333333, "type": "inter_cluster", "style": "solid"}], ["Social Resource Sharing", "reef destruction", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["Community Resource Management", "Stakeholder Communication", {"weight": 0.5, "confidence": 0.4, "type": "inter_cluster", "style": "solid"}], ["Community Resource Management", "Decision-Making Bodies", {"weight": 0.5, "confidence": 0.375, "type": "inter_cluster", "style": "solid"}], ["Community Resource Management", "Occupational Dynamics", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["Social Dynamics", "Economic Hardship & Violence", {"weight": -0.3333333333333333, "confidence": 0.6833333333333332, "type": "inter_cluster", "style": "solid"}], ["Social Dynamics", "Stakeholder Engagement", {"weight": 0.3333333333333333, "confidence": 0.2333333333333333, "type": "inter_cluster", "style": "solid"}], ["Fish Resources", "Policy Compliance", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["Fish Resources", "Government Involvement", {"weight": 0.5, "confidence": 0.3375, "type": "inter_cluster", "style": "solid"}], ["Fish Resources", "Fisher Community", {"weight": -0.5, "confidence": 0.325, "type": "inter_cluster", "style": "solid"}], ["Policy Compliance", "Economic Resource Sharing", {"weight": 1.0, "confidence": 0.825, "type": "inter_cluster", "style": "solid"}], ["Technical Communication", "reef destruction", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["Government Involvement", "Fishery Policy", {"weight": 1.0, "confidence": 0.825, "type": "inter_cluster", "style": "solid"}], ["Government Involvement", "Environmental Resource Use", {"weight": 0.5, "confidence": 0.4, "type": "inter_cluster", "style": "solid"}], ["Climate Impacts", "Fishery Policy", {"weight": 0.6666666666666666, "confidence": 0.4833333333333334, "type": "inter_cluster", "style": "solid"}], ["Climate Impacts", "Reef Health", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["Area Closures", "Environmental Knowledge Management", {"weight": 1.0, "confidence": 0.7833333333333333, "type": "inter_cluster", "style": "solid"}], ["Area Closures", "Environmental Resource Use", {"weight": -0.4, "confidence": 0.51, "type": "inter_cluster", "style": "solid"}], ["Area Closures", "reef destruction", {"weight": -0.2, "confidence": 0.5, "type": "inter_cluster", "style": "solid"}], ["Area Closures", "Climate Impacts", {"weight": 0.5, "confidence": 0.4, "type": "inter_cluster", "style": "solid"}], ["Area Closures", "Stakeholder Engagement", {"weight": 0.3333333333333333, "confidence": 0.26666666666666666, "type": "inter_cluster", "style": "solid"}], ["Fisher Community", "Technical Communication", {"weight": 0.75, "confidence": 0.5625, "type": "inter_cluster", "style": "solid"}], ["Occupational Dynamics", "Environmental Issues", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["Leadership Qualities", "Supply Chain Management", {"weight": 0.5, "confidence": 0.275, "type": "inter_cluster", "style": "solid"}], ["Leadership Qualities", "Economic Hardship & Violence", {"weight": -0.5, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Sales Activities", "Economic Strategies", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["Supply Chain Management", "Fish Resources", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["Supply Chain Management", "Resource Knowledge", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["Community Engagement", "Government Involvement", {"weight": 1.0, "confidence": 0.675, "type": "inter_cluster", "style": "solid"}], ["Community Engagement", "Fishing Practices", {"weight": -1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["Community Involvement", "Resource Knowledge", {"weight": 0.6666666666666666, "confidence": 0.5, "type": "inter_cluster", "style": "solid"}], ["Community Involvement", "Fisher Community", {"weight": 0.6666666666666666, "confidence": 0.5333333333333333, "type": "inter_cluster", "style": "solid"}], ["Stakeholder Groups", "Environmental Issues", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["Stakeholder Groups", "Economic & Job Dependence", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["Stakeholder Engagement", "Economic Hardship & Violence", {"weight": 0.6666666666666666, "confidence": 0.4666666666666666, "type": "inter_cluster", "style": "solid"}], ["Stakeholder Engagement", "Economic Knowledge", {"weight": 0.4, "confidence": 0.27999999999999997, "type": "inter_cluster", "style": "solid"}], ["Stakeholder Engagement", "Fish Resources", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["Stakeholder Engagement", "Supply Chain Management", {"weight": 0.5, "confidence": 0.35, "type": "inter_cluster", "style": "solid"}], ["Stakeholder Communication", "community norms", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["Stakeholder Training & Conflict", "Economic Knowledge", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["Stakeholder Training & Conflict", "Regulatory Processes", {"weight": 0.5, "confidence": 0.35, "type": "inter_cluster", "style": "solid"}], ["Resource Knowledge", "Fisheries", {"weight": 0.6666666666666666, "confidence": 0.5166666666666667, "type": "inter_cluster", "style": "solid"}], ["Traditional Knowledge", "reef destruction", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["Traditional Knowledge", "Economic & Job Dependence", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["Economic Knowledge", "Fishery Managers", {"weight": -1.0, "confidence": 0.7749999999999999, "type": "inter_cluster", "style": "solid"}], ["Economic Knowledge", "Government Involvement", {"weight": 0.6666666666666666, "confidence": 0.4666666666666666, "type": "inter_cluster", "style": "solid"}], ["Social Knowledge", "Economic Stability", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["Marine Resource Management", "Economic Stability", {"weight": -0.3333333333333333, "confidence": 0.26666666666666666, "type": "inter_cluster", "style": "solid"}], ["Environmental Issues", "Economic & Job Dependence", {"weight": -0.3333333333333333, "confidence": 0.2833333333333333, "type": "inter_cluster", "style": "solid"}], ["Decision-Making Bodies", "Coral Health Trends", {"weight": 0.6666666666666666, "confidence": 0.4666666666666666, "type": "inter_cluster", "style": "solid"}], ["Community Knowledge Sharing", "Community Involvement", {"weight": 0.5, "confidence": 0.4, "type": "inter_cluster", "style": "solid"}], ["Community Knowledge Sharing", "Resource Knowledge", {"weight": 0.3333333333333333, "confidence": 0.2833333333333333, "type": "inter_cluster", "style": "solid"}], ["Sustainability Strategies", "Economic & Job Dependence", {"weight": 0.25, "confidence": 0.5625, "type": "inter_cluster", "style": "solid"}], ["Fishing Practices", "Marine Safety", {"weight": 1.0, "confidence": 0.7750000000000001, "type": "inter_cluster", "style": "solid"}], ["Fishing Practices", "Fisher Community", {"weight": 0.6, "confidence": 0.47000000000000003, "type": "inter_cluster", "style": "solid"}], ["Resource Management", "Coral Health Trends", {"weight": 1.0, "confidence": 0.7833333333333333, "type": "inter_cluster", "style": "solid"}], ["Resource Management", "Occupational Dynamics", {"weight": 0.3333333333333333, "confidence": 0.7166666666666668, "type": "inter_cluster", "style": "solid"}], ["Resource Management", "Community Resource Management", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["Community Education", "Fishing Practices", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["Community Education", "Community Engagement", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["Environmental Knowledge Management", "Social Resource Sharing", {"weight": 0.6666666666666666, "confidence": 0.4833333333333334, "type": "inter_cluster", "style": "solid"}], ["Coral Health Trends", "Leadership Qualities", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["Coral Reef Ecosystems", "Environmental Knowledge Management", {"weight": 0.5, "confidence": 0.4, "type": "inter_cluster", "style": "solid"}], ["Coral Reef Ecosystems", "Community Involvement", {"weight": 0.5, "confidence": 0.375, "type": "inter_cluster", "style": "solid"}], ["Reef Health", "Fishing Practices", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["Reef Health", "Fishery Policy", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["Reef Health", "Supply Chain Management", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["Community Organization", "Fishery Policy", {"weight": 0.3333333333333333, "confidence": 0.21666666666666667, "type": "inter_cluster", "style": "solid"}], ["Community Networks", "reef destruction", {"weight": -1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["Fisheries", "Policy Compliance", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["Fisheries", "Supply Chain Management", {"weight": 1.0, "confidence": 0.9, "type": "inter_cluster", "style": "solid"}], ["Fisheries", "Community Involvement", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["Fisheries", "Reef Health", {"weight": -0.5, "confidence": 0.35, "type": "inter_cluster", "style": "solid"}], ["Fishery Policy", "Economic Resource Sharing", {"weight": 1.0, "confidence": 0.825, "type": "inter_cluster", "style": "solid"}]];
        const clusterConcepts = {};
        const clusterEdges = {"Environmental Resource Use": [], "Economic Resource Sharing": [], "Economic Stability": [], "Marine Safety": [], "Social Resource Sharing": [], "Regulatory Processes": [], "Community Resource Management": [], "Social Dynamics": [], "Fish Resources": [], "Policy Compliance": [], "Technical Communication": [], "Government Involvement": [], "Climate Impacts": [], "Area Closures": [], "Fisher Community": [], "Occupational Dynamics": [], "Leadership Qualities": [], "Sales Activities": [], "Supply Chain Management": [], "Community Engagement": [], "Community Involvement": [], "Stakeholder Groups": [], "Stakeholder Engagement": [], "Stakeholder Communication": [], "Stakeholder Training & Conflict": [], "Resource Knowledge": [], "Traditional Knowledge": [], "Economic Knowledge": [], "Social Knowledge": [], "Economic Strategies": [], "Economic Hardship & Violence": [], "Economic & Job Dependence": [], "Marine Resource Management": [], "Environmental Issues": [], "Decision-Making Bodies": [], "Community Knowledge Sharing": [], "Sustainability Strategies": [], "Fishing Practices": [], "Resource Management": [], "Community Education": [], "Environmental Knowledge Management": [], "Coral Health Trends": [], "Coral Reef Ecosystems": [], "Reef Health": [], "Community Organization": [], "Community Networks": [], "Fisheries": [], "Fishery Policy": [], "Fishery Managers": [], "Advisory Committees": []};
        
        let network;
        let currentView = 'clusters';
        let currentCluster = null;
        let minConfidence = 0.3;
        
        // Network options
        const options = {
            nodes: {
                font: { color: 'white', size: 14 },
                borderWidth: 2,
                shadow: true
            },
            edges: {
                arrows: { to: { enabled: true, scaleFactor: 1.2 } },
                shadow: true,
                smooth: { type: 'continuous' }
            },
            physics: {
                stabilization: { iterations: 100 },
                barnesHut: {
                    gravitationalConstant: -8000,
                    springConstant: 0.001,
                    springLength: 200
                }
            },
            interaction: {
                hover: true,
                selectConnectedEdges: false
            }
        };
        
        function initNetwork() {
            const container = document.getElementById('network');
            const data = getClusterViewData();
            network = new vis.Network(container, data, options);
            
            // Handle cluster clicks for drill-down
            network.on("click", function(params) {
                if (params.nodes.length > 0 && currentView === 'clusters') {
                    const clickedNode = params.nodes[0];
                    if (clusterConcepts[clickedNode]) {
                        showClusterDetail(clickedNode);
                    }
                }
            });
        }
        
        function getClusterViewData() {
            const nodes = [];
            const edges = [];
            
            // Add cluster nodes
            Object.entries(clusterData).forEach(([clusterId, data]) => {
                const concepts = data.concepts || [];
                const conceptsStr = Array.isArray(concepts) ? concepts.join(', ') : concepts;
                
                nodes.push({
                    id: clusterId,
                    label: clusterId,
                    title: `Cluster: ${clusterId}\nConcepts: ${conceptsStr}\nClick to explore internal relationships`,
                    color: '#4A90E2',
                    size: 25 + (conceptsStr.split(',').length * 2),
                    font: { color: 'white' }
                });
            });
            
            // Add inter-cluster edges
            interClusterEdges.forEach(([source, target, edgeData]) => {
                const confidence = edgeData.confidence || 1.0;
                const weight = edgeData.weight || 0;
                
                if (confidence >= minConfidence) {
                    edges.push({
                        from: source,
                        to: target,
                        color: weight > 0 ? '#28A745' : '#DC3545',
                        width: Math.abs(weight) * 3 + 1,
                        title: `${source} → ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                        dashes: false
                    });
                }
            });
            
            return { nodes: nodes, edges: edges };
        }
        
        function getClusterDetailData(clusterId) {
            const nodes = [];
            const edges = [];
            
            // Add concept nodes for this cluster
            if (clusterConcepts[clusterId]) {
                clusterConcepts[clusterId].forEach(([conceptId, data]) => {
                    nodes.push({
                        id: conceptId,
                        label: conceptId,
                        title: `Concept: ${conceptId}\nFrom cluster: ${clusterId}`,
                        color: '#FF9500',
                        size: 20,
                        font: { color: 'white' }
                    });
                });
            }
            
            // Add intra-cluster edges
            if (clusterEdges[clusterId]) {
                clusterEdges[clusterId].forEach(([source, target, edgeData]) => {
                    const confidence = edgeData.confidence || 1.0;
                    const weight = edgeData.weight || 0;
                    
                    if (confidence >= minConfidence) {
                        edges.push({
                            from: source,
                            to: target,
                            color: weight > 0 ? '#28A745' : '#DC3545',
                            width: Math.abs(weight) * 3 + 1,
                            title: `${source} → ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                            dashes: true
                        });
                    }
                });
            }
            
            return { nodes: nodes, edges: edges };
        }
        
        function showClusterView() {
            currentView = 'clusters';
            currentCluster = null;
            const data = getClusterViewData();
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'none';
            document.getElementById('current-view').textContent = 'Cluster Overview';
        }
        
        function showClusterDetail(clusterId) {
            currentView = 'concepts';
            currentCluster = clusterId;
            const data = getClusterDetailData(clusterId);
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'inline-block';
            document.getElementById('current-view').textContent = `Inside Cluster: ${clusterId}`;
        }
        
        function updateConfidenceFilter(value) {
            minConfidence = parseFloat(value);
            document.getElementById('confidence-value').textContent = value;
            
            // Refresh current view
            if (currentView === 'clusters') {
                showClusterView();
            } else {
                showClusterDetail(currentCluster);
            }
        }
        
        // Initialize the network when page loads
        window.onload = function() {
            initNetwork();
        };
    </script>
</body>
</html>
