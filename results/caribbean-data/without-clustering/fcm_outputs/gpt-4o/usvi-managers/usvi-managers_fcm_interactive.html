
<!DOCTYPE html>
<html>
<head>
    <title>Hierarchical FCM Visualization (Unconnected nodes removed)</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 0; 
            padding: 20px;
            background: #f5f5f5;
        }
        
        #network { 
            width: 100%; 
            height: 600px; 
            border: 2px solid #ccc; 
            background: white;
            border-radius: 8px;
        }
        
        #controls {
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn {
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        
        .btn-primary { background: #4A90E2; color: white; }
        .btn-primary:hover { background: #357ABD; }
        
        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #545b62; }
        
        #current-view {
            font-weight: bold;
            color: #333;
            margin-left: 10px;
        }
        
        #legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-size: 12px;
            max-width: 200px;
        }
        
        .legend-item {
            margin: 5px 0;
            display: flex;
            align-items: center;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .legend-line {
            width: 20px;
            height: 2px;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <h1>Fuzzy Cognitive Map - Hierarchical View</h1>
    
    <div id="controls">
        <button class="btn btn-secondary" id="back-btn" onclick="showClusterView()" style="display: none;">
            ‚Üê Back to Clusters
        </button>
        <span id="current-view">Cluster Overview</span>
        <div style="float: right;">
            <label>Min Confidence: </label>
            <input type="range" id="confidence-slider" min="0" max="1" step="0.1" value="0.3" 
                   onchange="updateConfidenceFilter(this.value)">
            <span id="confidence-value">0.3</span>
        </div>
    </div>
    
    <div id="network"></div>
    
    <div id="legend">
        <h4>Legend</h4>
        <div class="legend-item">
            <div class="legend-color" style="background: #4A90E2;"></div>
            <span>Clusters</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #FF9500;"></div>
            <span>Concepts</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #28A745;"></div>
            <span>Positive relationship</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #DC3545;"></div>
            <span>Negative relationship</span>
        </div>
        <div style="margin-top: 10px; font-style: italic; color: #666;">
            Click clusters to explore internal concepts
        </div>
    </div>

    <script>
        // Embedded data
        const clusterData = {"us virgin island fisheries": {"concepts": "us virgin island fisheries", "concept_list": ["us virgin island fisheries"], "type": "cluster", "node_size": 18, "label": "us virgin island fisheries"}, "economic investment": {"concepts": "economic investment", "concept_list": ["economic investment"], "type": "cluster", "node_size": 18, "label": "economic investment"}, "usvi fishers": {"concepts": "usvi fishers", "concept_list": ["usvi fishers"], "type": "cluster", "node_size": 18, "label": "usvi fishers"}, "officers": {"concepts": "officers", "concept_list": ["officers"], "type": "cluster", "node_size": 18, "label": "officers"}, "dive companies": {"concepts": "dive companies", "concept_list": ["dive companies"], "type": "cluster", "node_size": 18, "label": "dive companies"}, "commissioner dean plaskett": {"concepts": "commissioner dean plaskett", "concept_list": ["commissioner dean plaskett"], "type": "cluster", "node_size": 18, "label": "commissioner dean plaskett"}, "data analysis": {"concepts": "data analysis", "concept_list": ["data analysis"], "type": "cluster", "node_size": 18, "label": "data analysis"}, "coral": {"concepts": "coral", "concept_list": ["coral"], "type": "cluster", "node_size": 18, "label": "coral"}, "fishing industry decline": {"concepts": "fishing industry decline", "concept_list": ["fishing industry decline"], "type": "cluster", "node_size": 18, "label": "fishing industry decline"}, "terrestrial environment": {"concepts": "terrestrial environment", "concept_list": ["terrestrial environment"], "type": "cluster", "node_size": 18, "label": "terrestrial environment"}, "recreational license": {"concepts": "recreational license", "concept_list": ["recreational license"], "type": "cluster", "node_size": 18, "label": "recreational license"}, "charter guys": {"concepts": "charter guys", "concept_list": ["charter guys"], "type": "cluster", "node_size": 18, "label": "charter guys"}, "grant funding": {"concepts": "grant funding", "concept_list": ["grant funding"], "type": "cluster", "node_size": 18, "label": "grant funding"}, "regulatory challenges": {"concepts": "regulatory challenges", "concept_list": ["regulatory challenges"], "type": "cluster", "node_size": 18, "label": "regulatory challenges"}, "license program": {"concepts": "license program", "concept_list": ["license program"], "type": "cluster", "node_size": 18, "label": "license program"}, "resource aggregation": {"concepts": "resource aggregation", "concept_list": ["resource aggregation"], "type": "cluster", "node_size": 18, "label": "resource aggregation"}, "data collection": {"concepts": "data collection", "concept_list": ["data collection"], "type": "cluster", "node_size": 18, "label": "data collection"}, "st. pete": {"concepts": "st. pete", "concept_list": ["st. pete"], "type": "cluster", "node_size": 18, "label": "st. pete"}, "water temperature": {"concepts": "water temperature", "concept_list": ["water temperature"], "type": "cluster", "node_size": 18, "label": "water temperature"}, "elevated water temperature": {"concepts": "elevated water temperature", "concept_list": ["elevated water temperature"], "type": "cluster", "node_size": 18, "label": "elevated water temperature"}, "benthic community": {"concepts": "benthic community", "concept_list": ["benthic community"], "type": "cluster", "node_size": 18, "label": "benthic community"}, "violations": {"concepts": "violations", "concept_list": ["violations"], "type": "cluster", "node_size": 18, "label": "violations"}, "trammel nets": {"concepts": "trammel nets", "concept_list": ["trammel nets"], "type": "cluster", "node_size": 18, "label": "trammel nets"}, "permits": {"concepts": "permits", "concept_list": ["permits"], "type": "cluster", "node_size": 18, "label": "permits"}, "environmental changes": {"concepts": "environmental changes", "concept_list": ["environmental changes"], "type": "cluster", "node_size": 18, "label": "environmental changes"}, "divers": {"concepts": "divers", "concept_list": ["divers"], "type": "cluster", "node_size": 18, "label": "divers"}, "fishermen association": {"concepts": "fishermen association", "concept_list": ["fishermen association"], "type": "cluster", "node_size": 18, "label": "fishermen association"}, "fac meetings": {"concepts": "fac meetings", "concept_list": ["fac meetings"], "type": "cluster", "node_size": 18, "label": "fac meetings"}, "ciguatera": {"concepts": "ciguatera", "concept_list": ["ciguatera"], "type": "cluster", "node_size": 18, "label": "ciguatera"}, "relationships": {"concepts": "relationships", "concept_list": ["relationships"], "type": "cluster", "node_size": 18, "label": "relationships"}, "fishing communities": {"concepts": "fishing communities", "concept_list": ["fishing communities"], "type": "cluster", "node_size": 18, "label": "fishing communities"}, "by-catch": {"concepts": "by-catch", "concept_list": ["by-catch"], "type": "cluster", "node_size": 18, "label": "by-catch"}, "fishing sustainability": {"concepts": "fishing sustainability", "concept_list": ["fishing sustainability"], "type": "cluster", "node_size": 18, "label": "fishing sustainability"}, "pump-out station": {"concepts": "pump-out station", "concept_list": ["pump-out station"], "type": "cluster", "node_size": 18, "label": "pump-out station"}, "pilot program": {"concepts": "pilot program", "concept_list": ["pilot program"], "type": "cluster", "node_size": 18, "label": "pilot program"}, "certified diver": {"concepts": "certified diver", "concept_list": ["certified diver"], "type": "cluster", "node_size": 18, "label": "certified diver"}, "caribbean council": {"concepts": "caribbean council", "concept_list": ["caribbean council"], "type": "cluster", "node_size": 18, "label": "caribbean council"}, "longline gear": {"concepts": "longline gear", "concept_list": ["longline gear"], "type": "cluster", "node_size": 18, "label": "longline gear"}, "minimum size restrictions": {"concepts": "minimum size restrictions", "concept_list": ["minimum size restrictions"], "type": "cluster", "node_size": 18, "label": "minimum size restrictions"}, "public meetings": {"concepts": "public meetings", "concept_list": ["public meetings"], "type": "cluster", "node_size": 18, "label": "public meetings"}, "protection": {"concepts": "protection", "concept_list": ["protection"], "type": "cluster", "node_size": 18, "label": "protection"}, "economic challenges": {"concepts": "economic challenges", "concept_list": ["economic challenges"], "type": "cluster", "node_size": 18, "label": "economic challenges"}, "environmental regulations": {"concepts": "environmental regulations", "concept_list": ["environmental regulations"], "type": "cluster", "node_size": 18, "label": "environmental regulations"}, "species impact": {"concepts": "species impact", "concept_list": ["species impact"], "type": "cluster", "node_size": 18, "label": "species impact"}, "warming waters": {"concepts": "warming waters", "concept_list": ["warming waters"], "type": "cluster", "node_size": 18, "label": "warming waters"}, "coral reef development": {"concepts": "coral reef development", "concept_list": ["coral reef development"], "type": "cluster", "node_size": 18, "label": "coral reef development"}, "political appointees": {"concepts": "political appointees", "concept_list": ["political appointees"], "type": "cluster", "node_size": 18, "label": "political appointees"}, "net fishery": {"concepts": "net fishery", "concept_list": ["net fishery"], "type": "cluster", "node_size": 18, "label": "net fishery"}, "commercial fisher venues": {"concepts": "commercial fisher venues", "concept_list": ["commercial fisher venues"], "type": "cluster", "node_size": 18, "label": "commercial fisher venues"}, "commissioner oriol": {"concepts": "commissioner oriol", "concept_list": ["commissioner oriol"], "type": "cluster", "node_size": 18, "label": "commissioner oriol"}, "commitment": {"concepts": "commitment", "concept_list": ["commitment"], "type": "cluster", "node_size": 18, "label": "commitment"}, "formal request": {"concepts": "formal request", "concept_list": ["formal request"], "type": "cluster", "node_size": 18, "label": "formal request"}, "decisions": {"concepts": "decisions", "concept_list": ["decisions"], "type": "cluster", "node_size": 18, "label": "decisions"}, "wellbeing": {"concepts": "wellbeing", "concept_list": ["wellbeing"], "type": "cluster", "node_size": 18, "label": "wellbeing"}, "tourist industry": {"concepts": "tourist industry", "concept_list": ["tourist industry"], "type": "cluster", "node_size": 18, "label": "tourist industry"}, "decision makers.": {"concepts": "decision makers.", "concept_list": ["decision makers."], "type": "cluster", "node_size": 18, "label": "decision makers."}, "economic dependency": {"concepts": "economic dependency", "concept_list": ["economic dependency"], "type": "cluster", "node_size": 18, "label": "economic dependency"}, "negotiation": {"concepts": "negotiation", "concept_list": ["negotiation"], "type": "cluster", "node_size": 18, "label": "negotiation"}, "government": {"concepts": "government", "concept_list": ["government"], "type": "cluster", "node_size": 18, "label": "government"}, "fish trap reduction": {"concepts": "fish trap reduction", "concept_list": ["fish trap reduction"], "type": "cluster", "node_size": 18, "label": "fish trap reduction"}, "agriculture": {"concepts": "agriculture", "concept_list": ["agriculture"], "type": "cluster", "node_size": 18, "label": "agriculture"}, "ultimate goal": {"concepts": "ultimate goal", "concept_list": ["ultimate goal"], "type": "cluster", "node_size": 18, "label": "ultimate goal"}, "assembly": {"concepts": "assembly", "concept_list": ["assembly"], "type": "cluster", "node_size": 18, "label": "assembly"}, "hurricanes irma": {"concepts": "hurricanes irma", "concept_list": ["hurricanes irma"], "type": "cluster", "node_size": 18, "label": "hurricanes irma"}, "fish traps": {"concepts": "fish traps", "concept_list": ["fish traps"], "type": "cluster", "node_size": 18, "label": "fish traps"}, "enforcement arm": {"concepts": "enforcement arm", "concept_list": ["enforcement arm"], "type": "cluster", "node_size": 18, "label": "enforcement arm"}, "computer literate": {"concepts": "computer literate", "concept_list": ["computer literate"], "type": "cluster", "node_size": 18, "label": "computer literate"}, "nancy cummings": {"concepts": "nancy cummings", "concept_list": ["nancy cummings"], "type": "cluster", "node_size": 18, "label": "nancy cummings"}, "julian cattell": {"concepts": "julian cattell", "concept_list": ["julian cattell"], "type": "cluster", "node_size": 18, "label": "julian cattell"}, "fac": {"concepts": "fac", "concept_list": ["fac"], "type": "cluster", "node_size": 18, "label": "fac"}, "top down": {"concepts": "top down", "concept_list": ["top down"], "type": "cluster", "node_size": 18, "label": "top down"}, "department commissioner": {"concepts": "department commissioner", "concept_list": ["department commissioner"], "type": "cluster", "node_size": 18, "label": "department commissioner"}, "management process": {"concepts": "management process", "concept_list": ["management process"], "type": "cluster", "node_size": 18, "label": "management process"}, "public hearings": {"concepts": "public hearings", "concept_list": ["public hearings"], "type": "cluster", "node_size": 18, "label": "public hearings"}, "saint thomas": {"concepts": "saint thomas", "concept_list": ["saint thomas"], "type": "cluster", "node_size": 18, "label": "saint thomas"}, "commercial fisher": {"concepts": "commercial fisher", "concept_list": ["commercial fisher"], "type": "cluster", "node_size": 18, "label": "commercial fisher"}, "natural resources": {"concepts": "natural resources", "concept_list": ["natural resources"], "type": "cluster", "node_size": 18, "label": "natural resources"}, "representation": {"concepts": "representation", "concept_list": ["representation"], "type": "cluster", "node_size": 18, "label": "representation"}, "seafood consumption": {"concepts": "seafood consumption", "concept_list": ["seafood consumption"], "type": "cluster", "node_size": 18, "label": "seafood consumption"}, "construction": {"concepts": "construction", "concept_list": ["construction"], "type": "cluster", "node_size": 18, "label": "construction"}, "u.s. virgin island fishers": {"concepts": "u.s. virgin island fishers", "concept_list": ["u.s. virgin island fishers"], "type": "cluster", "node_size": 18, "label": "u.s. virgin island fishers"}, "fishable areas": {"concepts": "fishable areas", "concept_list": ["fishable areas"], "type": "cluster", "node_size": 18, "label": "fishable areas"}, "communication line": {"concepts": "communication line", "concept_list": ["communication line"], "type": "cluster", "node_size": 18, "label": "communication line"}, "workshops": {"concepts": "workshops", "concept_list": ["workshops"], "type": "cluster", "node_size": 18, "label": "workshops"}, "grouper": {"concepts": "grouper", "concept_list": ["grouper"], "type": "cluster", "node_size": 18, "label": "grouper"}, "district advisory panels": {"concepts": "district advisory panels", "concept_list": ["district advisory panels"], "type": "cluster", "node_size": 18, "label": "district advisory panels"}, "alumina plant": {"concepts": "alumina plant", "concept_list": ["alumina plant"], "type": "cluster", "node_size": 18, "label": "alumina plant"}, "photosynthesis": {"concepts": "photosynthesis", "concept_list": ["photosynthesis"], "type": "cluster", "node_size": 18, "label": "photosynthesis"}, "industrial developments": {"concepts": "industrial developments", "concept_list": ["industrial developments"], "type": "cluster", "node_size": 18, "label": "industrial developments"}, "livelihoods": {"concepts": "livelihoods", "concept_list": ["livelihoods"], "type": "cluster", "node_size": 18, "label": "livelihoods"}, "dive-charter": {"concepts": "dive-charter", "concept_list": ["dive-charter"], "type": "cluster", "node_size": 18, "label": "dive-charter"}, "fishing grounds": {"concepts": "fishing grounds", "concept_list": ["fishing grounds"], "type": "cluster", "node_size": 18, "label": "fishing grounds"}, "local people": {"concepts": "local people", "concept_list": ["local people"], "type": "cluster", "node_size": 18, "label": "local people"}, "liaison": {"concepts": "liaison", "concept_list": ["liaison"], "type": "cluster", "node_size": 18, "label": "liaison"}, "ocean ecology": {"concepts": "ocean ecology", "concept_list": ["ocean ecology"], "type": "cluster", "node_size": 18, "label": "ocean ecology"}, "marine ecosystems": {"concepts": "marine ecosystems", "concept_list": ["marine ecosystems"], "type": "cluster", "node_size": 18, "label": "marine ecosystems"}, "recreational fishermen": {"concepts": "recreational fishermen", "concept_list": ["recreational fishermen"], "type": "cluster", "node_size": 18, "label": "recreational fishermen"}, "vessel": {"concepts": "vessel", "concept_list": ["vessel"], "type": "cluster", "node_size": 18, "label": "vessel"}, "input": {"concepts": "input", "concept_list": ["input"], "type": "cluster", "node_size": 18, "label": "input"}, "dataset": {"concepts": "dataset", "concept_list": ["dataset"], "type": "cluster", "node_size": 18, "label": "dataset"}, "marine conservation strategies": {"concepts": "marine conservation strategies", "concept_list": ["marine conservation strategies"], "type": "cluster", "node_size": 18, "label": "marine conservation strategies"}, "land-based runoff": {"concepts": "land-based runoff", "concept_list": ["land-based runoff"], "type": "cluster", "node_size": 18, "label": "land-based runoff"}, "port sample": {"concepts": "port sample", "concept_list": ["port sample"], "type": "cluster", "node_size": 18, "label": "port sample"}, "handlining": {"concepts": "handlining", "concept_list": ["handlining"], "type": "cluster", "node_size": 18, "label": "handlining"}, "migratory species": {"concepts": "migratory species", "concept_list": ["migratory species"], "type": "cluster", "node_size": 18, "label": "migratory species"}, "restaurants": {"concepts": "restaurants", "concept_list": ["restaurants"], "type": "cluster", "node_size": 18, "label": "restaurants"}, "marine ecology": {"concepts": "marine ecology", "concept_list": ["marine ecology"], "type": "cluster", "node_size": 18, "label": "marine ecology"}, "biostatistical sampling": {"concepts": "biostatistical sampling", "concept_list": ["biostatistical sampling"], "type": "cluster", "node_size": 18, "label": "biostatistical sampling"}, "eastern side": {"concepts": "eastern side", "concept_list": ["eastern side"], "type": "cluster", "node_size": 18, "label": "eastern side"}, "house payments": {"concepts": "house payments", "concept_list": ["house payments"], "type": "cluster", "node_size": 18, "label": "house payments"}, "marine industry": {"concepts": "marine industry", "concept_list": ["marine industry"], "type": "cluster", "node_size": 18, "label": "marine industry"}, "hurricane.": {"concepts": "hurricane.", "concept_list": ["hurricane."], "type": "cluster", "node_size": 18, "label": "hurricane."}, "commercial fishermen": {"concepts": "commercial fishermen", "concept_list": ["commercial fishermen"], "type": "cluster", "node_size": 18, "label": "commercial fishermen"}, "st. croix fisheries advisory committee": {"concepts": "st. croix fisheries advisory committee", "concept_list": ["st. croix fisheries advisory committee"], "type": "cluster", "node_size": 18, "label": "st. croix fisheries advisory committee"}, "recreational bag limits": {"concepts": "recreational bag limits", "concept_list": ["recreational bag limits"], "type": "cluster", "node_size": 18, "label": "recreational bag limits"}, "climate change": {"concepts": "climate change", "concept_list": ["climate change"], "type": "cluster", "node_size": 18, "label": "climate change"}, "recreational fishing license": {"concepts": "recreational fishing license", "concept_list": ["recreational fishing license"], "type": "cluster", "node_size": 18, "label": "recreational fishing license"}, "federal laws": {"concepts": "federal laws", "concept_list": ["federal laws"], "type": "cluster", "node_size": 18, "label": "federal laws"}, "lack of enforcement": {"concepts": "lack of enforcement", "concept_list": ["lack of enforcement"], "type": "cluster", "node_size": 18, "label": "lack of enforcement"}, "upper management": {"concepts": "upper management", "concept_list": ["upper management"], "type": "cluster", "node_size": 18, "label": "upper management"}, "grant money": {"concepts": "grant money", "concept_list": ["grant money"], "type": "cluster", "node_size": 18, "label": "grant money"}, "government representatives": {"concepts": "government representatives", "concept_list": ["government representatives"], "type": "cluster", "node_size": 18, "label": "government representatives"}, "handline": {"concepts": "handline", "concept_list": ["handline"], "type": "cluster", "node_size": 18, "label": "handline"}, "resource management": {"concepts": "resource management", "concept_list": ["resource management"], "type": "cluster", "node_size": 18, "label": "resource management"}, "virgin islands": {"concepts": "virgin islands", "concept_list": ["virgin islands"], "type": "cluster", "node_size": 18, "label": "virgin islands"}, "mangrove estuary": {"concepts": "mangrove estuary", "concept_list": ["mangrove estuary"], "type": "cluster", "node_size": 18, "label": "mangrove estuary"}, "regulatory arm": {"concepts": "regulatory arm", "concept_list": ["regulatory arm"], "type": "cluster", "node_size": 18, "label": "regulatory arm"}, "cmap": {"concepts": "cmap", "concept_list": ["cmap"], "type": "cluster", "node_size": 18, "label": "cmap"}, "district advisory panel": {"concepts": "district advisory panel", "concept_list": ["district advisory panel"], "type": "cluster", "node_size": 18, "label": "district advisory panel"}, "chartered fishing": {"concepts": "chartered fishing", "concept_list": ["chartered fishing"], "type": "cluster", "node_size": 18, "label": "chartered fishing"}, "best management practices": {"concepts": "best management practices", "concept_list": ["best management practices"], "type": "cluster", "node_size": 18, "label": "best management practices"}, "carnival": {"concepts": "carnival", "concept_list": ["carnival"], "type": "cluster", "node_size": 18, "label": "carnival"}, "shoreline changes": {"concepts": "shoreline changes", "concept_list": ["shoreline changes"], "type": "cluster", "node_size": 18, "label": "shoreline changes"}, "pelagic commercial fishermen": {"concepts": "pelagic commercial fishermen", "concept_list": ["pelagic commercial fishermen"], "type": "cluster", "node_size": 18, "label": "pelagic commercial fishermen"}, "coral population": {"concepts": "coral population", "concept_list": ["coral population"], "type": "cluster", "node_size": 18, "label": "coral population"}, "commercial fisherman": {"concepts": "commercial fisherman", "concept_list": ["commercial fisherman"], "type": "cluster", "node_size": 18, "label": "commercial fisherman"}, "forums": {"concepts": "forums", "concept_list": ["forums"], "type": "cluster", "node_size": 18, "label": "forums"}, "department of planning and natural resources": {"concepts": "department of planning and natural resources", "concept_list": ["department of planning and natural resources"], "type": "cluster", "node_size": 18, "label": "department of planning and natural resources"}, "science center": {"concepts": "science center", "concept_list": ["science center"], "type": "cluster", "node_size": 18, "label": "science center"}, "turtle hatchlings": {"concepts": "turtle hatchlings", "concept_list": ["turtle hatchlings"], "type": "cluster", "node_size": 18, "label": "turtle hatchlings"}, "stock assessment": {"concepts": "stock assessment", "concept_list": ["stock assessment"], "type": "cluster", "node_size": 18, "label": "stock assessment"}, "fishermen": {"concepts": "fishermen", "concept_list": ["fishermen"], "type": "cluster", "node_size": 18, "label": "fishermen"}, "conservation": {"concepts": "conservation", "concept_list": ["conservation"], "type": "cluster", "node_size": 18, "label": "conservation"}, "rules and regulations": {"concepts": "rules and regulations", "concept_list": ["rules and regulations"], "type": "cluster", "node_size": 18, "label": "rules and regulations"}, "family": {"concepts": "family", "concept_list": ["family"], "type": "cluster", "node_size": 18, "label": "family"}, "gentrification": {"concepts": "gentrification", "concept_list": ["gentrification"], "type": "cluster", "node_size": 18, "label": "gentrification"}, "coronavirus": {"concepts": "coronavirus", "concept_list": ["coronavirus"], "type": "cluster", "node_size": 18, "label": "coronavirus"}, "reef fish species": {"concepts": "reef fish species", "concept_list": ["reef fish species"], "type": "cluster", "node_size": 18, "label": "reef fish species"}, "fish and wildlife": {"concepts": "fish and wildlife", "concept_list": ["fish and wildlife"], "type": "cluster", "node_size": 18, "label": "fish and wildlife"}, "scientists": {"concepts": "scientists", "concept_list": ["scientists"], "type": "cluster", "node_size": 18, "label": "scientists"}, "economic impact": {"concepts": "economic impact", "concept_list": ["economic impact"], "type": "cluster", "node_size": 18, "label": "economic impact"}, "environmentalist": {"concepts": "environmentalist", "concept_list": ["environmentalist"], "type": "cluster", "node_size": 18, "label": "environmentalist"}, "coastal zone management": {"concepts": "coastal zone management", "concept_list": ["coastal zone management"], "type": "cluster", "node_size": 18, "label": "coastal zone management"}, "commercial fishery": {"concepts": "commercial fishery", "concept_list": ["commercial fishery"], "type": "cluster", "node_size": 18, "label": "commercial fishery"}, "federal involvement": {"concepts": "federal involvement", "concept_list": ["federal involvement"], "type": "cluster", "node_size": 18, "label": "federal involvement"}, "fishers": {"concepts": "fishers", "concept_list": ["fishers"], "type": "cluster", "node_size": 18, "label": "fishers"}, "conch shell": {"concepts": "conch shell", "concept_list": ["conch shell"], "type": "cluster", "node_size": 18, "label": "conch shell"}, "ocean floor": {"concepts": "ocean floor", "concept_list": ["ocean floor"], "type": "cluster", "node_size": 18, "label": "ocean floor"}, "resources": {"concepts": "resources", "concept_list": ["resources"], "type": "cluster", "node_size": 18, "label": "resources"}, "disaster funding": {"concepts": "disaster funding", "concept_list": ["disaster funding"], "type": "cluster", "node_size": 18, "label": "disaster funding"}, "fishing livelihoods": {"concepts": "fishing livelihoods", "concept_list": ["fishing livelihoods"], "type": "cluster", "node_size": 18, "label": "fishing livelihoods"}, "fishing gear": {"concepts": "fishing gear", "concept_list": ["fishing gear"], "type": "cluster", "node_size": 18, "label": "fishing gear"}, "department of ag": {"concepts": "department of ag", "concept_list": ["department of ag"], "type": "cluster", "node_size": 18, "label": "department of ag"}, "federal level": {"concepts": "federal level", "concept_list": ["federal level"], "type": "cluster", "node_size": 18, "label": "federal level"}, "local managers": {"concepts": "local managers", "concept_list": ["local managers"], "type": "cluster", "node_size": 18, "label": "local managers"}, "seafood demand": {"concepts": "seafood demand", "concept_list": ["seafood demand"], "type": "cluster", "node_size": 18, "label": "seafood demand"}, "licensing": {"concepts": "licensing", "concept_list": ["licensing"], "type": "cluster", "node_size": 18, "label": "licensing"}, "co-op": {"concepts": "co-op", "concept_list": ["co-op"], "type": "cluster", "node_size": 18, "label": "co-op"}, "st. thomian fishermen": {"concepts": "st. thomian fishermen", "concept_list": ["st. thomian fishermen"], "type": "cluster", "node_size": 18, "label": "st. thomian fishermen"}, "cfmc": {"concepts": "cfmc", "concept_list": ["cfmc"], "type": "cluster", "node_size": 18, "label": "cfmc"}, "meetings": {"concepts": "meetings", "concept_list": ["meetings"], "type": "cluster", "node_size": 18, "label": "meetings"}, "recreational fishing": {"concepts": "recreational fishing", "concept_list": ["recreational fishing"], "type": "cluster", "node_size": 18, "label": "recreational fishing"}, "global warming": {"concepts": "global warming", "concept_list": ["global warming"], "type": "cluster", "node_size": 18, "label": "global warming"}, "mistrust": {"concepts": "mistrust", "concept_list": ["mistrust"], "type": "cluster", "node_size": 18, "label": "mistrust"}, "restricted zone": {"concepts": "restricted zone", "concept_list": ["restricted zone"], "type": "cluster", "node_size": 18, "label": "restricted zone"}, "backlash": {"concepts": "backlash", "concept_list": ["backlash"], "type": "cluster", "node_size": 18, "label": "backlash"}, "fish trap management plan": {"concepts": "fish trap management plan", "concept_list": ["fish trap management plan"], "type": "cluster", "node_size": 18, "label": "fish trap management plan"}, "diver": {"concepts": "diver", "concept_list": ["diver"], "type": "cluster", "node_size": 18, "label": "diver"}, "wildlife biologist": {"concepts": "wildlife biologist", "concept_list": ["wildlife biologist"], "type": "cluster", "node_size": 18, "label": "wildlife biologist"}, "labor-intensive": {"concepts": "labor-intensive", "concept_list": ["labor-intensive"], "type": "cluster", "node_size": 18, "label": "labor-intensive"}, "fishing practices": {"concepts": "fishing practices", "concept_list": ["fishing practices"], "type": "cluster", "node_size": 18, "label": "fishing practices"}, "local fishers": {"concepts": "local fishers", "concept_list": ["local fishers"], "type": "cluster", "node_size": 18, "label": "local fishers"}, "law enforcement officer": {"concepts": "law enforcement officer", "concept_list": ["law enforcement officer"], "type": "cluster", "node_size": 18, "label": "law enforcement officer"}, "national park": {"concepts": "national park", "concept_list": ["national park"], "type": "cluster", "node_size": 18, "label": "national park"}, "coral community": {"concepts": "coral community", "concept_list": ["coral community"], "type": "cluster", "node_size": 18, "label": "coral community"}, "commercial fishing community": {"concepts": "commercial fishing community", "concept_list": ["commercial fishing community"], "type": "cluster", "node_size": 18, "label": "commercial fishing community"}, "caribbean fishery": {"concepts": "caribbean fishery", "concept_list": ["caribbean fishery"], "type": "cluster", "node_size": 18, "label": "caribbean fishery"}, "landings totals": {"concepts": "landings totals", "concept_list": ["landings totals"], "type": "cluster", "node_size": 18, "label": "landings totals"}, "caribbean fishery management": {"concepts": "caribbean fishery management", "concept_list": ["caribbean fishery management"], "type": "cluster", "node_size": 18, "label": "caribbean fishery management"}, "national park service": {"concepts": "national park service", "concept_list": ["national park service"], "type": "cluster", "node_size": 18, "label": "national park service"}, "environmental challenges": {"concepts": "environmental challenges", "concept_list": ["environmental challenges"], "type": "cluster", "node_size": 18, "label": "environmental challenges"}, "illegal fishing": {"concepts": "illegal fishing", "concept_list": ["illegal fishing"], "type": "cluster", "node_size": 18, "label": "illegal fishing"}, "marine resources": {"concepts": "marine resources", "concept_list": ["marine resources"], "type": "cluster", "node_size": 18, "label": "marine resources"}, "mother nature": {"concepts": "mother nature", "concept_list": ["mother nature"], "type": "cluster", "node_size": 18, "label": "mother nature"}, "website": {"concepts": "website", "concept_list": ["website"], "type": "cluster", "node_size": 18, "label": "website"}, "disaster aid": {"concepts": "disaster aid", "concept_list": ["disaster aid"], "type": "cluster", "node_size": 18, "label": "disaster aid"}, "regulation": {"concepts": "regulation", "concept_list": ["regulation"], "type": "cluster", "node_size": 18, "label": "regulation"}, "enforcement": {"concepts": "enforcement", "concept_list": ["enforcement"], "type": "cluster", "node_size": 18, "label": "enforcement"}, "commercial fisherman licensing": {"concepts": "commercial fisherman licensing", "concept_list": ["commercial fisherman licensing"], "type": "cluster", "node_size": 18, "label": "commercial fisherman licensing"}, "culture": {"concepts": "culture", "concept_list": ["culture"], "type": "cluster", "node_size": 18, "label": "culture"}, "dr. anjuli": {"concepts": "dr. anjuli", "concept_list": ["dr. anjuli"], "type": "cluster", "node_size": 18, "label": "dr. anjuli"}, "fishable waters": {"concepts": "fishable waters", "concept_list": ["fishable waters"], "type": "cluster", "node_size": 18, "label": "fishable waters"}, "commercial fishing": {"concepts": "commercial fishing", "concept_list": ["commercial fishing"], "type": "cluster", "node_size": 18, "label": "commercial fishing"}, "fishing community": {"concepts": "fishing community", "concept_list": ["fishing community"], "type": "cluster", "node_size": 18, "label": "fishing community"}, "sargassum seaweed": {"concepts": "sargassum seaweed", "concept_list": ["sargassum seaweed"], "type": "cluster", "node_size": 18, "label": "sargassum seaweed"}, "conversation": {"concepts": "conversation", "concept_list": ["conversation"], "type": "cluster", "node_size": 18, "label": "conversation"}, "coral tissue loss": {"concepts": "coral tissue loss", "concept_list": ["coral tissue loss"], "type": "cluster", "node_size": 18, "label": "coral tissue loss"}, "tourists": {"concepts": "tourists", "concept_list": ["tourists"], "type": "cluster", "node_size": 18, "label": "tourists"}, "us virgin islands": {"concepts": "us virgin islands", "concept_list": ["us virgin islands"], "type": "cluster", "node_size": 18, "label": "us virgin islands"}, "pollution": {"concepts": "pollution", "concept_list": ["pollution"], "type": "cluster", "node_size": 18, "label": "pollution"}, "fishing community dynamics": {"concepts": "fishing community dynamics", "concept_list": ["fishing community dynamics"], "type": "cluster", "node_size": 18, "label": "fishing community dynamics"}, "southeast science fisheries center": {"concepts": "southeast science fisheries center", "concept_list": ["southeast science fisheries center"], "type": "cluster", "node_size": 18, "label": "southeast science fisheries center"}, "local waters": {"concepts": "local waters", "concept_list": ["local waters"], "type": "cluster", "node_size": 18, "label": "local waters"}, "fishing industry": {"concepts": "fishing industry", "concept_list": ["fishing industry"], "type": "cluster", "node_size": 18, "label": "fishing industry"}, "dpnr": {"concepts": "dpnr", "concept_list": ["dpnr"], "type": "cluster", "node_size": 18, "label": "dpnr"}, "department of agriculture": {"concepts": "department of agriculture", "concept_list": ["department of agriculture"], "type": "cluster", "node_size": 18, "label": "department of agriculture"}, "conflict": {"concepts": "conflict", "concept_list": ["conflict"], "type": "cluster", "node_size": 18, "label": "conflict"}, "management": {"concepts": "management", "concept_list": ["management"], "type": "cluster", "node_size": 18, "label": "management"}, "low income": {"concepts": "low income", "concept_list": ["low income"], "type": "cluster", "node_size": 18, "label": "low income"}, "over exploitation": {"concepts": "over exploitation", "concept_list": ["over exploitation"], "type": "cluster", "node_size": 18, "label": "over exploitation"}, "fisheries biologist": {"concepts": "fisheries biologist", "concept_list": ["fisheries biologist"], "type": "cluster", "node_size": 18, "label": "fisheries biologist"}, "fishermen input": {"concepts": "fishermen input", "concept_list": ["fishermen input"], "type": "cluster", "node_size": 18, "label": "fishermen input"}, "department of interior": {"concepts": "department of interior", "concept_list": ["department of interior"], "type": "cluster", "node_size": 18, "label": "department of interior"}, "saint croix": {"concepts": "saint croix", "concept_list": ["saint croix"], "type": "cluster", "node_size": 18, "label": "saint croix"}, "gear change": {"concepts": "gear change", "concept_list": ["gear change"], "type": "cluster", "node_size": 18, "label": "gear change"}, "noaa": {"concepts": "noaa", "concept_list": ["noaa"], "type": "cluster", "node_size": 18, "label": "noaa"}, "groundwater contamination": {"concepts": "groundwater contamination", "concept_list": ["groundwater contamination"], "type": "cluster", "node_size": 18, "label": "groundwater contamination"}, "federal agencies": {"concepts": "federal agencies", "concept_list": ["federal agencies"], "type": "cluster", "node_size": 18, "label": "federal agencies"}, "division of fish and wildlife": {"concepts": "division of fish and wildlife", "concept_list": ["division of fish and wildlife"], "type": "cluster", "node_size": 18, "label": "division of fish and wildlife"}, "commercial fishermen.": {"concepts": "commercial fishermen.", "concept_list": ["commercial fishermen."], "type": "cluster", "node_size": 18, "label": "commercial fishermen."}, "marine habitats": {"concepts": "marine habitats", "concept_list": ["marine habitats"], "type": "cluster", "node_size": 18, "label": "marine habitats"}, "illegal fisherman": {"concepts": "illegal fisherman", "concept_list": ["illegal fisherman"], "type": "cluster", "node_size": 18, "label": "illegal fisherman"}, "fishing licenses": {"concepts": "fishing licenses", "concept_list": ["fishing licenses"], "type": "cluster", "node_size": 18, "label": "fishing licenses"}, "community engagement": {"concepts": "community engagement", "concept_list": ["community engagement"], "type": "cluster", "node_size": 18, "label": "community engagement"}, "red mud": {"concepts": "red mud", "concept_list": ["red mud"], "type": "cluster", "node_size": 18, "label": "red mud"}, "marine scientist": {"concepts": "marine scientist", "concept_list": ["marine scientist"], "type": "cluster", "node_size": 18, "label": "marine scientist"}, "senator involvement": {"concepts": "senator involvement", "concept_list": ["senator involvement"], "type": "cluster", "node_size": 18, "label": "senator involvement"}, "voluntary fishing licenses": {"concepts": "voluntary fishing licenses", "concept_list": ["voluntary fishing licenses"], "type": "cluster", "node_size": 18, "label": "voluntary fishing licenses"}, "gear": {"concepts": "gear", "concept_list": ["gear"], "type": "cluster", "node_size": 18, "label": "gear"}, "commercial fishing license": {"concepts": "commercial fishing license", "concept_list": ["commercial fishing license"], "type": "cluster", "node_size": 18, "label": "commercial fishing license"}, "economic opportunities": {"concepts": "economic opportunities", "concept_list": ["economic opportunities"], "type": "cluster", "node_size": 18, "label": "economic opportunities"}, "social gatherings": {"concepts": "social gatherings", "concept_list": ["social gatherings"], "type": "cluster", "node_size": 18, "label": "social gatherings"}, "lorraine": {"concepts": "lorraine", "concept_list": ["lorraine"], "type": "cluster", "node_size": 18, "label": "lorraine"}, "fishery management": {"concepts": "fishery management", "concept_list": ["fishery management"], "type": "cluster", "node_size": 18, "label": "fishery management"}, "three mile limit": {"concepts": "three mile limit", "concept_list": ["three mile limit"], "type": "cluster", "node_size": 18, "label": "three mile limit"}, "federal waters": {"concepts": "federal waters", "concept_list": ["federal waters"], "type": "cluster", "node_size": 18, "label": "federal waters"}, "coral tissue loss disease": {"concepts": "coral tissue loss disease", "concept_list": ["coral tissue loss disease"], "type": "cluster", "node_size": 18, "label": "coral tissue loss disease"}};
        const conceptData = {};
        const interClusterEdges = [["us virgin island fisheries", "cfmc", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["economic investment", "mistrust", {"weight": -1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["dive companies", "fishermen input", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["dive companies", "marine habitats", {"weight": -1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["commissioner dean plaskett", "commercial fishing", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["fishing industry decline", "shoreline changes", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["terrestrial environment", "hurricane.", {"weight": 0.5, "confidence": 0.325, "type": "inter_cluster", "style": "solid"}], ["recreational license", "fishing licenses", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["charter guys", "community engagement", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["grant funding", "government", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["license program", "natural resources", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["resource aggregation", "hurricane.", {"weight": -1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["water temperature", "industrial developments", {"weight": -1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["elevated water temperature", "landings totals", {"weight": -1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["permits", "computer literate", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["fishermen association", "lorraine", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["fac meetings", "commissioner oriol", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["ciguatera", "tourists", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["pump-out station", "marine resources", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["pilot program", "district advisory panel", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["certified diver", "community engagement", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["longline gear", "handline", {"weight": -1.0, "confidence": 0.5, "type": "inter_cluster", "style": "solid"}], ["minimum size restrictions", "tourist industry", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["public meetings", "u.s. virgin island fishers", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["protection", "alumina plant", {"weight": -1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["economic challenges", "seafood consumption", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["economic challenges", "restaurants", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["environmental regulations", "by-catch", {"weight": -1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["species impact", "marine ecology", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["species impact", "mistrust", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["species impact", "commercial fishery", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["warming waters", "management", {"weight": -1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["coral reef development", "best management practices", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["political appointees", "division of fish and wildlife", {"weight": -1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["political appointees", "communication line", {"weight": -1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["commercial fisher venues", "conversation", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["commitment", "enforcement arm", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["wellbeing", "resources", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["decision makers.", "environmental regulations", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["assembly", "local fishers", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["fish traps", "coral", {"weight": -1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["nancy cummings", "disaster funding", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["julian cattell", "recreational fishing license", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["department commissioner", "marine ecosystems", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["public hearings", "top down", {"weight": -1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["saint thomas", "input", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["commercial fisher", "pelagic commercial fishermen", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["construction", "commercial fishing license", {"weight": -1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["fishable areas", "enforcement", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["workshops", "senator involvement", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["livelihoods", "low income", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["local people", "carnival", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["ocean ecology", "ultimate goal", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["recreational fishermen", "chartered fishing", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["vessel", "divers", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["dataset", "commercial fishermen", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["land-based runoff", "illegal fishing", {"weight": -1.0, "confidence": 0.5, "type": "inter_cluster", "style": "solid"}], ["port sample", "data analysis", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["handlining", "trammel nets", {"weight": -1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["biostatistical sampling", "violations", {"weight": -1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["eastern side", "global warming", {"weight": -1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["house payments", "regulatory challenges", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["hurricane.", "licensing", {"weight": -1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["st. croix fisheries advisory committee", "us virgin islands", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["recreational bag limits", "liaison", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["lack of enforcement", "handline", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["resource management", "fishing sustainability", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["virgin islands", "local waters", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["mangrove estuary", "rules and regulations", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["cmap", "commercial fishery", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["commercial fisherman", "diver", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["forums", "negotiation", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["department of planning and natural resources", "meetings", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["science center", "best management practices", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["turtle hatchlings", "migratory species", {"weight": -1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["stock assessment", "scientists", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["stock assessment", "upper management", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["fishermen", "economic dependency", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["conservation", "fishers", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["rules and regulations", "social gatherings", {"weight": -1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["rules and regulations", "officers", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["family", "fishing livelihoods", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["coronavirus", "grant money", {"weight": -1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["fish and wildlife", "conflict", {"weight": -1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["economic impact", "climate change", {"weight": -1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["environmentalist", "gentrification", {"weight": -1.0, "confidence": 0.5, "type": "inter_cluster", "style": "solid"}], ["coastal zone management", "science center", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["conch shell", "fishing gear", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["resources", "chartered fishing", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["department of ag", "liaison", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["department of ag", "low income", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["federal level", "groundwater contamination", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["co-op", "dive-charter", {"weight": -1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["st. thomian fishermen", "decisions", {"weight": -1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["recreational fishing", "environmental challenges", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["global warming", "coral population", {"weight": -1.0, "confidence": 0.9, "type": "inter_cluster", "style": "solid"}], ["backlash", "district advisory panels", {"weight": -1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["fish trap management plan", "reef fish species", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["wildlife biologist", "federal laws", {"weight": -1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["labor-intensive", "coral tissue loss", {"weight": -1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["local fishers", "federal agencies", {"weight": -1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["law enforcement officer", "local waters", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["national park", "regulation", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["coral community", "violations", {"weight": -1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["caribbean fishery", "formal request", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["caribbean fishery", "disaster aid", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["landings totals", "government representatives", {"weight": -1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["national park service", "resource management", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["marine resources", "marine industry", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["mother nature", "marine resources", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["website", "meetings", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["disaster aid", "hurricanes irma", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["commercial fisherman licensing", "seafood demand", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["culture", "restricted zone", {"weight": -1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["dr. anjuli", "federal level", {"weight": -1.0, "confidence": 0.5, "type": "inter_cluster", "style": "solid"}], ["dr. anjuli", "relationships", {"weight": -1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["fishable waters", "caribbean council", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["fishing community", "three mile limit", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["sargassum seaweed", "agriculture", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["conversation", "fishing communities", {"weight": 1.0, "confidence": 0.625, "type": "inter_cluster", "style": "solid"}], ["pollution", "net fishery", {"weight": -1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["fishing community dynamics", "fishing practices", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["southeast science fisheries center", "st. pete", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["fishing industry", "federal involvement", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["dpnr", "environmental changes", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["department of agriculture", "benthic community", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["over exploitation", "ocean floor", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["fisheries biologist", "representation", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["department of interior", "licensing", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["saint croix", "fac", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["gear change", "local managers", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["noaa", "grouper", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["division of fish and wildlife", "resource management", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["commercial fishermen.", "regulatory arm", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["illegal fisherman", "caribbean fishery management", {"weight": -1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["red mud", "management process", {"weight": -1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["marine scientist", "marine conservation strategies", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["voluntary fishing licenses", "commercial fishing community", {"weight": -1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["gear", "fish trap reduction", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["gear", "ocean ecology", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["economic opportunities", "data collection", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["social gatherings", "usvi fishers", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["fishery management", "coral population", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["federal waters", "fishing grounds", {"weight": -1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["coral tissue loss disease", "photosynthesis", {"weight": -1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}]];
        const clusterConcepts = {};
        const clusterEdges = {};
        
        let network;
        let currentView = 'clusters';
        let currentCluster = null;
        let minConfidence = 0.3;
        
        // Network options
        const options = {
            nodes: {
                font: { color: 'white', size: 14 },
                borderWidth: 2,
                shadow: true
            },
            edges: {
                arrows: { to: { enabled: true, scaleFactor: 1.2 } },
                shadow: true,
                smooth: { type: 'continuous' }
            },
            physics: {
                stabilization: { iterations: 100 },
                barnesHut: {
                    gravitationalConstant: -8000,
                    springConstant: 0.001,
                    springLength: 200
                }
            },
            interaction: {
                hover: true,
                selectConnectedEdges: false
            }
        };
        
        function initNetwork() {
            const container = document.getElementById('network');
            const data = getClusterViewData();
            network = new vis.Network(container, data, options);
            
            // Handle cluster clicks for drill-down
            network.on("click", function(params) {
                if (params.nodes.length > 0 && currentView === 'clusters') {
                    const clickedNode = params.nodes[0];
                    if (clusterConcepts[clickedNode]) {
                        showClusterDetail(clickedNode);
                    }
                }
            });
        }
        
        function getClusterViewData() {
            const nodes = [];
            const edges = [];
            
            // Add cluster nodes
            Object.entries(clusterData).forEach(([clusterId, data]) => {
                const concepts = data.concepts || [];
                const conceptsStr = Array.isArray(concepts) ? concepts.join(', ') : concepts;
                
                nodes.push({
                    id: clusterId,
                    label: clusterId,
                    title: `Cluster: ${clusterId}\nConcepts: ${conceptsStr}\nClick to explore internal relationships`,
                    color: '#4A90E2',
                    size: 25 + (conceptsStr.split(',').length * 2),
                    font: { color: 'white' }
                });
            });
            
            // Add inter-cluster edges
            interClusterEdges.forEach(([source, target, edgeData]) => {
                const confidence = edgeData.confidence || 1.0;
                const weight = edgeData.weight || 0;
                
                if (confidence >= minConfidence) {
                    edges.push({
                        from: source,
                        to: target,
                        color: weight > 0 ? '#28A745' : '#DC3545',
                        width: Math.abs(weight) * 3 + 1,
                        title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                        dashes: false
                    });
                }
            });
            
            return { nodes: nodes, edges: edges };
        }
        
        function getClusterDetailData(clusterId) {
            const nodes = [];
            const edges = [];
            
            // Add concept nodes for this cluster
            if (clusterConcepts[clusterId]) {
                clusterConcepts[clusterId].forEach(([conceptId, data]) => {
                    nodes.push({
                        id: conceptId,
                        label: conceptId,
                        title: `Concept: ${conceptId}\nFrom cluster: ${clusterId}`,
                        color: '#FF9500',
                        size: 20,
                        font: { color: 'white' }
                    });
                });
            }
            
            // Add intra-cluster edges
            if (clusterEdges[clusterId]) {
                clusterEdges[clusterId].forEach(([source, target, edgeData]) => {
                    const confidence = edgeData.confidence || 1.0;
                    const weight = edgeData.weight || 0;
                    
                    if (confidence >= minConfidence) {
                        edges.push({
                            from: source,
                            to: target,
                            color: weight > 0 ? '#28A745' : '#DC3545',
                            width: Math.abs(weight) * 3 + 1,
                            title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                            dashes: true
                        });
                    }
                });
            }
            
            return { nodes: nodes, edges: edges };
        }
        
        function showClusterView() {
            currentView = 'clusters';
            currentCluster = null;
            const data = getClusterViewData();
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'none';
            document.getElementById('current-view').textContent = 'Cluster Overview';
        }
        
        function showClusterDetail(clusterId) {
            currentView = 'concepts';
            currentCluster = clusterId;
            const data = getClusterDetailData(clusterId);
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'inline-block';
            document.getElementById('current-view').textContent = `Inside Cluster: ${clusterId}`;
        }
        
        function updateConfidenceFilter(value) {
            minConfidence = parseFloat(value);
            document.getElementById('confidence-value').textContent = value;
            
            // Refresh current view
            if (currentView === 'clusters') {
                showClusterView();
            } else {
                showClusterDetail(currentCluster);
            }
        }
        
        // Initialize the network when page loads
        window.onload = function() {
            initNetwork();
        };
    </script>
</body>
</html>
