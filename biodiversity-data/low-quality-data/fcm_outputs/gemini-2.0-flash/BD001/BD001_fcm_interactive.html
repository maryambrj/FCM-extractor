
<!DOCTYPE html>
<html>
<head>
    <title>Hierarchical FCM Visualization</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 0; 
            padding: 20px;
            background: #f5f5f5;
        }
        
        #network { 
            width: 100%; 
            height: 600px; 
            border: 2px solid #ccc; 
            background: white;
            border-radius: 8px;
        }
        
        #controls {
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn {
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        
        .btn-primary { background: #4A90E2; color: white; }
        .btn-primary:hover { background: #357ABD; }
        
        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #545b62; }
        
        #current-view {
            font-weight: bold;
            color: #333;
            margin-left: 10px;
        }
        
        #legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-size: 12px;
            max-width: 200px;
        }
        
        .legend-item {
            margin: 5px 0;
            display: flex;
            align-items: center;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .legend-line {
            width: 20px;
            height: 2px;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <h1>Fuzzy Cognitive Map - Hierarchical View</h1>
    
    <div id="controls">
        <button class="btn btn-secondary" id="back-btn" onclick="showClusterView()" style="display: none;">
            ← Back to Clusters
        </button>
        <span id="current-view">Cluster Overview</span>
        <div style="float: right;">
            <label>Min Confidence: </label>
            <input type="range" id="confidence-slider" min="0" max="1" step="0.1" value="0.3" 
                   onchange="updateConfidenceFilter(this.value)">
            <span id="confidence-value">0.3</span>
        </div>
    </div>
    
    <div id="network"></div>
    
    <div id="legend">
        <h4>Legend</h4>
        <div class="legend-item">
            <div class="legend-color" style="background: #4A90E2;"></div>
            <span>Clusters</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #FF9500;"></div>
            <span>Concepts</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #28A745;"></div>
            <span>Positive relationship</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #DC3545;"></div>
            <span>Negative relationship</span>
        </div>
        <div style="margin-top: 10px; font-style: italic; color: #666;">
            Click clusters to explore internal concepts
        </div>
    </div>

    <script>
        // Embedded data
        const clusterData = {"Fisheries Impact": {"concepts": "understanding, concept list, mental modeler, knowledge level, concept creation, context, global knowledge, fixed concepts, data collection, academic research, data, case studies, open-ended questions, research needs, science side, data gaps, collaboration, data impact", "concept_list": ["understanding", "concept list", "mental modeler", "knowledge level", "concept creation", "context", "global knowledge", "fixed concepts", "data collection", "academic research", "data", "case studies", "open-ended questions", "research needs", "science side", "data gaps", "collaboration", "data impact"], "type": "cluster", "node_size": 69, "label": "Fisheries Impact"}, "Ecosystem Resilience": {"concepts": "bycatch fisheries, megafauna impact, marine resources, habitat impact, marine resource, us regulations, shifting pressure, deep water corals, sessile organisms, habitat protection, ecosystem stressor, mega fauna, marine management, gear types, climate-ready fisheries, fishing pressure, trawling organisms, shrimp fisheries, species protection, fish species, ecosystem disturbance, perturbations", "concept_list": ["bycatch fisheries", "megafauna impact", "marine resources", "habitat impact", "marine resource", "us regulations", "shifting pressure", "deep water corals", "sessile organisms", "habitat protection", "ecosystem stressor", "mega fauna", "marine management", "gear types", "climate-ready fisheries", "fishing pressure", "trawling organisms", "shrimp fisheries", "species protection", "fish species", "ecosystem disturbance", "perturbations"], "type": "cluster", "node_size": 81, "label": "Ecosystem Resilience"}, "Biodiversity & Society": {"concepts": "ecological theory, resilience, ecosystem resilience, baseline ecosystem, biological perspective, population persistence, species resilience, scientific processes, resilience definition, science analysis, ecosystem functioning, adaptation, functional role, ecosystem function, ecosystem health, keystone species, ecological niche, perturbed system, resistance change", "concept_list": ["ecological theory", "resilience", "ecosystem resilience", "baseline ecosystem", "biological perspective", "population persistence", "species resilience", "scientific processes", "resilience definition", "science analysis", "ecosystem functioning", "adaptation", "functional role", "ecosystem function", "ecosystem health", "keystone species", "ecological niche", "perturbed system", "resistance change"], "type": "cluster", "node_size": 72, "label": "Biodiversity & Society"}, "Management Impact": {"concepts": "social science, participant expertise, well-being, status quo, user groups, organizational state, community diversity, species diversity, concept-based, important areas, community biodiversity, species biodiversity, subpopulation impact, relative abundance, open-ended, societal preferences, genetic diversity, baseline data, quantify areas, concrete concepts, isolation, quantifiable benefits, ecosystem services, human communities, biodiversity data, human well-being, high diversity, societal benefit, low-hanging fruits, genetic biodiversity, diversity, tribal communities, direct benefit, inherent value, community resilience, coastal communities, biodiversity barriers, case dependent, decision maker, biodiversity incorporation, human health, biodiversity", "concept_list": ["social science", "participant expertise", "well-being", "status quo", "user groups", "organizational state", "community diversity", "species diversity", "concept-based", "important areas", "community biodiversity", "species biodiversity", "subpopulation impact", "relative abundance", "open-ended", "societal preferences", "genetic diversity", "baseline data", "quantify areas", "concrete concepts", "isolation", "quantifiable benefits", "ecosystem services", "human communities", "biodiversity data", "human well-being", "high diversity", "societal benefit", "low-hanging fruits", "genetic biodiversity", "diversity", "tribal communities", "direct benefit", "inherent value", "community resilience", "coastal communities", "biodiversity barriers", "case dependent", "decision maker", "biodiversity incorporation", "human health", "biodiversity"], "type": "cluster", "node_size": 141, "label": "Management Impact"}, "Knowledge & Research": {"concepts": "management impact, management actions impact, management actions", "concept_list": ["management impact", "management actions impact", "management actions"], "type": "cluster", "node_size": 24, "label": "Knowledge & Research"}, "Management Framework": {"concepts": "effective management, management processes, management bodies, management policies", "concept_list": ["effective management", "management processes", "management bodies", "management policies"], "type": "cluster", "node_size": 27, "label": "Management Framework"}, "Acute Stressors": {"concepts": "acute stressors, acute stressor, stressors, chronic stressors, climate stressor, climate stressors, climate change", "concept_list": ["acute stressors", "acute stressor", "stressors", "chronic stressors", "climate stressor", "climate stressors", "climate change"], "type": "cluster", "node_size": 36, "label": "Acute Stressors"}};
        const conceptData = {"understanding": {"concepts": "understanding", "type": "concept", "cluster": "Fisheries Impact", "node_size": 10, "label": "understanding"}, "concept list": {"concepts": "concept list", "type": "concept", "cluster": "Fisheries Impact", "node_size": 10, "label": "concept list"}, "mental modeler": {"concepts": "mental modeler", "type": "concept", "cluster": "Fisheries Impact", "node_size": 10, "label": "mental modeler"}, "knowledge level": {"concepts": "knowledge level", "type": "concept", "cluster": "Fisheries Impact", "node_size": 10, "label": "knowledge level"}, "concept creation": {"concepts": "concept creation", "type": "concept", "cluster": "Fisheries Impact", "node_size": 10, "label": "concept creation"}, "context": {"concepts": "context", "type": "concept", "cluster": "Fisheries Impact", "node_size": 10, "label": "context"}, "global knowledge": {"concepts": "global knowledge", "type": "concept", "cluster": "Fisheries Impact", "node_size": 10, "label": "global knowledge"}, "fixed concepts": {"concepts": "fixed concepts", "type": "concept", "cluster": "Fisheries Impact", "node_size": 10, "label": "fixed concepts"}, "data collection": {"concepts": "data collection", "type": "concept", "cluster": "Fisheries Impact", "node_size": 10, "label": "data collection"}, "academic research": {"concepts": "academic research", "type": "concept", "cluster": "Fisheries Impact", "node_size": 10, "label": "academic research"}, "data": {"concepts": "data", "type": "concept", "cluster": "Fisheries Impact", "node_size": 10, "label": "data"}, "case studies": {"concepts": "case studies", "type": "concept", "cluster": "Fisheries Impact", "node_size": 10, "label": "case studies"}, "open-ended questions": {"concepts": "open-ended questions", "type": "concept", "cluster": "Fisheries Impact", "node_size": 10, "label": "open-ended questions"}, "research needs": {"concepts": "research needs", "type": "concept", "cluster": "Fisheries Impact", "node_size": 10, "label": "research needs"}, "science side": {"concepts": "science side", "type": "concept", "cluster": "Fisheries Impact", "node_size": 10, "label": "science side"}, "data gaps": {"concepts": "data gaps", "type": "concept", "cluster": "Fisheries Impact", "node_size": 10, "label": "data gaps"}, "collaboration": {"concepts": "collaboration", "type": "concept", "cluster": "Fisheries Impact", "node_size": 10, "label": "collaboration"}, "data impact": {"concepts": "data impact", "type": "concept", "cluster": "Fisheries Impact", "node_size": 10, "label": "data impact"}, "bycatch fisheries": {"concepts": "bycatch fisheries", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "bycatch fisheries"}, "megafauna impact": {"concepts": "megafauna impact", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "megafauna impact"}, "marine resources": {"concepts": "marine resources", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "marine resources"}, "habitat impact": {"concepts": "habitat impact", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "habitat impact"}, "marine resource": {"concepts": "marine resource", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "marine resource"}, "us regulations": {"concepts": "us regulations", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "us regulations"}, "shifting pressure": {"concepts": "shifting pressure", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "shifting pressure"}, "deep water corals": {"concepts": "deep water corals", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "deep water corals"}, "sessile organisms": {"concepts": "sessile organisms", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "sessile organisms"}, "habitat protection": {"concepts": "habitat protection", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "habitat protection"}, "ecosystem stressor": {"concepts": "ecosystem stressor", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "ecosystem stressor"}, "mega fauna": {"concepts": "mega fauna", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "mega fauna"}, "marine management": {"concepts": "marine management", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "marine management"}, "gear types": {"concepts": "gear types", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "gear types"}, "climate-ready fisheries": {"concepts": "climate-ready fisheries", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "climate-ready fisheries"}, "fishing pressure": {"concepts": "fishing pressure", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "fishing pressure"}, "trawling organisms": {"concepts": "trawling organisms", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "trawling organisms"}, "shrimp fisheries": {"concepts": "shrimp fisheries", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "shrimp fisheries"}, "species protection": {"concepts": "species protection", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "species protection"}, "fish species": {"concepts": "fish species", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "fish species"}, "ecosystem disturbance": {"concepts": "ecosystem disturbance", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "ecosystem disturbance"}, "perturbations": {"concepts": "perturbations", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "perturbations"}, "ecological theory": {"concepts": "ecological theory", "type": "concept", "cluster": "Biodiversity & Society", "node_size": 10, "label": "ecological theory"}, "resilience": {"concepts": "resilience", "type": "concept", "cluster": "Biodiversity & Society", "node_size": 10, "label": "resilience"}, "ecosystem resilience": {"concepts": "ecosystem resilience", "type": "concept", "cluster": "Biodiversity & Society", "node_size": 10, "label": "ecosystem resilience"}, "baseline ecosystem": {"concepts": "baseline ecosystem", "type": "concept", "cluster": "Biodiversity & Society", "node_size": 10, "label": "baseline ecosystem"}, "biological perspective": {"concepts": "biological perspective", "type": "concept", "cluster": "Biodiversity & Society", "node_size": 10, "label": "biological perspective"}, "population persistence": {"concepts": "population persistence", "type": "concept", "cluster": "Biodiversity & Society", "node_size": 10, "label": "population persistence"}, "species resilience": {"concepts": "species resilience", "type": "concept", "cluster": "Biodiversity & Society", "node_size": 10, "label": "species resilience"}, "scientific processes": {"concepts": "scientific processes", "type": "concept", "cluster": "Biodiversity & Society", "node_size": 10, "label": "scientific processes"}, "resilience definition": {"concepts": "resilience definition", "type": "concept", "cluster": "Biodiversity & Society", "node_size": 10, "label": "resilience definition"}, "science analysis": {"concepts": "science analysis", "type": "concept", "cluster": "Biodiversity & Society", "node_size": 10, "label": "science analysis"}, "ecosystem functioning": {"concepts": "ecosystem functioning", "type": "concept", "cluster": "Biodiversity & Society", "node_size": 10, "label": "ecosystem functioning"}, "adaptation": {"concepts": "adaptation", "type": "concept", "cluster": "Biodiversity & Society", "node_size": 10, "label": "adaptation"}, "functional role": {"concepts": "functional role", "type": "concept", "cluster": "Biodiversity & Society", "node_size": 10, "label": "functional role"}, "ecosystem function": {"concepts": "ecosystem function", "type": "concept", "cluster": "Biodiversity & Society", "node_size": 10, "label": "ecosystem function"}, "ecosystem health": {"concepts": "ecosystem health", "type": "concept", "cluster": "Biodiversity & Society", "node_size": 10, "label": "ecosystem health"}, "keystone species": {"concepts": "keystone species", "type": "concept", "cluster": "Biodiversity & Society", "node_size": 10, "label": "keystone species"}, "ecological niche": {"concepts": "ecological niche", "type": "concept", "cluster": "Biodiversity & Society", "node_size": 10, "label": "ecological niche"}, "perturbed system": {"concepts": "perturbed system", "type": "concept", "cluster": "Biodiversity & Society", "node_size": 10, "label": "perturbed system"}, "resistance change": {"concepts": "resistance change", "type": "concept", "cluster": "Biodiversity & Society", "node_size": 10, "label": "resistance change"}, "social science": {"concepts": "social science", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "social science"}, "participant expertise": {"concepts": "participant expertise", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "participant expertise"}, "well-being": {"concepts": "well-being", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "well-being"}, "status quo": {"concepts": "status quo", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "status quo"}, "user groups": {"concepts": "user groups", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "user groups"}, "organizational state": {"concepts": "organizational state", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "organizational state"}, "community diversity": {"concepts": "community diversity", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "community diversity"}, "species diversity": {"concepts": "species diversity", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "species diversity"}, "concept-based": {"concepts": "concept-based", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "concept-based"}, "important areas": {"concepts": "important areas", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "important areas"}, "community biodiversity": {"concepts": "community biodiversity", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "community biodiversity"}, "species biodiversity": {"concepts": "species biodiversity", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "species biodiversity"}, "subpopulation impact": {"concepts": "subpopulation impact", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "subpopulation impact"}, "relative abundance": {"concepts": "relative abundance", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "relative abundance"}, "open-ended": {"concepts": "open-ended", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "open-ended"}, "societal preferences": {"concepts": "societal preferences", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "societal preferences"}, "genetic diversity": {"concepts": "genetic diversity", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "genetic diversity"}, "baseline data": {"concepts": "baseline data", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "baseline data"}, "quantify areas": {"concepts": "quantify areas", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "quantify areas"}, "concrete concepts": {"concepts": "concrete concepts", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "concrete concepts"}, "isolation": {"concepts": "isolation", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "isolation"}, "quantifiable benefits": {"concepts": "quantifiable benefits", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "quantifiable benefits"}, "ecosystem services": {"concepts": "ecosystem services", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "ecosystem services"}, "human communities": {"concepts": "human communities", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "human communities"}, "biodiversity data": {"concepts": "biodiversity data", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "biodiversity data"}, "human well-being": {"concepts": "human well-being", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "human well-being"}, "high diversity": {"concepts": "high diversity", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "high diversity"}, "societal benefit": {"concepts": "societal benefit", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "societal benefit"}, "low-hanging fruits": {"concepts": "low-hanging fruits", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "low-hanging fruits"}, "genetic biodiversity": {"concepts": "genetic biodiversity", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "genetic biodiversity"}, "diversity": {"concepts": "diversity", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "diversity"}, "tribal communities": {"concepts": "tribal communities", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "tribal communities"}, "direct benefit": {"concepts": "direct benefit", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "direct benefit"}, "inherent value": {"concepts": "inherent value", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "inherent value"}, "community resilience": {"concepts": "community resilience", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "community resilience"}, "coastal communities": {"concepts": "coastal communities", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "coastal communities"}, "biodiversity barriers": {"concepts": "biodiversity barriers", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "biodiversity barriers"}, "case dependent": {"concepts": "case dependent", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "case dependent"}, "decision maker": {"concepts": "decision maker", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "decision maker"}, "biodiversity incorporation": {"concepts": "biodiversity incorporation", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "biodiversity incorporation"}, "human health": {"concepts": "human health", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "human health"}, "biodiversity": {"concepts": "biodiversity", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "biodiversity"}, "management impact": {"concepts": "management impact", "type": "concept", "cluster": "Knowledge & Research", "node_size": 10, "label": "management impact"}, "management actions impact": {"concepts": "management actions impact", "type": "concept", "cluster": "Knowledge & Research", "node_size": 10, "label": "management actions impact"}, "management actions": {"concepts": "management actions", "type": "concept", "cluster": "Knowledge & Research", "node_size": 10, "label": "management actions"}, "effective management": {"concepts": "effective management", "type": "concept", "cluster": "Management Framework", "node_size": 10, "label": "effective management"}, "management processes": {"concepts": "management processes", "type": "concept", "cluster": "Management Framework", "node_size": 10, "label": "management processes"}, "management bodies": {"concepts": "management bodies", "type": "concept", "cluster": "Management Framework", "node_size": 10, "label": "management bodies"}, "management policies": {"concepts": "management policies", "type": "concept", "cluster": "Management Framework", "node_size": 10, "label": "management policies"}, "acute stressors": {"concepts": "acute stressors", "type": "concept", "cluster": "Acute Stressors", "node_size": 10, "label": "acute stressors"}, "acute stressor": {"concepts": "acute stressor", "type": "concept", "cluster": "Acute Stressors", "node_size": 10, "label": "acute stressor"}, "stressors": {"concepts": "stressors", "type": "concept", "cluster": "Acute Stressors", "node_size": 10, "label": "stressors"}, "chronic stressors": {"concepts": "chronic stressors", "type": "concept", "cluster": "Acute Stressors", "node_size": 10, "label": "chronic stressors"}, "climate stressor": {"concepts": "climate stressor", "type": "concept", "cluster": "Acute Stressors", "node_size": 10, "label": "climate stressor"}, "climate stressors": {"concepts": "climate stressors", "type": "concept", "cluster": "Acute Stressors", "node_size": 10, "label": "climate stressors"}, "climate change": {"concepts": "climate change", "type": "concept", "cluster": "Acute Stressors", "node_size": 10, "label": "climate change"}};
        const interClusterEdges = [["Fisheries Impact", "Management Framework", {"weight": 1.0, "confidence": 0.675, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Resilience", "Knowledge & Research", {"weight": -0.6, "confidence": 0.59, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Resilience", "Fisheries Impact", {"weight": 0.5, "confidence": 0.375, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Resilience", "Management Framework", {"weight": -0.6666666666666666, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Biodiversity & Society", "Management Impact", {"weight": 1.0, "confidence": 0.48, "type": "inter_cluster", "style": "solid"}], ["Biodiversity & Society", "Fisheries Impact", {"weight": 1.0, "confidence": 0.47000000000000003, "type": "inter_cluster", "style": "solid"}], ["Biodiversity & Society", "Acute Stressors", {"weight": -0.75, "confidence": 0.4125, "type": "inter_cluster", "style": "solid"}], ["Management Impact", "Biodiversity & Society", {"weight": 0.8, "confidence": 0.38, "type": "inter_cluster", "style": "solid"}], ["Management Impact", "Knowledge & Research", {"weight": 0.75, "confidence": 0.275, "type": "inter_cluster", "style": "solid"}], ["Management Impact", "Management Framework", {"weight": 0.3333333333333333, "confidence": 0.13333333333333333, "type": "inter_cluster", "style": "solid"}], ["Knowledge & Research", "Fisheries Impact", {"weight": 1.0, "confidence": 0.5, "type": "inter_cluster", "style": "solid"}], ["Knowledge & Research", "Management Impact", {"weight": 0.6666666666666666, "confidence": 0.19999999999999998, "type": "inter_cluster", "style": "solid"}], ["Management Framework", "Biodiversity & Society", {"weight": 0.8, "confidence": 0.30000000000000004, "type": "inter_cluster", "style": "solid"}], ["Management Framework", "Management Impact", {"weight": 0.8, "confidence": 0.30000000000000004, "type": "inter_cluster", "style": "solid"}], ["Acute Stressors", "Management Impact", {"weight": -0.8, "confidence": 0.32, "type": "inter_cluster", "style": "solid"}], ["Acute Stressors", "Ecosystem Resilience", {"weight": 0.75, "confidence": 0.2625, "type": "inter_cluster", "style": "solid"}]];
        const clusterConcepts = {"Fisheries Impact": [["understanding", {"concepts": "understanding", "type": "concept", "cluster": "Fisheries Impact", "node_size": 10, "label": "understanding"}], ["concept list", {"concepts": "concept list", "type": "concept", "cluster": "Fisheries Impact", "node_size": 10, "label": "concept list"}], ["mental modeler", {"concepts": "mental modeler", "type": "concept", "cluster": "Fisheries Impact", "node_size": 10, "label": "mental modeler"}], ["knowledge level", {"concepts": "knowledge level", "type": "concept", "cluster": "Fisheries Impact", "node_size": 10, "label": "knowledge level"}], ["concept creation", {"concepts": "concept creation", "type": "concept", "cluster": "Fisheries Impact", "node_size": 10, "label": "concept creation"}], ["context", {"concepts": "context", "type": "concept", "cluster": "Fisheries Impact", "node_size": 10, "label": "context"}], ["global knowledge", {"concepts": "global knowledge", "type": "concept", "cluster": "Fisheries Impact", "node_size": 10, "label": "global knowledge"}], ["fixed concepts", {"concepts": "fixed concepts", "type": "concept", "cluster": "Fisheries Impact", "node_size": 10, "label": "fixed concepts"}], ["data collection", {"concepts": "data collection", "type": "concept", "cluster": "Fisheries Impact", "node_size": 10, "label": "data collection"}], ["academic research", {"concepts": "academic research", "type": "concept", "cluster": "Fisheries Impact", "node_size": 10, "label": "academic research"}], ["data", {"concepts": "data", "type": "concept", "cluster": "Fisheries Impact", "node_size": 10, "label": "data"}], ["case studies", {"concepts": "case studies", "type": "concept", "cluster": "Fisheries Impact", "node_size": 10, "label": "case studies"}], ["open-ended questions", {"concepts": "open-ended questions", "type": "concept", "cluster": "Fisheries Impact", "node_size": 10, "label": "open-ended questions"}], ["research needs", {"concepts": "research needs", "type": "concept", "cluster": "Fisheries Impact", "node_size": 10, "label": "research needs"}], ["science side", {"concepts": "science side", "type": "concept", "cluster": "Fisheries Impact", "node_size": 10, "label": "science side"}], ["data gaps", {"concepts": "data gaps", "type": "concept", "cluster": "Fisheries Impact", "node_size": 10, "label": "data gaps"}], ["collaboration", {"concepts": "collaboration", "type": "concept", "cluster": "Fisheries Impact", "node_size": 10, "label": "collaboration"}], ["data impact", {"concepts": "data impact", "type": "concept", "cluster": "Fisheries Impact", "node_size": 10, "label": "data impact"}]], "Ecosystem Resilience": [["bycatch fisheries", {"concepts": "bycatch fisheries", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "bycatch fisheries"}], ["megafauna impact", {"concepts": "megafauna impact", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "megafauna impact"}], ["marine resources", {"concepts": "marine resources", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "marine resources"}], ["habitat impact", {"concepts": "habitat impact", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "habitat impact"}], ["marine resource", {"concepts": "marine resource", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "marine resource"}], ["us regulations", {"concepts": "us regulations", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "us regulations"}], ["shifting pressure", {"concepts": "shifting pressure", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "shifting pressure"}], ["deep water corals", {"concepts": "deep water corals", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "deep water corals"}], ["sessile organisms", {"concepts": "sessile organisms", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "sessile organisms"}], ["habitat protection", {"concepts": "habitat protection", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "habitat protection"}], ["ecosystem stressor", {"concepts": "ecosystem stressor", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "ecosystem stressor"}], ["mega fauna", {"concepts": "mega fauna", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "mega fauna"}], ["marine management", {"concepts": "marine management", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "marine management"}], ["gear types", {"concepts": "gear types", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "gear types"}], ["climate-ready fisheries", {"concepts": "climate-ready fisheries", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "climate-ready fisheries"}], ["fishing pressure", {"concepts": "fishing pressure", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "fishing pressure"}], ["trawling organisms", {"concepts": "trawling organisms", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "trawling organisms"}], ["shrimp fisheries", {"concepts": "shrimp fisheries", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "shrimp fisheries"}], ["species protection", {"concepts": "species protection", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "species protection"}], ["fish species", {"concepts": "fish species", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "fish species"}], ["ecosystem disturbance", {"concepts": "ecosystem disturbance", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "ecosystem disturbance"}], ["perturbations", {"concepts": "perturbations", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "perturbations"}]], "Biodiversity & Society": [["ecological theory", {"concepts": "ecological theory", "type": "concept", "cluster": "Biodiversity & Society", "node_size": 10, "label": "ecological theory"}], ["resilience", {"concepts": "resilience", "type": "concept", "cluster": "Biodiversity & Society", "node_size": 10, "label": "resilience"}], ["ecosystem resilience", {"concepts": "ecosystem resilience", "type": "concept", "cluster": "Biodiversity & Society", "node_size": 10, "label": "ecosystem resilience"}], ["baseline ecosystem", {"concepts": "baseline ecosystem", "type": "concept", "cluster": "Biodiversity & Society", "node_size": 10, "label": "baseline ecosystem"}], ["biological perspective", {"concepts": "biological perspective", "type": "concept", "cluster": "Biodiversity & Society", "node_size": 10, "label": "biological perspective"}], ["population persistence", {"concepts": "population persistence", "type": "concept", "cluster": "Biodiversity & Society", "node_size": 10, "label": "population persistence"}], ["species resilience", {"concepts": "species resilience", "type": "concept", "cluster": "Biodiversity & Society", "node_size": 10, "label": "species resilience"}], ["scientific processes", {"concepts": "scientific processes", "type": "concept", "cluster": "Biodiversity & Society", "node_size": 10, "label": "scientific processes"}], ["resilience definition", {"concepts": "resilience definition", "type": "concept", "cluster": "Biodiversity & Society", "node_size": 10, "label": "resilience definition"}], ["science analysis", {"concepts": "science analysis", "type": "concept", "cluster": "Biodiversity & Society", "node_size": 10, "label": "science analysis"}], ["ecosystem functioning", {"concepts": "ecosystem functioning", "type": "concept", "cluster": "Biodiversity & Society", "node_size": 10, "label": "ecosystem functioning"}], ["adaptation", {"concepts": "adaptation", "type": "concept", "cluster": "Biodiversity & Society", "node_size": 10, "label": "adaptation"}], ["functional role", {"concepts": "functional role", "type": "concept", "cluster": "Biodiversity & Society", "node_size": 10, "label": "functional role"}], ["ecosystem function", {"concepts": "ecosystem function", "type": "concept", "cluster": "Biodiversity & Society", "node_size": 10, "label": "ecosystem function"}], ["ecosystem health", {"concepts": "ecosystem health", "type": "concept", "cluster": "Biodiversity & Society", "node_size": 10, "label": "ecosystem health"}], ["keystone species", {"concepts": "keystone species", "type": "concept", "cluster": "Biodiversity & Society", "node_size": 10, "label": "keystone species"}], ["ecological niche", {"concepts": "ecological niche", "type": "concept", "cluster": "Biodiversity & Society", "node_size": 10, "label": "ecological niche"}], ["perturbed system", {"concepts": "perturbed system", "type": "concept", "cluster": "Biodiversity & Society", "node_size": 10, "label": "perturbed system"}], ["resistance change", {"concepts": "resistance change", "type": "concept", "cluster": "Biodiversity & Society", "node_size": 10, "label": "resistance change"}]], "Management Impact": [["social science", {"concepts": "social science", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "social science"}], ["participant expertise", {"concepts": "participant expertise", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "participant expertise"}], ["well-being", {"concepts": "well-being", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "well-being"}], ["status quo", {"concepts": "status quo", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "status quo"}], ["user groups", {"concepts": "user groups", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "user groups"}], ["organizational state", {"concepts": "organizational state", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "organizational state"}], ["community diversity", {"concepts": "community diversity", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "community diversity"}], ["species diversity", {"concepts": "species diversity", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "species diversity"}], ["concept-based", {"concepts": "concept-based", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "concept-based"}], ["important areas", {"concepts": "important areas", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "important areas"}], ["community biodiversity", {"concepts": "community biodiversity", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "community biodiversity"}], ["species biodiversity", {"concepts": "species biodiversity", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "species biodiversity"}], ["subpopulation impact", {"concepts": "subpopulation impact", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "subpopulation impact"}], ["relative abundance", {"concepts": "relative abundance", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "relative abundance"}], ["open-ended", {"concepts": "open-ended", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "open-ended"}], ["societal preferences", {"concepts": "societal preferences", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "societal preferences"}], ["genetic diversity", {"concepts": "genetic diversity", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "genetic diversity"}], ["baseline data", {"concepts": "baseline data", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "baseline data"}], ["quantify areas", {"concepts": "quantify areas", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "quantify areas"}], ["concrete concepts", {"concepts": "concrete concepts", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "concrete concepts"}], ["isolation", {"concepts": "isolation", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "isolation"}], ["quantifiable benefits", {"concepts": "quantifiable benefits", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "quantifiable benefits"}], ["ecosystem services", {"concepts": "ecosystem services", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "ecosystem services"}], ["human communities", {"concepts": "human communities", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "human communities"}], ["biodiversity data", {"concepts": "biodiversity data", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "biodiversity data"}], ["human well-being", {"concepts": "human well-being", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "human well-being"}], ["high diversity", {"concepts": "high diversity", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "high diversity"}], ["societal benefit", {"concepts": "societal benefit", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "societal benefit"}], ["low-hanging fruits", {"concepts": "low-hanging fruits", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "low-hanging fruits"}], ["genetic biodiversity", {"concepts": "genetic biodiversity", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "genetic biodiversity"}], ["diversity", {"concepts": "diversity", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "diversity"}], ["tribal communities", {"concepts": "tribal communities", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "tribal communities"}], ["direct benefit", {"concepts": "direct benefit", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "direct benefit"}], ["inherent value", {"concepts": "inherent value", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "inherent value"}], ["community resilience", {"concepts": "community resilience", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "community resilience"}], ["coastal communities", {"concepts": "coastal communities", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "coastal communities"}], ["biodiversity barriers", {"concepts": "biodiversity barriers", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "biodiversity barriers"}], ["case dependent", {"concepts": "case dependent", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "case dependent"}], ["decision maker", {"concepts": "decision maker", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "decision maker"}], ["biodiversity incorporation", {"concepts": "biodiversity incorporation", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "biodiversity incorporation"}], ["human health", {"concepts": "human health", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "human health"}], ["biodiversity", {"concepts": "biodiversity", "type": "concept", "cluster": "Management Impact", "node_size": 10, "label": "biodiversity"}]], "Knowledge & Research": [["management impact", {"concepts": "management impact", "type": "concept", "cluster": "Knowledge & Research", "node_size": 10, "label": "management impact"}], ["management actions impact", {"concepts": "management actions impact", "type": "concept", "cluster": "Knowledge & Research", "node_size": 10, "label": "management actions impact"}], ["management actions", {"concepts": "management actions", "type": "concept", "cluster": "Knowledge & Research", "node_size": 10, "label": "management actions"}]], "Management Framework": [["effective management", {"concepts": "effective management", "type": "concept", "cluster": "Management Framework", "node_size": 10, "label": "effective management"}], ["management processes", {"concepts": "management processes", "type": "concept", "cluster": "Management Framework", "node_size": 10, "label": "management processes"}], ["management bodies", {"concepts": "management bodies", "type": "concept", "cluster": "Management Framework", "node_size": 10, "label": "management bodies"}], ["management policies", {"concepts": "management policies", "type": "concept", "cluster": "Management Framework", "node_size": 10, "label": "management policies"}]], "Acute Stressors": [["acute stressors", {"concepts": "acute stressors", "type": "concept", "cluster": "Acute Stressors", "node_size": 10, "label": "acute stressors"}], ["acute stressor", {"concepts": "acute stressor", "type": "concept", "cluster": "Acute Stressors", "node_size": 10, "label": "acute stressor"}], ["stressors", {"concepts": "stressors", "type": "concept", "cluster": "Acute Stressors", "node_size": 10, "label": "stressors"}], ["chronic stressors", {"concepts": "chronic stressors", "type": "concept", "cluster": "Acute Stressors", "node_size": 10, "label": "chronic stressors"}], ["climate stressor", {"concepts": "climate stressor", "type": "concept", "cluster": "Acute Stressors", "node_size": 10, "label": "climate stressor"}], ["climate stressors", {"concepts": "climate stressors", "type": "concept", "cluster": "Acute Stressors", "node_size": 10, "label": "climate stressors"}], ["climate change", {"concepts": "climate change", "type": "concept", "cluster": "Acute Stressors", "node_size": 10, "label": "climate change"}]]};
        const clusterEdges = {"Fisheries Impact": [], "Ecosystem Resilience": [], "Biodiversity & Society": [], "Management Impact": [], "Knowledge & Research": [], "Management Framework": [], "Acute Stressors": []};
        
        let network;
        let currentView = 'clusters';
        let currentCluster = null;
        let minConfidence = 0.3;
        
        // Network options
        const options = {
            nodes: {
                font: { color: 'white', size: 14 },
                borderWidth: 2,
                shadow: true
            },
            edges: {
                arrows: { to: { enabled: true, scaleFactor: 1.2 } },
                shadow: true,
                smooth: { type: 'continuous' }
            },
            physics: {
                stabilization: { iterations: 100 },
                barnesHut: {
                    gravitationalConstant: -8000,
                    springConstant: 0.001,
                    springLength: 200
                }
            },
            interaction: {
                hover: true,
                selectConnectedEdges: false
            }
        };
        
        function initNetwork() {
            const container = document.getElementById('network');
            const data = getClusterViewData();
            network = new vis.Network(container, data, options);
            
            // Handle cluster clicks for drill-down
            network.on("click", function(params) {
                if (params.nodes.length > 0 && currentView === 'clusters') {
                    const clickedNode = params.nodes[0];
                    if (clusterConcepts[clickedNode]) {
                        showClusterDetail(clickedNode);
                    }
                }
            });
        }
        
        function getClusterViewData() {
            const nodes = [];
            const edges = [];
            
            // Add cluster nodes
            Object.entries(clusterData).forEach(([clusterId, data]) => {
                const concepts = data.concepts || [];
                const conceptsStr = Array.isArray(concepts) ? concepts.join(', ') : concepts;
                
                nodes.push({
                    id: clusterId,
                    label: clusterId,
                    title: `Cluster: ${clusterId}\nConcepts: ${conceptsStr}\nClick to explore internal relationships`,
                    color: '#4A90E2',
                    size: 25 + (conceptsStr.split(',').length * 2),
                    font: { color: 'white' }
                });
            });
            
            // Add inter-cluster edges
            interClusterEdges.forEach(([source, target, edgeData]) => {
                const confidence = edgeData.confidence || 1.0;
                const weight = edgeData.weight || 0;
                
                if (confidence >= minConfidence) {
                    edges.push({
                        from: source,
                        to: target,
                        color: weight > 0 ? '#28A745' : '#DC3545',
                        width: Math.abs(weight) * 3 + 1,
                        title: `${source} → ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                        dashes: false
                    });
                }
            });
            
            return { nodes: nodes, edges: edges };
        }
        
        function getClusterDetailData(clusterId) {
            const nodes = [];
            const edges = [];
            
            // Add concept nodes for this cluster
            if (clusterConcepts[clusterId]) {
                clusterConcepts[clusterId].forEach(([conceptId, data]) => {
                    nodes.push({
                        id: conceptId,
                        label: conceptId,
                        title: `Concept: ${conceptId}\nFrom cluster: ${clusterId}`,
                        color: '#FF9500',
                        size: 20,
                        font: { color: 'white' }
                    });
                });
            }
            
            // Add intra-cluster edges
            if (clusterEdges[clusterId]) {
                clusterEdges[clusterId].forEach(([source, target, edgeData]) => {
                    const confidence = edgeData.confidence || 1.0;
                    const weight = edgeData.weight || 0;
                    
                    if (confidence >= minConfidence) {
                        edges.push({
                            from: source,
                            to: target,
                            color: weight > 0 ? '#28A745' : '#DC3545',
                            width: Math.abs(weight) * 3 + 1,
                            title: `${source} → ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                            dashes: true
                        });
                    }
                });
            }
            
            return { nodes: nodes, edges: edges };
        }
        
        function showClusterView() {
            currentView = 'clusters';
            currentCluster = null;
            const data = getClusterViewData();
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'none';
            document.getElementById('current-view').textContent = 'Cluster Overview';
        }
        
        function showClusterDetail(clusterId) {
            currentView = 'concepts';
            currentCluster = clusterId;
            const data = getClusterDetailData(clusterId);
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'inline-block';
            document.getElementById('current-view').textContent = `Inside Cluster: ${clusterId}`;
        }
        
        function updateConfidenceFilter(value) {
            minConfidence = parseFloat(value);
            document.getElementById('confidence-value').textContent = value;
            
            // Refresh current view
            if (currentView === 'clusters') {
                showClusterView();
            } else {
                showClusterDetail(currentCluster);
            }
        }
        
        // Initialize the network when page loads
        window.onload = function() {
            initNetwork();
        };
    </script>
</body>
</html>
