
<!DOCTYPE html>
<html>
<head>
    <title>Hierarchical FCM Visualization</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 0; 
            padding: 20px;
            background: #f5f5f5;
        }
        
        #network { 
            width: 100%; 
            height: 600px; 
            border: 2px solid #ccc; 
            background: white;
            border-radius: 8px;
        }
        
        #controls {
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn {
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        
        .btn-primary { background: #4A90E2; color: white; }
        .btn-primary:hover { background: #357ABD; }
        
        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #545b62; }
        
        #current-view {
            font-weight: bold;
            color: #333;
            margin-left: 10px;
        }
        
        #legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-size: 12px;
            max-width: 200px;
        }
        
        .legend-item {
            margin: 5px 0;
            display: flex;
            align-items: center;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .legend-line {
            width: 20px;
            height: 2px;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <h1>Fuzzy Cognitive Map - Hierarchical View</h1>
    
    <div id="controls">
        <button class="btn btn-secondary" id="back-btn" onclick="showClusterView()" style="display: none;">
            ← Back to Clusters
        </button>
        <span id="current-view">Cluster Overview</span>
        <div style="float: right;">
            <label>Min Confidence: </label>
            <input type="range" id="confidence-slider" min="0" max="1" step="0.1" value="0.3" 
                   onchange="updateConfidenceFilter(this.value)">
            <span id="confidence-value">0.3</span>
        </div>
    </div>
    
    <div id="network"></div>
    
    <div id="legend">
        <h4>Legend</h4>
        <div class="legend-item">
            <div class="legend-color" style="background: #4A90E2;"></div>
            <span>Clusters</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #FF9500;"></div>
            <span>Concepts</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #28A745;"></div>
            <span>Positive relationship</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #DC3545;"></div>
            <span>Negative relationship</span>
        </div>
        <div style="margin-top: 10px; font-style: italic; color: #666;">
            Click clusters to explore internal concepts
        </div>
    </div>

    <script>
        // Embedded data
        const clusterData = {"Organizational Behavior Dynamics": {"concepts": "shoreline development, coastal management, oyster reef, habitat forming species, fishery species, oyster reef development, harmful organisms, water quality, ecosystem services, fish and wildlife service, marine biodiversity, biodiversity, nutrient removal, single species management, wetland restoration, habitat restoration, shoreline restoration, species conservation, species impact, native species, fisheries species, food-web species, food-web supporting species, fisheries habitat, conservation concern, shell-forming organisms, marine debris, climate change, florida, concepts: biodiversity, resilient oyster reef, ocean acidification", "concept_list": ["shoreline development", "coastal management", "oyster reef", "habitat forming species", "fishery species", "oyster reef development", "harmful organisms", "water quality", "ecosystem services", "fish and wildlife service", "marine biodiversity", "biodiversity", "nutrient removal", "single species management", "wetland restoration", "habitat restoration", "shoreline restoration", "species conservation", "species impact", "native species", "fisheries species", "food-web species", "food-web supporting species", "fisheries habitat", "conservation concern", "shell-forming organisms", "marine debris", "climate change", "florida", "concepts: biodiversity", "resilient oyster reef", "ocean acidification"], "type": "cluster", "node_size": 111, "label": "Organizational Behavior Dynamics"}, "Coastal Ecosystem Restoration": {"concepts": "cognitive processes, stress management, management strategies, low, management approaches, cognition, neutral, social influence, oa impact, positive, mississippi sea grant, psychological constructs, workplace structures, mid, resilience development, hierarchy, role clarity, structure, increase, personality traits, motivation factors, organizational structures, impact, decrease, leadership styles, communication patterns, negative, conflict resolution, problem solving, range expansion, norms, decision making, motivation, organizational elements, social dynamics, team collaboration, cultural norms, system dynamics, interpersonal relations, beach mouse, group dynamics, high, trust building, mental modeling, relationships, feedback mechanisms, stressors, emotional states, cognitive biases, culture, oa, texas, impact weights, alabama, power dynamics", "concept_list": ["cognitive processes", "stress management", "management strategies", "low", "management approaches", "cognition", "neutral", "social influence", "oa impact", "positive", "mississippi sea grant", "psychological constructs", "workplace structures", "mid", "resilience development", "hierarchy", "role clarity", "structure", "increase", "personality traits", "motivation factors", "organizational structures", "impact", "decrease", "leadership styles", "communication patterns", "negative", "conflict resolution", "problem solving", "range expansion", "norms", "decision making", "motivation", "organizational elements", "social dynamics", "team collaboration", "cultural norms", "system dynamics", "interpersonal relations", "beach mouse", "group dynamics", "high", "trust building", "mental modeling", "relationships", "feedback mechanisms", "stressors", "emotional states", "cognitive biases", "culture", "oa", "texas", "impact weights", "alabama", "power dynamics"], "type": "cluster", "node_size": 180, "label": "Coastal Ecosystem Restoration"}};
        const conceptData = {"shoreline development": {"concepts": "shoreline development", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "shoreline development"}, "coastal management": {"concepts": "coastal management", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "coastal management"}, "oyster reef": {"concepts": "oyster reef", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "oyster reef"}, "habitat forming species": {"concepts": "habitat forming species", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "habitat forming species"}, "fishery species": {"concepts": "fishery species", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "fishery species"}, "oyster reef development": {"concepts": "oyster reef development", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "oyster reef development"}, "harmful organisms": {"concepts": "harmful organisms", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "harmful organisms"}, "water quality": {"concepts": "water quality", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "water quality"}, "ecosystem services": {"concepts": "ecosystem services", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "ecosystem services"}, "fish and wildlife service": {"concepts": "fish and wildlife service", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "fish and wildlife service"}, "marine biodiversity": {"concepts": "marine biodiversity", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "marine biodiversity"}, "biodiversity": {"concepts": "biodiversity", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "biodiversity"}, "nutrient removal": {"concepts": "nutrient removal", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "nutrient removal"}, "single species management": {"concepts": "single species management", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "single species management"}, "wetland restoration": {"concepts": "wetland restoration", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "wetland restoration"}, "habitat restoration": {"concepts": "habitat restoration", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "habitat restoration"}, "shoreline restoration": {"concepts": "shoreline restoration", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "shoreline restoration"}, "species conservation": {"concepts": "species conservation", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "species conservation"}, "species impact": {"concepts": "species impact", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "species impact"}, "native species": {"concepts": "native species", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "native species"}, "fisheries species": {"concepts": "fisheries species", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "fisheries species"}, "food-web species": {"concepts": "food-web species", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "food-web species"}, "food-web supporting species": {"concepts": "food-web supporting species", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "food-web supporting species"}, "fisheries habitat": {"concepts": "fisheries habitat", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "fisheries habitat"}, "conservation concern": {"concepts": "conservation concern", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "conservation concern"}, "shell-forming organisms": {"concepts": "shell-forming organisms", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "shell-forming organisms"}, "marine debris": {"concepts": "marine debris", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "marine debris"}, "climate change": {"concepts": "climate change", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "climate change"}, "florida": {"concepts": "florida", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "florida"}, "concepts: biodiversity": {"concepts": "concepts: biodiversity", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "concepts: biodiversity"}, "resilient oyster reef": {"concepts": "resilient oyster reef", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "resilient oyster reef"}, "ocean acidification": {"concepts": "ocean acidification", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "ocean acidification"}, "cognitive processes": {"concepts": "cognitive processes", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "cognitive processes"}, "stress management": {"concepts": "stress management", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "stress management"}, "management strategies": {"concepts": "management strategies", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "management strategies"}, "low": {"concepts": "low", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "low"}, "management approaches": {"concepts": "management approaches", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "management approaches"}, "cognition": {"concepts": "cognition", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "cognition"}, "neutral": {"concepts": "neutral", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "neutral"}, "social influence": {"concepts": "social influence", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "social influence"}, "oa impact": {"concepts": "oa impact", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "oa impact"}, "positive": {"concepts": "positive", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "positive"}, "mississippi sea grant": {"concepts": "mississippi sea grant", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "mississippi sea grant"}, "psychological constructs": {"concepts": "psychological constructs", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "psychological constructs"}, "workplace structures": {"concepts": "workplace structures", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "workplace structures"}, "mid": {"concepts": "mid", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "mid"}, "resilience development": {"concepts": "resilience development", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "resilience development"}, "hierarchy": {"concepts": "hierarchy", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "hierarchy"}, "role clarity": {"concepts": "role clarity", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "role clarity"}, "structure": {"concepts": "structure", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "structure"}, "increase": {"concepts": "increase", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "increase"}, "personality traits": {"concepts": "personality traits", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "personality traits"}, "motivation factors": {"concepts": "motivation factors", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "motivation factors"}, "organizational structures": {"concepts": "organizational structures", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "organizational structures"}, "impact": {"concepts": "impact", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "impact"}, "decrease": {"concepts": "decrease", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "decrease"}, "leadership styles": {"concepts": "leadership styles", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "leadership styles"}, "communication patterns": {"concepts": "communication patterns", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "communication patterns"}, "negative": {"concepts": "negative", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "negative"}, "conflict resolution": {"concepts": "conflict resolution", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "conflict resolution"}, "problem solving": {"concepts": "problem solving", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "problem solving"}, "range expansion": {"concepts": "range expansion", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "range expansion"}, "norms": {"concepts": "norms", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "norms"}, "decision making": {"concepts": "decision making", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "decision making"}, "motivation": {"concepts": "motivation", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "motivation"}, "organizational elements": {"concepts": "organizational elements", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "organizational elements"}, "social dynamics": {"concepts": "social dynamics", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "social dynamics"}, "team collaboration": {"concepts": "team collaboration", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "team collaboration"}, "cultural norms": {"concepts": "cultural norms", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "cultural norms"}, "system dynamics": {"concepts": "system dynamics", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "system dynamics"}, "interpersonal relations": {"concepts": "interpersonal relations", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "interpersonal relations"}, "beach mouse": {"concepts": "beach mouse", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "beach mouse"}, "group dynamics": {"concepts": "group dynamics", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "group dynamics"}, "high": {"concepts": "high", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "high"}, "trust building": {"concepts": "trust building", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "trust building"}, "mental modeling": {"concepts": "mental modeling", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "mental modeling"}, "relationships": {"concepts": "relationships", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "relationships"}, "feedback mechanisms": {"concepts": "feedback mechanisms", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "feedback mechanisms"}, "stressors": {"concepts": "stressors", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "stressors"}, "emotional states": {"concepts": "emotional states", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "emotional states"}, "cognitive biases": {"concepts": "cognitive biases", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "cognitive biases"}, "culture": {"concepts": "culture", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "culture"}, "oa": {"concepts": "oa", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "oa"}, "texas": {"concepts": "texas", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "texas"}, "impact weights": {"concepts": "impact weights", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "impact weights"}, "alabama": {"concepts": "alabama", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "alabama"}, "power dynamics": {"concepts": "power dynamics", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "power dynamics"}};
        const interClusterEdges = [["Organizational Behavior Dynamics", "Coastal Ecosystem Restoration", {"weight": -1.0, "confidence": 0.89, "type": "inter_cluster", "style": "solid"}]];
        const clusterConcepts = {"Organizational Behavior Dynamics": [["shoreline development", {"concepts": "shoreline development", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "shoreline development"}], ["coastal management", {"concepts": "coastal management", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "coastal management"}], ["oyster reef", {"concepts": "oyster reef", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "oyster reef"}], ["habitat forming species", {"concepts": "habitat forming species", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "habitat forming species"}], ["fishery species", {"concepts": "fishery species", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "fishery species"}], ["oyster reef development", {"concepts": "oyster reef development", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "oyster reef development"}], ["harmful organisms", {"concepts": "harmful organisms", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "harmful organisms"}], ["water quality", {"concepts": "water quality", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "water quality"}], ["ecosystem services", {"concepts": "ecosystem services", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "ecosystem services"}], ["fish and wildlife service", {"concepts": "fish and wildlife service", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "fish and wildlife service"}], ["marine biodiversity", {"concepts": "marine biodiversity", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "marine biodiversity"}], ["biodiversity", {"concepts": "biodiversity", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "biodiversity"}], ["nutrient removal", {"concepts": "nutrient removal", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "nutrient removal"}], ["single species management", {"concepts": "single species management", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "single species management"}], ["wetland restoration", {"concepts": "wetland restoration", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "wetland restoration"}], ["habitat restoration", {"concepts": "habitat restoration", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "habitat restoration"}], ["shoreline restoration", {"concepts": "shoreline restoration", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "shoreline restoration"}], ["species conservation", {"concepts": "species conservation", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "species conservation"}], ["species impact", {"concepts": "species impact", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "species impact"}], ["native species", {"concepts": "native species", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "native species"}], ["fisheries species", {"concepts": "fisheries species", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "fisheries species"}], ["food-web species", {"concepts": "food-web species", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "food-web species"}], ["food-web supporting species", {"concepts": "food-web supporting species", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "food-web supporting species"}], ["fisheries habitat", {"concepts": "fisheries habitat", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "fisheries habitat"}], ["conservation concern", {"concepts": "conservation concern", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "conservation concern"}], ["shell-forming organisms", {"concepts": "shell-forming organisms", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "shell-forming organisms"}], ["marine debris", {"concepts": "marine debris", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "marine debris"}], ["climate change", {"concepts": "climate change", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "climate change"}], ["florida", {"concepts": "florida", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "florida"}], ["concepts: biodiversity", {"concepts": "concepts: biodiversity", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "concepts: biodiversity"}], ["resilient oyster reef", {"concepts": "resilient oyster reef", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "resilient oyster reef"}], ["ocean acidification", {"concepts": "ocean acidification", "type": "concept", "cluster": "Organizational Behavior Dynamics", "node_size": 10, "label": "ocean acidification"}]], "Coastal Ecosystem Restoration": [["cognitive processes", {"concepts": "cognitive processes", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "cognitive processes"}], ["stress management", {"concepts": "stress management", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "stress management"}], ["management strategies", {"concepts": "management strategies", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "management strategies"}], ["low", {"concepts": "low", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "low"}], ["management approaches", {"concepts": "management approaches", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "management approaches"}], ["cognition", {"concepts": "cognition", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "cognition"}], ["neutral", {"concepts": "neutral", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "neutral"}], ["social influence", {"concepts": "social influence", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "social influence"}], ["oa impact", {"concepts": "oa impact", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "oa impact"}], ["positive", {"concepts": "positive", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "positive"}], ["mississippi sea grant", {"concepts": "mississippi sea grant", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "mississippi sea grant"}], ["psychological constructs", {"concepts": "psychological constructs", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "psychological constructs"}], ["workplace structures", {"concepts": "workplace structures", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "workplace structures"}], ["mid", {"concepts": "mid", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "mid"}], ["resilience development", {"concepts": "resilience development", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "resilience development"}], ["hierarchy", {"concepts": "hierarchy", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "hierarchy"}], ["role clarity", {"concepts": "role clarity", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "role clarity"}], ["structure", {"concepts": "structure", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "structure"}], ["increase", {"concepts": "increase", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "increase"}], ["personality traits", {"concepts": "personality traits", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "personality traits"}], ["motivation factors", {"concepts": "motivation factors", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "motivation factors"}], ["organizational structures", {"concepts": "organizational structures", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "organizational structures"}], ["impact", {"concepts": "impact", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "impact"}], ["decrease", {"concepts": "decrease", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "decrease"}], ["leadership styles", {"concepts": "leadership styles", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "leadership styles"}], ["communication patterns", {"concepts": "communication patterns", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "communication patterns"}], ["negative", {"concepts": "negative", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "negative"}], ["conflict resolution", {"concepts": "conflict resolution", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "conflict resolution"}], ["problem solving", {"concepts": "problem solving", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "problem solving"}], ["range expansion", {"concepts": "range expansion", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "range expansion"}], ["norms", {"concepts": "norms", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "norms"}], ["decision making", {"concepts": "decision making", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "decision making"}], ["motivation", {"concepts": "motivation", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "motivation"}], ["organizational elements", {"concepts": "organizational elements", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "organizational elements"}], ["social dynamics", {"concepts": "social dynamics", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "social dynamics"}], ["team collaboration", {"concepts": "team collaboration", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "team collaboration"}], ["cultural norms", {"concepts": "cultural norms", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "cultural norms"}], ["system dynamics", {"concepts": "system dynamics", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "system dynamics"}], ["interpersonal relations", {"concepts": "interpersonal relations", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "interpersonal relations"}], ["beach mouse", {"concepts": "beach mouse", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "beach mouse"}], ["group dynamics", {"concepts": "group dynamics", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "group dynamics"}], ["high", {"concepts": "high", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "high"}], ["trust building", {"concepts": "trust building", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "trust building"}], ["mental modeling", {"concepts": "mental modeling", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "mental modeling"}], ["relationships", {"concepts": "relationships", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "relationships"}], ["feedback mechanisms", {"concepts": "feedback mechanisms", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "feedback mechanisms"}], ["stressors", {"concepts": "stressors", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "stressors"}], ["emotional states", {"concepts": "emotional states", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "emotional states"}], ["cognitive biases", {"concepts": "cognitive biases", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "cognitive biases"}], ["culture", {"concepts": "culture", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "culture"}], ["oa", {"concepts": "oa", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "oa"}], ["texas", {"concepts": "texas", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "texas"}], ["impact weights", {"concepts": "impact weights", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "impact weights"}], ["alabama", {"concepts": "alabama", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "alabama"}], ["power dynamics", {"concepts": "power dynamics", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "power dynamics"}]]};
        const clusterEdges = {"Organizational Behavior Dynamics": [], "Coastal Ecosystem Restoration": []};
        
        let network;
        let currentView = 'clusters';
        let currentCluster = null;
        let minConfidence = 0.3;
        
        // Network options
        const options = {
            nodes: {
                font: { color: 'white', size: 14 },
                borderWidth: 2,
                shadow: true
            },
            edges: {
                arrows: { to: { enabled: true, scaleFactor: 1.2 } },
                shadow: true,
                smooth: { type: 'continuous' }
            },
            physics: {
                stabilization: { iterations: 100 },
                barnesHut: {
                    gravitationalConstant: -8000,
                    springConstant: 0.001,
                    springLength: 200
                }
            },
            interaction: {
                hover: true,
                selectConnectedEdges: false
            }
        };
        
        function initNetwork() {
            const container = document.getElementById('network');
            const data = getClusterViewData();
            network = new vis.Network(container, data, options);
            
            // Handle cluster clicks for drill-down
            network.on("click", function(params) {
                if (params.nodes.length > 0 && currentView === 'clusters') {
                    const clickedNode = params.nodes[0];
                    if (clusterConcepts[clickedNode]) {
                        showClusterDetail(clickedNode);
                    }
                }
            });
        }
        
        function getClusterViewData() {
            const nodes = [];
            const edges = [];
            
            // Add cluster nodes
            Object.entries(clusterData).forEach(([clusterId, data]) => {
                const concepts = data.concepts || [];
                const conceptsStr = Array.isArray(concepts) ? concepts.join(', ') : concepts;
                
                nodes.push({
                    id: clusterId,
                    label: clusterId,
                    title: `Cluster: ${clusterId}\nConcepts: ${conceptsStr}\nClick to explore internal relationships`,
                    color: '#4A90E2',
                    size: 25 + (conceptsStr.split(',').length * 2),
                    font: { color: 'white' }
                });
            });
            
            // Add inter-cluster edges
            interClusterEdges.forEach(([source, target, edgeData]) => {
                const confidence = edgeData.confidence || 1.0;
                const weight = edgeData.weight || 0;
                
                if (confidence >= minConfidence) {
                    edges.push({
                        from: source,
                        to: target,
                        color: weight > 0 ? '#28A745' : '#DC3545',
                        width: Math.abs(weight) * 3 + 1,
                        title: `${source} → ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                        dashes: false
                    });
                }
            });
            
            return { nodes: nodes, edges: edges };
        }
        
        function getClusterDetailData(clusterId) {
            const nodes = [];
            const edges = [];
            
            // Add concept nodes for this cluster
            if (clusterConcepts[clusterId]) {
                clusterConcepts[clusterId].forEach(([conceptId, data]) => {
                    nodes.push({
                        id: conceptId,
                        label: conceptId,
                        title: `Concept: ${conceptId}\nFrom cluster: ${clusterId}`,
                        color: '#FF9500',
                        size: 20,
                        font: { color: 'white' }
                    });
                });
            }
            
            // Add intra-cluster edges
            if (clusterEdges[clusterId]) {
                clusterEdges[clusterId].forEach(([source, target, edgeData]) => {
                    const confidence = edgeData.confidence || 1.0;
                    const weight = edgeData.weight || 0;
                    
                    if (confidence >= minConfidence) {
                        edges.push({
                            from: source,
                            to: target,
                            color: weight > 0 ? '#28A745' : '#DC3545',
                            width: Math.abs(weight) * 3 + 1,
                            title: `${source} → ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                            dashes: true
                        });
                    }
                });
            }
            
            return { nodes: nodes, edges: edges };
        }
        
        function showClusterView() {
            currentView = 'clusters';
            currentCluster = null;
            const data = getClusterViewData();
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'none';
            document.getElementById('current-view').textContent = 'Cluster Overview';
        }
        
        function showClusterDetail(clusterId) {
            currentView = 'concepts';
            currentCluster = clusterId;
            const data = getClusterDetailData(clusterId);
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'inline-block';
            document.getElementById('current-view').textContent = `Inside Cluster: ${clusterId}`;
        }
        
        function updateConfidenceFilter(value) {
            minConfidence = parseFloat(value);
            document.getElementById('confidence-value').textContent = value;
            
            // Refresh current view
            if (currentView === 'clusters') {
                showClusterView();
            } else {
                showClusterDetail(currentCluster);
            }
        }
        
        // Initialize the network when page loads
        window.onload = function() {
            initNetwork();
        };
    </script>
</body>
</html>
