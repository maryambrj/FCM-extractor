
<!DOCTYPE html>
<html>
<head>
    <title>Hierarchical FCM Visualization</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 0; 
            padding: 20px;
            background: #f5f5f5;
        }
        
        #network { 
            width: 100%; 
            height: 600px; 
            border: 2px solid #ccc; 
            background: white;
            border-radius: 8px;
        }
        
        #controls {
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn {
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        
        .btn-primary { background: #4A90E2; color: white; }
        .btn-primary:hover { background: #357ABD; }
        
        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #545b62; }
        
        #current-view {
            font-weight: bold;
            color: #333;
            margin-left: 10px;
        }
        
        #legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-size: 12px;
            max-width: 200px;
        }
        
        .legend-item {
            margin: 5px 0;
            display: flex;
            align-items: center;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .legend-line {
            width: 20px;
            height: 2px;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <h1>Fuzzy Cognitive Map - Hierarchical View</h1>
    
    <div id="controls">
        <button class="btn btn-secondary" id="back-btn" onclick="showClusterView()" style="display: none;">
            ‚Üê Back to Clusters
        </button>
        <span id="current-view">Cluster Overview</span>
        <div style="float: right;">
            <label>Min Confidence: </label>
            <input type="range" id="confidence-slider" min="0" max="1" step="0.1" value="0.3" 
                   onchange="updateConfidenceFilter(this.value)">
            <span id="confidence-value">0.3</span>
        </div>
    </div>
    
    <div id="network"></div>
    
    <div id="legend">
        <h4>Legend</h4>
        <div class="legend-item">
            <div class="legend-color" style="background: #4A90E2;"></div>
            <span>Clusters</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #FF9500;"></div>
            <span>Concepts</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #28A745;"></div>
            <span>Positive relationship</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #DC3545;"></div>
            <span>Negative relationship</span>
        </div>
        <div style="margin-top: 10px; font-style: italic; color: #666;">
            Click clusters to explore internal concepts
        </div>
    </div>

    <script>
        // Embedded data
        const clusterData = {"Government & Administration": {"concepts": "private lands, community members, non-white communities, indigenous people, private citizens, indigenous communities, samish elders, tribe, tribal, future generations, samish culture, young people, tribal elders, treaty tribes, local community knowledge, salish culture, local knowledge, tribal support, seven generations", "concept_list": ["private lands", "community members", "non-white communities", "indigenous people", "private citizens", "indigenous communities", "samish elders", "tribe", "tribal", "future generations", "samish culture", "young people", "tribal elders", "treaty tribes", "local community knowledge", "salish culture", "local knowledge", "tribal support", "seven generations"], "type": "cluster", "node_size": 72, "label": "Government & Administration"}, "Impacts & Consequences": {"concepts": "agencies, state management, federal agencies, custom plywood, administrative burden, planning department, federal coordinator, federal dollars, federal government, senior directors", "concept_list": ["agencies", "state management", "federal agencies", "custom plywood", "administrative burden", "planning department", "federal coordinator", "federal dollars", "federal government", "senior directors"], "type": "cluster", "node_size": 45, "label": "Impacts & Consequences"}, "Collaboration & Resources": {"concepts": "genetic variant, biological impact, population stress, complex dynamics, population biology, carbon chains, dei perspective, resource expense, economic status, reputation, mental model, data gaps, pacific garbage patch, cultural impact, notification overload, overburdened population, unintended consequences", "concept_list": ["genetic variant", "biological impact", "population stress", "complex dynamics", "population biology", "carbon chains", "dei perspective", "resource expense", "economic status", "reputation", "mental model", "data gaps", "pacific garbage patch", "cultural impact", "notification overload", "overburdened population", "unintended consequences"], "type": "cluster", "node_size": 66, "label": "Collaboration & Resources"}, "Environmental Restoration": {"concepts": "first medicines, western science, indigenous country, usual areas, battery storage, scientific dive, proactive protection, jet fuel, solar, co-management, scientific dive team, tribal sovereignty, cross-border group, word of mouth, cultural species, community knowledge, first medicine, speed of trust, transboundary management, kelp forest, holistic view, cultural resource, partnerships, political boundary, tribal lands, holistic approach, cultural use, kelp restoration, oil spill preparedness, samish stance, resource protection, traditional material, land use, green energy, co-management dynamics, federal recognition, local level, orca passage, resident orcas, kelp, spill response, cultural place, kelp forests, orca family, indigenous perspectives, indigenous perspective, social services, good relationships, treaty rights, weaving materials, tribal concerns, oil spill, committees, collaborative modeling, force multiplier, oil spills, management approaches, tribal consultation, educational purpose, tide table, kelp research, cultural relevance, cultural experience, boldt decision, cultural preservation, reactive response, reliable funding, transplant games, resource capacity, decision making, resource management, j pod, spill preparedness, field tech, knotweed control, tribal management, development pressure, kelp recovery", "concept_list": ["first medicines", "western science", "indigenous country", "usual areas", "battery storage", "scientific dive", "proactive protection", "jet fuel", "solar", "co-management", "scientific dive team", "tribal sovereignty", "cross-border group", "word of mouth", "cultural species", "community knowledge", "first medicine", "speed of trust", "transboundary management", "kelp forest", "holistic view", "cultural resource", "partnerships", "political boundary", "tribal lands", "holistic approach", "cultural use", "kelp restoration", "oil spill preparedness", "samish stance", "resource protection", "traditional material", "land use", "green energy", "co-management dynamics", "federal recognition", "local level", "orca passage", "resident orcas", "kelp", "spill response", "cultural place", "kelp forests", "orca family", "indigenous perspectives", "indigenous perspective", "social services", "good relationships", "treaty rights", "weaving materials", "tribal concerns", "oil spill", "committees", "collaborative modeling", "force multiplier", "oil spills", "management approaches", "tribal consultation", "educational purpose", "tide table", "kelp research", "cultural relevance", "cultural experience", "boldt decision", "cultural preservation", "reactive response", "reliable funding", "transplant games", "resource capacity", "decision making", "resource management", "j pod", "spill preparedness", "field tech", "knotweed control", "tribal management", "development pressure", "kelp recovery"], "type": "cluster", "node_size": 249, "label": "Environmental Restoration"}, "Community & Culture": {"concepts": "stream restoration, sediment trap, environmental policy, shoreline assessment, endangered species, climate change, dams, habitat restoration, restoration project, sea level rise, species habitats, wetland complex, natural resources, water quality, habitat, impermeable surface, environmental impact, fish migration, climate impact, carbon sequestration, grazing, marine debris, shoreline development, salmon decline", "concept_list": ["stream restoration", "sediment trap", "environmental policy", "shoreline assessment", "endangered species", "climate change", "dams", "habitat restoration", "restoration project", "sea level rise", "species habitats", "wetland complex", "natural resources", "water quality", "habitat", "impermeable surface", "environmental impact", "fish migration", "climate impact", "carbon sequestration", "grazing", "marine debris", "shoreline development", "salmon decline"], "type": "cluster", "node_size": 87, "label": "Community & Culture"}, "Coastal Food Systems": {"concepts": "first food, first foods, salmon pie, riparian zone, traditional food, shellfish, fish species, traditional fishing, coastal culture, salmon, fishing access", "concept_list": ["first food", "first foods", "salmon pie", "riparian zone", "traditional food", "shellfish", "fish species", "traditional fishing", "coastal culture", "salmon", "fishing access"], "type": "cluster", "node_size": 48, "label": "Coastal Food Systems"}, "Renewable Water Energy": {"concepts": "hydropower, offshore wind, tidal energy", "concept_list": ["hydropower", "offshore wind", "tidal energy"], "type": "cluster", "node_size": 24, "label": "Renewable Water Energy"}, "Salish Sea Biodiversity": {"concepts": "rockfish populations, wetlands, environmental sites, national biodiversity strategy, shellfish species, biodiversity, test fisheries, climate refugia, sustainable harvest, whale memorials, samish river, abalone, harvestable fish, biodiversity definition, salish sea, oregon spotted frog, cattle grazing, clam species, native plant nursery, biodiversity strategy, abalone restoration", "concept_list": ["rockfish populations", "wetlands", "environmental sites", "national biodiversity strategy", "shellfish species", "biodiversity", "test fisheries", "climate refugia", "sustainable harvest", "whale memorials", "samish river", "abalone", "harvestable fish", "biodiversity definition", "salish sea", "oregon spotted frog", "cattle grazing", "clam species", "native plant nursery", "biodiversity strategy", "abalone restoration"], "type": "cluster", "node_size": 78, "label": "Salish Sea Biodiversity"}};
        const conceptData = {"private lands": {"concepts": "private lands", "type": "concept", "cluster": "Government & Administration", "node_size": 10, "label": "private lands"}, "community members": {"concepts": "community members", "type": "concept", "cluster": "Government & Administration", "node_size": 10, "label": "community members"}, "non-white communities": {"concepts": "non-white communities", "type": "concept", "cluster": "Government & Administration", "node_size": 10, "label": "non-white communities"}, "indigenous people": {"concepts": "indigenous people", "type": "concept", "cluster": "Government & Administration", "node_size": 10, "label": "indigenous people"}, "private citizens": {"concepts": "private citizens", "type": "concept", "cluster": "Government & Administration", "node_size": 10, "label": "private citizens"}, "indigenous communities": {"concepts": "indigenous communities", "type": "concept", "cluster": "Government & Administration", "node_size": 10, "label": "indigenous communities"}, "samish elders": {"concepts": "samish elders", "type": "concept", "cluster": "Government & Administration", "node_size": 10, "label": "samish elders"}, "tribe": {"concepts": "tribe", "type": "concept", "cluster": "Government & Administration", "node_size": 10, "label": "tribe"}, "tribal": {"concepts": "tribal", "type": "concept", "cluster": "Government & Administration", "node_size": 10, "label": "tribal"}, "future generations": {"concepts": "future generations", "type": "concept", "cluster": "Government & Administration", "node_size": 10, "label": "future generations"}, "samish culture": {"concepts": "samish culture", "type": "concept", "cluster": "Government & Administration", "node_size": 10, "label": "samish culture"}, "young people": {"concepts": "young people", "type": "concept", "cluster": "Government & Administration", "node_size": 10, "label": "young people"}, "tribal elders": {"concepts": "tribal elders", "type": "concept", "cluster": "Government & Administration", "node_size": 10, "label": "tribal elders"}, "treaty tribes": {"concepts": "treaty tribes", "type": "concept", "cluster": "Government & Administration", "node_size": 10, "label": "treaty tribes"}, "local community knowledge": {"concepts": "local community knowledge", "type": "concept", "cluster": "Government & Administration", "node_size": 10, "label": "local community knowledge"}, "salish culture": {"concepts": "salish culture", "type": "concept", "cluster": "Government & Administration", "node_size": 10, "label": "salish culture"}, "local knowledge": {"concepts": "local knowledge", "type": "concept", "cluster": "Government & Administration", "node_size": 10, "label": "local knowledge"}, "tribal support": {"concepts": "tribal support", "type": "concept", "cluster": "Government & Administration", "node_size": 10, "label": "tribal support"}, "seven generations": {"concepts": "seven generations", "type": "concept", "cluster": "Government & Administration", "node_size": 10, "label": "seven generations"}, "agencies": {"concepts": "agencies", "type": "concept", "cluster": "Impacts & Consequences", "node_size": 10, "label": "agencies"}, "state management": {"concepts": "state management", "type": "concept", "cluster": "Impacts & Consequences", "node_size": 10, "label": "state management"}, "federal agencies": {"concepts": "federal agencies", "type": "concept", "cluster": "Impacts & Consequences", "node_size": 10, "label": "federal agencies"}, "custom plywood": {"concepts": "custom plywood", "type": "concept", "cluster": "Impacts & Consequences", "node_size": 10, "label": "custom plywood"}, "administrative burden": {"concepts": "administrative burden", "type": "concept", "cluster": "Impacts & Consequences", "node_size": 10, "label": "administrative burden"}, "planning department": {"concepts": "planning department", "type": "concept", "cluster": "Impacts & Consequences", "node_size": 10, "label": "planning department"}, "federal coordinator": {"concepts": "federal coordinator", "type": "concept", "cluster": "Impacts & Consequences", "node_size": 10, "label": "federal coordinator"}, "federal dollars": {"concepts": "federal dollars", "type": "concept", "cluster": "Impacts & Consequences", "node_size": 10, "label": "federal dollars"}, "federal government": {"concepts": "federal government", "type": "concept", "cluster": "Impacts & Consequences", "node_size": 10, "label": "federal government"}, "senior directors": {"concepts": "senior directors", "type": "concept", "cluster": "Impacts & Consequences", "node_size": 10, "label": "senior directors"}, "genetic variant": {"concepts": "genetic variant", "type": "concept", "cluster": "Collaboration & Resources", "node_size": 10, "label": "genetic variant"}, "biological impact": {"concepts": "biological impact", "type": "concept", "cluster": "Collaboration & Resources", "node_size": 10, "label": "biological impact"}, "population stress": {"concepts": "population stress", "type": "concept", "cluster": "Collaboration & Resources", "node_size": 10, "label": "population stress"}, "complex dynamics": {"concepts": "complex dynamics", "type": "concept", "cluster": "Collaboration & Resources", "node_size": 10, "label": "complex dynamics"}, "population biology": {"concepts": "population biology", "type": "concept", "cluster": "Collaboration & Resources", "node_size": 10, "label": "population biology"}, "carbon chains": {"concepts": "carbon chains", "type": "concept", "cluster": "Collaboration & Resources", "node_size": 10, "label": "carbon chains"}, "dei perspective": {"concepts": "dei perspective", "type": "concept", "cluster": "Collaboration & Resources", "node_size": 10, "label": "dei perspective"}, "resource expense": {"concepts": "resource expense", "type": "concept", "cluster": "Collaboration & Resources", "node_size": 10, "label": "resource expense"}, "economic status": {"concepts": "economic status", "type": "concept", "cluster": "Collaboration & Resources", "node_size": 10, "label": "economic status"}, "reputation": {"concepts": "reputation", "type": "concept", "cluster": "Collaboration & Resources", "node_size": 10, "label": "reputation"}, "mental model": {"concepts": "mental model", "type": "concept", "cluster": "Collaboration & Resources", "node_size": 10, "label": "mental model"}, "data gaps": {"concepts": "data gaps", "type": "concept", "cluster": "Collaboration & Resources", "node_size": 10, "label": "data gaps"}, "pacific garbage patch": {"concepts": "pacific garbage patch", "type": "concept", "cluster": "Collaboration & Resources", "node_size": 10, "label": "pacific garbage patch"}, "cultural impact": {"concepts": "cultural impact", "type": "concept", "cluster": "Collaboration & Resources", "node_size": 10, "label": "cultural impact"}, "notification overload": {"concepts": "notification overload", "type": "concept", "cluster": "Collaboration & Resources", "node_size": 10, "label": "notification overload"}, "overburdened population": {"concepts": "overburdened population", "type": "concept", "cluster": "Collaboration & Resources", "node_size": 10, "label": "overburdened population"}, "unintended consequences": {"concepts": "unintended consequences", "type": "concept", "cluster": "Collaboration & Resources", "node_size": 10, "label": "unintended consequences"}, "first medicines": {"concepts": "first medicines", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "first medicines"}, "western science": {"concepts": "western science", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "western science"}, "indigenous country": {"concepts": "indigenous country", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "indigenous country"}, "usual areas": {"concepts": "usual areas", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "usual areas"}, "battery storage": {"concepts": "battery storage", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "battery storage"}, "scientific dive": {"concepts": "scientific dive", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "scientific dive"}, "proactive protection": {"concepts": "proactive protection", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "proactive protection"}, "jet fuel": {"concepts": "jet fuel", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "jet fuel"}, "solar": {"concepts": "solar", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "solar"}, "co-management": {"concepts": "co-management", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "co-management"}, "scientific dive team": {"concepts": "scientific dive team", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "scientific dive team"}, "tribal sovereignty": {"concepts": "tribal sovereignty", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "tribal sovereignty"}, "cross-border group": {"concepts": "cross-border group", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "cross-border group"}, "word of mouth": {"concepts": "word of mouth", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "word of mouth"}, "cultural species": {"concepts": "cultural species", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "cultural species"}, "community knowledge": {"concepts": "community knowledge", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "community knowledge"}, "first medicine": {"concepts": "first medicine", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "first medicine"}, "speed of trust": {"concepts": "speed of trust", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "speed of trust"}, "transboundary management": {"concepts": "transboundary management", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "transboundary management"}, "kelp forest": {"concepts": "kelp forest", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "kelp forest"}, "holistic view": {"concepts": "holistic view", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "holistic view"}, "cultural resource": {"concepts": "cultural resource", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "cultural resource"}, "partnerships": {"concepts": "partnerships", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "partnerships"}, "political boundary": {"concepts": "political boundary", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "political boundary"}, "tribal lands": {"concepts": "tribal lands", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "tribal lands"}, "holistic approach": {"concepts": "holistic approach", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "holistic approach"}, "cultural use": {"concepts": "cultural use", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "cultural use"}, "kelp restoration": {"concepts": "kelp restoration", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "kelp restoration"}, "oil spill preparedness": {"concepts": "oil spill preparedness", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "oil spill preparedness"}, "samish stance": {"concepts": "samish stance", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "samish stance"}, "resource protection": {"concepts": "resource protection", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "resource protection"}, "traditional material": {"concepts": "traditional material", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "traditional material"}, "land use": {"concepts": "land use", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "land use"}, "green energy": {"concepts": "green energy", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "green energy"}, "co-management dynamics": {"concepts": "co-management dynamics", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "co-management dynamics"}, "federal recognition": {"concepts": "federal recognition", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "federal recognition"}, "local level": {"concepts": "local level", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "local level"}, "orca passage": {"concepts": "orca passage", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "orca passage"}, "resident orcas": {"concepts": "resident orcas", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "resident orcas"}, "kelp": {"concepts": "kelp", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "kelp"}, "spill response": {"concepts": "spill response", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "spill response"}, "cultural place": {"concepts": "cultural place", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "cultural place"}, "kelp forests": {"concepts": "kelp forests", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "kelp forests"}, "orca family": {"concepts": "orca family", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "orca family"}, "indigenous perspectives": {"concepts": "indigenous perspectives", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "indigenous perspectives"}, "indigenous perspective": {"concepts": "indigenous perspective", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "indigenous perspective"}, "social services": {"concepts": "social services", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "social services"}, "good relationships": {"concepts": "good relationships", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "good relationships"}, "treaty rights": {"concepts": "treaty rights", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "treaty rights"}, "weaving materials": {"concepts": "weaving materials", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "weaving materials"}, "tribal concerns": {"concepts": "tribal concerns", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "tribal concerns"}, "oil spill": {"concepts": "oil spill", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "oil spill"}, "committees": {"concepts": "committees", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "committees"}, "collaborative modeling": {"concepts": "collaborative modeling", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "collaborative modeling"}, "force multiplier": {"concepts": "force multiplier", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "force multiplier"}, "oil spills": {"concepts": "oil spills", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "oil spills"}, "management approaches": {"concepts": "management approaches", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "management approaches"}, "tribal consultation": {"concepts": "tribal consultation", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "tribal consultation"}, "educational purpose": {"concepts": "educational purpose", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "educational purpose"}, "tide table": {"concepts": "tide table", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "tide table"}, "kelp research": {"concepts": "kelp research", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "kelp research"}, "cultural relevance": {"concepts": "cultural relevance", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "cultural relevance"}, "cultural experience": {"concepts": "cultural experience", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "cultural experience"}, "boldt decision": {"concepts": "boldt decision", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "boldt decision"}, "cultural preservation": {"concepts": "cultural preservation", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "cultural preservation"}, "reactive response": {"concepts": "reactive response", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "reactive response"}, "reliable funding": {"concepts": "reliable funding", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "reliable funding"}, "transplant games": {"concepts": "transplant games", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "transplant games"}, "resource capacity": {"concepts": "resource capacity", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "resource capacity"}, "decision making": {"concepts": "decision making", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "decision making"}, "resource management": {"concepts": "resource management", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "resource management"}, "j pod": {"concepts": "j pod", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "j pod"}, "spill preparedness": {"concepts": "spill preparedness", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "spill preparedness"}, "field tech": {"concepts": "field tech", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "field tech"}, "knotweed control": {"concepts": "knotweed control", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "knotweed control"}, "tribal management": {"concepts": "tribal management", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "tribal management"}, "development pressure": {"concepts": "development pressure", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "development pressure"}, "kelp recovery": {"concepts": "kelp recovery", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "kelp recovery"}, "stream restoration": {"concepts": "stream restoration", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "stream restoration"}, "sediment trap": {"concepts": "sediment trap", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "sediment trap"}, "environmental policy": {"concepts": "environmental policy", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "environmental policy"}, "shoreline assessment": {"concepts": "shoreline assessment", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "shoreline assessment"}, "endangered species": {"concepts": "endangered species", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "endangered species"}, "climate change": {"concepts": "climate change", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "climate change"}, "dams": {"concepts": "dams", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "dams"}, "habitat restoration": {"concepts": "habitat restoration", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "habitat restoration"}, "restoration project": {"concepts": "restoration project", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "restoration project"}, "sea level rise": {"concepts": "sea level rise", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "sea level rise"}, "species habitats": {"concepts": "species habitats", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "species habitats"}, "wetland complex": {"concepts": "wetland complex", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "wetland complex"}, "natural resources": {"concepts": "natural resources", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "natural resources"}, "water quality": {"concepts": "water quality", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "water quality"}, "habitat": {"concepts": "habitat", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "habitat"}, "impermeable surface": {"concepts": "impermeable surface", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "impermeable surface"}, "environmental impact": {"concepts": "environmental impact", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "environmental impact"}, "fish migration": {"concepts": "fish migration", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "fish migration"}, "climate impact": {"concepts": "climate impact", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "climate impact"}, "carbon sequestration": {"concepts": "carbon sequestration", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "carbon sequestration"}, "grazing": {"concepts": "grazing", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "grazing"}, "marine debris": {"concepts": "marine debris", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "marine debris"}, "shoreline development": {"concepts": "shoreline development", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "shoreline development"}, "salmon decline": {"concepts": "salmon decline", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "salmon decline"}, "first food": {"concepts": "first food", "type": "concept", "cluster": "Coastal Food Systems", "node_size": 10, "label": "first food"}, "first foods": {"concepts": "first foods", "type": "concept", "cluster": "Coastal Food Systems", "node_size": 10, "label": "first foods"}, "salmon pie": {"concepts": "salmon pie", "type": "concept", "cluster": "Coastal Food Systems", "node_size": 10, "label": "salmon pie"}, "riparian zone": {"concepts": "riparian zone", "type": "concept", "cluster": "Coastal Food Systems", "node_size": 10, "label": "riparian zone"}, "traditional food": {"concepts": "traditional food", "type": "concept", "cluster": "Coastal Food Systems", "node_size": 10, "label": "traditional food"}, "shellfish": {"concepts": "shellfish", "type": "concept", "cluster": "Coastal Food Systems", "node_size": 10, "label": "shellfish"}, "fish species": {"concepts": "fish species", "type": "concept", "cluster": "Coastal Food Systems", "node_size": 10, "label": "fish species"}, "traditional fishing": {"concepts": "traditional fishing", "type": "concept", "cluster": "Coastal Food Systems", "node_size": 10, "label": "traditional fishing"}, "coastal culture": {"concepts": "coastal culture", "type": "concept", "cluster": "Coastal Food Systems", "node_size": 10, "label": "coastal culture"}, "salmon": {"concepts": "salmon", "type": "concept", "cluster": "Coastal Food Systems", "node_size": 10, "label": "salmon"}, "fishing access": {"concepts": "fishing access", "type": "concept", "cluster": "Coastal Food Systems", "node_size": 10, "label": "fishing access"}, "hydropower": {"concepts": "hydropower", "type": "concept", "cluster": "Renewable Water Energy", "node_size": 10, "label": "hydropower"}, "offshore wind": {"concepts": "offshore wind", "type": "concept", "cluster": "Renewable Water Energy", "node_size": 10, "label": "offshore wind"}, "tidal energy": {"concepts": "tidal energy", "type": "concept", "cluster": "Renewable Water Energy", "node_size": 10, "label": "tidal energy"}, "rockfish populations": {"concepts": "rockfish populations", "type": "concept", "cluster": "Salish Sea Biodiversity", "node_size": 10, "label": "rockfish populations"}, "wetlands": {"concepts": "wetlands", "type": "concept", "cluster": "Salish Sea Biodiversity", "node_size": 10, "label": "wetlands"}, "environmental sites": {"concepts": "environmental sites", "type": "concept", "cluster": "Salish Sea Biodiversity", "node_size": 10, "label": "environmental sites"}, "national biodiversity strategy": {"concepts": "national biodiversity strategy", "type": "concept", "cluster": "Salish Sea Biodiversity", "node_size": 10, "label": "national biodiversity strategy"}, "shellfish species": {"concepts": "shellfish species", "type": "concept", "cluster": "Salish Sea Biodiversity", "node_size": 10, "label": "shellfish species"}, "biodiversity": {"concepts": "biodiversity", "type": "concept", "cluster": "Salish Sea Biodiversity", "node_size": 10, "label": "biodiversity"}, "test fisheries": {"concepts": "test fisheries", "type": "concept", "cluster": "Salish Sea Biodiversity", "node_size": 10, "label": "test fisheries"}, "climate refugia": {"concepts": "climate refugia", "type": "concept", "cluster": "Salish Sea Biodiversity", "node_size": 10, "label": "climate refugia"}, "sustainable harvest": {"concepts": "sustainable harvest", "type": "concept", "cluster": "Salish Sea Biodiversity", "node_size": 10, "label": "sustainable harvest"}, "whale memorials": {"concepts": "whale memorials", "type": "concept", "cluster": "Salish Sea Biodiversity", "node_size": 10, "label": "whale memorials"}, "samish river": {"concepts": "samish river", "type": "concept", "cluster": "Salish Sea Biodiversity", "node_size": 10, "label": "samish river"}, "abalone": {"concepts": "abalone", "type": "concept", "cluster": "Salish Sea Biodiversity", "node_size": 10, "label": "abalone"}, "harvestable fish": {"concepts": "harvestable fish", "type": "concept", "cluster": "Salish Sea Biodiversity", "node_size": 10, "label": "harvestable fish"}, "biodiversity definition": {"concepts": "biodiversity definition", "type": "concept", "cluster": "Salish Sea Biodiversity", "node_size": 10, "label": "biodiversity definition"}, "salish sea": {"concepts": "salish sea", "type": "concept", "cluster": "Salish Sea Biodiversity", "node_size": 10, "label": "salish sea"}, "oregon spotted frog": {"concepts": "oregon spotted frog", "type": "concept", "cluster": "Salish Sea Biodiversity", "node_size": 10, "label": "oregon spotted frog"}, "cattle grazing": {"concepts": "cattle grazing", "type": "concept", "cluster": "Salish Sea Biodiversity", "node_size": 10, "label": "cattle grazing"}, "clam species": {"concepts": "clam species", "type": "concept", "cluster": "Salish Sea Biodiversity", "node_size": 10, "label": "clam species"}, "native plant nursery": {"concepts": "native plant nursery", "type": "concept", "cluster": "Salish Sea Biodiversity", "node_size": 10, "label": "native plant nursery"}, "biodiversity strategy": {"concepts": "biodiversity strategy", "type": "concept", "cluster": "Salish Sea Biodiversity", "node_size": 10, "label": "biodiversity strategy"}, "abalone restoration": {"concepts": "abalone restoration", "type": "concept", "cluster": "Salish Sea Biodiversity", "node_size": 10, "label": "abalone restoration"}};
        const interClusterEdges = [["Government & Administration", "Environmental Restoration", {"weight": 1.0, "confidence": 0.5125, "type": "inter_cluster", "style": "solid"}], ["Government & Administration", "Collaboration & Resources", {"weight": 0.3333333333333333, "confidence": 0.4166666666666667, "type": "inter_cluster", "style": "solid"}], ["Government & Administration", "Coastal Food Systems", {"weight": 0.5, "confidence": 0.4, "type": "inter_cluster", "style": "solid"}], ["Government & Administration", "Renewable Water Energy", {"weight": -1.0, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Impacts & Consequences", "Environmental Restoration", {"weight": 1.0, "confidence": 0.59, "type": "inter_cluster", "style": "solid"}], ["Impacts & Consequences", "Renewable Water Energy", {"weight": 1.0, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Impacts & Consequences", "Salish Sea Biodiversity", {"weight": 1.0, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Collaboration & Resources", "Coastal Food Systems", {"weight": -0.8, "confidence": 0.42000000000000004, "type": "inter_cluster", "style": "solid"}], ["Collaboration & Resources", "Government & Administration", {"weight": -0.25, "confidence": 0.25, "type": "inter_cluster", "style": "solid"}], ["Collaboration & Resources", "Environmental Restoration", {"weight": 1.0, "confidence": 0.35, "type": "inter_cluster", "style": "solid"}], ["Collaboration & Resources", "Community & Culture", {"weight": 1.0, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Collaboration & Resources", "Salish Sea Biodiversity", {"weight": 1.0, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Environmental Restoration", "Coastal Food Systems", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["Environmental Restoration", "Government & Administration", {"weight": 1.0, "confidence": 0.4, "type": "inter_cluster", "style": "solid"}], ["Environmental Restoration", "Impacts & Consequences", {"weight": 1.0, "confidence": 0.4, "type": "inter_cluster", "style": "solid"}], ["Environmental Restoration", "Community & Culture", {"weight": 1.0, "confidence": 0.35, "type": "inter_cluster", "style": "solid"}], ["Environmental Restoration", "Salish Sea Biodiversity", {"weight": 0.6666666666666666, "confidence": 0.2333333333333333, "type": "inter_cluster", "style": "solid"}], ["Environmental Restoration", "Collaboration & Resources", {"weight": 1.0, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Environmental Restoration", "Renewable Water Energy", {"weight": -1.0, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Community & Culture", "Environmental Restoration", {"weight": 1.0, "confidence": 0.5375, "type": "inter_cluster", "style": "solid"}], ["Community & Culture", "Government & Administration", {"weight": 0.3333333333333333, "confidence": 0.4333333333333333, "type": "inter_cluster", "style": "solid"}], ["Community & Culture", "Coastal Food Systems", {"weight": 1.0, "confidence": 0.6499999999999999, "type": "inter_cluster", "style": "solid"}], ["Community & Culture", "Salish Sea Biodiversity", {"weight": 1.0, "confidence": 0.44999999999999996, "type": "inter_cluster", "style": "solid"}], ["Community & Culture", "Impacts & Consequences", {"weight": 1.0, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Community & Culture", "Renewable Water Energy", {"weight": -1.0, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Coastal Food Systems", "Community & Culture", {"weight": 0.2, "confidence": 0.5199999999999999, "type": "inter_cluster", "style": "solid"}], ["Coastal Food Systems", "Salish Sea Biodiversity", {"weight": 1.0, "confidence": 0.48333333333333334, "type": "inter_cluster", "style": "solid"}], ["Coastal Food Systems", "Collaboration & Resources", {"weight": -0.75, "confidence": 0.325, "type": "inter_cluster", "style": "solid"}], ["Coastal Food Systems", "Renewable Water Energy", {"weight": -1.0, "confidence": 0.4, "type": "inter_cluster", "style": "solid"}], ["Coastal Food Systems", "Environmental Restoration", {"weight": 1.0, "confidence": 0.35, "type": "inter_cluster", "style": "solid"}], ["Coastal Food Systems", "Government & Administration", {"weight": 0.5, "confidence": 0.15, "type": "inter_cluster", "style": "solid"}], ["Renewable Water Energy", "Salish Sea Biodiversity", {"weight": -0.75, "confidence": 0.275, "type": "inter_cluster", "style": "solid"}], ["Renewable Water Energy", "Collaboration & Resources", {"weight": 1.0, "confidence": 0.35000000000000003, "type": "inter_cluster", "style": "solid"}], ["Renewable Water Energy", "Impacts & Consequences", {"weight": 1.0, "confidence": 0.35000000000000003, "type": "inter_cluster", "style": "solid"}], ["Renewable Water Energy", "Environmental Restoration", {"weight": -1.0, "confidence": 0.3333333333333333, "type": "inter_cluster", "style": "solid"}], ["Renewable Water Energy", "Government & Administration", {"weight": -1.0, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Renewable Water Energy", "Community & Culture", {"weight": -1.0, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Salish Sea Biodiversity", "Government & Administration", {"weight": 0.8, "confidence": 0.35, "type": "inter_cluster", "style": "solid"}], ["Salish Sea Biodiversity", "Coastal Food Systems", {"weight": 1.0, "confidence": 0.5125, "type": "inter_cluster", "style": "solid"}], ["Salish Sea Biodiversity", "Community & Culture", {"weight": 1.0, "confidence": 0.44999999999999996, "type": "inter_cluster", "style": "solid"}], ["Salish Sea Biodiversity", "Environmental Restoration", {"weight": 0.6666666666666666, "confidence": 0.2333333333333333, "type": "inter_cluster", "style": "solid"}], ["Salish Sea Biodiversity", "Impacts & Consequences", {"weight": 1.0, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Salish Sea Biodiversity", "Collaboration & Resources", {"weight": 1.0, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Salish Sea Biodiversity", "Renewable Water Energy", {"weight": -0.6666666666666666, "confidence": 0.19999999999999998, "type": "inter_cluster", "style": "solid"}]];
        const clusterConcepts = {"Government & Administration": [["private lands", {"concepts": "private lands", "type": "concept", "cluster": "Government & Administration", "node_size": 10, "label": "private lands"}], ["community members", {"concepts": "community members", "type": "concept", "cluster": "Government & Administration", "node_size": 10, "label": "community members"}], ["non-white communities", {"concepts": "non-white communities", "type": "concept", "cluster": "Government & Administration", "node_size": 10, "label": "non-white communities"}], ["indigenous people", {"concepts": "indigenous people", "type": "concept", "cluster": "Government & Administration", "node_size": 10, "label": "indigenous people"}], ["private citizens", {"concepts": "private citizens", "type": "concept", "cluster": "Government & Administration", "node_size": 10, "label": "private citizens"}], ["indigenous communities", {"concepts": "indigenous communities", "type": "concept", "cluster": "Government & Administration", "node_size": 10, "label": "indigenous communities"}], ["samish elders", {"concepts": "samish elders", "type": "concept", "cluster": "Government & Administration", "node_size": 10, "label": "samish elders"}], ["tribe", {"concepts": "tribe", "type": "concept", "cluster": "Government & Administration", "node_size": 10, "label": "tribe"}], ["tribal", {"concepts": "tribal", "type": "concept", "cluster": "Government & Administration", "node_size": 10, "label": "tribal"}], ["future generations", {"concepts": "future generations", "type": "concept", "cluster": "Government & Administration", "node_size": 10, "label": "future generations"}], ["samish culture", {"concepts": "samish culture", "type": "concept", "cluster": "Government & Administration", "node_size": 10, "label": "samish culture"}], ["young people", {"concepts": "young people", "type": "concept", "cluster": "Government & Administration", "node_size": 10, "label": "young people"}], ["tribal elders", {"concepts": "tribal elders", "type": "concept", "cluster": "Government & Administration", "node_size": 10, "label": "tribal elders"}], ["treaty tribes", {"concepts": "treaty tribes", "type": "concept", "cluster": "Government & Administration", "node_size": 10, "label": "treaty tribes"}], ["local community knowledge", {"concepts": "local community knowledge", "type": "concept", "cluster": "Government & Administration", "node_size": 10, "label": "local community knowledge"}], ["salish culture", {"concepts": "salish culture", "type": "concept", "cluster": "Government & Administration", "node_size": 10, "label": "salish culture"}], ["local knowledge", {"concepts": "local knowledge", "type": "concept", "cluster": "Government & Administration", "node_size": 10, "label": "local knowledge"}], ["tribal support", {"concepts": "tribal support", "type": "concept", "cluster": "Government & Administration", "node_size": 10, "label": "tribal support"}], ["seven generations", {"concepts": "seven generations", "type": "concept", "cluster": "Government & Administration", "node_size": 10, "label": "seven generations"}]], "Impacts & Consequences": [["agencies", {"concepts": "agencies", "type": "concept", "cluster": "Impacts & Consequences", "node_size": 10, "label": "agencies"}], ["state management", {"concepts": "state management", "type": "concept", "cluster": "Impacts & Consequences", "node_size": 10, "label": "state management"}], ["federal agencies", {"concepts": "federal agencies", "type": "concept", "cluster": "Impacts & Consequences", "node_size": 10, "label": "federal agencies"}], ["custom plywood", {"concepts": "custom plywood", "type": "concept", "cluster": "Impacts & Consequences", "node_size": 10, "label": "custom plywood"}], ["administrative burden", {"concepts": "administrative burden", "type": "concept", "cluster": "Impacts & Consequences", "node_size": 10, "label": "administrative burden"}], ["planning department", {"concepts": "planning department", "type": "concept", "cluster": "Impacts & Consequences", "node_size": 10, "label": "planning department"}], ["federal coordinator", {"concepts": "federal coordinator", "type": "concept", "cluster": "Impacts & Consequences", "node_size": 10, "label": "federal coordinator"}], ["federal dollars", {"concepts": "federal dollars", "type": "concept", "cluster": "Impacts & Consequences", "node_size": 10, "label": "federal dollars"}], ["federal government", {"concepts": "federal government", "type": "concept", "cluster": "Impacts & Consequences", "node_size": 10, "label": "federal government"}], ["senior directors", {"concepts": "senior directors", "type": "concept", "cluster": "Impacts & Consequences", "node_size": 10, "label": "senior directors"}]], "Collaboration & Resources": [["genetic variant", {"concepts": "genetic variant", "type": "concept", "cluster": "Collaboration & Resources", "node_size": 10, "label": "genetic variant"}], ["biological impact", {"concepts": "biological impact", "type": "concept", "cluster": "Collaboration & Resources", "node_size": 10, "label": "biological impact"}], ["population stress", {"concepts": "population stress", "type": "concept", "cluster": "Collaboration & Resources", "node_size": 10, "label": "population stress"}], ["complex dynamics", {"concepts": "complex dynamics", "type": "concept", "cluster": "Collaboration & Resources", "node_size": 10, "label": "complex dynamics"}], ["population biology", {"concepts": "population biology", "type": "concept", "cluster": "Collaboration & Resources", "node_size": 10, "label": "population biology"}], ["carbon chains", {"concepts": "carbon chains", "type": "concept", "cluster": "Collaboration & Resources", "node_size": 10, "label": "carbon chains"}], ["dei perspective", {"concepts": "dei perspective", "type": "concept", "cluster": "Collaboration & Resources", "node_size": 10, "label": "dei perspective"}], ["resource expense", {"concepts": "resource expense", "type": "concept", "cluster": "Collaboration & Resources", "node_size": 10, "label": "resource expense"}], ["economic status", {"concepts": "economic status", "type": "concept", "cluster": "Collaboration & Resources", "node_size": 10, "label": "economic status"}], ["reputation", {"concepts": "reputation", "type": "concept", "cluster": "Collaboration & Resources", "node_size": 10, "label": "reputation"}], ["mental model", {"concepts": "mental model", "type": "concept", "cluster": "Collaboration & Resources", "node_size": 10, "label": "mental model"}], ["data gaps", {"concepts": "data gaps", "type": "concept", "cluster": "Collaboration & Resources", "node_size": 10, "label": "data gaps"}], ["pacific garbage patch", {"concepts": "pacific garbage patch", "type": "concept", "cluster": "Collaboration & Resources", "node_size": 10, "label": "pacific garbage patch"}], ["cultural impact", {"concepts": "cultural impact", "type": "concept", "cluster": "Collaboration & Resources", "node_size": 10, "label": "cultural impact"}], ["notification overload", {"concepts": "notification overload", "type": "concept", "cluster": "Collaboration & Resources", "node_size": 10, "label": "notification overload"}], ["overburdened population", {"concepts": "overburdened population", "type": "concept", "cluster": "Collaboration & Resources", "node_size": 10, "label": "overburdened population"}], ["unintended consequences", {"concepts": "unintended consequences", "type": "concept", "cluster": "Collaboration & Resources", "node_size": 10, "label": "unintended consequences"}]], "Environmental Restoration": [["first medicines", {"concepts": "first medicines", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "first medicines"}], ["western science", {"concepts": "western science", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "western science"}], ["indigenous country", {"concepts": "indigenous country", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "indigenous country"}], ["usual areas", {"concepts": "usual areas", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "usual areas"}], ["battery storage", {"concepts": "battery storage", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "battery storage"}], ["scientific dive", {"concepts": "scientific dive", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "scientific dive"}], ["proactive protection", {"concepts": "proactive protection", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "proactive protection"}], ["jet fuel", {"concepts": "jet fuel", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "jet fuel"}], ["solar", {"concepts": "solar", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "solar"}], ["co-management", {"concepts": "co-management", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "co-management"}], ["scientific dive team", {"concepts": "scientific dive team", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "scientific dive team"}], ["tribal sovereignty", {"concepts": "tribal sovereignty", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "tribal sovereignty"}], ["cross-border group", {"concepts": "cross-border group", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "cross-border group"}], ["word of mouth", {"concepts": "word of mouth", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "word of mouth"}], ["cultural species", {"concepts": "cultural species", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "cultural species"}], ["community knowledge", {"concepts": "community knowledge", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "community knowledge"}], ["first medicine", {"concepts": "first medicine", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "first medicine"}], ["speed of trust", {"concepts": "speed of trust", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "speed of trust"}], ["transboundary management", {"concepts": "transboundary management", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "transboundary management"}], ["kelp forest", {"concepts": "kelp forest", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "kelp forest"}], ["holistic view", {"concepts": "holistic view", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "holistic view"}], ["cultural resource", {"concepts": "cultural resource", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "cultural resource"}], ["partnerships", {"concepts": "partnerships", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "partnerships"}], ["political boundary", {"concepts": "political boundary", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "political boundary"}], ["tribal lands", {"concepts": "tribal lands", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "tribal lands"}], ["holistic approach", {"concepts": "holistic approach", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "holistic approach"}], ["cultural use", {"concepts": "cultural use", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "cultural use"}], ["kelp restoration", {"concepts": "kelp restoration", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "kelp restoration"}], ["oil spill preparedness", {"concepts": "oil spill preparedness", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "oil spill preparedness"}], ["samish stance", {"concepts": "samish stance", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "samish stance"}], ["resource protection", {"concepts": "resource protection", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "resource protection"}], ["traditional material", {"concepts": "traditional material", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "traditional material"}], ["land use", {"concepts": "land use", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "land use"}], ["green energy", {"concepts": "green energy", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "green energy"}], ["co-management dynamics", {"concepts": "co-management dynamics", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "co-management dynamics"}], ["federal recognition", {"concepts": "federal recognition", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "federal recognition"}], ["local level", {"concepts": "local level", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "local level"}], ["orca passage", {"concepts": "orca passage", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "orca passage"}], ["resident orcas", {"concepts": "resident orcas", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "resident orcas"}], ["kelp", {"concepts": "kelp", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "kelp"}], ["spill response", {"concepts": "spill response", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "spill response"}], ["cultural place", {"concepts": "cultural place", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "cultural place"}], ["kelp forests", {"concepts": "kelp forests", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "kelp forests"}], ["orca family", {"concepts": "orca family", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "orca family"}], ["indigenous perspectives", {"concepts": "indigenous perspectives", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "indigenous perspectives"}], ["indigenous perspective", {"concepts": "indigenous perspective", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "indigenous perspective"}], ["social services", {"concepts": "social services", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "social services"}], ["good relationships", {"concepts": "good relationships", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "good relationships"}], ["treaty rights", {"concepts": "treaty rights", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "treaty rights"}], ["weaving materials", {"concepts": "weaving materials", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "weaving materials"}], ["tribal concerns", {"concepts": "tribal concerns", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "tribal concerns"}], ["oil spill", {"concepts": "oil spill", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "oil spill"}], ["committees", {"concepts": "committees", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "committees"}], ["collaborative modeling", {"concepts": "collaborative modeling", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "collaborative modeling"}], ["force multiplier", {"concepts": "force multiplier", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "force multiplier"}], ["oil spills", {"concepts": "oil spills", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "oil spills"}], ["management approaches", {"concepts": "management approaches", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "management approaches"}], ["tribal consultation", {"concepts": "tribal consultation", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "tribal consultation"}], ["educational purpose", {"concepts": "educational purpose", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "educational purpose"}], ["tide table", {"concepts": "tide table", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "tide table"}], ["kelp research", {"concepts": "kelp research", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "kelp research"}], ["cultural relevance", {"concepts": "cultural relevance", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "cultural relevance"}], ["cultural experience", {"concepts": "cultural experience", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "cultural experience"}], ["boldt decision", {"concepts": "boldt decision", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "boldt decision"}], ["cultural preservation", {"concepts": "cultural preservation", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "cultural preservation"}], ["reactive response", {"concepts": "reactive response", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "reactive response"}], ["reliable funding", {"concepts": "reliable funding", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "reliable funding"}], ["transplant games", {"concepts": "transplant games", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "transplant games"}], ["resource capacity", {"concepts": "resource capacity", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "resource capacity"}], ["decision making", {"concepts": "decision making", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "decision making"}], ["resource management", {"concepts": "resource management", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "resource management"}], ["j pod", {"concepts": "j pod", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "j pod"}], ["spill preparedness", {"concepts": "spill preparedness", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "spill preparedness"}], ["field tech", {"concepts": "field tech", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "field tech"}], ["knotweed control", {"concepts": "knotweed control", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "knotweed control"}], ["tribal management", {"concepts": "tribal management", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "tribal management"}], ["development pressure", {"concepts": "development pressure", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "development pressure"}], ["kelp recovery", {"concepts": "kelp recovery", "type": "concept", "cluster": "Environmental Restoration", "node_size": 10, "label": "kelp recovery"}]], "Community & Culture": [["stream restoration", {"concepts": "stream restoration", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "stream restoration"}], ["sediment trap", {"concepts": "sediment trap", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "sediment trap"}], ["environmental policy", {"concepts": "environmental policy", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "environmental policy"}], ["shoreline assessment", {"concepts": "shoreline assessment", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "shoreline assessment"}], ["endangered species", {"concepts": "endangered species", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "endangered species"}], ["climate change", {"concepts": "climate change", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "climate change"}], ["dams", {"concepts": "dams", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "dams"}], ["habitat restoration", {"concepts": "habitat restoration", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "habitat restoration"}], ["restoration project", {"concepts": "restoration project", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "restoration project"}], ["sea level rise", {"concepts": "sea level rise", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "sea level rise"}], ["species habitats", {"concepts": "species habitats", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "species habitats"}], ["wetland complex", {"concepts": "wetland complex", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "wetland complex"}], ["natural resources", {"concepts": "natural resources", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "natural resources"}], ["water quality", {"concepts": "water quality", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "water quality"}], ["habitat", {"concepts": "habitat", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "habitat"}], ["impermeable surface", {"concepts": "impermeable surface", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "impermeable surface"}], ["environmental impact", {"concepts": "environmental impact", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "environmental impact"}], ["fish migration", {"concepts": "fish migration", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "fish migration"}], ["climate impact", {"concepts": "climate impact", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "climate impact"}], ["carbon sequestration", {"concepts": "carbon sequestration", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "carbon sequestration"}], ["grazing", {"concepts": "grazing", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "grazing"}], ["marine debris", {"concepts": "marine debris", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "marine debris"}], ["shoreline development", {"concepts": "shoreline development", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "shoreline development"}], ["salmon decline", {"concepts": "salmon decline", "type": "concept", "cluster": "Community & Culture", "node_size": 10, "label": "salmon decline"}]], "Coastal Food Systems": [["first food", {"concepts": "first food", "type": "concept", "cluster": "Coastal Food Systems", "node_size": 10, "label": "first food"}], ["first foods", {"concepts": "first foods", "type": "concept", "cluster": "Coastal Food Systems", "node_size": 10, "label": "first foods"}], ["salmon pie", {"concepts": "salmon pie", "type": "concept", "cluster": "Coastal Food Systems", "node_size": 10, "label": "salmon pie"}], ["riparian zone", {"concepts": "riparian zone", "type": "concept", "cluster": "Coastal Food Systems", "node_size": 10, "label": "riparian zone"}], ["traditional food", {"concepts": "traditional food", "type": "concept", "cluster": "Coastal Food Systems", "node_size": 10, "label": "traditional food"}], ["shellfish", {"concepts": "shellfish", "type": "concept", "cluster": "Coastal Food Systems", "node_size": 10, "label": "shellfish"}], ["fish species", {"concepts": "fish species", "type": "concept", "cluster": "Coastal Food Systems", "node_size": 10, "label": "fish species"}], ["traditional fishing", {"concepts": "traditional fishing", "type": "concept", "cluster": "Coastal Food Systems", "node_size": 10, "label": "traditional fishing"}], ["coastal culture", {"concepts": "coastal culture", "type": "concept", "cluster": "Coastal Food Systems", "node_size": 10, "label": "coastal culture"}], ["salmon", {"concepts": "salmon", "type": "concept", "cluster": "Coastal Food Systems", "node_size": 10, "label": "salmon"}], ["fishing access", {"concepts": "fishing access", "type": "concept", "cluster": "Coastal Food Systems", "node_size": 10, "label": "fishing access"}]], "Renewable Water Energy": [["hydropower", {"concepts": "hydropower", "type": "concept", "cluster": "Renewable Water Energy", "node_size": 10, "label": "hydropower"}], ["offshore wind", {"concepts": "offshore wind", "type": "concept", "cluster": "Renewable Water Energy", "node_size": 10, "label": "offshore wind"}], ["tidal energy", {"concepts": "tidal energy", "type": "concept", "cluster": "Renewable Water Energy", "node_size": 10, "label": "tidal energy"}]], "Salish Sea Biodiversity": [["rockfish populations", {"concepts": "rockfish populations", "type": "concept", "cluster": "Salish Sea Biodiversity", "node_size": 10, "label": "rockfish populations"}], ["wetlands", {"concepts": "wetlands", "type": "concept", "cluster": "Salish Sea Biodiversity", "node_size": 10, "label": "wetlands"}], ["environmental sites", {"concepts": "environmental sites", "type": "concept", "cluster": "Salish Sea Biodiversity", "node_size": 10, "label": "environmental sites"}], ["national biodiversity strategy", {"concepts": "national biodiversity strategy", "type": "concept", "cluster": "Salish Sea Biodiversity", "node_size": 10, "label": "national biodiversity strategy"}], ["shellfish species", {"concepts": "shellfish species", "type": "concept", "cluster": "Salish Sea Biodiversity", "node_size": 10, "label": "shellfish species"}], ["biodiversity", {"concepts": "biodiversity", "type": "concept", "cluster": "Salish Sea Biodiversity", "node_size": 10, "label": "biodiversity"}], ["test fisheries", {"concepts": "test fisheries", "type": "concept", "cluster": "Salish Sea Biodiversity", "node_size": 10, "label": "test fisheries"}], ["climate refugia", {"concepts": "climate refugia", "type": "concept", "cluster": "Salish Sea Biodiversity", "node_size": 10, "label": "climate refugia"}], ["sustainable harvest", {"concepts": "sustainable harvest", "type": "concept", "cluster": "Salish Sea Biodiversity", "node_size": 10, "label": "sustainable harvest"}], ["whale memorials", {"concepts": "whale memorials", "type": "concept", "cluster": "Salish Sea Biodiversity", "node_size": 10, "label": "whale memorials"}], ["samish river", {"concepts": "samish river", "type": "concept", "cluster": "Salish Sea Biodiversity", "node_size": 10, "label": "samish river"}], ["abalone", {"concepts": "abalone", "type": "concept", "cluster": "Salish Sea Biodiversity", "node_size": 10, "label": "abalone"}], ["harvestable fish", {"concepts": "harvestable fish", "type": "concept", "cluster": "Salish Sea Biodiversity", "node_size": 10, "label": "harvestable fish"}], ["biodiversity definition", {"concepts": "biodiversity definition", "type": "concept", "cluster": "Salish Sea Biodiversity", "node_size": 10, "label": "biodiversity definition"}], ["salish sea", {"concepts": "salish sea", "type": "concept", "cluster": "Salish Sea Biodiversity", "node_size": 10, "label": "salish sea"}], ["oregon spotted frog", {"concepts": "oregon spotted frog", "type": "concept", "cluster": "Salish Sea Biodiversity", "node_size": 10, "label": "oregon spotted frog"}], ["cattle grazing", {"concepts": "cattle grazing", "type": "concept", "cluster": "Salish Sea Biodiversity", "node_size": 10, "label": "cattle grazing"}], ["clam species", {"concepts": "clam species", "type": "concept", "cluster": "Salish Sea Biodiversity", "node_size": 10, "label": "clam species"}], ["native plant nursery", {"concepts": "native plant nursery", "type": "concept", "cluster": "Salish Sea Biodiversity", "node_size": 10, "label": "native plant nursery"}], ["biodiversity strategy", {"concepts": "biodiversity strategy", "type": "concept", "cluster": "Salish Sea Biodiversity", "node_size": 10, "label": "biodiversity strategy"}], ["abalone restoration", {"concepts": "abalone restoration", "type": "concept", "cluster": "Salish Sea Biodiversity", "node_size": 10, "label": "abalone restoration"}]]};
        const clusterEdges = {"Government & Administration": [], "Impacts & Consequences": [], "Collaboration & Resources": [], "Environmental Restoration": [], "Community & Culture": [], "Coastal Food Systems": [], "Renewable Water Energy": [], "Salish Sea Biodiversity": []};
        
        let network;
        let currentView = 'clusters';
        let currentCluster = null;
        let minConfidence = 0.3;
        
        // Network options
        const options = {
            nodes: {
                font: { color: 'white', size: 14 },
                borderWidth: 2,
                shadow: true
            },
            edges: {
                arrows: { to: { enabled: true, scaleFactor: 1.2 } },
                shadow: true,
                smooth: { type: 'continuous' }
            },
            physics: {
                stabilization: { iterations: 100 },
                barnesHut: {
                    gravitationalConstant: -8000,
                    springConstant: 0.001,
                    springLength: 200
                }
            },
            interaction: {
                hover: true,
                selectConnectedEdges: false
            }
        };
        
        function initNetwork() {
            const container = document.getElementById('network');
            const data = getClusterViewData();
            network = new vis.Network(container, data, options);
            
            // Handle cluster clicks for drill-down
            network.on("click", function(params) {
                if (params.nodes.length > 0 && currentView === 'clusters') {
                    const clickedNode = params.nodes[0];
                    if (clusterConcepts[clickedNode]) {
                        showClusterDetail(clickedNode);
                    }
                }
            });
        }
        
        function getClusterViewData() {
            const nodes = [];
            const edges = [];
            
            // Add cluster nodes
            Object.entries(clusterData).forEach(([clusterId, data]) => {
                const concepts = data.concepts || [];
                const conceptsStr = Array.isArray(concepts) ? concepts.join(', ') : concepts;
                
                nodes.push({
                    id: clusterId,
                    label: clusterId,
                    title: `Cluster: ${clusterId}\nConcepts: ${conceptsStr}\nClick to explore internal relationships`,
                    color: '#4A90E2',
                    size: 25 + (conceptsStr.split(',').length * 2),
                    font: { color: 'white' }
                });
            });
            
            // Add inter-cluster edges
            interClusterEdges.forEach(([source, target, edgeData]) => {
                const confidence = edgeData.confidence || 1.0;
                const weight = edgeData.weight || 0;
                
                if (confidence >= minConfidence) {
                    edges.push({
                        from: source,
                        to: target,
                        color: weight > 0 ? '#28A745' : '#DC3545',
                        width: Math.abs(weight) * 3 + 1,
                        title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                        dashes: false
                    });
                }
            });
            
            return { nodes: nodes, edges: edges };
        }
        
        function getClusterDetailData(clusterId) {
            const nodes = [];
            const edges = [];
            
            // Add concept nodes for this cluster
            if (clusterConcepts[clusterId]) {
                clusterConcepts[clusterId].forEach(([conceptId, data]) => {
                    nodes.push({
                        id: conceptId,
                        label: conceptId,
                        title: `Concept: ${conceptId}\nFrom cluster: ${clusterId}`,
                        color: '#FF9500',
                        size: 20,
                        font: { color: 'white' }
                    });
                });
            }
            
            // Add intra-cluster edges
            if (clusterEdges[clusterId]) {
                clusterEdges[clusterId].forEach(([source, target, edgeData]) => {
                    const confidence = edgeData.confidence || 1.0;
                    const weight = edgeData.weight || 0;
                    
                    if (confidence >= minConfidence) {
                        edges.push({
                            from: source,
                            to: target,
                            color: weight > 0 ? '#28A745' : '#DC3545',
                            width: Math.abs(weight) * 3 + 1,
                            title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                            dashes: true
                        });
                    }
                });
            }
            
            return { nodes: nodes, edges: edges };
        }
        
        function showClusterView() {
            currentView = 'clusters';
            currentCluster = null;
            const data = getClusterViewData();
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'none';
            document.getElementById('current-view').textContent = 'Cluster Overview';
        }
        
        function showClusterDetail(clusterId) {
            currentView = 'concepts';
            currentCluster = clusterId;
            const data = getClusterDetailData(clusterId);
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'inline-block';
            document.getElementById('current-view').textContent = `Inside Cluster: ${clusterId}`;
        }
        
        function updateConfidenceFilter(value) {
            minConfidence = parseFloat(value);
            document.getElementById('confidence-value').textContent = value;
            
            // Refresh current view
            if (currentView === 'clusters') {
                showClusterView();
            } else {
                showClusterDetail(currentCluster);
            }
        }
        
        // Initialize the network when page loads
        window.onload = function() {
            initNetwork();
        };
    </script>
</body>
</html>
