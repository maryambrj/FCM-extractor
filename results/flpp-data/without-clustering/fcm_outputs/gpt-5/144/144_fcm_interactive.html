
<!DOCTYPE html>
<html>
<head>
    <title>Hierarchical FCM Visualization (Unconnected nodes removed)</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 0; 
            padding: 20px;
            background: #f5f5f5;
        }
        
        #network { 
            width: 100%; 
            height: 600px; 
            border: 2px solid #ccc; 
            background: white;
            border-radius: 8px;
        }
        
        #controls {
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn {
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        
        .btn-primary { background: #4A90E2; color: white; }
        .btn-primary:hover { background: #357ABD; }
        
        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #545b62; }
        
        #current-view {
            font-weight: bold;
            color: #333;
            margin-left: 10px;
        }
        
        #legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-size: 12px;
            max-width: 200px;
        }
        
        .legend-item {
            margin: 5px 0;
            display: flex;
            align-items: center;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .legend-line {
            width: 20px;
            height: 2px;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <h1>Fuzzy Cognitive Map - Hierarchical View</h1>
    
    <div id="controls">
        <button class="btn btn-secondary" id="back-btn" onclick="showClusterView()" style="display: none;">
            ‚Üê Back to Clusters
        </button>
        <span id="current-view">Cluster Overview</span>
        <div style="float: right;">
            <label>Min Confidence: </label>
            <input type="range" id="confidence-slider" min="0" max="1" step="0.1" value="0.3" 
                   onchange="updateConfidenceFilter(this.value)">
            <span id="confidence-value">0.3</span>
        </div>
    </div>
    
    <div id="network"></div>
    
    <div id="legend">
        <h4>Legend</h4>
        <div class="legend-item">
            <div class="legend-color" style="background: #4A90E2;"></div>
            <span>Clusters</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #FF9500;"></div>
            <span>Concepts</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #28A745;"></div>
            <span>Positive relationship</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #DC3545;"></div>
            <span>Negative relationship</span>
        </div>
        <div style="margin-top: 10px; font-style: italic; color: #666;">
            Click clusters to explore internal concepts
        </div>
    </div>

    <script>
        // Embedded data
        const clusterData = {"fresh food": {"concepts": "fresh food", "concept_list": ["fresh food"], "type": "cluster", "node_size": 18, "label": "fresh food"}, "school kids": {"concepts": "school kids", "concept_list": ["school kids"], "type": "cluster", "node_size": 18, "label": "school kids"}, "farmer collaboration": {"concepts": "farmer collaboration", "concept_list": ["farmer collaboration"], "type": "cluster", "node_size": 18, "label": "farmer collaboration"}, "nutrition programs": {"concepts": "nutrition programs", "concept_list": ["nutrition programs"], "type": "cluster", "node_size": 18, "label": "nutrition programs"}, "empowerment": {"concepts": "empowerment", "concept_list": ["empowerment"], "type": "cluster", "node_size": 18, "label": "empowerment"}, "resident income": {"concepts": "resident income", "concept_list": ["resident income"], "type": "cluster", "node_size": 18, "label": "resident income"}, "behavioral shifts": {"concepts": "behavioral shifts", "concept_list": ["behavioral shifts"], "type": "cluster", "node_size": 18, "label": "behavioral shifts"}, "restaurant relationships": {"concepts": "restaurant relationships", "concept_list": ["restaurant relationships"], "type": "cluster", "node_size": 18, "label": "restaurant relationships"}, "food policy council": {"concepts": "food policy council", "concept_list": ["food policy council"], "type": "cluster", "node_size": 18, "label": "food policy council"}, "support": {"concepts": "support", "concept_list": ["support"], "type": "cluster", "node_size": 18, "label": "support"}, "food affordability": {"concepts": "food affordability", "concept_list": ["food affordability"], "type": "cluster", "node_size": 18, "label": "food affordability"}, "food quality": {"concepts": "food quality", "concept_list": ["food quality"], "type": "cluster", "node_size": 18, "label": "food quality"}, "locally grown food": {"concepts": "locally grown food", "concept_list": ["locally grown food"], "type": "cluster", "node_size": 18, "label": "locally grown food"}, "urban agriculture": {"concepts": "urban agriculture", "concept_list": ["urban agriculture"], "type": "cluster", "node_size": 18, "label": "urban agriculture"}, "urban farming": {"concepts": "urban farming", "concept_list": ["urban farming"], "type": "cluster", "node_size": 18, "label": "urban farming"}, "market integrity": {"concepts": "market integrity", "concept_list": ["market integrity"], "type": "cluster", "node_size": 18, "label": "market integrity"}, "flint": {"concepts": "flint", "concept_list": ["flint"], "type": "cluster", "node_size": 18, "label": "flint"}, "educational gap": {"concepts": "educational gap", "concept_list": ["educational gap"], "type": "cluster", "node_size": 18, "label": "educational gap"}, "free food": {"concepts": "free food", "concept_list": ["free food"], "type": "cluster", "node_size": 18, "label": "free food"}, "ebt": {"concepts": "ebt", "concept_list": ["ebt"], "type": "cluster", "node_size": 18, "label": "ebt"}, "growing seasons": {"concepts": "growing seasons", "concept_list": ["growing seasons"], "type": "cluster", "node_size": 18, "label": "growing seasons"}, "community partnerships": {"concepts": "community partnerships", "concept_list": ["community partnerships"], "type": "cluster", "node_size": 18, "label": "community partnerships"}, "learning": {"concepts": "learning", "concept_list": ["learning"], "type": "cluster", "node_size": 18, "label": "learning"}, "pricing strategies": {"concepts": "pricing strategies", "concept_list": ["pricing strategies"], "type": "cluster", "node_size": 18, "label": "pricing strategies"}, "self sufficiency": {"concepts": "self sufficiency", "concept_list": ["self sufficiency"], "type": "cluster", "node_size": 18, "label": "self sufficiency"}, "land access": {"concepts": "land access", "concept_list": ["land access"], "type": "cluster", "node_size": 18, "label": "land access"}, "quality of food": {"concepts": "quality of food", "concept_list": ["quality of food"], "type": "cluster", "node_size": 18, "label": "quality of food"}, "customer relationships": {"concepts": "customer relationships", "concept_list": ["customer relationships"], "type": "cluster", "node_size": 18, "label": "customer relationships"}, "farming viability": {"concepts": "farming viability", "concept_list": ["farming viability"], "type": "cluster", "node_size": 18, "label": "farming viability"}, "psychological coping": {"concepts": "psychological coping", "concept_list": ["psychological coping"], "type": "cluster", "node_size": 18, "label": "psychological coping"}, "food access": {"concepts": "food access", "concept_list": ["food access"], "type": "cluster", "node_size": 18, "label": "food access"}, "program effectiveness": {"concepts": "program effectiveness", "concept_list": ["program effectiveness"], "type": "cluster", "node_size": 18, "label": "program effectiveness"}, "food labeling": {"concepts": "food labeling", "concept_list": ["food labeling"], "type": "cluster", "node_size": 18, "label": "food labeling"}, "growers cohort": {"concepts": "growers cohort", "concept_list": ["growers cohort"], "type": "cluster", "node_size": 18, "label": "growers cohort"}, "labeling requirements": {"concepts": "labeling requirements", "concept_list": ["labeling requirements"], "type": "cluster", "node_size": 18, "label": "labeling requirements"}, "free food distribution": {"concepts": "free food distribution", "concept_list": ["free food distribution"], "type": "cluster", "node_size": 18, "label": "free food distribution"}, "market farming": {"concepts": "market farming", "concept_list": ["market farming"], "type": "cluster", "node_size": 18, "label": "market farming"}, "restaurants": {"concepts": "restaurants", "concept_list": ["restaurants"], "type": "cluster", "node_size": 18, "label": "restaurants"}, "leadership": {"concepts": "leadership", "concept_list": ["leadership"], "type": "cluster", "node_size": 18, "label": "leadership"}, "growers transition": {"concepts": "growers transition", "concept_list": ["growers transition"], "type": "cluster", "node_size": 18, "label": "growers transition"}, "harvest process": {"concepts": "harvest process", "concept_list": ["harvest process"], "type": "cluster", "node_size": 18, "label": "harvest process"}, "msu programs": {"concepts": "msu programs", "concept_list": ["msu programs"], "type": "cluster", "node_size": 18, "label": "msu programs"}, "lactose intolerance": {"concepts": "lactose intolerance", "concept_list": ["lactose intolerance"], "type": "cluster", "node_size": 18, "label": "lactose intolerance"}, "wholesale pricing": {"concepts": "wholesale pricing", "concept_list": ["wholesale pricing"], "type": "cluster", "node_size": 18, "label": "wholesale pricing"}, "voucher program": {"concepts": "voucher program", "concept_list": ["voucher program"], "type": "cluster", "node_size": 18, "label": "voucher program"}, "double up food bucks": {"concepts": "double up food bucks", "concept_list": ["double up food bucks"], "type": "cluster", "node_size": 18, "label": "double up food bucks"}, "business adaptation": {"concepts": "business adaptation", "concept_list": ["business adaptation"], "type": "cluster", "node_size": 18, "label": "business adaptation"}, "land ownership": {"concepts": "land ownership", "concept_list": ["land ownership"], "type": "cluster", "node_size": 18, "label": "land ownership"}, "sustainability": {"concepts": "sustainability", "concept_list": ["sustainability"], "type": "cluster", "node_size": 18, "label": "sustainability"}, "farmers markets": {"concepts": "farmers markets", "concept_list": ["farmers markets"], "type": "cluster", "node_size": 18, "label": "farmers markets"}, "online store": {"concepts": "online store", "concept_list": ["online store"], "type": "cluster", "node_size": 18, "label": "online store"}, "emergency food": {"concepts": "emergency food", "concept_list": ["emergency food"], "type": "cluster", "node_size": 18, "label": "emergency food"}, "nutritious food": {"concepts": "nutritious food", "concept_list": ["nutritious food"], "type": "cluster", "node_size": 18, "label": "nutritious food"}, "food aggregation": {"concepts": "food aggregation", "concept_list": ["food aggregation"], "type": "cluster", "node_size": 18, "label": "food aggregation"}, "local restaurants": {"concepts": "local restaurants", "concept_list": ["local restaurants"], "type": "cluster", "node_size": 18, "label": "local restaurants"}, "organizations": {"concepts": "organizations", "concept_list": ["organizations"], "type": "cluster", "node_size": 18, "label": "organizations"}, "participation": {"concepts": "participation", "concept_list": ["participation"], "type": "cluster", "node_size": 18, "label": "participation"}, "produce sales": {"concepts": "produce sales", "concept_list": ["produce sales"], "type": "cluster", "node_size": 18, "label": "produce sales"}, "farmers market": {"concepts": "farmers market", "concept_list": ["farmers market"], "type": "cluster", "node_size": 18, "label": "farmers market"}, "institutional influence": {"concepts": "institutional influence", "concept_list": ["institutional influence"], "type": "cluster", "node_size": 18, "label": "institutional influence"}, "grower education": {"concepts": "grower education", "concept_list": ["grower education"], "type": "cluster", "node_size": 18, "label": "grower education"}, "local food": {"concepts": "local food", "concept_list": ["local food"], "type": "cluster", "node_size": 18, "label": "local food"}, "social relationships": {"concepts": "social relationships", "concept_list": ["social relationships"], "type": "cluster", "node_size": 18, "label": "social relationships"}, "dedicated customers": {"concepts": "dedicated customers", "concept_list": ["dedicated customers"], "type": "cluster", "node_size": 18, "label": "dedicated customers"}, "beginning farmer education": {"concepts": "beginning farmer education", "concept_list": ["beginning farmer education"], "type": "cluster", "node_size": 18, "label": "beginning farmer education"}, "business pivot": {"concepts": "business pivot", "concept_list": ["business pivot"], "type": "cluster", "node_size": 18, "label": "business pivot"}, "grower participation": {"concepts": "grower participation", "concept_list": ["grower participation"], "type": "cluster", "node_size": 18, "label": "grower participation"}, "business owners": {"concepts": "business owners", "concept_list": ["business owners"], "type": "cluster", "node_size": 18, "label": "business owners"}, "education": {"concepts": "education", "concept_list": ["education"], "type": "cluster", "node_size": 18, "label": "education"}, "skills": {"concepts": "skills", "concept_list": ["skills"], "type": "cluster", "node_size": 18, "label": "skills"}, "distribution systems": {"concepts": "distribution systems", "concept_list": ["distribution systems"], "type": "cluster", "node_size": 18, "label": "distribution systems"}, "food choices": {"concepts": "food choices", "concept_list": ["food choices"], "type": "cluster", "node_size": 18, "label": "food choices"}, "retailers": {"concepts": "retailers", "concept_list": ["retailers"], "type": "cluster", "node_size": 18, "label": "retailers"}, "economic strain": {"concepts": "economic strain", "concept_list": ["economic strain"], "type": "cluster", "node_size": 18, "label": "economic strain"}, "staff shrinkage": {"concepts": "staff shrinkage", "concept_list": ["staff shrinkage"], "type": "cluster", "node_size": 18, "label": "staff shrinkage"}, "producers": {"concepts": "producers", "concept_list": ["producers"], "type": "cluster", "node_size": 18, "label": "producers"}, "economic sustainability": {"concepts": "economic sustainability", "concept_list": ["economic sustainability"], "type": "cluster", "node_size": 18, "label": "economic sustainability"}, "growers": {"concepts": "growers", "concept_list": ["growers"], "type": "cluster", "node_size": 18, "label": "growers"}, "partnerships": {"concepts": "partnerships", "concept_list": ["partnerships"], "type": "cluster", "node_size": 18, "label": "partnerships"}, "dignity": {"concepts": "dignity", "concept_list": ["dignity"], "type": "cluster", "node_size": 18, "label": "dignity"}, "access to land": {"concepts": "access to land", "concept_list": ["access to land"], "type": "cluster", "node_size": 18, "label": "access to land"}, "technical assistance": {"concepts": "technical assistance", "concept_list": ["technical assistance"], "type": "cluster", "node_size": 18, "label": "technical assistance"}, "community needs": {"concepts": "community needs", "concept_list": ["community needs"], "type": "cluster", "node_size": 18, "label": "community needs"}, "psychological stress": {"concepts": "psychological stress", "concept_list": ["psychological stress"], "type": "cluster", "node_size": 18, "label": "psychological stress"}, "motivation": {"concepts": "motivation", "concept_list": ["motivation"], "type": "cluster", "node_size": 18, "label": "motivation"}, "restaurant supply": {"concepts": "restaurant supply", "concept_list": ["restaurant supply"], "type": "cluster", "node_size": 18, "label": "restaurant supply"}, "head start families": {"concepts": "head start families", "concept_list": ["head start families"], "type": "cluster", "node_size": 18, "label": "head start families"}, "access": {"concepts": "access", "concept_list": ["access"], "type": "cluster", "node_size": 18, "label": "access"}, "adaptation strategies": {"concepts": "adaptation strategies", "concept_list": ["adaptation strategies"], "type": "cluster", "node_size": 18, "label": "adaptation strategies"}, "food system": {"concepts": "food system", "concept_list": ["food system"], "type": "cluster", "node_size": 18, "label": "food system"}, "nutrition": {"concepts": "nutrition", "concept_list": ["nutrition"], "type": "cluster", "node_size": 18, "label": "nutrition"}, "coupons": {"concepts": "coupons", "concept_list": ["coupons"], "type": "cluster", "node_size": 18, "label": "coupons"}, "flint water crisis": {"concepts": "flint water crisis", "concept_list": ["flint water crisis"], "type": "cluster", "node_size": 18, "label": "flint water crisis"}, "organizational support": {"concepts": "organizational support", "concept_list": ["organizational support"], "type": "cluster", "node_size": 18, "label": "organizational support"}, "food distribution": {"concepts": "food distribution", "concept_list": ["food distribution"], "type": "cluster", "node_size": 18, "label": "food distribution"}, "supplemental programs": {"concepts": "supplemental programs", "concept_list": ["supplemental programs"], "type": "cluster", "node_size": 18, "label": "supplemental programs"}, "catering demands": {"concepts": "catering demands", "concept_list": ["catering demands"], "type": "cluster", "node_size": 18, "label": "catering demands"}, "michigan produce": {"concepts": "michigan produce", "concept_list": ["michigan produce"], "type": "cluster", "node_size": 18, "label": "michigan produce"}, "capitalism": {"concepts": "capitalism", "concept_list": ["capitalism"], "type": "cluster", "node_size": 18, "label": "capitalism"}, "local value": {"concepts": "local value", "concept_list": ["local value"], "type": "cluster", "node_size": 18, "label": "local value"}, "collaboration": {"concepts": "collaboration", "concept_list": ["collaboration"], "type": "cluster", "node_size": 18, "label": "collaboration"}, "market closure": {"concepts": "market closure", "concept_list": ["market closure"], "type": "cluster", "node_size": 18, "label": "market closure"}, "neighborhood conflict": {"concepts": "neighborhood conflict", "concept_list": ["neighborhood conflict"], "type": "cluster", "node_size": 18, "label": "neighborhood conflict"}, "agricultural opportunities": {"concepts": "agricultural opportunities", "concept_list": ["agricultural opportunities"], "type": "cluster", "node_size": 18, "label": "agricultural opportunities"}, "edible flint": {"concepts": "edible flint", "concept_list": ["edible flint"], "type": "cluster", "node_size": 18, "label": "edible flint"}, "producer": {"concepts": "producer", "concept_list": ["producer"], "type": "cluster", "node_size": 18, "label": "producer"}, "consumers": {"concepts": "consumers", "concept_list": ["consumers"], "type": "cluster", "node_size": 18, "label": "consumers"}, "transitions to market": {"concepts": "transitions to market", "concept_list": ["transitions to market"], "type": "cluster", "node_size": 18, "label": "transitions to market"}, "farming": {"concepts": "farming", "concept_list": ["farming"], "type": "cluster", "node_size": 18, "label": "farming"}, "mutual support": {"concepts": "mutual support", "concept_list": ["mutual support"], "type": "cluster", "node_size": 18, "label": "mutual support"}, "local production": {"concepts": "local production", "concept_list": ["local production"], "type": "cluster", "node_size": 18, "label": "local production"}, "cost effectiveness": {"concepts": "cost effectiveness", "concept_list": ["cost effectiveness"], "type": "cluster", "node_size": 18, "label": "cost effectiveness"}, "program availability": {"concepts": "program availability", "concept_list": ["program availability"], "type": "cluster", "node_size": 18, "label": "program availability"}, "supply chain": {"concepts": "supply chain", "concept_list": ["supply chain"], "type": "cluster", "node_size": 18, "label": "supply chain"}, "consumer": {"concepts": "consumer", "concept_list": ["consumer"], "type": "cluster", "node_size": 18, "label": "consumer"}, "grocery stores": {"concepts": "grocery stores", "concept_list": ["grocery stores"], "type": "cluster", "node_size": 18, "label": "grocery stores"}, "farm partnerships": {"concepts": "farm partnerships", "concept_list": ["farm partnerships"], "type": "cluster", "node_size": 18, "label": "farm partnerships"}, "food value": {"concepts": "food value", "concept_list": ["food value"], "type": "cluster", "node_size": 18, "label": "food value"}, "community health": {"concepts": "community health", "concept_list": ["community health"], "type": "cluster", "node_size": 18, "label": "community health"}, "food producers": {"concepts": "food producers", "concept_list": ["food producers"], "type": "cluster", "node_size": 18, "label": "food producers"}, "seasonal availability": {"concepts": "seasonal availability", "concept_list": ["seasonal availability"], "type": "cluster", "node_size": 18, "label": "seasonal availability"}, "chain restaurants": {"concepts": "chain restaurants", "concept_list": ["chain restaurants"], "type": "cluster", "node_size": 18, "label": "chain restaurants"}, "local economy": {"concepts": "local economy", "concept_list": ["local economy"], "type": "cluster", "node_size": 18, "label": "local economy"}, "produce": {"concepts": "produce", "concept_list": ["produce"], "type": "cluster", "node_size": 18, "label": "produce"}, "people of color": {"concepts": "people of color", "concept_list": ["people of color"], "type": "cluster", "node_size": 18, "label": "people of color"}, "food availability": {"concepts": "food availability", "concept_list": ["food availability"], "type": "cluster", "node_size": 18, "label": "food availability"}, "meal service": {"concepts": "meal service", "concept_list": ["meal service"], "type": "cluster", "node_size": 18, "label": "meal service"}, "food delivery": {"concepts": "food delivery", "concept_list": ["food delivery"], "type": "cluster", "node_size": 18, "label": "food delivery"}, "cooperative csa": {"concepts": "cooperative csa", "concept_list": ["cooperative csa"], "type": "cluster", "node_size": 18, "label": "cooperative csa"}, "land bank": {"concepts": "land bank", "concept_list": ["land bank"], "type": "cluster", "node_size": 18, "label": "land bank"}, "economic pressure": {"concepts": "economic pressure", "concept_list": ["economic pressure"], "type": "cluster", "node_size": 18, "label": "economic pressure"}, "emotional support": {"concepts": "emotional support", "concept_list": ["emotional support"], "type": "cluster", "node_size": 18, "label": "emotional support"}, "pandemic": {"concepts": "pandemic", "concept_list": ["pandemic"], "type": "cluster", "node_size": 18, "label": "pandemic"}, "csa boxes": {"concepts": "csa boxes", "concept_list": ["csa boxes"], "type": "cluster", "node_size": 18, "label": "csa boxes"}, "marketing education": {"concepts": "marketing education", "concept_list": ["marketing education"], "type": "cluster", "node_size": 18, "label": "marketing education"}, "farm to school": {"concepts": "farm to school", "concept_list": ["farm to school"], "type": "cluster", "node_size": 18, "label": "farm to school"}, "skill development": {"concepts": "skill development", "concept_list": ["skill development"], "type": "cluster", "node_size": 18, "label": "skill development"}, "availability": {"concepts": "availability", "concept_list": ["availability"], "type": "cluster", "node_size": 18, "label": "availability"}, "equity": {"concepts": "equity", "concept_list": ["equity"], "type": "cluster", "node_size": 18, "label": "equity"}, "catering business": {"concepts": "catering business", "concept_list": ["catering business"], "type": "cluster", "node_size": 18, "label": "catering business"}, "local produce": {"concepts": "local produce", "concept_list": ["local produce"], "type": "cluster", "node_size": 18, "label": "local produce"}, "emergency boxes": {"concepts": "emergency boxes", "concept_list": ["emergency boxes"], "type": "cluster", "node_size": 18, "label": "emergency boxes"}, "organizational adaptation": {"concepts": "organizational adaptation", "concept_list": ["organizational adaptation"], "type": "cluster", "node_size": 18, "label": "organizational adaptation"}, "community resilience": {"concepts": "community resilience", "concept_list": ["community resilience"], "type": "cluster", "node_size": 18, "label": "community resilience"}, "covid-19": {"concepts": "covid-19", "concept_list": ["covid-19"], "type": "cluster", "node_size": 18, "label": "covid-19"}, "market sales": {"concepts": "market sales", "concept_list": ["market sales"], "type": "cluster", "node_size": 18, "label": "market sales"}, "income loss": {"concepts": "income loss", "concept_list": ["income loss"], "type": "cluster", "node_size": 18, "label": "income loss"}, "systemic racism": {"concepts": "systemic racism", "concept_list": ["systemic racism"], "type": "cluster", "node_size": 18, "label": "systemic racism"}, "remote work": {"concepts": "remote work", "concept_list": ["remote work"], "type": "cluster", "node_size": 18, "label": "remote work"}, "farm aggregation": {"concepts": "farm aggregation", "concept_list": ["farm aggregation"], "type": "cluster", "node_size": 18, "label": "farm aggregation"}, "food programs": {"concepts": "food programs", "concept_list": ["food programs"], "type": "cluster", "node_size": 18, "label": "food programs"}, "resilience": {"concepts": "resilience", "concept_list": ["resilience"], "type": "cluster", "node_size": 18, "label": "resilience"}, "local farms": {"concepts": "local farms", "concept_list": ["local farms"], "type": "cluster", "node_size": 18, "label": "local farms"}, "food boxes": {"concepts": "food boxes", "concept_list": ["food boxes"], "type": "cluster", "node_size": 18, "label": "food boxes"}, "community members": {"concepts": "community members", "concept_list": ["community members"], "type": "cluster", "node_size": 18, "label": "community members"}, "agricultural training": {"concepts": "agricultural training", "concept_list": ["agricultural training"], "type": "cluster", "node_size": 18, "label": "agricultural training"}, "food skills": {"concepts": "food skills", "concept_list": ["food skills"], "type": "cluster", "node_size": 18, "label": "food skills"}, "nutritious foods": {"concepts": "nutritious foods", "concept_list": ["nutritious foods"], "type": "cluster", "node_size": 18, "label": "nutritious foods"}, "meal programs": {"concepts": "meal programs", "concept_list": ["meal programs"], "type": "cluster", "node_size": 18, "label": "meal programs"}, "retail survival": {"concepts": "retail survival", "concept_list": ["retail survival"], "type": "cluster", "node_size": 18, "label": "retail survival"}, "health": {"concepts": "health", "concept_list": ["health"], "type": "cluster", "node_size": 18, "label": "health"}, "food options": {"concepts": "food options", "concept_list": ["food options"], "type": "cluster", "node_size": 18, "label": "food options"}, "local farming": {"concepts": "local farming", "concept_list": ["local farming"], "type": "cluster", "node_size": 18, "label": "local farming"}, "zero interest loans": {"concepts": "zero interest loans", "concept_list": ["zero interest loans"], "type": "cluster", "node_size": 18, "label": "zero interest loans"}, "diversity": {"concepts": "diversity", "concept_list": ["diversity"], "type": "cluster", "node_size": 18, "label": "diversity"}, "demand increase": {"concepts": "demand increase", "concept_list": ["demand increase"], "type": "cluster", "node_size": 18, "label": "demand increase"}, "emergency food sector": {"concepts": "emergency food sector", "concept_list": ["emergency food sector"], "type": "cluster", "node_size": 18, "label": "emergency food sector"}, "farmer training": {"concepts": "farmer training", "concept_list": ["farmer training"], "type": "cluster", "node_size": 18, "label": "farmer training"}, "farmers competition": {"concepts": "farmers competition", "concept_list": ["farmers competition"], "type": "cluster", "node_size": 18, "label": "farmers competition"}, "quality of life": {"concepts": "quality of life", "concept_list": ["quality of life"], "type": "cluster", "node_size": 18, "label": "quality of life"}, "common good": {"concepts": "common good", "concept_list": ["common good"], "type": "cluster", "node_size": 18, "label": "common good"}, "urban gardening": {"concepts": "urban gardening", "concept_list": ["urban gardening"], "type": "cluster", "node_size": 18, "label": "urban gardening"}, "production costs": {"concepts": "production costs", "concept_list": ["production costs"], "type": "cluster", "node_size": 18, "label": "production costs"}, "community food systems": {"concepts": "community food systems", "concept_list": ["community food systems"], "type": "cluster", "node_size": 18, "label": "community food systems"}, "headstart families": {"concepts": "headstart families", "concept_list": ["headstart families"], "type": "cluster", "node_size": 18, "label": "headstart families"}, "community access": {"concepts": "community access", "concept_list": ["community access"], "type": "cluster", "node_size": 18, "label": "community access"}, "pricing challenges": {"concepts": "pricing challenges", "concept_list": ["pricing challenges"], "type": "cluster", "node_size": 18, "label": "pricing challenges"}, "food competition": {"concepts": "food competition", "concept_list": ["food competition"], "type": "cluster", "node_size": 18, "label": "food competition"}, "community": {"concepts": "community", "concept_list": ["community"], "type": "cluster", "node_size": 18, "label": "community"}, "income": {"concepts": "income", "concept_list": ["income"], "type": "cluster", "node_size": 18, "label": "income"}, "market rates": {"concepts": "market rates", "concept_list": ["market rates"], "type": "cluster", "node_size": 18, "label": "market rates"}, "market access": {"concepts": "market access", "concept_list": ["market access"], "type": "cluster", "node_size": 18, "label": "market access"}, "agricultural equity": {"concepts": "agricultural equity", "concept_list": ["agricultural equity"], "type": "cluster", "node_size": 18, "label": "agricultural equity"}, "emergency sector": {"concepts": "emergency sector", "concept_list": ["emergency sector"], "type": "cluster", "node_size": 18, "label": "emergency sector"}, "cultural traditions": {"concepts": "cultural traditions", "concept_list": ["cultural traditions"], "type": "cluster", "node_size": 18, "label": "cultural traditions"}, "marketing challenges": {"concepts": "marketing challenges", "concept_list": ["marketing challenges"], "type": "cluster", "node_size": 18, "label": "marketing challenges"}, "race": {"concepts": "race", "concept_list": ["race"], "type": "cluster", "node_size": 18, "label": "race"}, "community empowerment": {"concepts": "community empowerment", "concept_list": ["community empowerment"], "type": "cluster", "node_size": 18, "label": "community empowerment"}, "community building": {"concepts": "community building", "concept_list": ["community building"], "type": "cluster", "node_size": 18, "label": "community building"}, "staffing reduction": {"concepts": "staffing reduction", "concept_list": ["staffing reduction"], "type": "cluster", "node_size": 18, "label": "staffing reduction"}, "business coaching": {"concepts": "business coaching", "concept_list": ["business coaching"], "type": "cluster", "node_size": 18, "label": "business coaching"}, "resource sharing": {"concepts": "resource sharing", "concept_list": ["resource sharing"], "type": "cluster", "node_size": 18, "label": "resource sharing"}, "hoop houses": {"concepts": "hoop houses", "concept_list": ["hoop houses"], "type": "cluster", "node_size": 18, "label": "hoop houses"}, "farmers": {"concepts": "farmers", "concept_list": ["farmers"], "type": "cluster", "node_size": 18, "label": "farmers"}, "demand": {"concepts": "demand", "concept_list": ["demand"], "type": "cluster", "node_size": 18, "label": "demand"}, "customer loyalty": {"concepts": "customer loyalty", "concept_list": ["customer loyalty"], "type": "cluster", "node_size": 18, "label": "customer loyalty"}, "financial barriers": {"concepts": "financial barriers", "concept_list": ["financial barriers"], "type": "cluster", "node_size": 18, "label": "financial barriers"}, "food pricing": {"concepts": "food pricing", "concept_list": ["food pricing"], "type": "cluster", "node_size": 18, "label": "food pricing"}, "incentive structures": {"concepts": "incentive structures", "concept_list": ["incentive structures"], "type": "cluster", "node_size": 18, "label": "incentive structures"}, "water access": {"concepts": "water access", "concept_list": ["water access"], "type": "cluster", "node_size": 18, "label": "water access"}, "problem solving": {"concepts": "problem solving", "concept_list": ["problem solving"], "type": "cluster", "node_size": 18, "label": "problem solving"}, "affordability": {"concepts": "affordability", "concept_list": ["affordability"], "type": "cluster", "node_size": 18, "label": "affordability"}, "public health": {"concepts": "public health", "concept_list": ["public health"], "type": "cluster", "node_size": 18, "label": "public health"}, "schools": {"concepts": "schools", "concept_list": ["schools"], "type": "cluster", "node_size": 18, "label": "schools"}, "convenience stores": {"concepts": "convenience stores", "concept_list": ["convenience stores"], "type": "cluster", "node_size": 18, "label": "convenience stores"}, "convenience foods": {"concepts": "convenience foods", "concept_list": ["convenience foods"], "type": "cluster", "node_size": 18, "label": "convenience foods"}, "retail barriers": {"concepts": "retail barriers", "concept_list": ["retail barriers"], "type": "cluster", "node_size": 18, "label": "retail barriers"}, "leverage points": {"concepts": "leverage points", "concept_list": ["leverage points"], "type": "cluster", "node_size": 18, "label": "leverage points"}, "conservation district": {"concepts": "conservation district", "concept_list": ["conservation district"], "type": "cluster", "node_size": 18, "label": "conservation district"}};
        const conceptData = {};
        const interClusterEdges = [["farmer collaboration", "resource sharing", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["nutrition programs", "farming viability", {"weight": 1.0, "confidence": 0.775, "type": "inter_cluster", "style": "solid"}], ["nutrition programs", "resource sharing", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["nutrition programs", "double up food bucks", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["empowerment", "growers transition", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["resident income", "income loss", {"weight": -1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["resident income", "community members", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["resident income", "agricultural training", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["behavioral shifts", "local food", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["restaurant relationships", "psychological coping", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["support", "emergency food sector", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["support", "urban farming", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["food affordability", "community access", {"weight": 1.0, "confidence": 0.9, "type": "inter_cluster", "style": "solid"}], ["food quality", "grocery stores", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["locally grown food", "seasonal availability", {"weight": 1.0, "confidence": 0.9, "type": "inter_cluster", "style": "solid"}], ["flint", "dedicated customers", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["free food", "food boxes", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["growing seasons", "local production", {"weight": 1.0, "confidence": 0.875, "type": "inter_cluster", "style": "solid"}], ["growing seasons", "learning", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["community partnerships", "flint water crisis", {"weight": -1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["learning", "market integrity", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["pricing strategies", "wholesale pricing", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["self sufficiency", "nutritious foods", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["self sufficiency", "farm partnerships", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["quality of food", "local farming", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["quality of food", "income", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["customer relationships", "produce sales", {"weight": 1.0, "confidence": 0.9, "type": "inter_cluster", "style": "solid"}], ["program effectiveness", "head start families", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["program effectiveness", "water access", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["food labeling", "produce sales", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["growers cohort", "mutual support", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["labeling requirements", "income", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["market farming", "michigan produce", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["msu programs", "leadership", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["lactose intolerance", "agricultural equity", {"weight": -1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["wholesale pricing", "emergency sector", {"weight": -1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["voucher program", "food delivery", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["voucher program", "income", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["business adaptation", "nutrition programs", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["land ownership", "pricing challenges", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["farmers markets", "race", {"weight": -1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["online store", "adaptation strategies", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["emergency food", "dignity", {"weight": -1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["emergency food", "grocery stores", {"weight": -1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["emergency food", "financial barriers", {"weight": -1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["food aggregation", "leverage points", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["organizations", "market access", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["participation", "leverage points", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["farmers market", "neighborhood conflict", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["institutional influence", "grower participation", {"weight": -1.0, "confidence": 0.7749999999999999, "type": "inter_cluster", "style": "solid"}], ["grower education", "economic sustainability", {"weight": 1.0, "confidence": 0.825, "type": "inter_cluster", "style": "solid"}], ["grower education", "nutritious foods", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["local food", "coupons", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["local food", "voucher program", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["social relationships", "urban agriculture", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["dedicated customers", "pricing strategies", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["dedicated customers", "technical assistance", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["beginning farmer education", "local restaurants", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["beginning farmer education", "dedicated customers", {"weight": 1.0, "confidence": 0.5, "type": "inter_cluster", "style": "solid"}], ["business pivot", "program effectiveness", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["business owners", "psychological coping", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["education", "farmer collaboration", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["education", "voucher program", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["education", "free food distribution", {"weight": 1.0, "confidence": 0.5, "type": "inter_cluster", "style": "solid"}], ["skills", "market farming", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["distribution systems", "financial barriers", {"weight": -1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["distribution systems", "restaurants", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["food choices", "resource sharing", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["economic strain", "food options", {"weight": -1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["economic strain", "motivation", {"weight": -1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["staff shrinkage", "community", {"weight": -1.0, "confidence": 0.675, "type": "inter_cluster", "style": "solid"}], ["producers", "school kids", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["economic sustainability", "community food systems", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["access to land", "urban agriculture", {"weight": 1.0, "confidence": 0.95, "type": "inter_cluster", "style": "solid"}], ["community needs", "diversity", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["psychological stress", "organizational support", {"weight": -1.0, "confidence": 0.4, "type": "inter_cluster", "style": "solid"}], ["motivation", "food programs", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["restaurant supply", "labeling requirements", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["access", "incentive structures", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["food system", "diversity", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["nutrition", "diversity", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["coupons", "produce", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["flint water crisis", "emergency sector", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["flint water crisis", "economic pressure", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["organizational support", "local restaurants", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["supplemental programs", "food distribution", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["supplemental programs", "beginning farmer education", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["capitalism", "food access", {"weight": -1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["capitalism", "community access", {"weight": -1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["capitalism", "motivation", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["collaboration", "emergency food", {"weight": 1.0, "confidence": 0.675, "type": "inter_cluster", "style": "solid"}], ["collaboration", "farm to school", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["market closure", "community members", {"weight": -1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["agricultural opportunities", "local restaurants", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["agricultural opportunities", "sustainability", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["producer", "social relationships", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["farming", "program availability", {"weight": 0.5, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["local production", "resource sharing", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["cost effectiveness", "school kids", {"weight": 1.0, "confidence": 0.625, "type": "inter_cluster", "style": "solid"}], ["consumer", "food options", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["consumer", "edible flint", {"weight": 1.0, "confidence": 0.5, "type": "inter_cluster", "style": "solid"}], ["farm partnerships", "local value", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["food value", "fresh food", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["food value", "leadership", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["community health", "common good", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["community health", "mutual support", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["food producers", "market sales", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["seasonal availability", "produce sales", {"weight": 1.0, "confidence": 0.9, "type": "inter_cluster", "style": "solid"}], ["chain restaurants", "flint", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["chain restaurants", "farming viability", {"weight": -1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["local economy", "transitions to market", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["people of color", "pricing strategies", {"weight": -1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["food availability", "land access", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["meal service", "community resilience", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["meal service", "catering business", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["food delivery", "food programs", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["cooperative csa", "supply chain", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["land bank", "local restaurants", {"weight": -1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["economic pressure", "retail barriers", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["economic pressure", "free food distribution", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["emotional support", "problem solving", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["pandemic", "food competition", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["csa boxes", "community health", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["marketing education", "farmers market", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["farm to school", "race", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["skill development", "financial barriers", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["availability", "community members", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["availability", "consumers", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["availability", "restaurant relationships", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["equity", "partnerships", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["local produce", "neighborhood conflict", {"weight": -1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["emergency boxes", "people of color", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["organizational adaptation", "free food", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["systemic racism", "urban farming", {"weight": -1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["remote work", "business owners", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["farm aggregation", "farmers", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["resilience", "quality of life", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["local farms", "market access", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["local farms", "health", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["food boxes", "local production", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["community members", "dedicated customers", {"weight": 1.0, "confidence": 0.6999999999999998, "type": "inter_cluster", "style": "solid"}], ["agricultural training", "growers", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["agricultural training", "food policy council", {"weight": 0.5, "confidence": 0.275, "type": "inter_cluster", "style": "solid"}], ["agricultural training", "consumer", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["meal programs", "incentive structures", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["retail survival", "demand", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["retail survival", "produce", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["food options", "retailers", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["local farming", "producers", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["local farming", "marketing challenges", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["zero interest loans", "behavioral shifts", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["emergency food sector", "collaboration", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["farmer training", "food producers", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["farmers competition", "fresh food", {"weight": -1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["farmers competition", "market rates", {"weight": -1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["quality of life", "covid-19", {"weight": -1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["quality of life", "food skills", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["quality of life", "flint", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["quality of life", "cost effectiveness", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["urban gardening", "market access", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["production costs", "consumer", {"weight": -1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["production costs", "fresh food", {"weight": -1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["headstart families", "food distribution", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["community access", "free food", {"weight": 1.0, "confidence": 0.725, "type": "inter_cluster", "style": "solid"}], ["community access", "food distribution", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["food competition", "urban farming", {"weight": -1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["food competition", "local economy", {"weight": -1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["community", "local production", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["market rates", "psychological stress", {"weight": -1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["market access", "zero interest loans", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["market access", "educational gap", {"weight": -1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["agricultural equity", "land bank", {"weight": -1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["agricultural equity", "demand increase", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["agricultural equity", "harvest process", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["emergency sector", "incentive structures", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["emergency sector", "partnerships", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["cultural traditions", "ebt", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["marketing challenges", "land access", {"weight": -1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["community building", "agricultural equity", {"weight": 1.0, "confidence": 0.8000000000000002, "type": "inter_cluster", "style": "solid"}], ["community building", "nutritious food", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["staffing reduction", "retail survival", {"weight": -1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["business coaching", "partnerships", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["business coaching", "technical assistance", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["hoop houses", "nutritious foods", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["hoop houses", "food affordability", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["hoop houses", "quality of food", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["customer loyalty", "locally grown food", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["food pricing", "nutrition", {"weight": -1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["incentive structures", "food policy council", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["water access", "food quality", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["water access", "supplemental programs", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["problem solving", "farmer collaboration", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["problem solving", "michigan produce", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["affordability", "psychological stress", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["affordability", "community empowerment", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["public health", "online store", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["public health", "food producers", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["schools", "catering demands", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["convenience stores", "farming viability", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["convenience foods", "local farms", {"weight": -1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["conservation district", "food access", {"weight": 1.0, "confidence": 0.6000000000000001, "type": "inter_cluster", "style": "solid"}], ["conservation district", "demand increase", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}]];
        const clusterConcepts = {};
        const clusterEdges = {};
        
        let network;
        let currentView = 'clusters';
        let currentCluster = null;
        let minConfidence = 0.3;
        
        // Network options
        const options = {
            nodes: {
                font: { color: 'white', size: 14 },
                borderWidth: 2,
                shadow: true
            },
            edges: {
                arrows: { to: { enabled: true, scaleFactor: 1.2 } },
                shadow: true,
                smooth: { type: 'continuous' }
            },
            physics: {
                stabilization: { iterations: 100 },
                barnesHut: {
                    gravitationalConstant: -8000,
                    springConstant: 0.001,
                    springLength: 200
                }
            },
            interaction: {
                hover: true,
                selectConnectedEdges: false
            }
        };
        
        function initNetwork() {
            const container = document.getElementById('network');
            const data = getClusterViewData();
            network = new vis.Network(container, data, options);
            
            // Handle cluster clicks for drill-down
            network.on("click", function(params) {
                if (params.nodes.length > 0 && currentView === 'clusters') {
                    const clickedNode = params.nodes[0];
                    if (clusterConcepts[clickedNode]) {
                        showClusterDetail(clickedNode);
                    }
                }
            });
        }
        
        function getClusterViewData() {
            const nodes = [];
            const edges = [];
            
            // Add cluster nodes
            Object.entries(clusterData).forEach(([clusterId, data]) => {
                const concepts = data.concepts || [];
                const conceptsStr = Array.isArray(concepts) ? concepts.join(', ') : concepts;
                
                nodes.push({
                    id: clusterId,
                    label: clusterId,
                    title: `Cluster: ${clusterId}\nConcepts: ${conceptsStr}\nClick to explore internal relationships`,
                    color: '#4A90E2',
                    size: 25 + (conceptsStr.split(',').length * 2),
                    font: { color: 'white' }
                });
            });
            
            // Add inter-cluster edges
            interClusterEdges.forEach(([source, target, edgeData]) => {
                const confidence = edgeData.confidence || 1.0;
                const weight = edgeData.weight || 0;
                
                if (confidence >= minConfidence) {
                    edges.push({
                        from: source,
                        to: target,
                        color: weight > 0 ? '#28A745' : '#DC3545',
                        width: Math.abs(weight) * 3 + 1,
                        title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                        dashes: false
                    });
                }
            });
            
            return { nodes: nodes, edges: edges };
        }
        
        function getClusterDetailData(clusterId) {
            const nodes = [];
            const edges = [];
            
            // Add concept nodes for this cluster
            if (clusterConcepts[clusterId]) {
                clusterConcepts[clusterId].forEach(([conceptId, data]) => {
                    nodes.push({
                        id: conceptId,
                        label: conceptId,
                        title: `Concept: ${conceptId}\nFrom cluster: ${clusterId}`,
                        color: '#FF9500',
                        size: 20,
                        font: { color: 'white' }
                    });
                });
            }
            
            // Add intra-cluster edges
            if (clusterEdges[clusterId]) {
                clusterEdges[clusterId].forEach(([source, target, edgeData]) => {
                    const confidence = edgeData.confidence || 1.0;
                    const weight = edgeData.weight || 0;
                    
                    if (confidence >= minConfidence) {
                        edges.push({
                            from: source,
                            to: target,
                            color: weight > 0 ? '#28A745' : '#DC3545',
                            width: Math.abs(weight) * 3 + 1,
                            title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                            dashes: true
                        });
                    }
                });
            }
            
            return { nodes: nodes, edges: edges };
        }
        
        function showClusterView() {
            currentView = 'clusters';
            currentCluster = null;
            const data = getClusterViewData();
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'none';
            document.getElementById('current-view').textContent = 'Cluster Overview';
        }
        
        function showClusterDetail(clusterId) {
            currentView = 'concepts';
            currentCluster = clusterId;
            const data = getClusterDetailData(clusterId);
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'inline-block';
            document.getElementById('current-view').textContent = `Inside Cluster: ${clusterId}`;
        }
        
        function updateConfidenceFilter(value) {
            minConfidence = parseFloat(value);
            document.getElementById('confidence-value').textContent = value;
            
            // Refresh current view
            if (currentView === 'clusters') {
                showClusterView();
            } else {
                showClusterDetail(currentCluster);
            }
        }
        
        // Initialize the network when page loads
        window.onload = function() {
            initNetwork();
        };
    </script>
</body>
</html>
