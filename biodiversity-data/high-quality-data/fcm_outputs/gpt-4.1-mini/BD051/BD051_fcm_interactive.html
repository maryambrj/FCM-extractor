
<!DOCTYPE html>
<html>
<head>
    <title>Hierarchical FCM Visualization</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 0; 
            padding: 20px;
            background: #f5f5f5;
        }
        
        #network { 
            width: 100%; 
            height: 600px; 
            border: 2px solid #ccc; 
            background: white;
            border-radius: 8px;
        }
        
        #controls {
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn {
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        
        .btn-primary { background: #4A90E2; color: white; }
        .btn-primary:hover { background: #357ABD; }
        
        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #545b62; }
        
        #current-view {
            font-weight: bold;
            color: #333;
            margin-left: 10px;
        }
        
        #legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-size: 12px;
            max-width: 200px;
        }
        
        .legend-item {
            margin: 5px 0;
            display: flex;
            align-items: center;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .legend-line {
            width: 20px;
            height: 2px;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <h1>Fuzzy Cognitive Map - Hierarchical View</h1>
    
    <div id="controls">
        <button class="btn btn-secondary" id="back-btn" onclick="showClusterView()" style="display: none;">
            ‚Üê Back to Clusters
        </button>
        <span id="current-view">Cluster Overview</span>
        <div style="float: right;">
            <label>Min Confidence: </label>
            <input type="range" id="confidence-slider" min="0" max="1" step="0.1" value="0.3" 
                   onchange="updateConfidenceFilter(this.value)">
            <span id="confidence-value">0.3</span>
        </div>
    </div>
    
    <div id="network"></div>
    
    <div id="legend">
        <h4>Legend</h4>
        <div class="legend-item">
            <div class="legend-color" style="background: #4A90E2;"></div>
            <span>Clusters</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #FF9500;"></div>
            <span>Concepts</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #28A745;"></div>
            <span>Positive relationship</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #DC3545;"></div>
            <span>Negative relationship</span>
        </div>
        <div style="margin-top: 10px; font-style: italic; color: #666;">
            Click clusters to explore internal concepts
        </div>
    </div>

    <script>
        // Embedded data
        const clusterData = {"storm impact": {"concepts": "storm impact", "concept_list": ["storm impact"], "type": "cluster", "node_size": 18, "label": "storm impact"}, "Water Conditions": {"concepts": "ocean city, patapsco river, potomac river, eastern shore, patuxent river, mercury contamination, fishing seasonality", "concept_list": ["ocean city", "patapsco river", "potomac river", "eastern shore", "patuxent river", "mercury contamination", "fishing seasonality"], "type": "cluster", "node_size": 36, "label": "Water Conditions"}, "Fish Consumption": {"concepts": "temperature tolerance, salinity, water salinity, water quality, tidal influence, non-tidal streams, fishing conditions, fishing tolerance", "concept_list": ["temperature tolerance", "salinity", "water salinity", "water quality", "tidal influence", "non-tidal streams", "fishing conditions", "fishing tolerance"], "type": "cluster", "node_size": 39, "label": "Fish Consumption"}, "Fishing Guidance": {"concepts": "fish taste, food preference, fish slime, fish seasoning, fish recipes, fish popularity, fish talk magazine, fish market, fish consumption", "concept_list": ["fish taste", "food preference", "fish slime", "fish seasoning", "fish recipes", "fish popularity", "fish talk magazine", "fish market", "fish consumption"], "type": "cluster", "node_size": 42, "label": "Fishing Guidance"}, "Fisheries Management": {"concepts": "guide fishermen, fishing reports, fishing interviews, fishing activism, fishing guide opinions, fishing communication, fishing logistics, fishing decision factors, fishing magazines, fishing knowledge, fishbrain app, fishing outreach, fishing leaders, social media fishing reports, fishing guides, air fryer, odenton, channels, public docks, founder, neighborhood dock, trash, work schedule, kayaking", "concept_list": ["guide fishermen", "fishing reports", "fishing interviews", "fishing activism", "fishing guide opinions", "fishing communication", "fishing logistics", "fishing decision factors", "fishing magazines", "fishing knowledge", "fishbrain app", "fishing outreach", "fishing leaders", "social media fishing reports", "fishing guides", "air fryer", "odenton", "channels", "public docks", "founder", "neighborhood dock", "trash", "work schedule", "kayaking"], "type": "cluster", "node_size": 87, "label": "Fisheries Management"}, "Regional Waterways": {"concepts": "fish regulations, fisheries management, fishing regulations, fish size limits, marine resource management, fishing habitat degradation, sediment runoff, fishing license, overfishing, marine lab, fish population dynamics, offshore species, fishing habitat, fishing species", "concept_list": ["fish regulations", "fisheries management", "fishing regulations", "fish size limits", "marine resource management", "fishing habitat degradation", "sediment runoff", "fishing license", "overfishing", "marine lab", "fish population dynamics", "offshore species", "fishing habitat", "fishing species"], "type": "cluster", "node_size": 57, "label": "Regional Waterways"}, "Fishing Practices": {"concepts": "fishing for food, freshwater fishing, recreational fishing, commercial fishing, kayak fishing, community fishing, recreational fishermen, recreational fishing pressure", "concept_list": ["fishing for food", "freshwater fishing", "recreational fishing", "commercial fishing", "kayak fishing", "community fishing", "recreational fishermen", "recreational fishing pressure"], "type": "cluster", "node_size": 39, "label": "Fishing Practices"}, "Marine Environmental Threats": {"concepts": "marine debris, sediment runoff, overfishing, mercury contamination", "concept_list": ["marine debris", "sediment runoff", "overfishing", "mercury contamination"], "type": "cluster", "node_size": 27, "label": "Marine Environmental Threats"}, "Fishing Timing Factors": {"concepts": "fishing seasons, fishing timing, fishing success factors, fishing patience, fishing pressure, fishing opportunities, fishing effort, fishing decision factors, fishing travel constraints, fishing motivation, fish bite patterns, fishing conditions, fishing hours, fishing season, fishing seasonality", "concept_list": ["fishing seasons", "fishing timing", "fishing success factors", "fishing patience", "fishing pressure", "fishing opportunities", "fishing effort", "fishing decision factors", "fishing travel constraints", "fishing motivation", "fish bite patterns", "fishing conditions", "fishing hours", "fishing season", "fishing seasonality"], "type": "cluster", "node_size": 60, "label": "Fishing Timing Factors"}, "Snakehead Fishing Impact": {"concepts": "fishing deterrent, fishing stress, fish mortality, fishing behavior, fish filleting, snakehead fishing, snakehead, snakehead fish", "concept_list": ["fishing deterrent", "fishing stress", "fish mortality", "fishing behavior", "fish filleting", "snakehead fishing", "snakehead", "snakehead fish"], "type": "cluster", "node_size": 39, "label": "Snakehead Fishing Impact"}, "Fishing Types": {"concepts": "crowded fishing spots, fishing access, fishing locations, fishing mobility, fishing location privacy, fishing site quality, fishing spots secrecy, fishing secrecy, fishing site selection", "concept_list": ["crowded fishing spots", "fishing access", "fishing locations", "fishing mobility", "fishing location privacy", "fishing site quality", "fishing spots secrecy", "fishing secrecy", "fishing site selection"], "type": "cluster", "node_size": 42, "label": "Fishing Types"}, "Tidal Fishing Species": {"concepts": "fishing community, tidal fishing, blue catfish, spawning, fish spawning, flounder, sea trout", "concept_list": ["fishing community", "tidal fishing", "blue catfish", "spawning", "fish spawning", "flounder", "sea trout"], "type": "cluster", "node_size": 36, "label": "Tidal Fishing Species"}, "Climate Impact": {"concepts": "climate change, hypoxia, weather, weather impact", "concept_list": ["climate change", "hypoxia", "weather", "weather impact"], "type": "cluster", "node_size": 27, "label": "Climate Impact"}, "Wind Constraints": {"concepts": "wind limitation, wind conditions", "concept_list": ["wind limitation", "wind conditions"], "type": "cluster", "node_size": 21, "label": "Wind Constraints"}, "Impact Assessment Dynamics": {"concepts": "development impact, policy impact, tree loss, lifestyle change, ceo, mental modeler, system dynamics, impact assessment, telemetry data, economic benefits, littering, commercial market, social benefits, pcbs, ceo policy", "concept_list": ["development impact", "policy impact", "tree loss", "lifestyle change", "ceo", "mental modeler", "system dynamics", "impact assessment", "telemetry data", "economic benefits", "littering", "commercial market", "social benefits", "pcbs", "ceo policy"], "type": "cluster", "node_size": 60, "label": "Impact Assessment Dynamics"}, "Access and Parking": {"concepts": "parking availability, parking limitation, travel time, public access, public access fishing", "concept_list": ["parking availability", "parking limitation", "travel time", "public access", "public access fishing"], "type": "cluster", "node_size": 30, "label": "Access and Parking"}, "Bay Fishing Practices": {"concepts": "catch and release, vacation fishing, savern, day trips, main bay, magabee, chesapeake bay, pickerel, striped bass, trash accumulation, kayak size, kayaking, largemouth bass, slot limits, red drum, tide timing", "concept_list": ["catch and release", "vacation fishing", "savern", "day trips", "main bay", "magabee", "chesapeake bay", "pickerel", "striped bass", "trash accumulation", "kayak size", "kayaking", "largemouth bass", "slot limits", "red drum", "tide timing"], "type": "cluster", "node_size": 63, "label": "Bay Fishing Practices"}, "Maryland Conservation Agencies": {"concepts": "cca maryland, maryland dnr", "concept_list": ["cca maryland", "maryland dnr"], "type": "cluster", "node_size": 21, "label": "Maryland Conservation Agencies"}, "Habitat Characteristics": {"concepts": "habitat, habitat niche, aquatic grasses, natural habitat, shallow habitat, habitat quality, degraded habitat", "concept_list": ["habitat", "habitat niche", "aquatic grasses", "natural habitat", "shallow habitat", "habitat quality", "degraded habitat"], "type": "cluster", "node_size": 36, "label": "Habitat Characteristics"}, "Ecosystem Management": {"concepts": "habitat degradation, local management, social-ecological system, environmental factors, ecological health", "concept_list": ["habitat degradation", "local management", "social-ecological system", "environmental factors", "ecological health"], "type": "cluster", "node_size": 30, "label": "Ecosystem Management"}, "Southern Maryland Conservation": {"concepts": "department of natural resources (dnr), southern anne arundel county, southern maryland, anne arundel county, blackwater national wildlife refuge, environmental group", "concept_list": ["department of natural resources (dnr)", "southern anne arundel county", "southern maryland", "anne arundel county", "blackwater national wildlife refuge", "environmental group"], "type": "cluster", "node_size": 33, "label": "Southern Maryland Conservation"}, "Biodiversity Dynamics": {"concepts": "species competition, species diversity, biodiversity, biodiversity impact, species populations", "concept_list": ["species competition", "species diversity", "biodiversity", "biodiversity impact", "species populations"], "type": "cluster", "node_size": 30, "label": "Biodiversity Dynamics"}, "Invasive Predation": {"concepts": "invasive species, predation", "concept_list": ["invasive species", "predation"], "type": "cluster", "node_size": 21, "label": "Invasive Predation"}};
        const conceptData = {"ocean city": {"concepts": "ocean city", "type": "concept", "cluster": "Water Conditions", "node_size": 10, "label": "ocean city"}, "patapsco river": {"concepts": "patapsco river", "type": "concept", "cluster": "Water Conditions", "node_size": 10, "label": "patapsco river"}, "potomac river": {"concepts": "potomac river", "type": "concept", "cluster": "Water Conditions", "node_size": 10, "label": "potomac river"}, "eastern shore": {"concepts": "eastern shore", "type": "concept", "cluster": "Water Conditions", "node_size": 10, "label": "eastern shore"}, "patuxent river": {"concepts": "patuxent river", "type": "concept", "cluster": "Water Conditions", "node_size": 10, "label": "patuxent river"}, "mercury contamination": {"concepts": "mercury contamination", "type": "concept", "cluster": "Water Conditions", "node_size": 10, "label": "mercury contamination"}, "fishing seasonality": {"concepts": "fishing seasonality", "type": "concept", "cluster": "Water Conditions", "node_size": 10, "label": "fishing seasonality"}, "temperature tolerance": {"concepts": "temperature tolerance", "type": "concept", "cluster": "Fish Consumption", "node_size": 10, "label": "temperature tolerance"}, "salinity": {"concepts": "salinity", "type": "concept", "cluster": "Fish Consumption", "node_size": 10, "label": "salinity"}, "water salinity": {"concepts": "water salinity", "type": "concept", "cluster": "Fish Consumption", "node_size": 10, "label": "water salinity"}, "water quality": {"concepts": "water quality", "type": "concept", "cluster": "Fish Consumption", "node_size": 10, "label": "water quality"}, "tidal influence": {"concepts": "tidal influence", "type": "concept", "cluster": "Fish Consumption", "node_size": 10, "label": "tidal influence"}, "non-tidal streams": {"concepts": "non-tidal streams", "type": "concept", "cluster": "Fish Consumption", "node_size": 10, "label": "non-tidal streams"}, "fishing conditions": {"concepts": "fishing conditions", "type": "concept", "cluster": "Fish Consumption", "node_size": 10, "label": "fishing conditions"}, "fishing tolerance": {"concepts": "fishing tolerance", "type": "concept", "cluster": "Fish Consumption", "node_size": 10, "label": "fishing tolerance"}, "fish taste": {"concepts": "fish taste", "type": "concept", "cluster": "Fishing Guidance", "node_size": 10, "label": "fish taste"}, "food preference": {"concepts": "food preference", "type": "concept", "cluster": "Fishing Guidance", "node_size": 10, "label": "food preference"}, "fish slime": {"concepts": "fish slime", "type": "concept", "cluster": "Fishing Guidance", "node_size": 10, "label": "fish slime"}, "fish seasoning": {"concepts": "fish seasoning", "type": "concept", "cluster": "Fishing Guidance", "node_size": 10, "label": "fish seasoning"}, "fish recipes": {"concepts": "fish recipes", "type": "concept", "cluster": "Fishing Guidance", "node_size": 10, "label": "fish recipes"}, "fish popularity": {"concepts": "fish popularity", "type": "concept", "cluster": "Fishing Guidance", "node_size": 10, "label": "fish popularity"}, "fish talk magazine": {"concepts": "fish talk magazine", "type": "concept", "cluster": "Fishing Guidance", "node_size": 10, "label": "fish talk magazine"}, "fish market": {"concepts": "fish market", "type": "concept", "cluster": "Fishing Guidance", "node_size": 10, "label": "fish market"}, "fish consumption": {"concepts": "fish consumption", "type": "concept", "cluster": "Fishing Guidance", "node_size": 10, "label": "fish consumption"}, "guide fishermen": {"concepts": "guide fishermen", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "guide fishermen"}, "fishing reports": {"concepts": "fishing reports", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fishing reports"}, "fishing interviews": {"concepts": "fishing interviews", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fishing interviews"}, "fishing activism": {"concepts": "fishing activism", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fishing activism"}, "fishing guide opinions": {"concepts": "fishing guide opinions", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fishing guide opinions"}, "fishing communication": {"concepts": "fishing communication", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fishing communication"}, "fishing logistics": {"concepts": "fishing logistics", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fishing logistics"}, "fishing decision factors": {"concepts": "fishing decision factors", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fishing decision factors"}, "fishing magazines": {"concepts": "fishing magazines", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fishing magazines"}, "fishing knowledge": {"concepts": "fishing knowledge", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fishing knowledge"}, "fishbrain app": {"concepts": "fishbrain app", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fishbrain app"}, "fishing outreach": {"concepts": "fishing outreach", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fishing outreach"}, "fishing leaders": {"concepts": "fishing leaders", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fishing leaders"}, "social media fishing reports": {"concepts": "social media fishing reports", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "social media fishing reports"}, "fishing guides": {"concepts": "fishing guides", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fishing guides"}, "air fryer": {"concepts": "air fryer", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "air fryer"}, "odenton": {"concepts": "odenton", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "odenton"}, "channels": {"concepts": "channels", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "channels"}, "public docks": {"concepts": "public docks", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "public docks"}, "founder": {"concepts": "founder", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "founder"}, "neighborhood dock": {"concepts": "neighborhood dock", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "neighborhood dock"}, "trash": {"concepts": "trash", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "trash"}, "work schedule": {"concepts": "work schedule", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "work schedule"}, "kayaking": {"concepts": "kayaking", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "kayaking"}, "fish regulations": {"concepts": "fish regulations", "type": "concept", "cluster": "Regional Waterways", "node_size": 10, "label": "fish regulations"}, "fisheries management": {"concepts": "fisheries management", "type": "concept", "cluster": "Regional Waterways", "node_size": 10, "label": "fisheries management"}, "fishing regulations": {"concepts": "fishing regulations", "type": "concept", "cluster": "Regional Waterways", "node_size": 10, "label": "fishing regulations"}, "fish size limits": {"concepts": "fish size limits", "type": "concept", "cluster": "Regional Waterways", "node_size": 10, "label": "fish size limits"}, "marine resource management": {"concepts": "marine resource management", "type": "concept", "cluster": "Regional Waterways", "node_size": 10, "label": "marine resource management"}, "fishing habitat degradation": {"concepts": "fishing habitat degradation", "type": "concept", "cluster": "Regional Waterways", "node_size": 10, "label": "fishing habitat degradation"}, "sediment runoff": {"concepts": "sediment runoff", "type": "concept", "cluster": "Regional Waterways", "node_size": 10, "label": "sediment runoff"}, "fishing license": {"concepts": "fishing license", "type": "concept", "cluster": "Regional Waterways", "node_size": 10, "label": "fishing license"}, "overfishing": {"concepts": "overfishing", "type": "concept", "cluster": "Regional Waterways", "node_size": 10, "label": "overfishing"}, "marine lab": {"concepts": "marine lab", "type": "concept", "cluster": "Regional Waterways", "node_size": 10, "label": "marine lab"}, "fish population dynamics": {"concepts": "fish population dynamics", "type": "concept", "cluster": "Regional Waterways", "node_size": 10, "label": "fish population dynamics"}, "offshore species": {"concepts": "offshore species", "type": "concept", "cluster": "Regional Waterways", "node_size": 10, "label": "offshore species"}, "fishing habitat": {"concepts": "fishing habitat", "type": "concept", "cluster": "Regional Waterways", "node_size": 10, "label": "fishing habitat"}, "fishing species": {"concepts": "fishing species", "type": "concept", "cluster": "Regional Waterways", "node_size": 10, "label": "fishing species"}, "fishing for food": {"concepts": "fishing for food", "type": "concept", "cluster": "Fishing Practices", "node_size": 10, "label": "fishing for food"}, "freshwater fishing": {"concepts": "freshwater fishing", "type": "concept", "cluster": "Fishing Practices", "node_size": 10, "label": "freshwater fishing"}, "recreational fishing": {"concepts": "recreational fishing", "type": "concept", "cluster": "Fishing Practices", "node_size": 10, "label": "recreational fishing"}, "commercial fishing": {"concepts": "commercial fishing", "type": "concept", "cluster": "Fishing Practices", "node_size": 10, "label": "commercial fishing"}, "kayak fishing": {"concepts": "kayak fishing", "type": "concept", "cluster": "Fishing Practices", "node_size": 10, "label": "kayak fishing"}, "community fishing": {"concepts": "community fishing", "type": "concept", "cluster": "Fishing Practices", "node_size": 10, "label": "community fishing"}, "recreational fishermen": {"concepts": "recreational fishermen", "type": "concept", "cluster": "Fishing Practices", "node_size": 10, "label": "recreational fishermen"}, "recreational fishing pressure": {"concepts": "recreational fishing pressure", "type": "concept", "cluster": "Fishing Practices", "node_size": 10, "label": "recreational fishing pressure"}, "marine debris": {"concepts": "marine debris", "type": "concept", "cluster": "Marine Environmental Threats", "node_size": 10, "label": "marine debris"}, "fishing seasons": {"concepts": "fishing seasons", "type": "concept", "cluster": "Fishing Timing Factors", "node_size": 10, "label": "fishing seasons"}, "fishing timing": {"concepts": "fishing timing", "type": "concept", "cluster": "Fishing Timing Factors", "node_size": 10, "label": "fishing timing"}, "fishing success factors": {"concepts": "fishing success factors", "type": "concept", "cluster": "Fishing Timing Factors", "node_size": 10, "label": "fishing success factors"}, "fishing patience": {"concepts": "fishing patience", "type": "concept", "cluster": "Fishing Timing Factors", "node_size": 10, "label": "fishing patience"}, "fishing pressure": {"concepts": "fishing pressure", "type": "concept", "cluster": "Fishing Timing Factors", "node_size": 10, "label": "fishing pressure"}, "fishing opportunities": {"concepts": "fishing opportunities", "type": "concept", "cluster": "Fishing Timing Factors", "node_size": 10, "label": "fishing opportunities"}, "fishing effort": {"concepts": "fishing effort", "type": "concept", "cluster": "Fishing Timing Factors", "node_size": 10, "label": "fishing effort"}, "fishing travel constraints": {"concepts": "fishing travel constraints", "type": "concept", "cluster": "Fishing Timing Factors", "node_size": 10, "label": "fishing travel constraints"}, "fishing motivation": {"concepts": "fishing motivation", "type": "concept", "cluster": "Fishing Timing Factors", "node_size": 10, "label": "fishing motivation"}, "fish bite patterns": {"concepts": "fish bite patterns", "type": "concept", "cluster": "Fishing Timing Factors", "node_size": 10, "label": "fish bite patterns"}, "fishing hours": {"concepts": "fishing hours", "type": "concept", "cluster": "Fishing Timing Factors", "node_size": 10, "label": "fishing hours"}, "fishing season": {"concepts": "fishing season", "type": "concept", "cluster": "Fishing Timing Factors", "node_size": 10, "label": "fishing season"}, "fishing deterrent": {"concepts": "fishing deterrent", "type": "concept", "cluster": "Snakehead Fishing Impact", "node_size": 10, "label": "fishing deterrent"}, "fishing stress": {"concepts": "fishing stress", "type": "concept", "cluster": "Snakehead Fishing Impact", "node_size": 10, "label": "fishing stress"}, "fish mortality": {"concepts": "fish mortality", "type": "concept", "cluster": "Snakehead Fishing Impact", "node_size": 10, "label": "fish mortality"}, "fishing behavior": {"concepts": "fishing behavior", "type": "concept", "cluster": "Snakehead Fishing Impact", "node_size": 10, "label": "fishing behavior"}, "fish filleting": {"concepts": "fish filleting", "type": "concept", "cluster": "Snakehead Fishing Impact", "node_size": 10, "label": "fish filleting"}, "snakehead fishing": {"concepts": "snakehead fishing", "type": "concept", "cluster": "Snakehead Fishing Impact", "node_size": 10, "label": "snakehead fishing"}, "snakehead": {"concepts": "snakehead", "type": "concept", "cluster": "Snakehead Fishing Impact", "node_size": 10, "label": "snakehead"}, "snakehead fish": {"concepts": "snakehead fish", "type": "concept", "cluster": "Snakehead Fishing Impact", "node_size": 10, "label": "snakehead fish"}, "crowded fishing spots": {"concepts": "crowded fishing spots", "type": "concept", "cluster": "Fishing Types", "node_size": 10, "label": "crowded fishing spots"}, "fishing access": {"concepts": "fishing access", "type": "concept", "cluster": "Fishing Types", "node_size": 10, "label": "fishing access"}, "fishing locations": {"concepts": "fishing locations", "type": "concept", "cluster": "Fishing Types", "node_size": 10, "label": "fishing locations"}, "fishing mobility": {"concepts": "fishing mobility", "type": "concept", "cluster": "Fishing Types", "node_size": 10, "label": "fishing mobility"}, "fishing location privacy": {"concepts": "fishing location privacy", "type": "concept", "cluster": "Fishing Types", "node_size": 10, "label": "fishing location privacy"}, "fishing site quality": {"concepts": "fishing site quality", "type": "concept", "cluster": "Fishing Types", "node_size": 10, "label": "fishing site quality"}, "fishing spots secrecy": {"concepts": "fishing spots secrecy", "type": "concept", "cluster": "Fishing Types", "node_size": 10, "label": "fishing spots secrecy"}, "fishing secrecy": {"concepts": "fishing secrecy", "type": "concept", "cluster": "Fishing Types", "node_size": 10, "label": "fishing secrecy"}, "fishing site selection": {"concepts": "fishing site selection", "type": "concept", "cluster": "Fishing Types", "node_size": 10, "label": "fishing site selection"}, "fishing community": {"concepts": "fishing community", "type": "concept", "cluster": "Tidal Fishing Species", "node_size": 10, "label": "fishing community"}, "tidal fishing": {"concepts": "tidal fishing", "type": "concept", "cluster": "Tidal Fishing Species", "node_size": 10, "label": "tidal fishing"}, "blue catfish": {"concepts": "blue catfish", "type": "concept", "cluster": "Tidal Fishing Species", "node_size": 10, "label": "blue catfish"}, "spawning": {"concepts": "spawning", "type": "concept", "cluster": "Tidal Fishing Species", "node_size": 10, "label": "spawning"}, "fish spawning": {"concepts": "fish spawning", "type": "concept", "cluster": "Tidal Fishing Species", "node_size": 10, "label": "fish spawning"}, "flounder": {"concepts": "flounder", "type": "concept", "cluster": "Tidal Fishing Species", "node_size": 10, "label": "flounder"}, "sea trout": {"concepts": "sea trout", "type": "concept", "cluster": "Tidal Fishing Species", "node_size": 10, "label": "sea trout"}, "climate change": {"concepts": "climate change", "type": "concept", "cluster": "Climate Impact", "node_size": 10, "label": "climate change"}, "hypoxia": {"concepts": "hypoxia", "type": "concept", "cluster": "Climate Impact", "node_size": 10, "label": "hypoxia"}, "weather": {"concepts": "weather", "type": "concept", "cluster": "Climate Impact", "node_size": 10, "label": "weather"}, "weather impact": {"concepts": "weather impact", "type": "concept", "cluster": "Climate Impact", "node_size": 10, "label": "weather impact"}, "wind limitation": {"concepts": "wind limitation", "type": "concept", "cluster": "Wind Constraints", "node_size": 10, "label": "wind limitation"}, "wind conditions": {"concepts": "wind conditions", "type": "concept", "cluster": "Wind Constraints", "node_size": 10, "label": "wind conditions"}, "development impact": {"concepts": "development impact", "type": "concept", "cluster": "Impact Assessment Dynamics", "node_size": 10, "label": "development impact"}, "policy impact": {"concepts": "policy impact", "type": "concept", "cluster": "Impact Assessment Dynamics", "node_size": 10, "label": "policy impact"}, "tree loss": {"concepts": "tree loss", "type": "concept", "cluster": "Impact Assessment Dynamics", "node_size": 10, "label": "tree loss"}, "lifestyle change": {"concepts": "lifestyle change", "type": "concept", "cluster": "Impact Assessment Dynamics", "node_size": 10, "label": "lifestyle change"}, "ceo": {"concepts": "ceo", "type": "concept", "cluster": "Impact Assessment Dynamics", "node_size": 10, "label": "ceo"}, "mental modeler": {"concepts": "mental modeler", "type": "concept", "cluster": "Impact Assessment Dynamics", "node_size": 10, "label": "mental modeler"}, "system dynamics": {"concepts": "system dynamics", "type": "concept", "cluster": "Impact Assessment Dynamics", "node_size": 10, "label": "system dynamics"}, "impact assessment": {"concepts": "impact assessment", "type": "concept", "cluster": "Impact Assessment Dynamics", "node_size": 10, "label": "impact assessment"}, "telemetry data": {"concepts": "telemetry data", "type": "concept", "cluster": "Impact Assessment Dynamics", "node_size": 10, "label": "telemetry data"}, "economic benefits": {"concepts": "economic benefits", "type": "concept", "cluster": "Impact Assessment Dynamics", "node_size": 10, "label": "economic benefits"}, "littering": {"concepts": "littering", "type": "concept", "cluster": "Impact Assessment Dynamics", "node_size": 10, "label": "littering"}, "commercial market": {"concepts": "commercial market", "type": "concept", "cluster": "Impact Assessment Dynamics", "node_size": 10, "label": "commercial market"}, "social benefits": {"concepts": "social benefits", "type": "concept", "cluster": "Impact Assessment Dynamics", "node_size": 10, "label": "social benefits"}, "pcbs": {"concepts": "pcbs", "type": "concept", "cluster": "Impact Assessment Dynamics", "node_size": 10, "label": "pcbs"}, "ceo policy": {"concepts": "ceo policy", "type": "concept", "cluster": "Impact Assessment Dynamics", "node_size": 10, "label": "ceo policy"}, "parking availability": {"concepts": "parking availability", "type": "concept", "cluster": "Access and Parking", "node_size": 10, "label": "parking availability"}, "parking limitation": {"concepts": "parking limitation", "type": "concept", "cluster": "Access and Parking", "node_size": 10, "label": "parking limitation"}, "travel time": {"concepts": "travel time", "type": "concept", "cluster": "Access and Parking", "node_size": 10, "label": "travel time"}, "public access": {"concepts": "public access", "type": "concept", "cluster": "Access and Parking", "node_size": 10, "label": "public access"}, "public access fishing": {"concepts": "public access fishing", "type": "concept", "cluster": "Access and Parking", "node_size": 10, "label": "public access fishing"}, "catch and release": {"concepts": "catch and release", "type": "concept", "cluster": "Bay Fishing Practices", "node_size": 10, "label": "catch and release"}, "vacation fishing": {"concepts": "vacation fishing", "type": "concept", "cluster": "Bay Fishing Practices", "node_size": 10, "label": "vacation fishing"}, "savern": {"concepts": "savern", "type": "concept", "cluster": "Bay Fishing Practices", "node_size": 10, "label": "savern"}, "day trips": {"concepts": "day trips", "type": "concept", "cluster": "Bay Fishing Practices", "node_size": 10, "label": "day trips"}, "main bay": {"concepts": "main bay", "type": "concept", "cluster": "Bay Fishing Practices", "node_size": 10, "label": "main bay"}, "magabee": {"concepts": "magabee", "type": "concept", "cluster": "Bay Fishing Practices", "node_size": 10, "label": "magabee"}, "chesapeake bay": {"concepts": "chesapeake bay", "type": "concept", "cluster": "Bay Fishing Practices", "node_size": 10, "label": "chesapeake bay"}, "pickerel": {"concepts": "pickerel", "type": "concept", "cluster": "Bay Fishing Practices", "node_size": 10, "label": "pickerel"}, "striped bass": {"concepts": "striped bass", "type": "concept", "cluster": "Bay Fishing Practices", "node_size": 10, "label": "striped bass"}, "trash accumulation": {"concepts": "trash accumulation", "type": "concept", "cluster": "Bay Fishing Practices", "node_size": 10, "label": "trash accumulation"}, "kayak size": {"concepts": "kayak size", "type": "concept", "cluster": "Bay Fishing Practices", "node_size": 10, "label": "kayak size"}, "largemouth bass": {"concepts": "largemouth bass", "type": "concept", "cluster": "Bay Fishing Practices", "node_size": 10, "label": "largemouth bass"}, "slot limits": {"concepts": "slot limits", "type": "concept", "cluster": "Bay Fishing Practices", "node_size": 10, "label": "slot limits"}, "red drum": {"concepts": "red drum", "type": "concept", "cluster": "Bay Fishing Practices", "node_size": 10, "label": "red drum"}, "tide timing": {"concepts": "tide timing", "type": "concept", "cluster": "Bay Fishing Practices", "node_size": 10, "label": "tide timing"}, "cca maryland": {"concepts": "cca maryland", "type": "concept", "cluster": "Maryland Conservation Agencies", "node_size": 10, "label": "cca maryland"}, "maryland dnr": {"concepts": "maryland dnr", "type": "concept", "cluster": "Maryland Conservation Agencies", "node_size": 10, "label": "maryland dnr"}, "habitat": {"concepts": "habitat", "type": "concept", "cluster": "Habitat Characteristics", "node_size": 10, "label": "habitat"}, "habitat niche": {"concepts": "habitat niche", "type": "concept", "cluster": "Habitat Characteristics", "node_size": 10, "label": "habitat niche"}, "aquatic grasses": {"concepts": "aquatic grasses", "type": "concept", "cluster": "Habitat Characteristics", "node_size": 10, "label": "aquatic grasses"}, "natural habitat": {"concepts": "natural habitat", "type": "concept", "cluster": "Habitat Characteristics", "node_size": 10, "label": "natural habitat"}, "shallow habitat": {"concepts": "shallow habitat", "type": "concept", "cluster": "Habitat Characteristics", "node_size": 10, "label": "shallow habitat"}, "habitat quality": {"concepts": "habitat quality", "type": "concept", "cluster": "Habitat Characteristics", "node_size": 10, "label": "habitat quality"}, "degraded habitat": {"concepts": "degraded habitat", "type": "concept", "cluster": "Habitat Characteristics", "node_size": 10, "label": "degraded habitat"}, "habitat degradation": {"concepts": "habitat degradation", "type": "concept", "cluster": "Ecosystem Management", "node_size": 10, "label": "habitat degradation"}, "local management": {"concepts": "local management", "type": "concept", "cluster": "Ecosystem Management", "node_size": 10, "label": "local management"}, "social-ecological system": {"concepts": "social-ecological system", "type": "concept", "cluster": "Ecosystem Management", "node_size": 10, "label": "social-ecological system"}, "environmental factors": {"concepts": "environmental factors", "type": "concept", "cluster": "Ecosystem Management", "node_size": 10, "label": "environmental factors"}, "ecological health": {"concepts": "ecological health", "type": "concept", "cluster": "Ecosystem Management", "node_size": 10, "label": "ecological health"}, "department of natural resources (dnr)": {"concepts": "department of natural resources (dnr)", "type": "concept", "cluster": "Southern Maryland Conservation", "node_size": 10, "label": "department of natural resources (dnr)"}, "southern anne arundel county": {"concepts": "southern anne arundel county", "type": "concept", "cluster": "Southern Maryland Conservation", "node_size": 10, "label": "southern anne arundel county"}, "southern maryland": {"concepts": "southern maryland", "type": "concept", "cluster": "Southern Maryland Conservation", "node_size": 10, "label": "southern maryland"}, "anne arundel county": {"concepts": "anne arundel county", "type": "concept", "cluster": "Southern Maryland Conservation", "node_size": 10, "label": "anne arundel county"}, "blackwater national wildlife refuge": {"concepts": "blackwater national wildlife refuge", "type": "concept", "cluster": "Southern Maryland Conservation", "node_size": 10, "label": "blackwater national wildlife refuge"}, "environmental group": {"concepts": "environmental group", "type": "concept", "cluster": "Southern Maryland Conservation", "node_size": 10, "label": "environmental group"}, "species competition": {"concepts": "species competition", "type": "concept", "cluster": "Biodiversity Dynamics", "node_size": 10, "label": "species competition"}, "species diversity": {"concepts": "species diversity", "type": "concept", "cluster": "Biodiversity Dynamics", "node_size": 10, "label": "species diversity"}, "biodiversity": {"concepts": "biodiversity", "type": "concept", "cluster": "Biodiversity Dynamics", "node_size": 10, "label": "biodiversity"}, "biodiversity impact": {"concepts": "biodiversity impact", "type": "concept", "cluster": "Biodiversity Dynamics", "node_size": 10, "label": "biodiversity impact"}, "species populations": {"concepts": "species populations", "type": "concept", "cluster": "Biodiversity Dynamics", "node_size": 10, "label": "species populations"}, "invasive species": {"concepts": "invasive species", "type": "concept", "cluster": "Invasive Predation", "node_size": 10, "label": "invasive species"}, "predation": {"concepts": "predation", "type": "concept", "cluster": "Invasive Predation", "node_size": 10, "label": "predation"}};
        const interClusterEdges = [["storm impact", "Bay Fishing Practices", {"weight": -1.0, "confidence": 0.8300000000000001, "type": "inter_cluster", "style": "solid"}], ["Water Conditions", "Biodiversity Dynamics", {"weight": -0.2, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["Water Conditions", "Tidal Fishing Species", {"weight": 1.0, "confidence": 0.8299999999999998, "type": "inter_cluster", "style": "solid"}], ["Water Conditions", "Habitat Characteristics", {"weight": -0.2, "confidence": 0.8300000000000001, "type": "inter_cluster", "style": "solid"}], ["Water Conditions", "Fishing Guidance", {"weight": -0.3333333333333333, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["Water Conditions", "Fishing Types", {"weight": -1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["Fish Consumption", "Bay Fishing Practices", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["Fisheries Management", "Fishing Types", {"weight": 1.0, "confidence": 0.8375, "type": "inter_cluster", "style": "solid"}], ["Fisheries Management", "Maryland Conservation Agencies", {"weight": 1.0, "confidence": 0.775, "type": "inter_cluster", "style": "solid"}], ["Fisheries Management", "Southern Maryland Conservation", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["Fisheries Management", "Marine Environmental Threats", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["Regional Waterways", "Fishing Timing Factors", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["Regional Waterways", "Tidal Fishing Species", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["Regional Waterways", "Bay Fishing Practices", {"weight": 1.0, "confidence": 0.825, "type": "inter_cluster", "style": "solid"}], ["Marine Environmental Threats", "Ecosystem Management", {"weight": -0.6, "confidence": 0.9200000000000002, "type": "inter_cluster", "style": "solid"}], ["Marine Environmental Threats", "Regional Waterways", {"weight": 0.6, "confidence": 0.8099999999999999, "type": "inter_cluster", "style": "solid"}], ["Marine Environmental Threats", "Maryland Conservation Agencies", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["Fishing Timing Factors", "Biodiversity Dynamics", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["Fishing Timing Factors", "Invasive Predation", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["Snakehead Fishing Impact", "Invasive Predation", {"weight": 1.0, "confidence": 0.8875, "type": "inter_cluster", "style": "solid"}], ["Snakehead Fishing Impact", "Fishing Timing Factors", {"weight": 1.0, "confidence": 0.875, "type": "inter_cluster", "style": "solid"}], ["Snakehead Fishing Impact", "Wind Constraints", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["Tidal Fishing Species", "Maryland Conservation Agencies", {"weight": 1.0, "confidence": 0.7166666666666667, "type": "inter_cluster", "style": "solid"}], ["Climate Impact", "Habitat Characteristics", {"weight": -1.0, "confidence": 0.8833333333333333, "type": "inter_cluster", "style": "solid"}], ["Climate Impact", "storm impact", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["Wind Constraints", "Fishing Practices", {"weight": -1.0, "confidence": 0.8400000000000001, "type": "inter_cluster", "style": "solid"}], ["Wind Constraints", "Water Conditions", {"weight": -1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["Impact Assessment Dynamics", "Ecosystem Management", {"weight": 0.6, "confidence": 0.86, "type": "inter_cluster", "style": "solid"}], ["Impact Assessment Dynamics", "Invasive Predation", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["Access and Parking", "Bay Fishing Practices", {"weight": 1.0, "confidence": 0.86, "type": "inter_cluster", "style": "solid"}], ["Access and Parking", "Fishing Practices", {"weight": 1.0, "confidence": 0.9, "type": "inter_cluster", "style": "solid"}], ["Bay Fishing Practices", "Southern Maryland Conservation", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["Maryland Conservation Agencies", "Tidal Fishing Species", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["Maryland Conservation Agencies", "Biodiversity Dynamics", {"weight": 1.0, "confidence": 0.71, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Management", "Fisheries Management", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["Invasive Predation", "Fishing Guidance", {"weight": -1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}]];
        const clusterConcepts = {"Water Conditions": [["ocean city", {"concepts": "ocean city", "type": "concept", "cluster": "Water Conditions", "node_size": 10, "label": "ocean city"}], ["patapsco river", {"concepts": "patapsco river", "type": "concept", "cluster": "Water Conditions", "node_size": 10, "label": "patapsco river"}], ["potomac river", {"concepts": "potomac river", "type": "concept", "cluster": "Water Conditions", "node_size": 10, "label": "potomac river"}], ["eastern shore", {"concepts": "eastern shore", "type": "concept", "cluster": "Water Conditions", "node_size": 10, "label": "eastern shore"}], ["patuxent river", {"concepts": "patuxent river", "type": "concept", "cluster": "Water Conditions", "node_size": 10, "label": "patuxent river"}], ["mercury contamination", {"concepts": "mercury contamination", "type": "concept", "cluster": "Water Conditions", "node_size": 10, "label": "mercury contamination"}], ["fishing seasonality", {"concepts": "fishing seasonality", "type": "concept", "cluster": "Water Conditions", "node_size": 10, "label": "fishing seasonality"}]], "Fish Consumption": [["temperature tolerance", {"concepts": "temperature tolerance", "type": "concept", "cluster": "Fish Consumption", "node_size": 10, "label": "temperature tolerance"}], ["salinity", {"concepts": "salinity", "type": "concept", "cluster": "Fish Consumption", "node_size": 10, "label": "salinity"}], ["water salinity", {"concepts": "water salinity", "type": "concept", "cluster": "Fish Consumption", "node_size": 10, "label": "water salinity"}], ["water quality", {"concepts": "water quality", "type": "concept", "cluster": "Fish Consumption", "node_size": 10, "label": "water quality"}], ["tidal influence", {"concepts": "tidal influence", "type": "concept", "cluster": "Fish Consumption", "node_size": 10, "label": "tidal influence"}], ["non-tidal streams", {"concepts": "non-tidal streams", "type": "concept", "cluster": "Fish Consumption", "node_size": 10, "label": "non-tidal streams"}], ["fishing conditions", {"concepts": "fishing conditions", "type": "concept", "cluster": "Fish Consumption", "node_size": 10, "label": "fishing conditions"}], ["fishing tolerance", {"concepts": "fishing tolerance", "type": "concept", "cluster": "Fish Consumption", "node_size": 10, "label": "fishing tolerance"}]], "Fishing Guidance": [["fish taste", {"concepts": "fish taste", "type": "concept", "cluster": "Fishing Guidance", "node_size": 10, "label": "fish taste"}], ["food preference", {"concepts": "food preference", "type": "concept", "cluster": "Fishing Guidance", "node_size": 10, "label": "food preference"}], ["fish slime", {"concepts": "fish slime", "type": "concept", "cluster": "Fishing Guidance", "node_size": 10, "label": "fish slime"}], ["fish seasoning", {"concepts": "fish seasoning", "type": "concept", "cluster": "Fishing Guidance", "node_size": 10, "label": "fish seasoning"}], ["fish recipes", {"concepts": "fish recipes", "type": "concept", "cluster": "Fishing Guidance", "node_size": 10, "label": "fish recipes"}], ["fish popularity", {"concepts": "fish popularity", "type": "concept", "cluster": "Fishing Guidance", "node_size": 10, "label": "fish popularity"}], ["fish talk magazine", {"concepts": "fish talk magazine", "type": "concept", "cluster": "Fishing Guidance", "node_size": 10, "label": "fish talk magazine"}], ["fish market", {"concepts": "fish market", "type": "concept", "cluster": "Fishing Guidance", "node_size": 10, "label": "fish market"}], ["fish consumption", {"concepts": "fish consumption", "type": "concept", "cluster": "Fishing Guidance", "node_size": 10, "label": "fish consumption"}]], "Fisheries Management": [["guide fishermen", {"concepts": "guide fishermen", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "guide fishermen"}], ["fishing reports", {"concepts": "fishing reports", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fishing reports"}], ["fishing interviews", {"concepts": "fishing interviews", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fishing interviews"}], ["fishing activism", {"concepts": "fishing activism", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fishing activism"}], ["fishing guide opinions", {"concepts": "fishing guide opinions", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fishing guide opinions"}], ["fishing communication", {"concepts": "fishing communication", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fishing communication"}], ["fishing logistics", {"concepts": "fishing logistics", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fishing logistics"}], ["fishing decision factors", {"concepts": "fishing decision factors", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fishing decision factors"}], ["fishing magazines", {"concepts": "fishing magazines", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fishing magazines"}], ["fishing knowledge", {"concepts": "fishing knowledge", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fishing knowledge"}], ["fishbrain app", {"concepts": "fishbrain app", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fishbrain app"}], ["fishing outreach", {"concepts": "fishing outreach", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fishing outreach"}], ["fishing leaders", {"concepts": "fishing leaders", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fishing leaders"}], ["social media fishing reports", {"concepts": "social media fishing reports", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "social media fishing reports"}], ["fishing guides", {"concepts": "fishing guides", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fishing guides"}], ["air fryer", {"concepts": "air fryer", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "air fryer"}], ["odenton", {"concepts": "odenton", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "odenton"}], ["channels", {"concepts": "channels", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "channels"}], ["public docks", {"concepts": "public docks", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "public docks"}], ["founder", {"concepts": "founder", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "founder"}], ["neighborhood dock", {"concepts": "neighborhood dock", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "neighborhood dock"}], ["trash", {"concepts": "trash", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "trash"}], ["work schedule", {"concepts": "work schedule", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "work schedule"}], ["kayaking", {"concepts": "kayaking", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "kayaking"}]], "Regional Waterways": [["fish regulations", {"concepts": "fish regulations", "type": "concept", "cluster": "Regional Waterways", "node_size": 10, "label": "fish regulations"}], ["fisheries management", {"concepts": "fisheries management", "type": "concept", "cluster": "Regional Waterways", "node_size": 10, "label": "fisheries management"}], ["fishing regulations", {"concepts": "fishing regulations", "type": "concept", "cluster": "Regional Waterways", "node_size": 10, "label": "fishing regulations"}], ["fish size limits", {"concepts": "fish size limits", "type": "concept", "cluster": "Regional Waterways", "node_size": 10, "label": "fish size limits"}], ["marine resource management", {"concepts": "marine resource management", "type": "concept", "cluster": "Regional Waterways", "node_size": 10, "label": "marine resource management"}], ["fishing habitat degradation", {"concepts": "fishing habitat degradation", "type": "concept", "cluster": "Regional Waterways", "node_size": 10, "label": "fishing habitat degradation"}], ["sediment runoff", {"concepts": "sediment runoff", "type": "concept", "cluster": "Regional Waterways", "node_size": 10, "label": "sediment runoff"}], ["fishing license", {"concepts": "fishing license", "type": "concept", "cluster": "Regional Waterways", "node_size": 10, "label": "fishing license"}], ["overfishing", {"concepts": "overfishing", "type": "concept", "cluster": "Regional Waterways", "node_size": 10, "label": "overfishing"}], ["marine lab", {"concepts": "marine lab", "type": "concept", "cluster": "Regional Waterways", "node_size": 10, "label": "marine lab"}], ["fish population dynamics", {"concepts": "fish population dynamics", "type": "concept", "cluster": "Regional Waterways", "node_size": 10, "label": "fish population dynamics"}], ["offshore species", {"concepts": "offshore species", "type": "concept", "cluster": "Regional Waterways", "node_size": 10, "label": "offshore species"}], ["fishing habitat", {"concepts": "fishing habitat", "type": "concept", "cluster": "Regional Waterways", "node_size": 10, "label": "fishing habitat"}], ["fishing species", {"concepts": "fishing species", "type": "concept", "cluster": "Regional Waterways", "node_size": 10, "label": "fishing species"}]], "Fishing Practices": [["fishing for food", {"concepts": "fishing for food", "type": "concept", "cluster": "Fishing Practices", "node_size": 10, "label": "fishing for food"}], ["freshwater fishing", {"concepts": "freshwater fishing", "type": "concept", "cluster": "Fishing Practices", "node_size": 10, "label": "freshwater fishing"}], ["recreational fishing", {"concepts": "recreational fishing", "type": "concept", "cluster": "Fishing Practices", "node_size": 10, "label": "recreational fishing"}], ["commercial fishing", {"concepts": "commercial fishing", "type": "concept", "cluster": "Fishing Practices", "node_size": 10, "label": "commercial fishing"}], ["kayak fishing", {"concepts": "kayak fishing", "type": "concept", "cluster": "Fishing Practices", "node_size": 10, "label": "kayak fishing"}], ["community fishing", {"concepts": "community fishing", "type": "concept", "cluster": "Fishing Practices", "node_size": 10, "label": "community fishing"}], ["recreational fishermen", {"concepts": "recreational fishermen", "type": "concept", "cluster": "Fishing Practices", "node_size": 10, "label": "recreational fishermen"}], ["recreational fishing pressure", {"concepts": "recreational fishing pressure", "type": "concept", "cluster": "Fishing Practices", "node_size": 10, "label": "recreational fishing pressure"}]], "Marine Environmental Threats": [["marine debris", {"concepts": "marine debris", "type": "concept", "cluster": "Marine Environmental Threats", "node_size": 10, "label": "marine debris"}]], "Fishing Timing Factors": [["fishing seasons", {"concepts": "fishing seasons", "type": "concept", "cluster": "Fishing Timing Factors", "node_size": 10, "label": "fishing seasons"}], ["fishing timing", {"concepts": "fishing timing", "type": "concept", "cluster": "Fishing Timing Factors", "node_size": 10, "label": "fishing timing"}], ["fishing success factors", {"concepts": "fishing success factors", "type": "concept", "cluster": "Fishing Timing Factors", "node_size": 10, "label": "fishing success factors"}], ["fishing patience", {"concepts": "fishing patience", "type": "concept", "cluster": "Fishing Timing Factors", "node_size": 10, "label": "fishing patience"}], ["fishing pressure", {"concepts": "fishing pressure", "type": "concept", "cluster": "Fishing Timing Factors", "node_size": 10, "label": "fishing pressure"}], ["fishing opportunities", {"concepts": "fishing opportunities", "type": "concept", "cluster": "Fishing Timing Factors", "node_size": 10, "label": "fishing opportunities"}], ["fishing effort", {"concepts": "fishing effort", "type": "concept", "cluster": "Fishing Timing Factors", "node_size": 10, "label": "fishing effort"}], ["fishing travel constraints", {"concepts": "fishing travel constraints", "type": "concept", "cluster": "Fishing Timing Factors", "node_size": 10, "label": "fishing travel constraints"}], ["fishing motivation", {"concepts": "fishing motivation", "type": "concept", "cluster": "Fishing Timing Factors", "node_size": 10, "label": "fishing motivation"}], ["fish bite patterns", {"concepts": "fish bite patterns", "type": "concept", "cluster": "Fishing Timing Factors", "node_size": 10, "label": "fish bite patterns"}], ["fishing hours", {"concepts": "fishing hours", "type": "concept", "cluster": "Fishing Timing Factors", "node_size": 10, "label": "fishing hours"}], ["fishing season", {"concepts": "fishing season", "type": "concept", "cluster": "Fishing Timing Factors", "node_size": 10, "label": "fishing season"}]], "Snakehead Fishing Impact": [["fishing deterrent", {"concepts": "fishing deterrent", "type": "concept", "cluster": "Snakehead Fishing Impact", "node_size": 10, "label": "fishing deterrent"}], ["fishing stress", {"concepts": "fishing stress", "type": "concept", "cluster": "Snakehead Fishing Impact", "node_size": 10, "label": "fishing stress"}], ["fish mortality", {"concepts": "fish mortality", "type": "concept", "cluster": "Snakehead Fishing Impact", "node_size": 10, "label": "fish mortality"}], ["fishing behavior", {"concepts": "fishing behavior", "type": "concept", "cluster": "Snakehead Fishing Impact", "node_size": 10, "label": "fishing behavior"}], ["fish filleting", {"concepts": "fish filleting", "type": "concept", "cluster": "Snakehead Fishing Impact", "node_size": 10, "label": "fish filleting"}], ["snakehead fishing", {"concepts": "snakehead fishing", "type": "concept", "cluster": "Snakehead Fishing Impact", "node_size": 10, "label": "snakehead fishing"}], ["snakehead", {"concepts": "snakehead", "type": "concept", "cluster": "Snakehead Fishing Impact", "node_size": 10, "label": "snakehead"}], ["snakehead fish", {"concepts": "snakehead fish", "type": "concept", "cluster": "Snakehead Fishing Impact", "node_size": 10, "label": "snakehead fish"}]], "Fishing Types": [["crowded fishing spots", {"concepts": "crowded fishing spots", "type": "concept", "cluster": "Fishing Types", "node_size": 10, "label": "crowded fishing spots"}], ["fishing access", {"concepts": "fishing access", "type": "concept", "cluster": "Fishing Types", "node_size": 10, "label": "fishing access"}], ["fishing locations", {"concepts": "fishing locations", "type": "concept", "cluster": "Fishing Types", "node_size": 10, "label": "fishing locations"}], ["fishing mobility", {"concepts": "fishing mobility", "type": "concept", "cluster": "Fishing Types", "node_size": 10, "label": "fishing mobility"}], ["fishing location privacy", {"concepts": "fishing location privacy", "type": "concept", "cluster": "Fishing Types", "node_size": 10, "label": "fishing location privacy"}], ["fishing site quality", {"concepts": "fishing site quality", "type": "concept", "cluster": "Fishing Types", "node_size": 10, "label": "fishing site quality"}], ["fishing spots secrecy", {"concepts": "fishing spots secrecy", "type": "concept", "cluster": "Fishing Types", "node_size": 10, "label": "fishing spots secrecy"}], ["fishing secrecy", {"concepts": "fishing secrecy", "type": "concept", "cluster": "Fishing Types", "node_size": 10, "label": "fishing secrecy"}], ["fishing site selection", {"concepts": "fishing site selection", "type": "concept", "cluster": "Fishing Types", "node_size": 10, "label": "fishing site selection"}]], "Tidal Fishing Species": [["fishing community", {"concepts": "fishing community", "type": "concept", "cluster": "Tidal Fishing Species", "node_size": 10, "label": "fishing community"}], ["tidal fishing", {"concepts": "tidal fishing", "type": "concept", "cluster": "Tidal Fishing Species", "node_size": 10, "label": "tidal fishing"}], ["blue catfish", {"concepts": "blue catfish", "type": "concept", "cluster": "Tidal Fishing Species", "node_size": 10, "label": "blue catfish"}], ["spawning", {"concepts": "spawning", "type": "concept", "cluster": "Tidal Fishing Species", "node_size": 10, "label": "spawning"}], ["fish spawning", {"concepts": "fish spawning", "type": "concept", "cluster": "Tidal Fishing Species", "node_size": 10, "label": "fish spawning"}], ["flounder", {"concepts": "flounder", "type": "concept", "cluster": "Tidal Fishing Species", "node_size": 10, "label": "flounder"}], ["sea trout", {"concepts": "sea trout", "type": "concept", "cluster": "Tidal Fishing Species", "node_size": 10, "label": "sea trout"}]], "Climate Impact": [["climate change", {"concepts": "climate change", "type": "concept", "cluster": "Climate Impact", "node_size": 10, "label": "climate change"}], ["hypoxia", {"concepts": "hypoxia", "type": "concept", "cluster": "Climate Impact", "node_size": 10, "label": "hypoxia"}], ["weather", {"concepts": "weather", "type": "concept", "cluster": "Climate Impact", "node_size": 10, "label": "weather"}], ["weather impact", {"concepts": "weather impact", "type": "concept", "cluster": "Climate Impact", "node_size": 10, "label": "weather impact"}]], "Wind Constraints": [["wind limitation", {"concepts": "wind limitation", "type": "concept", "cluster": "Wind Constraints", "node_size": 10, "label": "wind limitation"}], ["wind conditions", {"concepts": "wind conditions", "type": "concept", "cluster": "Wind Constraints", "node_size": 10, "label": "wind conditions"}]], "Impact Assessment Dynamics": [["development impact", {"concepts": "development impact", "type": "concept", "cluster": "Impact Assessment Dynamics", "node_size": 10, "label": "development impact"}], ["policy impact", {"concepts": "policy impact", "type": "concept", "cluster": "Impact Assessment Dynamics", "node_size": 10, "label": "policy impact"}], ["tree loss", {"concepts": "tree loss", "type": "concept", "cluster": "Impact Assessment Dynamics", "node_size": 10, "label": "tree loss"}], ["lifestyle change", {"concepts": "lifestyle change", "type": "concept", "cluster": "Impact Assessment Dynamics", "node_size": 10, "label": "lifestyle change"}], ["ceo", {"concepts": "ceo", "type": "concept", "cluster": "Impact Assessment Dynamics", "node_size": 10, "label": "ceo"}], ["mental modeler", {"concepts": "mental modeler", "type": "concept", "cluster": "Impact Assessment Dynamics", "node_size": 10, "label": "mental modeler"}], ["system dynamics", {"concepts": "system dynamics", "type": "concept", "cluster": "Impact Assessment Dynamics", "node_size": 10, "label": "system dynamics"}], ["impact assessment", {"concepts": "impact assessment", "type": "concept", "cluster": "Impact Assessment Dynamics", "node_size": 10, "label": "impact assessment"}], ["telemetry data", {"concepts": "telemetry data", "type": "concept", "cluster": "Impact Assessment Dynamics", "node_size": 10, "label": "telemetry data"}], ["economic benefits", {"concepts": "economic benefits", "type": "concept", "cluster": "Impact Assessment Dynamics", "node_size": 10, "label": "economic benefits"}], ["littering", {"concepts": "littering", "type": "concept", "cluster": "Impact Assessment Dynamics", "node_size": 10, "label": "littering"}], ["commercial market", {"concepts": "commercial market", "type": "concept", "cluster": "Impact Assessment Dynamics", "node_size": 10, "label": "commercial market"}], ["social benefits", {"concepts": "social benefits", "type": "concept", "cluster": "Impact Assessment Dynamics", "node_size": 10, "label": "social benefits"}], ["pcbs", {"concepts": "pcbs", "type": "concept", "cluster": "Impact Assessment Dynamics", "node_size": 10, "label": "pcbs"}], ["ceo policy", {"concepts": "ceo policy", "type": "concept", "cluster": "Impact Assessment Dynamics", "node_size": 10, "label": "ceo policy"}]], "Access and Parking": [["parking availability", {"concepts": "parking availability", "type": "concept", "cluster": "Access and Parking", "node_size": 10, "label": "parking availability"}], ["parking limitation", {"concepts": "parking limitation", "type": "concept", "cluster": "Access and Parking", "node_size": 10, "label": "parking limitation"}], ["travel time", {"concepts": "travel time", "type": "concept", "cluster": "Access and Parking", "node_size": 10, "label": "travel time"}], ["public access", {"concepts": "public access", "type": "concept", "cluster": "Access and Parking", "node_size": 10, "label": "public access"}], ["public access fishing", {"concepts": "public access fishing", "type": "concept", "cluster": "Access and Parking", "node_size": 10, "label": "public access fishing"}]], "Bay Fishing Practices": [["catch and release", {"concepts": "catch and release", "type": "concept", "cluster": "Bay Fishing Practices", "node_size": 10, "label": "catch and release"}], ["vacation fishing", {"concepts": "vacation fishing", "type": "concept", "cluster": "Bay Fishing Practices", "node_size": 10, "label": "vacation fishing"}], ["savern", {"concepts": "savern", "type": "concept", "cluster": "Bay Fishing Practices", "node_size": 10, "label": "savern"}], ["day trips", {"concepts": "day trips", "type": "concept", "cluster": "Bay Fishing Practices", "node_size": 10, "label": "day trips"}], ["main bay", {"concepts": "main bay", "type": "concept", "cluster": "Bay Fishing Practices", "node_size": 10, "label": "main bay"}], ["magabee", {"concepts": "magabee", "type": "concept", "cluster": "Bay Fishing Practices", "node_size": 10, "label": "magabee"}], ["chesapeake bay", {"concepts": "chesapeake bay", "type": "concept", "cluster": "Bay Fishing Practices", "node_size": 10, "label": "chesapeake bay"}], ["pickerel", {"concepts": "pickerel", "type": "concept", "cluster": "Bay Fishing Practices", "node_size": 10, "label": "pickerel"}], ["striped bass", {"concepts": "striped bass", "type": "concept", "cluster": "Bay Fishing Practices", "node_size": 10, "label": "striped bass"}], ["trash accumulation", {"concepts": "trash accumulation", "type": "concept", "cluster": "Bay Fishing Practices", "node_size": 10, "label": "trash accumulation"}], ["kayak size", {"concepts": "kayak size", "type": "concept", "cluster": "Bay Fishing Practices", "node_size": 10, "label": "kayak size"}], ["largemouth bass", {"concepts": "largemouth bass", "type": "concept", "cluster": "Bay Fishing Practices", "node_size": 10, "label": "largemouth bass"}], ["slot limits", {"concepts": "slot limits", "type": "concept", "cluster": "Bay Fishing Practices", "node_size": 10, "label": "slot limits"}], ["red drum", {"concepts": "red drum", "type": "concept", "cluster": "Bay Fishing Practices", "node_size": 10, "label": "red drum"}], ["tide timing", {"concepts": "tide timing", "type": "concept", "cluster": "Bay Fishing Practices", "node_size": 10, "label": "tide timing"}]], "Maryland Conservation Agencies": [["cca maryland", {"concepts": "cca maryland", "type": "concept", "cluster": "Maryland Conservation Agencies", "node_size": 10, "label": "cca maryland"}], ["maryland dnr", {"concepts": "maryland dnr", "type": "concept", "cluster": "Maryland Conservation Agencies", "node_size": 10, "label": "maryland dnr"}]], "Habitat Characteristics": [["habitat", {"concepts": "habitat", "type": "concept", "cluster": "Habitat Characteristics", "node_size": 10, "label": "habitat"}], ["habitat niche", {"concepts": "habitat niche", "type": "concept", "cluster": "Habitat Characteristics", "node_size": 10, "label": "habitat niche"}], ["aquatic grasses", {"concepts": "aquatic grasses", "type": "concept", "cluster": "Habitat Characteristics", "node_size": 10, "label": "aquatic grasses"}], ["natural habitat", {"concepts": "natural habitat", "type": "concept", "cluster": "Habitat Characteristics", "node_size": 10, "label": "natural habitat"}], ["shallow habitat", {"concepts": "shallow habitat", "type": "concept", "cluster": "Habitat Characteristics", "node_size": 10, "label": "shallow habitat"}], ["habitat quality", {"concepts": "habitat quality", "type": "concept", "cluster": "Habitat Characteristics", "node_size": 10, "label": "habitat quality"}], ["degraded habitat", {"concepts": "degraded habitat", "type": "concept", "cluster": "Habitat Characteristics", "node_size": 10, "label": "degraded habitat"}]], "Ecosystem Management": [["habitat degradation", {"concepts": "habitat degradation", "type": "concept", "cluster": "Ecosystem Management", "node_size": 10, "label": "habitat degradation"}], ["local management", {"concepts": "local management", "type": "concept", "cluster": "Ecosystem Management", "node_size": 10, "label": "local management"}], ["social-ecological system", {"concepts": "social-ecological system", "type": "concept", "cluster": "Ecosystem Management", "node_size": 10, "label": "social-ecological system"}], ["environmental factors", {"concepts": "environmental factors", "type": "concept", "cluster": "Ecosystem Management", "node_size": 10, "label": "environmental factors"}], ["ecological health", {"concepts": "ecological health", "type": "concept", "cluster": "Ecosystem Management", "node_size": 10, "label": "ecological health"}]], "Southern Maryland Conservation": [["department of natural resources (dnr)", {"concepts": "department of natural resources (dnr)", "type": "concept", "cluster": "Southern Maryland Conservation", "node_size": 10, "label": "department of natural resources (dnr)"}], ["southern anne arundel county", {"concepts": "southern anne arundel county", "type": "concept", "cluster": "Southern Maryland Conservation", "node_size": 10, "label": "southern anne arundel county"}], ["southern maryland", {"concepts": "southern maryland", "type": "concept", "cluster": "Southern Maryland Conservation", "node_size": 10, "label": "southern maryland"}], ["anne arundel county", {"concepts": "anne arundel county", "type": "concept", "cluster": "Southern Maryland Conservation", "node_size": 10, "label": "anne arundel county"}], ["blackwater national wildlife refuge", {"concepts": "blackwater national wildlife refuge", "type": "concept", "cluster": "Southern Maryland Conservation", "node_size": 10, "label": "blackwater national wildlife refuge"}], ["environmental group", {"concepts": "environmental group", "type": "concept", "cluster": "Southern Maryland Conservation", "node_size": 10, "label": "environmental group"}]], "Biodiversity Dynamics": [["species competition", {"concepts": "species competition", "type": "concept", "cluster": "Biodiversity Dynamics", "node_size": 10, "label": "species competition"}], ["species diversity", {"concepts": "species diversity", "type": "concept", "cluster": "Biodiversity Dynamics", "node_size": 10, "label": "species diversity"}], ["biodiversity", {"concepts": "biodiversity", "type": "concept", "cluster": "Biodiversity Dynamics", "node_size": 10, "label": "biodiversity"}], ["biodiversity impact", {"concepts": "biodiversity impact", "type": "concept", "cluster": "Biodiversity Dynamics", "node_size": 10, "label": "biodiversity impact"}], ["species populations", {"concepts": "species populations", "type": "concept", "cluster": "Biodiversity Dynamics", "node_size": 10, "label": "species populations"}]], "Invasive Predation": [["invasive species", {"concepts": "invasive species", "type": "concept", "cluster": "Invasive Predation", "node_size": 10, "label": "invasive species"}], ["predation", {"concepts": "predation", "type": "concept", "cluster": "Invasive Predation", "node_size": 10, "label": "predation"}]]};
        const clusterEdges = {"Water Conditions": [], "Fish Consumption": [], "Fishing Guidance": [], "Fisheries Management": [], "Regional Waterways": [], "Fishing Practices": [], "Marine Environmental Threats": [], "Fishing Timing Factors": [], "Snakehead Fishing Impact": [], "Fishing Types": [], "Tidal Fishing Species": [], "Climate Impact": [], "Wind Constraints": [], "Impact Assessment Dynamics": [], "Access and Parking": [], "Bay Fishing Practices": [], "Maryland Conservation Agencies": [], "Habitat Characteristics": [], "Ecosystem Management": [], "Southern Maryland Conservation": [], "Biodiversity Dynamics": [], "Invasive Predation": []};
        
        let network;
        let currentView = 'clusters';
        let currentCluster = null;
        let minConfidence = 0.3;
        
        // Network options
        const options = {
            nodes: {
                font: { color: 'white', size: 14 },
                borderWidth: 2,
                shadow: true
            },
            edges: {
                arrows: { to: { enabled: true, scaleFactor: 1.2 } },
                shadow: true,
                smooth: { type: 'continuous' }
            },
            physics: {
                stabilization: { iterations: 100 },
                barnesHut: {
                    gravitationalConstant: -8000,
                    springConstant: 0.001,
                    springLength: 200
                }
            },
            interaction: {
                hover: true,
                selectConnectedEdges: false
            }
        };
        
        function initNetwork() {
            const container = document.getElementById('network');
            const data = getClusterViewData();
            network = new vis.Network(container, data, options);
            
            // Handle cluster clicks for drill-down
            network.on("click", function(params) {
                if (params.nodes.length > 0 && currentView === 'clusters') {
                    const clickedNode = params.nodes[0];
                    if (clusterConcepts[clickedNode]) {
                        showClusterDetail(clickedNode);
                    }
                }
            });
        }
        
        function getClusterViewData() {
            const nodes = [];
            const edges = [];
            
            // Add cluster nodes
            Object.entries(clusterData).forEach(([clusterId, data]) => {
                const concepts = data.concepts || [];
                const conceptsStr = Array.isArray(concepts) ? concepts.join(', ') : concepts;
                
                nodes.push({
                    id: clusterId,
                    label: clusterId,
                    title: `Cluster: ${clusterId}\nConcepts: ${conceptsStr}\nClick to explore internal relationships`,
                    color: '#4A90E2',
                    size: 25 + (conceptsStr.split(',').length * 2),
                    font: { color: 'white' }
                });
            });
            
            // Add inter-cluster edges
            interClusterEdges.forEach(([source, target, edgeData]) => {
                const confidence = edgeData.confidence || 1.0;
                const weight = edgeData.weight || 0;
                
                if (confidence >= minConfidence) {
                    edges.push({
                        from: source,
                        to: target,
                        color: weight > 0 ? '#28A745' : '#DC3545',
                        width: Math.abs(weight) * 3 + 1,
                        title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                        dashes: false
                    });
                }
            });
            
            return { nodes: nodes, edges: edges };
        }
        
        function getClusterDetailData(clusterId) {
            const nodes = [];
            const edges = [];
            
            // Add concept nodes for this cluster
            if (clusterConcepts[clusterId]) {
                clusterConcepts[clusterId].forEach(([conceptId, data]) => {
                    nodes.push({
                        id: conceptId,
                        label: conceptId,
                        title: `Concept: ${conceptId}\nFrom cluster: ${clusterId}`,
                        color: '#FF9500',
                        size: 20,
                        font: { color: 'white' }
                    });
                });
            }
            
            // Add intra-cluster edges
            if (clusterEdges[clusterId]) {
                clusterEdges[clusterId].forEach(([source, target, edgeData]) => {
                    const confidence = edgeData.confidence || 1.0;
                    const weight = edgeData.weight || 0;
                    
                    if (confidence >= minConfidence) {
                        edges.push({
                            from: source,
                            to: target,
                            color: weight > 0 ? '#28A745' : '#DC3545',
                            width: Math.abs(weight) * 3 + 1,
                            title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                            dashes: true
                        });
                    }
                });
            }
            
            return { nodes: nodes, edges: edges };
        }
        
        function showClusterView() {
            currentView = 'clusters';
            currentCluster = null;
            const data = getClusterViewData();
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'none';
            document.getElementById('current-view').textContent = 'Cluster Overview';
        }
        
        function showClusterDetail(clusterId) {
            currentView = 'concepts';
            currentCluster = clusterId;
            const data = getClusterDetailData(clusterId);
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'inline-block';
            document.getElementById('current-view').textContent = `Inside Cluster: ${clusterId}`;
        }
        
        function updateConfidenceFilter(value) {
            minConfidence = parseFloat(value);
            document.getElementById('confidence-value').textContent = value;
            
            // Refresh current view
            if (currentView === 'clusters') {
                showClusterView();
            } else {
                showClusterDetail(currentCluster);
            }
        }
        
        // Initialize the network when page loads
        window.onload = function() {
            initNetwork();
        };
    </script>
</body>
</html>
