
<!DOCTYPE html>
<html>
<head>
    <title>Hierarchical FCM Visualization (Unconnected nodes removed)</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 0; 
            padding: 20px;
            background: #f5f5f5;
        }
        
        #network { 
            width: 100%; 
            height: 600px; 
            border: 2px solid #ccc; 
            background: white;
            border-radius: 8px;
        }
        
        #controls {
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn {
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        
        .btn-primary { background: #4A90E2; color: white; }
        .btn-primary:hover { background: #357ABD; }
        
        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #545b62; }
        
        #current-view {
            font-weight: bold;
            color: #333;
            margin-left: 10px;
        }
        
        #legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-size: 12px;
            max-width: 200px;
        }
        
        .legend-item {
            margin: 5px 0;
            display: flex;
            align-items: center;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .legend-line {
            width: 20px;
            height: 2px;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <h1>Fuzzy Cognitive Map - Hierarchical View</h1>
    
    <div id="controls">
        <button class="btn btn-secondary" id="back-btn" onclick="showClusterView()" style="display: none;">
            ‚Üê Back to Clusters
        </button>
        <span id="current-view">Cluster Overview</span>
        <div style="float: right;">
            <label>Min Confidence: </label>
            <input type="range" id="confidence-slider" min="0" max="1" step="0.1" value="0.3" 
                   onchange="updateConfidenceFilter(this.value)">
            <span id="confidence-value">0.3</span>
        </div>
    </div>
    
    <div id="network"></div>
    
    <div id="legend">
        <h4>Legend</h4>
        <div class="legend-item">
            <div class="legend-color" style="background: #4A90E2;"></div>
            <span>Clusters</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #FF9500;"></div>
            <span>Concepts</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #28A745;"></div>
            <span>Positive relationship</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #DC3545;"></div>
            <span>Negative relationship</span>
        </div>
        <div style="margin-top: 10px; font-style: italic; color: #666;">
            Click clusters to explore internal concepts
        </div>
    </div>

    <script>
        // Embedded data
        const clusterData = {"distribution": {"concepts": "distribution", "concept_list": ["distribution"], "type": "cluster", "node_size": 18, "label": "distribution"}, "501c3": {"concepts": "501c3", "concept_list": ["501c3"], "type": "cluster", "node_size": 18, "label": "501c3"}, "money influence": {"concepts": "money influence", "concept_list": ["money influence"], "type": "cluster", "node_size": 18, "label": "money influence"}, "mom and pop stores": {"concepts": "mom and pop stores", "concept_list": ["mom and pop stores"], "type": "cluster", "node_size": 18, "label": "mom and pop stores"}, "social impact": {"concepts": "social impact", "concept_list": ["social impact"], "type": "cluster", "node_size": 18, "label": "social impact"}, "flint": {"concepts": "flint", "concept_list": ["flint"], "type": "cluster", "node_size": 18, "label": "flint"}, "resources": {"concepts": "resources", "concept_list": ["resources"], "type": "cluster", "node_size": 18, "label": "resources"}, "self-responsibility": {"concepts": "self-responsibility", "concept_list": ["self-responsibility"], "type": "cluster", "node_size": 18, "label": "self-responsibility"}, "fast food": {"concepts": "fast food", "concept_list": ["fast food"], "type": "cluster", "node_size": 18, "label": "fast food"}, "basic needs": {"concepts": "basic needs", "concept_list": ["basic needs"], "type": "cluster", "node_size": 18, "label": "basic needs"}, "shopping center": {"concepts": "shopping center", "concept_list": ["shopping center"], "type": "cluster", "node_size": 18, "label": "shopping center"}, "community involvement": {"concepts": "community involvement", "concept_list": ["community involvement"], "type": "cluster", "node_size": 18, "label": "community involvement"}, "regional expansion": {"concepts": "regional expansion", "concept_list": ["regional expansion"], "type": "cluster", "node_size": 18, "label": "regional expansion"}, "funders": {"concepts": "funders", "concept_list": ["funders"], "type": "cluster", "node_size": 18, "label": "funders"}, "usda": {"concepts": "usda", "concept_list": ["usda"], "type": "cluster", "node_size": 18, "label": "usda"}, "alcohol": {"concepts": "alcohol", "concept_list": ["alcohol"], "type": "cluster", "node_size": 18, "label": "alcohol"}, "clientele": {"concepts": "clientele", "concept_list": ["clientele"], "type": "cluster", "node_size": 18, "label": "clientele"}, "older women": {"concepts": "older women", "concept_list": ["older women"], "type": "cluster", "node_size": 18, "label": "older women"}, "public bus": {"concepts": "public bus", "concept_list": ["public bus"], "type": "cluster", "node_size": 18, "label": "public bus"}, "townhouses": {"concepts": "townhouses", "concept_list": ["townhouses"], "type": "cluster", "node_size": 18, "label": "townhouses"}, "leverage points": {"concepts": "leverage points", "concept_list": ["leverage points"], "type": "cluster", "node_size": 18, "label": "leverage points"}, "communication": {"concepts": "communication", "concept_list": ["communication"], "type": "cluster", "node_size": 18, "label": "communication"}, "pallet delivery": {"concepts": "pallet delivery", "concept_list": ["pallet delivery"], "type": "cluster", "node_size": 18, "label": "pallet delivery"}, "consumer confidence": {"concepts": "consumer confidence", "concept_list": ["consumer confidence"], "type": "cluster", "node_size": 18, "label": "consumer confidence"}, "restaurants": {"concepts": "restaurants", "concept_list": ["restaurants"], "type": "cluster", "node_size": 18, "label": "restaurants"}, "large organizations": {"concepts": "large organizations", "concept_list": ["large organizations"], "type": "cluster", "node_size": 18, "label": "large organizations"}, "family owned store": {"concepts": "family owned store", "concept_list": ["family owned store"], "type": "cluster", "node_size": 18, "label": "family owned store"}, "families": {"concepts": "families", "concept_list": ["families"], "type": "cluster", "node_size": 18, "label": "families"}, "interdependence": {"concepts": "interdependence", "concept_list": ["interdependence"], "type": "cluster", "node_size": 18, "label": "interdependence"}, "organizational partnerships": {"concepts": "organizational partnerships", "concept_list": ["organizational partnerships"], "type": "cluster", "node_size": 18, "label": "organizational partnerships"}, "neighborhood access": {"concepts": "neighborhood access", "concept_list": ["neighborhood access"], "type": "cluster", "node_size": 18, "label": "neighborhood access"}, "store conditions": {"concepts": "store conditions", "concept_list": ["store conditions"], "type": "cluster", "node_size": 18, "label": "store conditions"}, "buses": {"concepts": "buses", "concept_list": ["buses"], "type": "cluster", "node_size": 18, "label": "buses"}, "dort highway": {"concepts": "dort highway", "concept_list": ["dort highway"], "type": "cluster", "node_size": 18, "label": "dort highway"}, "murder": {"concepts": "murder", "concept_list": ["murder"], "type": "cluster", "node_size": 18, "label": "murder"}, "city image": {"concepts": "city image", "concept_list": ["city image"], "type": "cluster", "node_size": 18, "label": "city image"}, "produce": {"concepts": "produce", "concept_list": ["produce"], "type": "cluster", "node_size": 18, "label": "produce"}, "rapid response funds": {"concepts": "rapid response funds", "concept_list": ["rapid response funds"], "type": "cluster", "node_size": 18, "label": "rapid response funds"}, "homeowners": {"concepts": "homeowners", "concept_list": ["homeowners"], "type": "cluster", "node_size": 18, "label": "homeowners"}, "government blame": {"concepts": "government blame", "concept_list": ["government blame"], "type": "cluster", "node_size": 18, "label": "government blame"}, "food delivery": {"concepts": "food delivery", "concept_list": ["food delivery"], "type": "cluster", "node_size": 18, "label": "food delivery"}, "larger organizations": {"concepts": "larger organizations", "concept_list": ["larger organizations"], "type": "cluster", "node_size": 18, "label": "larger organizations"}, "neighborhood stores": {"concepts": "neighborhood stores", "concept_list": ["neighborhood stores"], "type": "cluster", "node_size": 18, "label": "neighborhood stores"}, "resilience": {"concepts": "resilience", "concept_list": ["resilience"], "type": "cluster", "node_size": 18, "label": "resilience"}, "government funding": {"concepts": "government funding", "concept_list": ["government funding"], "type": "cluster", "node_size": 18, "label": "government funding"}, "grandchildren": {"concepts": "grandchildren", "concept_list": ["grandchildren"], "type": "cluster", "node_size": 18, "label": "grandchildren"}, "cooperation": {"concepts": "cooperation", "concept_list": ["cooperation"], "type": "cluster", "node_size": 18, "label": "cooperation"}, "model": {"concepts": "model", "concept_list": ["model"], "type": "cluster", "node_size": 18, "label": "model"}, "rent": {"concepts": "rent", "concept_list": ["rent"], "type": "cluster", "node_size": 18, "label": "rent"}, "food boxes": {"concepts": "food boxes", "concept_list": ["food boxes"], "type": "cluster", "node_size": 18, "label": "food boxes"}, "support": {"concepts": "support", "concept_list": ["support"], "type": "cluster", "node_size": 18, "label": "support"}, "economic perspective": {"concepts": "economic perspective", "concept_list": ["economic perspective"], "type": "cluster", "node_size": 18, "label": "economic perspective"}, "grandchildren errands": {"concepts": "grandchildren errands", "concept_list": ["grandchildren errands"], "type": "cluster", "node_size": 18, "label": "grandchildren errands"}, "structural support": {"concepts": "structural support", "concept_list": ["structural support"], "type": "cluster", "node_size": 18, "label": "structural support"}, "network building": {"concepts": "network building", "concept_list": ["network building"], "type": "cluster", "node_size": 18, "label": "network building"}, "farmers markets": {"concepts": "farmers markets", "concept_list": ["farmers markets"], "type": "cluster", "node_size": 18, "label": "farmers markets"}, "apartments": {"concepts": "apartments", "concept_list": ["apartments"], "type": "cluster", "node_size": 18, "label": "apartments"}, "churches": {"concepts": "churches", "concept_list": ["churches"], "type": "cluster", "node_size": 18, "label": "churches"}, "drug trafficking": {"concepts": "drug trafficking", "concept_list": ["drug trafficking"], "type": "cluster", "node_size": 18, "label": "drug trafficking"}, "good neighborhood": {"concepts": "good neighborhood", "concept_list": ["good neighborhood"], "type": "cluster", "node_size": 18, "label": "good neighborhood"}, "collective action": {"concepts": "collective action", "concept_list": ["collective action"], "type": "cluster", "node_size": 18, "label": "collective action"}, "retail closures": {"concepts": "retail closures", "concept_list": ["retail closures"], "type": "cluster", "node_size": 18, "label": "retail closures"}, "neighborhoods": {"concepts": "neighborhoods", "concept_list": ["neighborhoods"], "type": "cluster", "node_size": 18, "label": "neighborhoods"}, "flint housing": {"concepts": "flint housing", "concept_list": ["flint housing"], "type": "cluster", "node_size": 18, "label": "flint housing"}, "hunger": {"concepts": "hunger", "concept_list": ["hunger"], "type": "cluster", "node_size": 18, "label": "hunger"}, "neighbors": {"concepts": "neighbors", "concept_list": ["neighbors"], "type": "cluster", "node_size": 18, "label": "neighbors"}, "housing demolition": {"concepts": "housing demolition", "concept_list": ["housing demolition"], "type": "cluster", "node_size": 18, "label": "housing demolition"}, "dollar stores": {"concepts": "dollar stores", "concept_list": ["dollar stores"], "type": "cluster", "node_size": 18, "label": "dollar stores"}, "lower income communities": {"concepts": "lower income communities", "concept_list": ["lower income communities"], "type": "cluster", "node_size": 18, "label": "lower income communities"}, "households": {"concepts": "households", "concept_list": ["households"], "type": "cluster", "node_size": 18, "label": "households"}, "emergency sector": {"concepts": "emergency sector", "concept_list": ["emergency sector"], "type": "cluster", "node_size": 18, "label": "emergency sector"}, "community voice": {"concepts": "community voice", "concept_list": ["community voice"], "type": "cluster", "node_size": 18, "label": "community voice"}, "food insecurity": {"concepts": "food insecurity", "concept_list": ["food insecurity"], "type": "cluster", "node_size": 18, "label": "food insecurity"}, "equipment donation": {"concepts": "equipment donation", "concept_list": ["equipment donation"], "type": "cluster", "node_size": 18, "label": "equipment donation"}, "local restaurants": {"concepts": "local restaurants", "concept_list": ["local restaurants"], "type": "cluster", "node_size": 18, "label": "local restaurants"}, "neighborhood dynamics": {"concepts": "neighborhood dynamics", "concept_list": ["neighborhood dynamics"], "type": "cluster", "node_size": 18, "label": "neighborhood dynamics"}, "houston": {"concepts": "houston", "concept_list": ["houston"], "type": "cluster", "node_size": 18, "label": "houston"}, "community safety": {"concepts": "community safety", "concept_list": ["community safety"], "type": "cluster", "node_size": 18, "label": "community safety"}, "forklift operations": {"concepts": "forklift operations", "concept_list": ["forklift operations"], "type": "cluster", "node_size": 18, "label": "forklift operations"}, "shared responsibility": {"concepts": "shared responsibility", "concept_list": ["shared responsibility"], "type": "cluster", "node_size": 18, "label": "shared responsibility"}, "property development": {"concepts": "property development", "concept_list": ["property development"], "type": "cluster", "node_size": 18, "label": "property development"}, "community model": {"concepts": "community model", "concept_list": ["community model"], "type": "cluster", "node_size": 18, "label": "community model"}, "grant funding": {"concepts": "grant funding", "concept_list": ["grant funding"], "type": "cluster", "node_size": 18, "label": "grant funding"}, "greater holy temple": {"concepts": "greater holy temple", "concept_list": ["greater holy temple"], "type": "cluster", "node_size": 18, "label": "greater holy temple"}, "rl jones community outreach": {"concepts": "rl jones community outreach", "concept_list": ["rl jones community outreach"], "type": "cluster", "node_size": 18, "label": "rl jones community outreach"}, "food deserts": {"concepts": "food deserts", "concept_list": ["food deserts"], "type": "cluster", "node_size": 18, "label": "food deserts"}, "authority": {"concepts": "authority", "concept_list": ["authority"], "type": "cluster", "node_size": 18, "label": "authority"}, "chain stores": {"concepts": "chain stores", "concept_list": ["chain stores"], "type": "cluster", "node_size": 18, "label": "chain stores"}, "liquor": {"concepts": "liquor", "concept_list": ["liquor"], "type": "cluster", "node_size": 18, "label": "liquor"}, "mutual aid": {"concepts": "mutual aid", "concept_list": ["mutual aid"], "type": "cluster", "node_size": 18, "label": "mutual aid"}, "urban renewal": {"concepts": "urban renewal", "concept_list": ["urban renewal"], "type": "cluster", "node_size": 18, "label": "urban renewal"}, "smaller organizations": {"concepts": "smaller organizations", "concept_list": ["smaller organizations"], "type": "cluster", "node_size": 18, "label": "smaller organizations"}, "housing development": {"concepts": "housing development", "concept_list": ["housing development"], "type": "cluster", "node_size": 18, "label": "housing development"}, "medical facility": {"concepts": "medical facility", "concept_list": ["medical facility"], "type": "cluster", "node_size": 18, "label": "medical facility"}, "neighborhood change": {"concepts": "neighborhood change", "concept_list": ["neighborhood change"], "type": "cluster", "node_size": 18, "label": "neighborhood change"}, "chain grocery stores": {"concepts": "chain grocery stores", "concept_list": ["chain grocery stores"], "type": "cluster", "node_size": 18, "label": "chain grocery stores"}, "collaboration": {"concepts": "collaboration", "concept_list": ["collaboration"], "type": "cluster", "node_size": 18, "label": "collaboration"}, "honesty": {"concepts": "honesty", "concept_list": ["honesty"], "type": "cluster", "node_size": 18, "label": "honesty"}, "townhomes": {"concepts": "townhomes", "concept_list": ["townhomes"], "type": "cluster", "node_size": 18, "label": "townhomes"}, "expansion barriers": {"concepts": "expansion barriers", "concept_list": ["expansion barriers"], "type": "cluster", "node_size": 18, "label": "expansion barriers"}, "vacated houses": {"concepts": "vacated houses", "concept_list": ["vacated houses"], "type": "cluster", "node_size": 18, "label": "vacated houses"}, "grocery store": {"concepts": "grocery store", "concept_list": ["grocery store"], "type": "cluster", "node_size": 18, "label": "grocery store"}, "hunger relief": {"concepts": "hunger relief", "concept_list": ["hunger relief"], "type": "cluster", "node_size": 18, "label": "hunger relief"}, "social concerns": {"concepts": "social concerns", "concept_list": ["social concerns"], "type": "cluster", "node_size": 18, "label": "social concerns"}, "community retail": {"concepts": "community retail", "concept_list": ["community retail"], "type": "cluster", "node_size": 18, "label": "community retail"}, "youth": {"concepts": "youth", "concept_list": ["youth"], "type": "cluster", "node_size": 18, "label": "youth"}, "economy": {"concepts": "economy", "concept_list": ["economy"], "type": "cluster", "node_size": 18, "label": "economy"}, "food income": {"concepts": "food income", "concept_list": ["food income"], "type": "cluster", "node_size": 18, "label": "food income"}, "profit motive": {"concepts": "profit motive", "concept_list": ["profit motive"], "type": "cluster", "node_size": 18, "label": "profit motive"}, "relief funds": {"concepts": "relief funds", "concept_list": ["relief funds"], "type": "cluster", "node_size": 18, "label": "relief funds"}, "nonprofits": {"concepts": "nonprofits", "concept_list": ["nonprofits"], "type": "cluster", "node_size": 18, "label": "nonprofits"}, "congregation": {"concepts": "congregation", "concept_list": ["congregation"], "type": "cluster", "node_size": 18, "label": "congregation"}, "suburban areas": {"concepts": "suburban areas", "concept_list": ["suburban areas"], "type": "cluster", "node_size": 18, "label": "suburban areas"}, "funding": {"concepts": "funding", "concept_list": ["funding"], "type": "cluster", "node_size": 18, "label": "funding"}, "small business": {"concepts": "small business", "concept_list": ["small business"], "type": "cluster", "node_size": 18, "label": "small business"}, "housing": {"concepts": "housing", "concept_list": ["housing"], "type": "cluster", "node_size": 18, "label": "housing"}, "politics": {"concepts": "politics", "concept_list": ["politics"], "type": "cluster", "node_size": 18, "label": "politics"}, "utilities": {"concepts": "utilities", "concept_list": ["utilities"], "type": "cluster", "node_size": 18, "label": "utilities"}, "schools": {"concepts": "schools", "concept_list": ["schools"], "type": "cluster", "node_size": 18, "label": "schools"}, "chain restaurants": {"concepts": "chain restaurants", "concept_list": ["chain restaurants"], "type": "cluster", "node_size": 18, "label": "chain restaurants"}, "accessibility": {"concepts": "accessibility", "concept_list": ["accessibility"], "type": "cluster", "node_size": 18, "label": "accessibility"}, "water distribution": {"concepts": "water distribution", "concept_list": ["water distribution"], "type": "cluster", "node_size": 18, "label": "water distribution"}, "u-haul trucks": {"concepts": "u-haul trucks", "concept_list": ["u-haul trucks"], "type": "cluster", "node_size": 18, "label": "u-haul trucks"}, "volunteers": {"concepts": "volunteers", "concept_list": ["volunteers"], "type": "cluster", "node_size": 18, "label": "volunteers"}, "residential area": {"concepts": "residential area", "concept_list": ["residential area"], "type": "cluster", "node_size": 18, "label": "residential area"}, "license verification": {"concepts": "license verification", "concept_list": ["license verification"], "type": "cluster", "node_size": 18, "label": "license verification"}, "dallas": {"concepts": "dallas", "concept_list": ["dallas"], "type": "cluster", "node_size": 18, "label": "dallas"}, "expansion limits": {"concepts": "expansion limits", "concept_list": ["expansion limits"], "type": "cluster", "node_size": 18, "label": "expansion limits"}, "small organizations": {"concepts": "small organizations", "concept_list": ["small organizations"], "type": "cluster", "node_size": 18, "label": "small organizations"}, "food distribution": {"concepts": "food distribution", "concept_list": ["food distribution"], "type": "cluster", "node_size": 18, "label": "food distribution"}, "fifth street": {"concepts": "fifth street", "concept_list": ["fifth street"], "type": "cluster", "node_size": 18, "label": "fifth street"}, "local planning": {"concepts": "local planning", "concept_list": ["local planning"], "type": "cluster", "node_size": 18, "label": "local planning"}, "organizational networks": {"concepts": "organizational networks", "concept_list": ["organizational networks"], "type": "cluster", "node_size": 18, "label": "organizational networks"}, "demolition": {"concepts": "demolition", "concept_list": ["demolition"], "type": "cluster", "node_size": 18, "label": "demolition"}, "structural adaptation": {"concepts": "structural adaptation", "concept_list": ["structural adaptation"], "type": "cluster", "node_size": 18, "label": "structural adaptation"}, "community": {"concepts": "community", "concept_list": ["community"], "type": "cluster", "node_size": 18, "label": "community"}, "drug presence": {"concepts": "drug presence", "concept_list": ["drug presence"], "type": "cluster", "node_size": 18, "label": "drug presence"}, "hudson's": {"concepts": "hudson's", "concept_list": ["hudson's"], "type": "cluster", "node_size": 18, "label": "hudson's"}, "chain liquor stores": {"concepts": "chain liquor stores", "concept_list": ["chain liquor stores"], "type": "cluster", "node_size": 18, "label": "chain liquor stores"}, "seasonal availability": {"concepts": "seasonal availability", "concept_list": ["seasonal availability"], "type": "cluster", "node_size": 18, "label": "seasonal availability"}, "neighbor support": {"concepts": "neighbor support", "concept_list": ["neighbor support"], "type": "cluster", "node_size": 18, "label": "neighbor support"}, "catholic charities": {"concepts": "catholic charities", "concept_list": ["catholic charities"], "type": "cluster", "node_size": 18, "label": "catholic charities"}, "decision-making": {"concepts": "decision-making", "concept_list": ["decision-making"], "type": "cluster", "node_size": 18, "label": "decision-making"}, "community image": {"concepts": "community image", "concept_list": ["community image"], "type": "cluster", "node_size": 18, "label": "community image"}, "walmart": {"concepts": "walmart", "concept_list": ["walmart"], "type": "cluster", "node_size": 18, "label": "walmart"}, "food access": {"concepts": "food access", "concept_list": ["food access"], "type": "cluster", "node_size": 18, "label": "food access"}, "medical center": {"concepts": "medical center", "concept_list": ["medical center"], "type": "cluster", "node_size": 18, "label": "medical center"}, "access barriers": {"concepts": "access barriers", "concept_list": ["access barriers"], "type": "cluster", "node_size": 18, "label": "access barriers"}, "partnerships": {"concepts": "partnerships", "concept_list": ["partnerships"], "type": "cluster", "node_size": 18, "label": "partnerships"}, "seasonality": {"concepts": "seasonality", "concept_list": ["seasonality"], "type": "cluster", "node_size": 18, "label": "seasonality"}, "store maintenance": {"concepts": "store maintenance", "concept_list": ["store maintenance"], "type": "cluster", "node_size": 18, "label": "store maintenance"}, "downtown": {"concepts": "downtown", "concept_list": ["downtown"], "type": "cluster", "node_size": 18, "label": "downtown"}, "donations": {"concepts": "donations", "concept_list": ["donations"], "type": "cluster", "node_size": 18, "label": "donations"}, "lower income": {"concepts": "lower income", "concept_list": ["lower income"], "type": "cluster", "node_size": 18, "label": "lower income"}, "community support": {"concepts": "community support", "concept_list": ["community support"], "type": "cluster", "node_size": 18, "label": "community support"}, "home grown food": {"concepts": "home grown food", "concept_list": ["home grown food"], "type": "cluster", "node_size": 18, "label": "home grown food"}, "community sustainability": {"concepts": "community sustainability", "concept_list": ["community sustainability"], "type": "cluster", "node_size": 18, "label": "community sustainability"}, "household deliveries": {"concepts": "household deliveries", "concept_list": ["household deliveries"], "type": "cluster", "node_size": 18, "label": "household deliveries"}, "resource sharing": {"concepts": "resource sharing", "concept_list": ["resource sharing"], "type": "cluster", "node_size": 18, "label": "resource sharing"}, "pandemic impact": {"concepts": "pandemic impact", "concept_list": ["pandemic impact"], "type": "cluster", "node_size": 18, "label": "pandemic impact"}, "image upgrade": {"concepts": "image upgrade", "concept_list": ["image upgrade"], "type": "cluster", "node_size": 18, "label": "image upgrade"}, "retail store safety": {"concepts": "retail store safety", "concept_list": ["retail store safety"], "type": "cluster", "node_size": 18, "label": "retail store safety"}, "fresh vegetables": {"concepts": "fresh vegetables", "concept_list": ["fresh vegetables"], "type": "cluster", "node_size": 18, "label": "fresh vegetables"}, "product availability": {"concepts": "product availability", "concept_list": ["product availability"], "type": "cluster", "node_size": 18, "label": "product availability"}, "children": {"concepts": "children", "concept_list": ["children"], "type": "cluster", "node_size": 18, "label": "children"}, "scalability": {"concepts": "scalability", "concept_list": ["scalability"], "type": "cluster", "node_size": 18, "label": "scalability"}, "community change": {"concepts": "community change", "concept_list": ["community change"], "type": "cluster", "node_size": 18, "label": "community change"}, "convenience": {"concepts": "convenience", "concept_list": ["convenience"], "type": "cluster", "node_size": 18, "label": "convenience"}, "consumer demand": {"concepts": "consumer demand", "concept_list": ["consumer demand"], "type": "cluster", "node_size": 18, "label": "consumer demand"}, "food bank": {"concepts": "food bank", "concept_list": ["food bank"], "type": "cluster", "node_size": 18, "label": "food bank"}, "shopping behavior": {"concepts": "shopping behavior", "concept_list": ["shopping behavior"], "type": "cluster", "node_size": 18, "label": "shopping behavior"}, "urban flint": {"concepts": "urban flint", "concept_list": ["urban flint"], "type": "cluster", "node_size": 18, "label": "urban flint"}, "corporate presence": {"concepts": "corporate presence", "concept_list": ["corporate presence"], "type": "cluster", "node_size": 18, "label": "corporate presence"}, "family owned stores": {"concepts": "family owned stores", "concept_list": ["family owned stores"], "type": "cluster", "node_size": 18, "label": "family owned stores"}, "college": {"concepts": "college", "concept_list": ["college"], "type": "cluster", "node_size": 18, "label": "college"}, "violence": {"concepts": "violence", "concept_list": ["violence"], "type": "cluster", "node_size": 18, "label": "violence"}, "emergency food": {"concepts": "emergency food", "concept_list": ["emergency food"], "type": "cluster", "node_size": 18, "label": "emergency food"}, "livelihoods": {"concepts": "livelihoods", "concept_list": ["livelihoods"], "type": "cluster", "node_size": 18, "label": "livelihoods"}, "farmers": {"concepts": "farmers", "concept_list": ["farmers"], "type": "cluster", "node_size": 18, "label": "farmers"}, "pallets": {"concepts": "pallets", "concept_list": ["pallets"], "type": "cluster", "node_size": 18, "label": "pallets"}, "food supply chain": {"concepts": "food supply chain", "concept_list": ["food supply chain"], "type": "cluster", "node_size": 18, "label": "food supply chain"}, "togetherness": {"concepts": "togetherness", "concept_list": ["togetherness"], "type": "cluster", "node_size": 18, "label": "togetherness"}, "retail": {"concepts": "retail", "concept_list": ["retail"], "type": "cluster", "node_size": 18, "label": "retail"}, "parishtown ministries": {"concepts": "parishtown ministries", "concept_list": ["parishtown ministries"], "type": "cluster", "node_size": 18, "label": "parishtown ministries"}, "growth": {"concepts": "growth", "concept_list": ["growth"], "type": "cluster", "node_size": 18, "label": "growth"}, "problem solving": {"concepts": "problem solving", "concept_list": ["problem solving"], "type": "cluster", "node_size": 18, "label": "problem solving"}, "walk-in cooler": {"concepts": "walk-in cooler", "concept_list": ["walk-in cooler"], "type": "cluster", "node_size": 18, "label": "walk-in cooler"}, "store availability": {"concepts": "store availability", "concept_list": ["store availability"], "type": "cluster", "node_size": 18, "label": "store availability"}, "family pop stores": {"concepts": "family pop stores", "concept_list": ["family pop stores"], "type": "cluster", "node_size": 18, "label": "family pop stores"}, "small grocery stores": {"concepts": "small grocery stores", "concept_list": ["small grocery stores"], "type": "cluster", "node_size": 18, "label": "small grocery stores"}, "mom and pop store": {"concepts": "mom and pop store", "concept_list": ["mom and pop store"], "type": "cluster", "node_size": 18, "label": "mom and pop store"}, "urban development": {"concepts": "urban development", "concept_list": ["urban development"], "type": "cluster", "node_size": 18, "label": "urban development"}, "economic convenience": {"concepts": "economic convenience", "concept_list": ["economic convenience"], "type": "cluster", "node_size": 18, "label": "economic convenience"}, "car access": {"concepts": "car access", "concept_list": ["car access"], "type": "cluster", "node_size": 18, "label": "car access"}, "central location": {"concepts": "central location", "concept_list": ["central location"], "type": "cluster", "node_size": 18, "label": "central location"}, "corner store": {"concepts": "corner store", "concept_list": ["corner store"], "type": "cluster", "node_size": 18, "label": "corner store"}, "legalization": {"concepts": "legalization", "concept_list": ["legalization"], "type": "cluster", "node_size": 18, "label": "legalization"}, "food system": {"concepts": "food system", "concept_list": ["food system"], "type": "cluster", "node_size": 18, "label": "food system"}, "proximity": {"concepts": "proximity", "concept_list": ["proximity"], "type": "cluster", "node_size": 18, "label": "proximity"}, "solvency": {"concepts": "solvency", "concept_list": ["solvency"], "type": "cluster", "node_size": 18, "label": "solvency"}};
        const conceptData = {};
        const interClusterEdges = [["501c3", "household deliveries", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["mom and pop stores", "shopping behavior", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["resources", "dollar stores", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["self-responsibility", "economic perspective", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["basic needs", "scalability", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["shopping center", "urban flint", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["community involvement", "medical center", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["regional expansion", "self-responsibility", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["funders", "profit motive", {"weight": -1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["alcohol", "farmers markets", {"weight": -1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["clientele", "neighbor support", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["public bus", "livelihoods", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["communication", "smaller organizations", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["communication", "vacated houses", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["pallet delivery", "consumer confidence", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["pallet delivery", "catholic charities", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["consumer confidence", "equipment donation", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["restaurants", "profit motive", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["large organizations", "walk-in cooler", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["family owned store", "community", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["families", "grandchildren", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["families", "apartments", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["interdependence", "older women", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["organizational partnerships", "store availability", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["dort highway", "structural adaptation", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["murder", "volunteers", {"weight": -1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["city image", "neighbors", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["produce", "livelihoods", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["homeowners", "townhouses", {"weight": -1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["government blame", "mutual aid", {"weight": -1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["food delivery", "flint", {"weight": 1.0, "confidence": 0.9, "type": "inter_cluster", "style": "solid"}], ["neighborhood stores", "drug presence", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["resilience", "congregation", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["resilience", "greater holy temple", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["government funding", "urban renewal", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["government funding", "suburban areas", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["cooperation", "food distribution", {"weight": 1.0, "confidence": 0.925, "type": "inter_cluster", "style": "solid"}], ["model", "vacated houses", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["model", "chain restaurants", {"weight": -1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["rent", "distribution", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["food boxes", "chain restaurants", {"weight": -1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["structural support", "mom and pop stores", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["network building", "rl jones community outreach", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["churches", "small grocery stores", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["good neighborhood", "leverage points", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["collective action", "emergency food", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["retail closures", "togetherness", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["neighborhoods", "medical facility", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["flint housing", "community retail", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["hunger", "buses", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["neighbors", "larger organizations", {"weight": -1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["housing demolition", "fifth street", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["lower income communities", "image upgrade", {"weight": -1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["lower income communities", "vacated houses", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["households", "consumer confidence", {"weight": 0.5, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["emergency sector", "retail closures", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["community voice", "community support", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["equipment donation", "neighborhoods", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["neighborhood dynamics", "usda", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["houston", "food supply chain", {"weight": 1.0, "confidence": 0.5, "type": "inter_cluster", "style": "solid"}], ["community safety", "social impact", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["community safety", "restaurants", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["forklift operations", "farmers", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["shared responsibility", "basic needs", {"weight": 1.0, "confidence": 0.79, "type": "inter_cluster", "style": "solid"}], ["property development", "convenience", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["community model", "fast food", {"weight": -1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["grant funding", "local planning", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["greater holy temple", "catholic charities", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["authority", "self-responsibility", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["housing development", "family pop stores", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["chain grocery stores", "shopping behavior", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["collaboration", "water distribution", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["collaboration", "money influence", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["honesty", "community", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["townhomes", "liquor", {"weight": -1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["grocery store", "walmart", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["grocery store", "hudson's", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["hunger relief", "expansion barriers", {"weight": -1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["social concerns", "structural support", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["food income", "shopping behavior", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["relief funds", "rl jones community outreach", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["suburban areas", "local restaurants", {"weight": -1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["funding", "rapid response funds", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["funding", "community retail", {"weight": 1.0, "confidence": 0.78, "type": "inter_cluster", "style": "solid"}], ["small business", "parishtown ministries", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["small business", "central location", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["housing", "car access", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["housing", "partnerships", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["politics", "interdependence", {"weight": -1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["utilities", "lower income", {"weight": -1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["schools", "housing development", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["chain restaurants", "farmers markets", {"weight": -1.0, "confidence": 0.575, "type": "inter_cluster", "style": "solid"}], ["accessibility", "product availability", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["water distribution", "proximity", {"weight": 1.0, "confidence": 0.72, "type": "inter_cluster", "style": "solid"}], ["u-haul trucks", "resources", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["residential area", "violence", {"weight": -1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["license verification", "community support", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["dallas", "scalability", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["expansion limits", "medical center", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["expansion limits", "produce", {"weight": -1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["demolition", "food insecurity", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["structural adaptation", "donations", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["structural adaptation", "economic perspective", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["drug presence", "access barriers", {"weight": 1.0, "confidence": 0.8500000000000001, "type": "inter_cluster", "style": "solid"}], ["chain liquor stores", "chain stores", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["seasonal availability", "food deserts", {"weight": -1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["decision-making", "image upgrade", {"weight": 1.0, "confidence": 0.72, "type": "inter_cluster", "style": "solid"}], ["decision-making", "support", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["community image", "economy", {"weight": 1.0, "confidence": 0.775, "type": "inter_cluster", "style": "solid"}], ["walmart", "urban flint", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["food access", "churches", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["food access", "violence", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["seasonality", "urban development", {"weight": -1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["store maintenance", "downtown", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["store maintenance", "social concerns", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["home grown food", "government funding", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["community sustainability", "legalization", {"weight": -1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["household deliveries", "drug trafficking", {"weight": -1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["resource sharing", "grandchildren errands", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["pandemic impact", "neighborhood access", {"weight": -1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["retail store safety", "community", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["fresh vegetables", "small organizations", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["product availability", "emergency sector", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["children", "food system", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["children", "corporate presence", {"weight": -1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["scalability", "store availability", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["community change", "housing development", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["consumer demand", "government funding", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["shopping behavior", "neighborhood change", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["family owned stores", "large organizations", {"weight": -1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["family owned stores", "fresh vegetables", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["college", "mutual aid", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["violence", "resources", {"weight": -1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["retail", "food bank", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["retail", "dollar stores", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["growth", "pallets", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["problem solving", "food system", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["store availability", "support", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["mom and pop store", "large organizations", {"weight": -1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["mom and pop store", "youth", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["urban development", "store conditions", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["urban development", "organizational networks", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["economic convenience", "family owned stores", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["central location", "community sustainability", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["corner store", "urban development", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["proximity", "nonprofits", {"weight": 1.0, "confidence": 0.625, "type": "inter_cluster", "style": "solid"}], ["proximity", "local planning", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["solvency", "support", {"weight": 1.0, "confidence": 0.675, "type": "inter_cluster", "style": "solid"}]];
        const clusterConcepts = {};
        const clusterEdges = {};
        
        let network;
        let currentView = 'clusters';
        let currentCluster = null;
        let minConfidence = 0.3;
        
        // Network options
        const options = {
            nodes: {
                font: { color: 'white', size: 14 },
                borderWidth: 2,
                shadow: true
            },
            edges: {
                arrows: { to: { enabled: true, scaleFactor: 1.2 } },
                shadow: true,
                smooth: { type: 'continuous' }
            },
            physics: {
                stabilization: { iterations: 100 },
                barnesHut: {
                    gravitationalConstant: -8000,
                    springConstant: 0.001,
                    springLength: 200
                }
            },
            interaction: {
                hover: true,
                selectConnectedEdges: false
            }
        };
        
        function initNetwork() {
            const container = document.getElementById('network');
            const data = getClusterViewData();
            network = new vis.Network(container, data, options);
            
            // Handle cluster clicks for drill-down
            network.on("click", function(params) {
                if (params.nodes.length > 0 && currentView === 'clusters') {
                    const clickedNode = params.nodes[0];
                    if (clusterConcepts[clickedNode]) {
                        showClusterDetail(clickedNode);
                    }
                }
            });
        }
        
        function getClusterViewData() {
            const nodes = [];
            const edges = [];
            
            // Add cluster nodes
            Object.entries(clusterData).forEach(([clusterId, data]) => {
                const concepts = data.concepts || [];
                const conceptsStr = Array.isArray(concepts) ? concepts.join(', ') : concepts;
                
                nodes.push({
                    id: clusterId,
                    label: clusterId,
                    title: `Cluster: ${clusterId}\nConcepts: ${conceptsStr}\nClick to explore internal relationships`,
                    color: '#4A90E2',
                    size: 25 + (conceptsStr.split(',').length * 2),
                    font: { color: 'white' }
                });
            });
            
            // Add inter-cluster edges
            interClusterEdges.forEach(([source, target, edgeData]) => {
                const confidence = edgeData.confidence || 1.0;
                const weight = edgeData.weight || 0;
                
                if (confidence >= minConfidence) {
                    edges.push({
                        from: source,
                        to: target,
                        color: weight > 0 ? '#28A745' : '#DC3545',
                        width: Math.abs(weight) * 3 + 1,
                        title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                        dashes: false
                    });
                }
            });
            
            return { nodes: nodes, edges: edges };
        }
        
        function getClusterDetailData(clusterId) {
            const nodes = [];
            const edges = [];
            
            // Add concept nodes for this cluster
            if (clusterConcepts[clusterId]) {
                clusterConcepts[clusterId].forEach(([conceptId, data]) => {
                    nodes.push({
                        id: conceptId,
                        label: conceptId,
                        title: `Concept: ${conceptId}\nFrom cluster: ${clusterId}`,
                        color: '#FF9500',
                        size: 20,
                        font: { color: 'white' }
                    });
                });
            }
            
            // Add intra-cluster edges
            if (clusterEdges[clusterId]) {
                clusterEdges[clusterId].forEach(([source, target, edgeData]) => {
                    const confidence = edgeData.confidence || 1.0;
                    const weight = edgeData.weight || 0;
                    
                    if (confidence >= minConfidence) {
                        edges.push({
                            from: source,
                            to: target,
                            color: weight > 0 ? '#28A745' : '#DC3545',
                            width: Math.abs(weight) * 3 + 1,
                            title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                            dashes: true
                        });
                    }
                });
            }
            
            return { nodes: nodes, edges: edges };
        }
        
        function showClusterView() {
            currentView = 'clusters';
            currentCluster = null;
            const data = getClusterViewData();
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'none';
            document.getElementById('current-view').textContent = 'Cluster Overview';
        }
        
        function showClusterDetail(clusterId) {
            currentView = 'concepts';
            currentCluster = clusterId;
            const data = getClusterDetailData(clusterId);
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'inline-block';
            document.getElementById('current-view').textContent = `Inside Cluster: ${clusterId}`;
        }
        
        function updateConfidenceFilter(value) {
            minConfidence = parseFloat(value);
            document.getElementById('confidence-value').textContent = value;
            
            // Refresh current view
            if (currentView === 'clusters') {
                showClusterView();
            } else {
                showClusterDetail(currentCluster);
            }
        }
        
        // Initialize the network when page loads
        window.onload = function() {
            initNetwork();
        };
    </script>
</body>
</html>
