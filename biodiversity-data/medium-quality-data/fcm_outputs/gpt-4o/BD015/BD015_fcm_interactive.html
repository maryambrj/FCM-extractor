
<!DOCTYPE html>
<html>
<head>
    <title>Hierarchical FCM Visualization</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 0; 
            padding: 20px;
            background: #f5f5f5;
        }
        
        #network { 
            width: 100%; 
            height: 600px; 
            border: 2px solid #ccc; 
            background: white;
            border-radius: 8px;
        }
        
        #controls {
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn {
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        
        .btn-primary { background: #4A90E2; color: white; }
        .btn-primary:hover { background: #357ABD; }
        
        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #545b62; }
        
        #current-view {
            font-weight: bold;
            color: #333;
            margin-left: 10px;
        }
        
        #legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-size: 12px;
            max-width: 200px;
        }
        
        .legend-item {
            margin: 5px 0;
            display: flex;
            align-items: center;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .legend-line {
            width: 20px;
            height: 2px;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <h1>Fuzzy Cognitive Map - Hierarchical View</h1>
    
    <div id="controls">
        <button class="btn btn-secondary" id="back-btn" onclick="showClusterView()" style="display: none;">
            ‚Üê Back to Clusters
        </button>
        <span id="current-view">Cluster Overview</span>
        <div style="float: right;">
            <label>Min Confidence: </label>
            <input type="range" id="confidence-slider" min="0" max="1" step="0.1" value="0.3" 
                   onchange="updateConfidenceFilter(this.value)">
            <span id="confidence-value">0.3</span>
        </div>
    </div>
    
    <div id="network"></div>
    
    <div id="legend">
        <h4>Legend</h4>
        <div class="legend-item">
            <div class="legend-color" style="background: #4A90E2;"></div>
            <span>Clusters</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #FF9500;"></div>
            <span>Concepts</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #28A745;"></div>
            <span>Positive relationship</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #DC3545;"></div>
            <span>Negative relationship</span>
        </div>
        <div style="margin-top: 10px; font-style: italic; color: #666;">
            Click clusters to explore internal concepts
        </div>
    </div>

    <script>
        // Embedded data
        const clusterData = {"Species Conservation": {"concepts": "marine activities, yelloweye rockfish, fishery openings, yelloweye bycatch, yelloweye sport, subsistence fisheries, board of fisheries, fisheries management, fishing game projects, commercial fisheries, shellfish fisheries, fishery management, ground fish, slinky pots, marine recreational activities, marine resource management, crab fishing, fishery dependent dataset, yelloweye biomass, yelloweye commercial, halibut commercial fishery, commercial fishery, fishing game, sport commercial fisheries, fishery quotas, directed fisheries, sport fishery, recreational fishing, fishery, demersal-shelf rockfish, sport fisheries, recreational users, halibut fishery, fishery data, commercial fishery openings, fisheries science", "concept_list": ["marine activities", "yelloweye rockfish", "fishery openings", "yelloweye bycatch", "yelloweye sport", "subsistence fisheries", "board of fisheries", "fisheries management", "fishing game projects", "commercial fisheries", "shellfish fisheries", "fishery management", "ground fish", "slinky pots", "marine recreational activities", "marine resource management", "crab fishing", "fishery dependent dataset", "yelloweye biomass", "yelloweye commercial", "halibut commercial fishery", "commercial fishery", "fishing game", "sport commercial fisheries", "fishery quotas", "directed fisheries", "sport fishery", "recreational fishing", "fishery", "demersal-shelf rockfish", "sport fisheries", "recreational users", "halibut fishery", "fishery data", "commercial fishery openings", "fisheries science"], "type": "cluster", "node_size": 123, "label": "Species Conservation"}, "Regulatory Processes": {"concepts": "single species focus, distance sampling, invertebrate species, habitat forming species, ecosystem management, biomass declines, species assemblage, species of conservation concern, harmful organisms, conservation concerns, key food web species, key food web supporting species, harvest strategy, long-lived species, spatial area, targeting species, biodiversity, single species management, habitat overlap, rocky habitat, stock abundance, species interactions, habitat", "concept_list": ["single species focus", "distance sampling", "invertebrate species", "habitat forming species", "ecosystem management", "biomass declines", "species assemblage", "species of conservation concern", "harmful organisms", "conservation concerns", "key food web species", "key food web supporting species", "harvest strategy", "long-lived species", "spatial area", "targeting species", "biodiversity", "single species management", "habitat overlap", "rocky habitat", "stock abundance", "species interactions", "habitat"], "type": "cluster", "node_size": 84, "label": "Regulatory Processes"}, "Management Plans": {"concepts": "master's degree, support, federal government, closures, education level, rod line regulations, interdisciplinary, rov survey, bag limits, mental models, maturity, software, commercial side, state government, data trends, descender device, public questions, system dynamics, black cod, crab, individual perception, research, harvesting, bycatch regulations, halibut quota, advisory committees, data analysis, social science, relationships, user groups, substance users, hook and line survey, relationship, mental modeler, natural science, industry meetings, policy meetings, pot gear, regulatory process, public meetings, localized depletion, biomass, personal use, recruitment, lingcod, crab researcher, rod line regulations., system components, demographic questions, halibut, conceptualize, survey biomass, commercial users, council voting member, bycatch, hook and line gear, ngo, policy regulations, platform, escape ring policy, conservative approach, gear changes, years of experience, system, charter interaction, policy impact, stakeholders, natural sciences, regulations, possession limits", "concept_list": ["master's degree", "support", "federal government", "closures", "education level", "rod line regulations", "interdisciplinary", "rov survey", "bag limits", "mental models", "maturity", "software", "commercial side", "state government", "data trends", "descender device", "public questions", "system dynamics", "black cod", "crab", "individual perception", "research", "harvesting", "bycatch regulations", "halibut quota", "advisory committees", "data analysis", "social science", "relationships", "user groups", "substance users", "hook and line survey", "relationship", "mental modeler", "natural science", "industry meetings", "policy meetings", "pot gear", "regulatory process", "public meetings", "localized depletion", "biomass", "personal use", "recruitment", "lingcod", "crab researcher", "rod line regulations.", "system components", "demographic questions", "halibut", "conceptualize", "survey biomass", "commercial users", "council voting member", "bycatch", "hook and line gear", "ngo", "policy regulations", "platform", "escape ring policy", "conservative approach", "gear changes", "years of experience", "system", "charter interaction", "policy impact", "stakeholders", "natural sciences", "regulations", "possession limits"], "type": "cluster", "node_size": 225, "label": "Management Plans"}, "Fisheries Management": {"concepts": "project staff, stock assessments, management plans, stock recovery, allocative management plans, management biologist, management research coordinator, management protocols, operational plans, management decision, management plan", "concept_list": ["project staff", "stock assessments", "management plans", "stock recovery", "allocative management plans", "management biologist", "management research coordinator", "management protocols", "operational plans", "management decision", "management plan"], "type": "cluster", "node_size": 48, "label": "Fisheries Management"}};
        const conceptData = {"marine activities": {"concepts": "marine activities", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "marine activities"}, "yelloweye rockfish": {"concepts": "yelloweye rockfish", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "yelloweye rockfish"}, "fishery openings": {"concepts": "fishery openings", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "fishery openings"}, "yelloweye bycatch": {"concepts": "yelloweye bycatch", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "yelloweye bycatch"}, "yelloweye sport": {"concepts": "yelloweye sport", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "yelloweye sport"}, "subsistence fisheries": {"concepts": "subsistence fisheries", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "subsistence fisheries"}, "board of fisheries": {"concepts": "board of fisheries", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "board of fisheries"}, "fisheries management": {"concepts": "fisheries management", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "fisheries management"}, "fishing game projects": {"concepts": "fishing game projects", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "fishing game projects"}, "commercial fisheries": {"concepts": "commercial fisheries", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "commercial fisheries"}, "shellfish fisheries": {"concepts": "shellfish fisheries", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "shellfish fisheries"}, "fishery management": {"concepts": "fishery management", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "fishery management"}, "ground fish": {"concepts": "ground fish", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "ground fish"}, "slinky pots": {"concepts": "slinky pots", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "slinky pots"}, "marine recreational activities": {"concepts": "marine recreational activities", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "marine recreational activities"}, "marine resource management": {"concepts": "marine resource management", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "marine resource management"}, "crab fishing": {"concepts": "crab fishing", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "crab fishing"}, "fishery dependent dataset": {"concepts": "fishery dependent dataset", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "fishery dependent dataset"}, "yelloweye biomass": {"concepts": "yelloweye biomass", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "yelloweye biomass"}, "yelloweye commercial": {"concepts": "yelloweye commercial", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "yelloweye commercial"}, "halibut commercial fishery": {"concepts": "halibut commercial fishery", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "halibut commercial fishery"}, "commercial fishery": {"concepts": "commercial fishery", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "commercial fishery"}, "fishing game": {"concepts": "fishing game", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "fishing game"}, "sport commercial fisheries": {"concepts": "sport commercial fisheries", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "sport commercial fisheries"}, "fishery quotas": {"concepts": "fishery quotas", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "fishery quotas"}, "directed fisheries": {"concepts": "directed fisheries", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "directed fisheries"}, "sport fishery": {"concepts": "sport fishery", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "sport fishery"}, "recreational fishing": {"concepts": "recreational fishing", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "recreational fishing"}, "fishery": {"concepts": "fishery", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "fishery"}, "demersal-shelf rockfish": {"concepts": "demersal-shelf rockfish", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "demersal-shelf rockfish"}, "sport fisheries": {"concepts": "sport fisheries", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "sport fisheries"}, "recreational users": {"concepts": "recreational users", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "recreational users"}, "halibut fishery": {"concepts": "halibut fishery", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "halibut fishery"}, "fishery data": {"concepts": "fishery data", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "fishery data"}, "commercial fishery openings": {"concepts": "commercial fishery openings", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "commercial fishery openings"}, "fisheries science": {"concepts": "fisheries science", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "fisheries science"}, "single species focus": {"concepts": "single species focus", "type": "concept", "cluster": "Regulatory Processes", "node_size": 10, "label": "single species focus"}, "distance sampling": {"concepts": "distance sampling", "type": "concept", "cluster": "Regulatory Processes", "node_size": 10, "label": "distance sampling"}, "invertebrate species": {"concepts": "invertebrate species", "type": "concept", "cluster": "Regulatory Processes", "node_size": 10, "label": "invertebrate species"}, "habitat forming species": {"concepts": "habitat forming species", "type": "concept", "cluster": "Regulatory Processes", "node_size": 10, "label": "habitat forming species"}, "ecosystem management": {"concepts": "ecosystem management", "type": "concept", "cluster": "Regulatory Processes", "node_size": 10, "label": "ecosystem management"}, "biomass declines": {"concepts": "biomass declines", "type": "concept", "cluster": "Regulatory Processes", "node_size": 10, "label": "biomass declines"}, "species assemblage": {"concepts": "species assemblage", "type": "concept", "cluster": "Regulatory Processes", "node_size": 10, "label": "species assemblage"}, "species of conservation concern": {"concepts": "species of conservation concern", "type": "concept", "cluster": "Regulatory Processes", "node_size": 10, "label": "species of conservation concern"}, "harmful organisms": {"concepts": "harmful organisms", "type": "concept", "cluster": "Regulatory Processes", "node_size": 10, "label": "harmful organisms"}, "conservation concerns": {"concepts": "conservation concerns", "type": "concept", "cluster": "Regulatory Processes", "node_size": 10, "label": "conservation concerns"}, "key food web species": {"concepts": "key food web species", "type": "concept", "cluster": "Regulatory Processes", "node_size": 10, "label": "key food web species"}, "key food web supporting species": {"concepts": "key food web supporting species", "type": "concept", "cluster": "Regulatory Processes", "node_size": 10, "label": "key food web supporting species"}, "harvest strategy": {"concepts": "harvest strategy", "type": "concept", "cluster": "Regulatory Processes", "node_size": 10, "label": "harvest strategy"}, "long-lived species": {"concepts": "long-lived species", "type": "concept", "cluster": "Regulatory Processes", "node_size": 10, "label": "long-lived species"}, "spatial area": {"concepts": "spatial area", "type": "concept", "cluster": "Regulatory Processes", "node_size": 10, "label": "spatial area"}, "targeting species": {"concepts": "targeting species", "type": "concept", "cluster": "Regulatory Processes", "node_size": 10, "label": "targeting species"}, "biodiversity": {"concepts": "biodiversity", "type": "concept", "cluster": "Regulatory Processes", "node_size": 10, "label": "biodiversity"}, "single species management": {"concepts": "single species management", "type": "concept", "cluster": "Regulatory Processes", "node_size": 10, "label": "single species management"}, "habitat overlap": {"concepts": "habitat overlap", "type": "concept", "cluster": "Regulatory Processes", "node_size": 10, "label": "habitat overlap"}, "rocky habitat": {"concepts": "rocky habitat", "type": "concept", "cluster": "Regulatory Processes", "node_size": 10, "label": "rocky habitat"}, "stock abundance": {"concepts": "stock abundance", "type": "concept", "cluster": "Regulatory Processes", "node_size": 10, "label": "stock abundance"}, "species interactions": {"concepts": "species interactions", "type": "concept", "cluster": "Regulatory Processes", "node_size": 10, "label": "species interactions"}, "habitat": {"concepts": "habitat", "type": "concept", "cluster": "Regulatory Processes", "node_size": 10, "label": "habitat"}, "master's degree": {"concepts": "master's degree", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "master's degree"}, "support": {"concepts": "support", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "support"}, "federal government": {"concepts": "federal government", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "federal government"}, "closures": {"concepts": "closures", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "closures"}, "education level": {"concepts": "education level", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "education level"}, "rod line regulations": {"concepts": "rod line regulations", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "rod line regulations"}, "interdisciplinary": {"concepts": "interdisciplinary", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "interdisciplinary"}, "rov survey": {"concepts": "rov survey", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "rov survey"}, "bag limits": {"concepts": "bag limits", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "bag limits"}, "mental models": {"concepts": "mental models", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "mental models"}, "maturity": {"concepts": "maturity", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "maturity"}, "software": {"concepts": "software", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "software"}, "commercial side": {"concepts": "commercial side", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "commercial side"}, "state government": {"concepts": "state government", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "state government"}, "data trends": {"concepts": "data trends", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "data trends"}, "descender device": {"concepts": "descender device", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "descender device"}, "public questions": {"concepts": "public questions", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "public questions"}, "system dynamics": {"concepts": "system dynamics", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "system dynamics"}, "black cod": {"concepts": "black cod", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "black cod"}, "crab": {"concepts": "crab", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "crab"}, "individual perception": {"concepts": "individual perception", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "individual perception"}, "research": {"concepts": "research", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "research"}, "harvesting": {"concepts": "harvesting", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "harvesting"}, "bycatch regulations": {"concepts": "bycatch regulations", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "bycatch regulations"}, "halibut quota": {"concepts": "halibut quota", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "halibut quota"}, "advisory committees": {"concepts": "advisory committees", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "advisory committees"}, "data analysis": {"concepts": "data analysis", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "data analysis"}, "social science": {"concepts": "social science", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "social science"}, "relationships": {"concepts": "relationships", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "relationships"}, "user groups": {"concepts": "user groups", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "user groups"}, "substance users": {"concepts": "substance users", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "substance users"}, "hook and line survey": {"concepts": "hook and line survey", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "hook and line survey"}, "relationship": {"concepts": "relationship", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "relationship"}, "mental modeler": {"concepts": "mental modeler", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "mental modeler"}, "natural science": {"concepts": "natural science", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "natural science"}, "industry meetings": {"concepts": "industry meetings", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "industry meetings"}, "policy meetings": {"concepts": "policy meetings", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "policy meetings"}, "pot gear": {"concepts": "pot gear", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "pot gear"}, "regulatory process": {"concepts": "regulatory process", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "regulatory process"}, "public meetings": {"concepts": "public meetings", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "public meetings"}, "localized depletion": {"concepts": "localized depletion", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "localized depletion"}, "biomass": {"concepts": "biomass", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "biomass"}, "personal use": {"concepts": "personal use", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "personal use"}, "recruitment": {"concepts": "recruitment", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "recruitment"}, "lingcod": {"concepts": "lingcod", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "lingcod"}, "crab researcher": {"concepts": "crab researcher", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "crab researcher"}, "rod line regulations.": {"concepts": "rod line regulations.", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "rod line regulations."}, "system components": {"concepts": "system components", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "system components"}, "demographic questions": {"concepts": "demographic questions", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "demographic questions"}, "halibut": {"concepts": "halibut", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "halibut"}, "conceptualize": {"concepts": "conceptualize", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "conceptualize"}, "survey biomass": {"concepts": "survey biomass", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "survey biomass"}, "commercial users": {"concepts": "commercial users", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "commercial users"}, "council voting member": {"concepts": "council voting member", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "council voting member"}, "bycatch": {"concepts": "bycatch", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "bycatch"}, "hook and line gear": {"concepts": "hook and line gear", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "hook and line gear"}, "ngo": {"concepts": "ngo", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "ngo"}, "policy regulations": {"concepts": "policy regulations", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "policy regulations"}, "platform": {"concepts": "platform", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "platform"}, "escape ring policy": {"concepts": "escape ring policy", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "escape ring policy"}, "conservative approach": {"concepts": "conservative approach", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "conservative approach"}, "gear changes": {"concepts": "gear changes", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "gear changes"}, "years of experience": {"concepts": "years of experience", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "years of experience"}, "system": {"concepts": "system", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "system"}, "charter interaction": {"concepts": "charter interaction", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "charter interaction"}, "policy impact": {"concepts": "policy impact", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "policy impact"}, "stakeholders": {"concepts": "stakeholders", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "stakeholders"}, "natural sciences": {"concepts": "natural sciences", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "natural sciences"}, "regulations": {"concepts": "regulations", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "regulations"}, "possession limits": {"concepts": "possession limits", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "possession limits"}, "project staff": {"concepts": "project staff", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "project staff"}, "stock assessments": {"concepts": "stock assessments", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "stock assessments"}, "management plans": {"concepts": "management plans", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "management plans"}, "stock recovery": {"concepts": "stock recovery", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "stock recovery"}, "allocative management plans": {"concepts": "allocative management plans", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "allocative management plans"}, "management biologist": {"concepts": "management biologist", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "management biologist"}, "management research coordinator": {"concepts": "management research coordinator", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "management research coordinator"}, "management protocols": {"concepts": "management protocols", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "management protocols"}, "operational plans": {"concepts": "operational plans", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "operational plans"}, "management decision": {"concepts": "management decision", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "management decision"}, "management plan": {"concepts": "management plan", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "management plan"}};
        const interClusterEdges = [["Species Conservation", "Fisheries Management", {"weight": 0.6, "confidence": 0.54, "type": "inter_cluster", "style": "solid"}], ["Species Conservation", "Regulatory Processes", {"weight": 0.2, "confidence": 0.45999999999999996, "type": "inter_cluster", "style": "solid"}], ["Species Conservation", "Management Plans", {"weight": 0.4, "confidence": 0.36, "type": "inter_cluster", "style": "solid"}], ["Regulatory Processes", "Species Conservation", {"weight": 0.4, "confidence": 0.5900000000000001, "type": "inter_cluster", "style": "solid"}], ["Regulatory Processes", "Fisheries Management", {"weight": 0.6, "confidence": 0.48, "type": "inter_cluster", "style": "solid"}], ["Regulatory Processes", "Management Plans", {"weight": 0.4, "confidence": 0.31, "type": "inter_cluster", "style": "solid"}], ["Management Plans", "Species Conservation", {"weight": 0.4, "confidence": 0.6399999999999999, "type": "inter_cluster", "style": "solid"}], ["Management Plans", "Regulatory Processes", {"weight": 0.4, "confidence": 0.64, "type": "inter_cluster", "style": "solid"}], ["Management Plans", "Fisheries Management", {"weight": 0.4, "confidence": 0.36, "type": "inter_cluster", "style": "solid"}], ["Fisheries Management", "Species Conservation", {"weight": 0.8, "confidence": 0.71, "type": "inter_cluster", "style": "solid"}], ["Fisheries Management", "Management Plans", {"weight": 0.8, "confidence": 0.6799999999999999, "type": "inter_cluster", "style": "solid"}], ["Fisheries Management", "Regulatory Processes", {"weight": 0.4, "confidence": 0.6300000000000001, "type": "inter_cluster", "style": "solid"}]];
        const clusterConcepts = {"Species Conservation": [["marine activities", {"concepts": "marine activities", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "marine activities"}], ["yelloweye rockfish", {"concepts": "yelloweye rockfish", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "yelloweye rockfish"}], ["fishery openings", {"concepts": "fishery openings", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "fishery openings"}], ["yelloweye bycatch", {"concepts": "yelloweye bycatch", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "yelloweye bycatch"}], ["yelloweye sport", {"concepts": "yelloweye sport", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "yelloweye sport"}], ["subsistence fisheries", {"concepts": "subsistence fisheries", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "subsistence fisheries"}], ["board of fisheries", {"concepts": "board of fisheries", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "board of fisheries"}], ["fisheries management", {"concepts": "fisheries management", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "fisheries management"}], ["fishing game projects", {"concepts": "fishing game projects", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "fishing game projects"}], ["commercial fisheries", {"concepts": "commercial fisheries", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "commercial fisheries"}], ["shellfish fisheries", {"concepts": "shellfish fisheries", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "shellfish fisheries"}], ["fishery management", {"concepts": "fishery management", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "fishery management"}], ["ground fish", {"concepts": "ground fish", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "ground fish"}], ["slinky pots", {"concepts": "slinky pots", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "slinky pots"}], ["marine recreational activities", {"concepts": "marine recreational activities", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "marine recreational activities"}], ["marine resource management", {"concepts": "marine resource management", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "marine resource management"}], ["crab fishing", {"concepts": "crab fishing", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "crab fishing"}], ["fishery dependent dataset", {"concepts": "fishery dependent dataset", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "fishery dependent dataset"}], ["yelloweye biomass", {"concepts": "yelloweye biomass", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "yelloweye biomass"}], ["yelloweye commercial", {"concepts": "yelloweye commercial", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "yelloweye commercial"}], ["halibut commercial fishery", {"concepts": "halibut commercial fishery", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "halibut commercial fishery"}], ["commercial fishery", {"concepts": "commercial fishery", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "commercial fishery"}], ["fishing game", {"concepts": "fishing game", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "fishing game"}], ["sport commercial fisheries", {"concepts": "sport commercial fisheries", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "sport commercial fisheries"}], ["fishery quotas", {"concepts": "fishery quotas", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "fishery quotas"}], ["directed fisheries", {"concepts": "directed fisheries", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "directed fisheries"}], ["sport fishery", {"concepts": "sport fishery", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "sport fishery"}], ["recreational fishing", {"concepts": "recreational fishing", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "recreational fishing"}], ["fishery", {"concepts": "fishery", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "fishery"}], ["demersal-shelf rockfish", {"concepts": "demersal-shelf rockfish", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "demersal-shelf rockfish"}], ["sport fisheries", {"concepts": "sport fisheries", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "sport fisheries"}], ["recreational users", {"concepts": "recreational users", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "recreational users"}], ["halibut fishery", {"concepts": "halibut fishery", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "halibut fishery"}], ["fishery data", {"concepts": "fishery data", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "fishery data"}], ["commercial fishery openings", {"concepts": "commercial fishery openings", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "commercial fishery openings"}], ["fisheries science", {"concepts": "fisheries science", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "fisheries science"}]], "Regulatory Processes": [["single species focus", {"concepts": "single species focus", "type": "concept", "cluster": "Regulatory Processes", "node_size": 10, "label": "single species focus"}], ["distance sampling", {"concepts": "distance sampling", "type": "concept", "cluster": "Regulatory Processes", "node_size": 10, "label": "distance sampling"}], ["invertebrate species", {"concepts": "invertebrate species", "type": "concept", "cluster": "Regulatory Processes", "node_size": 10, "label": "invertebrate species"}], ["habitat forming species", {"concepts": "habitat forming species", "type": "concept", "cluster": "Regulatory Processes", "node_size": 10, "label": "habitat forming species"}], ["ecosystem management", {"concepts": "ecosystem management", "type": "concept", "cluster": "Regulatory Processes", "node_size": 10, "label": "ecosystem management"}], ["biomass declines", {"concepts": "biomass declines", "type": "concept", "cluster": "Regulatory Processes", "node_size": 10, "label": "biomass declines"}], ["species assemblage", {"concepts": "species assemblage", "type": "concept", "cluster": "Regulatory Processes", "node_size": 10, "label": "species assemblage"}], ["species of conservation concern", {"concepts": "species of conservation concern", "type": "concept", "cluster": "Regulatory Processes", "node_size": 10, "label": "species of conservation concern"}], ["harmful organisms", {"concepts": "harmful organisms", "type": "concept", "cluster": "Regulatory Processes", "node_size": 10, "label": "harmful organisms"}], ["conservation concerns", {"concepts": "conservation concerns", "type": "concept", "cluster": "Regulatory Processes", "node_size": 10, "label": "conservation concerns"}], ["key food web species", {"concepts": "key food web species", "type": "concept", "cluster": "Regulatory Processes", "node_size": 10, "label": "key food web species"}], ["key food web supporting species", {"concepts": "key food web supporting species", "type": "concept", "cluster": "Regulatory Processes", "node_size": 10, "label": "key food web supporting species"}], ["harvest strategy", {"concepts": "harvest strategy", "type": "concept", "cluster": "Regulatory Processes", "node_size": 10, "label": "harvest strategy"}], ["long-lived species", {"concepts": "long-lived species", "type": "concept", "cluster": "Regulatory Processes", "node_size": 10, "label": "long-lived species"}], ["spatial area", {"concepts": "spatial area", "type": "concept", "cluster": "Regulatory Processes", "node_size": 10, "label": "spatial area"}], ["targeting species", {"concepts": "targeting species", "type": "concept", "cluster": "Regulatory Processes", "node_size": 10, "label": "targeting species"}], ["biodiversity", {"concepts": "biodiversity", "type": "concept", "cluster": "Regulatory Processes", "node_size": 10, "label": "biodiversity"}], ["single species management", {"concepts": "single species management", "type": "concept", "cluster": "Regulatory Processes", "node_size": 10, "label": "single species management"}], ["habitat overlap", {"concepts": "habitat overlap", "type": "concept", "cluster": "Regulatory Processes", "node_size": 10, "label": "habitat overlap"}], ["rocky habitat", {"concepts": "rocky habitat", "type": "concept", "cluster": "Regulatory Processes", "node_size": 10, "label": "rocky habitat"}], ["stock abundance", {"concepts": "stock abundance", "type": "concept", "cluster": "Regulatory Processes", "node_size": 10, "label": "stock abundance"}], ["species interactions", {"concepts": "species interactions", "type": "concept", "cluster": "Regulatory Processes", "node_size": 10, "label": "species interactions"}], ["habitat", {"concepts": "habitat", "type": "concept", "cluster": "Regulatory Processes", "node_size": 10, "label": "habitat"}]], "Management Plans": [["master's degree", {"concepts": "master's degree", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "master's degree"}], ["support", {"concepts": "support", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "support"}], ["federal government", {"concepts": "federal government", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "federal government"}], ["closures", {"concepts": "closures", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "closures"}], ["education level", {"concepts": "education level", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "education level"}], ["rod line regulations", {"concepts": "rod line regulations", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "rod line regulations"}], ["interdisciplinary", {"concepts": "interdisciplinary", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "interdisciplinary"}], ["rov survey", {"concepts": "rov survey", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "rov survey"}], ["bag limits", {"concepts": "bag limits", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "bag limits"}], ["mental models", {"concepts": "mental models", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "mental models"}], ["maturity", {"concepts": "maturity", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "maturity"}], ["software", {"concepts": "software", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "software"}], ["commercial side", {"concepts": "commercial side", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "commercial side"}], ["state government", {"concepts": "state government", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "state government"}], ["data trends", {"concepts": "data trends", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "data trends"}], ["descender device", {"concepts": "descender device", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "descender device"}], ["public questions", {"concepts": "public questions", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "public questions"}], ["system dynamics", {"concepts": "system dynamics", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "system dynamics"}], ["black cod", {"concepts": "black cod", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "black cod"}], ["crab", {"concepts": "crab", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "crab"}], ["individual perception", {"concepts": "individual perception", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "individual perception"}], ["research", {"concepts": "research", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "research"}], ["harvesting", {"concepts": "harvesting", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "harvesting"}], ["bycatch regulations", {"concepts": "bycatch regulations", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "bycatch regulations"}], ["halibut quota", {"concepts": "halibut quota", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "halibut quota"}], ["advisory committees", {"concepts": "advisory committees", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "advisory committees"}], ["data analysis", {"concepts": "data analysis", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "data analysis"}], ["social science", {"concepts": "social science", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "social science"}], ["relationships", {"concepts": "relationships", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "relationships"}], ["user groups", {"concepts": "user groups", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "user groups"}], ["substance users", {"concepts": "substance users", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "substance users"}], ["hook and line survey", {"concepts": "hook and line survey", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "hook and line survey"}], ["relationship", {"concepts": "relationship", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "relationship"}], ["mental modeler", {"concepts": "mental modeler", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "mental modeler"}], ["natural science", {"concepts": "natural science", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "natural science"}], ["industry meetings", {"concepts": "industry meetings", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "industry meetings"}], ["policy meetings", {"concepts": "policy meetings", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "policy meetings"}], ["pot gear", {"concepts": "pot gear", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "pot gear"}], ["regulatory process", {"concepts": "regulatory process", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "regulatory process"}], ["public meetings", {"concepts": "public meetings", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "public meetings"}], ["localized depletion", {"concepts": "localized depletion", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "localized depletion"}], ["biomass", {"concepts": "biomass", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "biomass"}], ["personal use", {"concepts": "personal use", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "personal use"}], ["recruitment", {"concepts": "recruitment", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "recruitment"}], ["lingcod", {"concepts": "lingcod", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "lingcod"}], ["crab researcher", {"concepts": "crab researcher", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "crab researcher"}], ["rod line regulations.", {"concepts": "rod line regulations.", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "rod line regulations."}], ["system components", {"concepts": "system components", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "system components"}], ["demographic questions", {"concepts": "demographic questions", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "demographic questions"}], ["halibut", {"concepts": "halibut", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "halibut"}], ["conceptualize", {"concepts": "conceptualize", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "conceptualize"}], ["survey biomass", {"concepts": "survey biomass", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "survey biomass"}], ["commercial users", {"concepts": "commercial users", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "commercial users"}], ["council voting member", {"concepts": "council voting member", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "council voting member"}], ["bycatch", {"concepts": "bycatch", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "bycatch"}], ["hook and line gear", {"concepts": "hook and line gear", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "hook and line gear"}], ["ngo", {"concepts": "ngo", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "ngo"}], ["policy regulations", {"concepts": "policy regulations", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "policy regulations"}], ["platform", {"concepts": "platform", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "platform"}], ["escape ring policy", {"concepts": "escape ring policy", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "escape ring policy"}], ["conservative approach", {"concepts": "conservative approach", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "conservative approach"}], ["gear changes", {"concepts": "gear changes", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "gear changes"}], ["years of experience", {"concepts": "years of experience", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "years of experience"}], ["system", {"concepts": "system", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "system"}], ["charter interaction", {"concepts": "charter interaction", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "charter interaction"}], ["policy impact", {"concepts": "policy impact", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "policy impact"}], ["stakeholders", {"concepts": "stakeholders", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "stakeholders"}], ["natural sciences", {"concepts": "natural sciences", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "natural sciences"}], ["regulations", {"concepts": "regulations", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "regulations"}], ["possession limits", {"concepts": "possession limits", "type": "concept", "cluster": "Management Plans", "node_size": 10, "label": "possession limits"}]], "Fisheries Management": [["project staff", {"concepts": "project staff", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "project staff"}], ["stock assessments", {"concepts": "stock assessments", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "stock assessments"}], ["management plans", {"concepts": "management plans", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "management plans"}], ["stock recovery", {"concepts": "stock recovery", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "stock recovery"}], ["allocative management plans", {"concepts": "allocative management plans", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "allocative management plans"}], ["management biologist", {"concepts": "management biologist", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "management biologist"}], ["management research coordinator", {"concepts": "management research coordinator", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "management research coordinator"}], ["management protocols", {"concepts": "management protocols", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "management protocols"}], ["operational plans", {"concepts": "operational plans", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "operational plans"}], ["management decision", {"concepts": "management decision", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "management decision"}], ["management plan", {"concepts": "management plan", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "management plan"}]]};
        const clusterEdges = {"Species Conservation": [], "Regulatory Processes": [], "Management Plans": [], "Fisheries Management": []};
        
        let network;
        let currentView = 'clusters';
        let currentCluster = null;
        let minConfidence = 0.3;
        
        // Network options
        const options = {
            nodes: {
                font: { color: 'white', size: 14 },
                borderWidth: 2,
                shadow: true
            },
            edges: {
                arrows: { to: { enabled: true, scaleFactor: 1.2 } },
                shadow: true,
                smooth: { type: 'continuous' }
            },
            physics: {
                stabilization: { iterations: 100 },
                barnesHut: {
                    gravitationalConstant: -8000,
                    springConstant: 0.001,
                    springLength: 200
                }
            },
            interaction: {
                hover: true,
                selectConnectedEdges: false
            }
        };
        
        function initNetwork() {
            const container = document.getElementById('network');
            const data = getClusterViewData();
            network = new vis.Network(container, data, options);
            
            // Handle cluster clicks for drill-down
            network.on("click", function(params) {
                if (params.nodes.length > 0 && currentView === 'clusters') {
                    const clickedNode = params.nodes[0];
                    if (clusterConcepts[clickedNode]) {
                        showClusterDetail(clickedNode);
                    }
                }
            });
        }
        
        function getClusterViewData() {
            const nodes = [];
            const edges = [];
            
            // Add cluster nodes
            Object.entries(clusterData).forEach(([clusterId, data]) => {
                const concepts = data.concepts || [];
                const conceptsStr = Array.isArray(concepts) ? concepts.join(', ') : concepts;
                
                nodes.push({
                    id: clusterId,
                    label: clusterId,
                    title: `Cluster: ${clusterId}\nConcepts: ${conceptsStr}\nClick to explore internal relationships`,
                    color: '#4A90E2',
                    size: 25 + (conceptsStr.split(',').length * 2),
                    font: { color: 'white' }
                });
            });
            
            // Add inter-cluster edges
            interClusterEdges.forEach(([source, target, edgeData]) => {
                const confidence = edgeData.confidence || 1.0;
                const weight = edgeData.weight || 0;
                
                if (confidence >= minConfidence) {
                    edges.push({
                        from: source,
                        to: target,
                        color: weight > 0 ? '#28A745' : '#DC3545',
                        width: Math.abs(weight) * 3 + 1,
                        title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                        dashes: false
                    });
                }
            });
            
            return { nodes: nodes, edges: edges };
        }
        
        function getClusterDetailData(clusterId) {
            const nodes = [];
            const edges = [];
            
            // Add concept nodes for this cluster
            if (clusterConcepts[clusterId]) {
                clusterConcepts[clusterId].forEach(([conceptId, data]) => {
                    nodes.push({
                        id: conceptId,
                        label: conceptId,
                        title: `Concept: ${conceptId}\nFrom cluster: ${clusterId}`,
                        color: '#FF9500',
                        size: 20,
                        font: { color: 'white' }
                    });
                });
            }
            
            // Add intra-cluster edges
            if (clusterEdges[clusterId]) {
                clusterEdges[clusterId].forEach(([source, target, edgeData]) => {
                    const confidence = edgeData.confidence || 1.0;
                    const weight = edgeData.weight || 0;
                    
                    if (confidence >= minConfidence) {
                        edges.push({
                            from: source,
                            to: target,
                            color: weight > 0 ? '#28A745' : '#DC3545',
                            width: Math.abs(weight) * 3 + 1,
                            title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                            dashes: true
                        });
                    }
                });
            }
            
            return { nodes: nodes, edges: edges };
        }
        
        function showClusterView() {
            currentView = 'clusters';
            currentCluster = null;
            const data = getClusterViewData();
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'none';
            document.getElementById('current-view').textContent = 'Cluster Overview';
        }
        
        function showClusterDetail(clusterId) {
            currentView = 'concepts';
            currentCluster = clusterId;
            const data = getClusterDetailData(clusterId);
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'inline-block';
            document.getElementById('current-view').textContent = `Inside Cluster: ${clusterId}`;
        }
        
        function updateConfidenceFilter(value) {
            minConfidence = parseFloat(value);
            document.getElementById('confidence-value').textContent = value;
            
            // Refresh current view
            if (currentView === 'clusters') {
                showClusterView();
            } else {
                showClusterDetail(currentCluster);
            }
        }
        
        // Initialize the network when page loads
        window.onload = function() {
            initNetwork();
        };
    </script>
</body>
</html>
