
<!DOCTYPE html>
<html>
<head>
    <title>Hierarchical FCM Visualization</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 0; 
            padding: 20px;
            background: #f5f5f5;
        }
        
        #network { 
            width: 100%; 
            height: 600px; 
            border: 2px solid #ccc; 
            background: white;
            border-radius: 8px;
        }
        
        #controls {
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn {
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        
        .btn-primary { background: #4A90E2; color: white; }
        .btn-primary:hover { background: #357ABD; }
        
        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #545b62; }
        
        #current-view {
            font-weight: bold;
            color: #333;
            margin-left: 10px;
        }
        
        #legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-size: 12px;
            max-width: 200px;
        }
        
        .legend-item {
            margin: 5px 0;
            display: flex;
            align-items: center;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .legend-line {
            width: 20px;
            height: 2px;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <h1>Fuzzy Cognitive Map - Hierarchical View</h1>
    
    <div id="controls">
        <button class="btn btn-secondary" id="back-btn" onclick="showClusterView()" style="display: none;">
            ‚Üê Back to Clusters
        </button>
        <span id="current-view">Cluster Overview</span>
        <div style="float: right;">
            <label>Min Confidence: </label>
            <input type="range" id="confidence-slider" min="0" max="1" step="0.1" value="0.3" 
                   onchange="updateConfidenceFilter(this.value)">
            <span id="confidence-value">0.3</span>
        </div>
    </div>
    
    <div id="network"></div>
    
    <div id="legend">
        <h4>Legend</h4>
        <div class="legend-item">
            <div class="legend-color" style="background: #4A90E2;"></div>
            <span>Clusters</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #FF9500;"></div>
            <span>Concepts</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #28A745;"></div>
            <span>Positive relationship</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #DC3545;"></div>
            <span>Negative relationship</span>
        </div>
        <div style="margin-top: 10px; font-style: italic; color: #666;">
            Click clusters to explore internal concepts
        </div>
    </div>

    <script>
        // Embedded data
        const clusterData = {"Professional Mentorship Networks": {"concepts": "urbanization, genetic diversity, eutrophication, social exclusion, community plan, organizational hierarchy, medical: water quality, science background, research publications, industry norms, fisheries management, health, waterfront access, salinity effects, stormwater runoff, wetlands, hypoxia, environmental groups, local farmers, seagrant, social: urbanization, temperature, community ties, shell loss, economic impacts, carbon footprint, lease maintenance, climate change, growth, biodiversity, seasonal variations, education outreach, executive committee, social drivers, regulation enforcement, ph levels, ocean acidification, precipitation, division, industry culture, sustainability concerns, coastal biodiversity, workplace discrimination, social capital, trophication, undergraduate research, social dynamics, environmental resilience, economic gain, system understanding, networking, gender roles, graduate research, regulatory organizations, jubilee, shell color, climate organization, funding, nature conservancy, community, water body, germo, photosynthesising, business challenges, thermal pollution, drought, collaboration, resource management, economic impact, water obsession, regulation, ngos, oyster growth, collaborative science, water quality, commercial business, female entrepreneurship, resource user, networking strategies, seasonal effects, salt-wedge estuary, female leadership, dissolved organic material, nutrient input, shellfish growth, oyster health, space provision, opinions, public opinion, wastewater facility, dynamic environment, sewage spills, agriculture, collaboration challenges, freshwater influx, calcium depletion, infrastructure, treatment systems, bay cleaning, research encouragement, systemic barriers, environmental factors, gender bias, power structures, water watch, turbidity, stakeholders, sustainability, management decisions, business networks, enforcement, green algae, mental modeling, oyster farming, salinity, marine biodiversity, local extension, industry challenges", "concept_list": ["urbanization", "genetic diversity", "eutrophication", "social exclusion", "community plan", "organizational hierarchy", "medical: water quality", "science background", "research publications", "industry norms", "fisheries management", "health", "waterfront access", "salinity effects", "stormwater runoff", "wetlands", "hypoxia", "environmental groups", "local farmers", "seagrant", "social: urbanization", "temperature", "community ties", "shell loss", "economic impacts", "carbon footprint", "lease maintenance", "climate change", "growth", "biodiversity", "seasonal variations", "education outreach", "executive committee", "social drivers", "regulation enforcement", "ph levels", "ocean acidification", "precipitation", "division", "industry culture", "sustainability concerns", "coastal biodiversity", "workplace discrimination", "social capital", "trophication", "undergraduate research", "social dynamics", "environmental resilience", "economic gain", "system understanding", "networking", "gender roles", "graduate research", "regulatory organizations", "jubilee", "shell color", "climate organization", "funding", "nature conservancy", "community", "water body", "germo", "photosynthesising", "business challenges", "thermal pollution", "drought", "collaboration", "resource management", "economic impact", "water obsession", "regulation", "ngos", "oyster growth", "collaborative science", "water quality", "commercial business", "female entrepreneurship", "resource user", "networking strategies", "seasonal effects", "salt-wedge estuary", "female leadership", "dissolved organic material", "nutrient input", "shellfish growth", "oyster health", "space provision", "opinions", "public opinion", "wastewater facility", "dynamic environment", "sewage spills", "agriculture", "collaboration challenges", "freshwater influx", "calcium depletion", "infrastructure", "treatment systems", "bay cleaning", "research encouragement", "systemic barriers", "environmental factors", "gender bias", "power structures", "water watch", "turbidity", "stakeholders", "sustainability", "management decisions", "business networks", "enforcement", "green algae", "mental modeling", "oyster farming", "salinity", "marine biodiversity", "local extension", "industry challenges"], "type": "cluster", "node_size": 369, "label": "Professional Mentorship Networks"}, "Coastal Environmental Management": {"concepts": "professional identity, professional support, social support, professional relationships, intergenerational relationships, organizational: mentor, mentorship", "concept_list": ["professional identity", "professional support", "social support", "professional relationships", "intergenerational relationships", "organizational: mentor", "mentorship"], "type": "cluster", "node_size": 36, "label": "Coastal Environmental Management"}};
        const conceptData = {"urbanization": {"concepts": "urbanization", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "urbanization"}, "genetic diversity": {"concepts": "genetic diversity", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "genetic diversity"}, "eutrophication": {"concepts": "eutrophication", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "eutrophication"}, "social exclusion": {"concepts": "social exclusion", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "social exclusion"}, "community plan": {"concepts": "community plan", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "community plan"}, "organizational hierarchy": {"concepts": "organizational hierarchy", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "organizational hierarchy"}, "medical: water quality": {"concepts": "medical: water quality", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "medical: water quality"}, "science background": {"concepts": "science background", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "science background"}, "research publications": {"concepts": "research publications", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "research publications"}, "industry norms": {"concepts": "industry norms", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "industry norms"}, "fisheries management": {"concepts": "fisheries management", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "fisheries management"}, "health": {"concepts": "health", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "health"}, "waterfront access": {"concepts": "waterfront access", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "waterfront access"}, "salinity effects": {"concepts": "salinity effects", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "salinity effects"}, "stormwater runoff": {"concepts": "stormwater runoff", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "stormwater runoff"}, "wetlands": {"concepts": "wetlands", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "wetlands"}, "hypoxia": {"concepts": "hypoxia", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "hypoxia"}, "environmental groups": {"concepts": "environmental groups", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "environmental groups"}, "local farmers": {"concepts": "local farmers", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "local farmers"}, "seagrant": {"concepts": "seagrant", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "seagrant"}, "social: urbanization": {"concepts": "social: urbanization", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "social: urbanization"}, "temperature": {"concepts": "temperature", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "temperature"}, "community ties": {"concepts": "community ties", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "community ties"}, "shell loss": {"concepts": "shell loss", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "shell loss"}, "economic impacts": {"concepts": "economic impacts", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "economic impacts"}, "carbon footprint": {"concepts": "carbon footprint", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "carbon footprint"}, "lease maintenance": {"concepts": "lease maintenance", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "lease maintenance"}, "climate change": {"concepts": "climate change", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "climate change"}, "growth": {"concepts": "growth", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "growth"}, "biodiversity": {"concepts": "biodiversity", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "biodiversity"}, "seasonal variations": {"concepts": "seasonal variations", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "seasonal variations"}, "education outreach": {"concepts": "education outreach", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "education outreach"}, "executive committee": {"concepts": "executive committee", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "executive committee"}, "social drivers": {"concepts": "social drivers", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "social drivers"}, "regulation enforcement": {"concepts": "regulation enforcement", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "regulation enforcement"}, "ph levels": {"concepts": "ph levels", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "ph levels"}, "ocean acidification": {"concepts": "ocean acidification", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "ocean acidification"}, "precipitation": {"concepts": "precipitation", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "precipitation"}, "division": {"concepts": "division", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "division"}, "industry culture": {"concepts": "industry culture", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "industry culture"}, "sustainability concerns": {"concepts": "sustainability concerns", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "sustainability concerns"}, "coastal biodiversity": {"concepts": "coastal biodiversity", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "coastal biodiversity"}, "workplace discrimination": {"concepts": "workplace discrimination", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "workplace discrimination"}, "social capital": {"concepts": "social capital", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "social capital"}, "trophication": {"concepts": "trophication", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "trophication"}, "undergraduate research": {"concepts": "undergraduate research", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "undergraduate research"}, "social dynamics": {"concepts": "social dynamics", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "social dynamics"}, "environmental resilience": {"concepts": "environmental resilience", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "environmental resilience"}, "economic gain": {"concepts": "economic gain", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "economic gain"}, "system understanding": {"concepts": "system understanding", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "system understanding"}, "networking": {"concepts": "networking", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "networking"}, "gender roles": {"concepts": "gender roles", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "gender roles"}, "graduate research": {"concepts": "graduate research", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "graduate research"}, "regulatory organizations": {"concepts": "regulatory organizations", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "regulatory organizations"}, "jubilee": {"concepts": "jubilee", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "jubilee"}, "shell color": {"concepts": "shell color", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "shell color"}, "climate organization": {"concepts": "climate organization", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "climate organization"}, "funding": {"concepts": "funding", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "funding"}, "nature conservancy": {"concepts": "nature conservancy", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "nature conservancy"}, "community": {"concepts": "community", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "community"}, "water body": {"concepts": "water body", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "water body"}, "germo": {"concepts": "germo", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "germo"}, "photosynthesising": {"concepts": "photosynthesising", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "photosynthesising"}, "business challenges": {"concepts": "business challenges", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "business challenges"}, "thermal pollution": {"concepts": "thermal pollution", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "thermal pollution"}, "drought": {"concepts": "drought", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "drought"}, "collaboration": {"concepts": "collaboration", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "collaboration"}, "resource management": {"concepts": "resource management", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "resource management"}, "economic impact": {"concepts": "economic impact", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "economic impact"}, "water obsession": {"concepts": "water obsession", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "water obsession"}, "regulation": {"concepts": "regulation", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "regulation"}, "ngos": {"concepts": "ngos", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "ngos"}, "oyster growth": {"concepts": "oyster growth", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "oyster growth"}, "collaborative science": {"concepts": "collaborative science", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "collaborative science"}, "water quality": {"concepts": "water quality", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "water quality"}, "commercial business": {"concepts": "commercial business", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "commercial business"}, "female entrepreneurship": {"concepts": "female entrepreneurship", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "female entrepreneurship"}, "resource user": {"concepts": "resource user", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "resource user"}, "networking strategies": {"concepts": "networking strategies", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "networking strategies"}, "seasonal effects": {"concepts": "seasonal effects", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "seasonal effects"}, "salt-wedge estuary": {"concepts": "salt-wedge estuary", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "salt-wedge estuary"}, "female leadership": {"concepts": "female leadership", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "female leadership"}, "dissolved organic material": {"concepts": "dissolved organic material", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "dissolved organic material"}, "nutrient input": {"concepts": "nutrient input", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "nutrient input"}, "shellfish growth": {"concepts": "shellfish growth", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "shellfish growth"}, "oyster health": {"concepts": "oyster health", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "oyster health"}, "space provision": {"concepts": "space provision", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "space provision"}, "opinions": {"concepts": "opinions", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "opinions"}, "public opinion": {"concepts": "public opinion", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "public opinion"}, "wastewater facility": {"concepts": "wastewater facility", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "wastewater facility"}, "dynamic environment": {"concepts": "dynamic environment", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "dynamic environment"}, "sewage spills": {"concepts": "sewage spills", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "sewage spills"}, "agriculture": {"concepts": "agriculture", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "agriculture"}, "collaboration challenges": {"concepts": "collaboration challenges", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "collaboration challenges"}, "freshwater influx": {"concepts": "freshwater influx", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "freshwater influx"}, "calcium depletion": {"concepts": "calcium depletion", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "calcium depletion"}, "infrastructure": {"concepts": "infrastructure", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "infrastructure"}, "treatment systems": {"concepts": "treatment systems", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "treatment systems"}, "bay cleaning": {"concepts": "bay cleaning", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "bay cleaning"}, "research encouragement": {"concepts": "research encouragement", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "research encouragement"}, "systemic barriers": {"concepts": "systemic barriers", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "systemic barriers"}, "environmental factors": {"concepts": "environmental factors", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "environmental factors"}, "gender bias": {"concepts": "gender bias", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "gender bias"}, "power structures": {"concepts": "power structures", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "power structures"}, "water watch": {"concepts": "water watch", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "water watch"}, "turbidity": {"concepts": "turbidity", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "turbidity"}, "stakeholders": {"concepts": "stakeholders", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "stakeholders"}, "sustainability": {"concepts": "sustainability", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "sustainability"}, "management decisions": {"concepts": "management decisions", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "management decisions"}, "business networks": {"concepts": "business networks", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "business networks"}, "enforcement": {"concepts": "enforcement", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "enforcement"}, "green algae": {"concepts": "green algae", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "green algae"}, "mental modeling": {"concepts": "mental modeling", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "mental modeling"}, "oyster farming": {"concepts": "oyster farming", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "oyster farming"}, "salinity": {"concepts": "salinity", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "salinity"}, "marine biodiversity": {"concepts": "marine biodiversity", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "marine biodiversity"}, "local extension": {"concepts": "local extension", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "local extension"}, "industry challenges": {"concepts": "industry challenges", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "industry challenges"}, "professional identity": {"concepts": "professional identity", "type": "concept", "cluster": "Coastal Environmental Management", "node_size": 10, "label": "professional identity"}, "professional support": {"concepts": "professional support", "type": "concept", "cluster": "Coastal Environmental Management", "node_size": 10, "label": "professional support"}, "social support": {"concepts": "social support", "type": "concept", "cluster": "Coastal Environmental Management", "node_size": 10, "label": "social support"}, "professional relationships": {"concepts": "professional relationships", "type": "concept", "cluster": "Coastal Environmental Management", "node_size": 10, "label": "professional relationships"}, "intergenerational relationships": {"concepts": "intergenerational relationships", "type": "concept", "cluster": "Coastal Environmental Management", "node_size": 10, "label": "intergenerational relationships"}, "organizational: mentor": {"concepts": "organizational: mentor", "type": "concept", "cluster": "Coastal Environmental Management", "node_size": 10, "label": "organizational: mentor"}, "mentorship": {"concepts": "mentorship", "type": "concept", "cluster": "Coastal Environmental Management", "node_size": 10, "label": "mentorship"}};
        const interClusterEdges = [["Professional Mentorship Networks", "Coastal Environmental Management", {"weight": -0.6, "confidence": 0.71, "type": "inter_cluster", "style": "solid"}], ["Coastal Environmental Management", "Professional Mentorship Networks", {"weight": 1.0, "confidence": 0.76, "type": "inter_cluster", "style": "solid"}]];
        const clusterConcepts = {"Professional Mentorship Networks": [["urbanization", {"concepts": "urbanization", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "urbanization"}], ["genetic diversity", {"concepts": "genetic diversity", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "genetic diversity"}], ["eutrophication", {"concepts": "eutrophication", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "eutrophication"}], ["social exclusion", {"concepts": "social exclusion", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "social exclusion"}], ["community plan", {"concepts": "community plan", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "community plan"}], ["organizational hierarchy", {"concepts": "organizational hierarchy", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "organizational hierarchy"}], ["medical: water quality", {"concepts": "medical: water quality", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "medical: water quality"}], ["science background", {"concepts": "science background", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "science background"}], ["research publications", {"concepts": "research publications", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "research publications"}], ["industry norms", {"concepts": "industry norms", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "industry norms"}], ["fisheries management", {"concepts": "fisheries management", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "fisheries management"}], ["health", {"concepts": "health", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "health"}], ["waterfront access", {"concepts": "waterfront access", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "waterfront access"}], ["salinity effects", {"concepts": "salinity effects", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "salinity effects"}], ["stormwater runoff", {"concepts": "stormwater runoff", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "stormwater runoff"}], ["wetlands", {"concepts": "wetlands", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "wetlands"}], ["hypoxia", {"concepts": "hypoxia", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "hypoxia"}], ["environmental groups", {"concepts": "environmental groups", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "environmental groups"}], ["local farmers", {"concepts": "local farmers", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "local farmers"}], ["seagrant", {"concepts": "seagrant", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "seagrant"}], ["social: urbanization", {"concepts": "social: urbanization", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "social: urbanization"}], ["temperature", {"concepts": "temperature", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "temperature"}], ["community ties", {"concepts": "community ties", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "community ties"}], ["shell loss", {"concepts": "shell loss", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "shell loss"}], ["economic impacts", {"concepts": "economic impacts", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "economic impacts"}], ["carbon footprint", {"concepts": "carbon footprint", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "carbon footprint"}], ["lease maintenance", {"concepts": "lease maintenance", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "lease maintenance"}], ["climate change", {"concepts": "climate change", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "climate change"}], ["growth", {"concepts": "growth", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "growth"}], ["biodiversity", {"concepts": "biodiversity", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "biodiversity"}], ["seasonal variations", {"concepts": "seasonal variations", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "seasonal variations"}], ["education outreach", {"concepts": "education outreach", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "education outreach"}], ["executive committee", {"concepts": "executive committee", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "executive committee"}], ["social drivers", {"concepts": "social drivers", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "social drivers"}], ["regulation enforcement", {"concepts": "regulation enforcement", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "regulation enforcement"}], ["ph levels", {"concepts": "ph levels", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "ph levels"}], ["ocean acidification", {"concepts": "ocean acidification", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "ocean acidification"}], ["precipitation", {"concepts": "precipitation", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "precipitation"}], ["division", {"concepts": "division", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "division"}], ["industry culture", {"concepts": "industry culture", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "industry culture"}], ["sustainability concerns", {"concepts": "sustainability concerns", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "sustainability concerns"}], ["coastal biodiversity", {"concepts": "coastal biodiversity", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "coastal biodiversity"}], ["workplace discrimination", {"concepts": "workplace discrimination", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "workplace discrimination"}], ["social capital", {"concepts": "social capital", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "social capital"}], ["trophication", {"concepts": "trophication", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "trophication"}], ["undergraduate research", {"concepts": "undergraduate research", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "undergraduate research"}], ["social dynamics", {"concepts": "social dynamics", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "social dynamics"}], ["environmental resilience", {"concepts": "environmental resilience", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "environmental resilience"}], ["economic gain", {"concepts": "economic gain", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "economic gain"}], ["system understanding", {"concepts": "system understanding", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "system understanding"}], ["networking", {"concepts": "networking", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "networking"}], ["gender roles", {"concepts": "gender roles", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "gender roles"}], ["graduate research", {"concepts": "graduate research", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "graduate research"}], ["regulatory organizations", {"concepts": "regulatory organizations", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "regulatory organizations"}], ["jubilee", {"concepts": "jubilee", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "jubilee"}], ["shell color", {"concepts": "shell color", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "shell color"}], ["climate organization", {"concepts": "climate organization", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "climate organization"}], ["funding", {"concepts": "funding", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "funding"}], ["nature conservancy", {"concepts": "nature conservancy", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "nature conservancy"}], ["community", {"concepts": "community", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "community"}], ["water body", {"concepts": "water body", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "water body"}], ["germo", {"concepts": "germo", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "germo"}], ["photosynthesising", {"concepts": "photosynthesising", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "photosynthesising"}], ["business challenges", {"concepts": "business challenges", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "business challenges"}], ["thermal pollution", {"concepts": "thermal pollution", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "thermal pollution"}], ["drought", {"concepts": "drought", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "drought"}], ["collaboration", {"concepts": "collaboration", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "collaboration"}], ["resource management", {"concepts": "resource management", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "resource management"}], ["economic impact", {"concepts": "economic impact", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "economic impact"}], ["water obsession", {"concepts": "water obsession", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "water obsession"}], ["regulation", {"concepts": "regulation", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "regulation"}], ["ngos", {"concepts": "ngos", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "ngos"}], ["oyster growth", {"concepts": "oyster growth", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "oyster growth"}], ["collaborative science", {"concepts": "collaborative science", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "collaborative science"}], ["water quality", {"concepts": "water quality", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "water quality"}], ["commercial business", {"concepts": "commercial business", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "commercial business"}], ["female entrepreneurship", {"concepts": "female entrepreneurship", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "female entrepreneurship"}], ["resource user", {"concepts": "resource user", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "resource user"}], ["networking strategies", {"concepts": "networking strategies", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "networking strategies"}], ["seasonal effects", {"concepts": "seasonal effects", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "seasonal effects"}], ["salt-wedge estuary", {"concepts": "salt-wedge estuary", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "salt-wedge estuary"}], ["female leadership", {"concepts": "female leadership", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "female leadership"}], ["dissolved organic material", {"concepts": "dissolved organic material", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "dissolved organic material"}], ["nutrient input", {"concepts": "nutrient input", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "nutrient input"}], ["shellfish growth", {"concepts": "shellfish growth", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "shellfish growth"}], ["oyster health", {"concepts": "oyster health", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "oyster health"}], ["space provision", {"concepts": "space provision", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "space provision"}], ["opinions", {"concepts": "opinions", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "opinions"}], ["public opinion", {"concepts": "public opinion", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "public opinion"}], ["wastewater facility", {"concepts": "wastewater facility", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "wastewater facility"}], ["dynamic environment", {"concepts": "dynamic environment", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "dynamic environment"}], ["sewage spills", {"concepts": "sewage spills", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "sewage spills"}], ["agriculture", {"concepts": "agriculture", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "agriculture"}], ["collaboration challenges", {"concepts": "collaboration challenges", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "collaboration challenges"}], ["freshwater influx", {"concepts": "freshwater influx", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "freshwater influx"}], ["calcium depletion", {"concepts": "calcium depletion", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "calcium depletion"}], ["infrastructure", {"concepts": "infrastructure", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "infrastructure"}], ["treatment systems", {"concepts": "treatment systems", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "treatment systems"}], ["bay cleaning", {"concepts": "bay cleaning", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "bay cleaning"}], ["research encouragement", {"concepts": "research encouragement", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "research encouragement"}], ["systemic barriers", {"concepts": "systemic barriers", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "systemic barriers"}], ["environmental factors", {"concepts": "environmental factors", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "environmental factors"}], ["gender bias", {"concepts": "gender bias", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "gender bias"}], ["power structures", {"concepts": "power structures", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "power structures"}], ["water watch", {"concepts": "water watch", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "water watch"}], ["turbidity", {"concepts": "turbidity", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "turbidity"}], ["stakeholders", {"concepts": "stakeholders", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "stakeholders"}], ["sustainability", {"concepts": "sustainability", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "sustainability"}], ["management decisions", {"concepts": "management decisions", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "management decisions"}], ["business networks", {"concepts": "business networks", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "business networks"}], ["enforcement", {"concepts": "enforcement", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "enforcement"}], ["green algae", {"concepts": "green algae", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "green algae"}], ["mental modeling", {"concepts": "mental modeling", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "mental modeling"}], ["oyster farming", {"concepts": "oyster farming", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "oyster farming"}], ["salinity", {"concepts": "salinity", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "salinity"}], ["marine biodiversity", {"concepts": "marine biodiversity", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "marine biodiversity"}], ["local extension", {"concepts": "local extension", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "local extension"}], ["industry challenges", {"concepts": "industry challenges", "type": "concept", "cluster": "Professional Mentorship Networks", "node_size": 10, "label": "industry challenges"}]], "Coastal Environmental Management": [["professional identity", {"concepts": "professional identity", "type": "concept", "cluster": "Coastal Environmental Management", "node_size": 10, "label": "professional identity"}], ["professional support", {"concepts": "professional support", "type": "concept", "cluster": "Coastal Environmental Management", "node_size": 10, "label": "professional support"}], ["social support", {"concepts": "social support", "type": "concept", "cluster": "Coastal Environmental Management", "node_size": 10, "label": "social support"}], ["professional relationships", {"concepts": "professional relationships", "type": "concept", "cluster": "Coastal Environmental Management", "node_size": 10, "label": "professional relationships"}], ["intergenerational relationships", {"concepts": "intergenerational relationships", "type": "concept", "cluster": "Coastal Environmental Management", "node_size": 10, "label": "intergenerational relationships"}], ["organizational: mentor", {"concepts": "organizational: mentor", "type": "concept", "cluster": "Coastal Environmental Management", "node_size": 10, "label": "organizational: mentor"}], ["mentorship", {"concepts": "mentorship", "type": "concept", "cluster": "Coastal Environmental Management", "node_size": 10, "label": "mentorship"}]]};
        const clusterEdges = {"Professional Mentorship Networks": [], "Coastal Environmental Management": []};
        
        let network;
        let currentView = 'clusters';
        let currentCluster = null;
        let minConfidence = 0.3;
        
        // Network options
        const options = {
            nodes: {
                font: { color: 'white', size: 14 },
                borderWidth: 2,
                shadow: true
            },
            edges: {
                arrows: { to: { enabled: true, scaleFactor: 1.2 } },
                shadow: true,
                smooth: { type: 'continuous' }
            },
            physics: {
                stabilization: { iterations: 100 },
                barnesHut: {
                    gravitationalConstant: -8000,
                    springConstant: 0.001,
                    springLength: 200
                }
            },
            interaction: {
                hover: true,
                selectConnectedEdges: false
            }
        };
        
        function initNetwork() {
            const container = document.getElementById('network');
            const data = getClusterViewData();
            network = new vis.Network(container, data, options);
            
            // Handle cluster clicks for drill-down
            network.on("click", function(params) {
                if (params.nodes.length > 0 && currentView === 'clusters') {
                    const clickedNode = params.nodes[0];
                    if (clusterConcepts[clickedNode]) {
                        showClusterDetail(clickedNode);
                    }
                }
            });
        }
        
        function getClusterViewData() {
            const nodes = [];
            const edges = [];
            
            // Add cluster nodes
            Object.entries(clusterData).forEach(([clusterId, data]) => {
                const concepts = data.concepts || [];
                const conceptsStr = Array.isArray(concepts) ? concepts.join(', ') : concepts;
                
                nodes.push({
                    id: clusterId,
                    label: clusterId,
                    title: `Cluster: ${clusterId}\nConcepts: ${conceptsStr}\nClick to explore internal relationships`,
                    color: '#4A90E2',
                    size: 25 + (conceptsStr.split(',').length * 2),
                    font: { color: 'white' }
                });
            });
            
            // Add inter-cluster edges
            interClusterEdges.forEach(([source, target, edgeData]) => {
                const confidence = edgeData.confidence || 1.0;
                const weight = edgeData.weight || 0;
                
                if (confidence >= minConfidence) {
                    edges.push({
                        from: source,
                        to: target,
                        color: weight > 0 ? '#28A745' : '#DC3545',
                        width: Math.abs(weight) * 3 + 1,
                        title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                        dashes: false
                    });
                }
            });
            
            return { nodes: nodes, edges: edges };
        }
        
        function getClusterDetailData(clusterId) {
            const nodes = [];
            const edges = [];
            
            // Add concept nodes for this cluster
            if (clusterConcepts[clusterId]) {
                clusterConcepts[clusterId].forEach(([conceptId, data]) => {
                    nodes.push({
                        id: conceptId,
                        label: conceptId,
                        title: `Concept: ${conceptId}\nFrom cluster: ${clusterId}`,
                        color: '#FF9500',
                        size: 20,
                        font: { color: 'white' }
                    });
                });
            }
            
            // Add intra-cluster edges
            if (clusterEdges[clusterId]) {
                clusterEdges[clusterId].forEach(([source, target, edgeData]) => {
                    const confidence = edgeData.confidence || 1.0;
                    const weight = edgeData.weight || 0;
                    
                    if (confidence >= minConfidence) {
                        edges.push({
                            from: source,
                            to: target,
                            color: weight > 0 ? '#28A745' : '#DC3545',
                            width: Math.abs(weight) * 3 + 1,
                            title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                            dashes: true
                        });
                    }
                });
            }
            
            return { nodes: nodes, edges: edges };
        }
        
        function showClusterView() {
            currentView = 'clusters';
            currentCluster = null;
            const data = getClusterViewData();
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'none';
            document.getElementById('current-view').textContent = 'Cluster Overview';
        }
        
        function showClusterDetail(clusterId) {
            currentView = 'concepts';
            currentCluster = clusterId;
            const data = getClusterDetailData(clusterId);
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'inline-block';
            document.getElementById('current-view').textContent = `Inside Cluster: ${clusterId}`;
        }
        
        function updateConfidenceFilter(value) {
            minConfidence = parseFloat(value);
            document.getElementById('confidence-value').textContent = value;
            
            // Refresh current view
            if (currentView === 'clusters') {
                showClusterView();
            } else {
                showClusterDetail(currentCluster);
            }
        }
        
        // Initialize the network when page loads
        window.onload = function() {
            initNetwork();
        };
    </script>
</body>
</html>
