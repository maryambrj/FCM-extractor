
<!DOCTYPE html>
<html>
<head>
    <title>Hierarchical FCM Visualization</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 0; 
            padding: 20px;
            background: #f5f5f5;
        }
        
        #network { 
            width: 100%; 
            height: 600px; 
            border: 2px solid #ccc; 
            background: white;
            border-radius: 8px;
        }
        
        #controls {
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn {
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        
        .btn-primary { background: #4A90E2; color: white; }
        .btn-primary:hover { background: #357ABD; }
        
        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #545b62; }
        
        #current-view {
            font-weight: bold;
            color: #333;
            margin-left: 10px;
        }
        
        #legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-size: 12px;
            max-width: 200px;
        }
        
        .legend-item {
            margin: 5px 0;
            display: flex;
            align-items: center;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .legend-line {
            width: 20px;
            height: 2px;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <h1>Fuzzy Cognitive Map - Hierarchical View</h1>
    
    <div id="controls">
        <button class="btn btn-secondary" id="back-btn" onclick="showClusterView()" style="display: none;">
            ‚Üê Back to Clusters
        </button>
        <span id="current-view">Cluster Overview</span>
        <div style="float: right;">
            <label>Min Confidence: </label>
            <input type="range" id="confidence-slider" min="0" max="1" step="0.1" value="0.3" 
                   onchange="updateConfidenceFilter(this.value)">
            <span id="confidence-value">0.3</span>
        </div>
    </div>
    
    <div id="network"></div>
    
    <div id="legend">
        <h4>Legend</h4>
        <div class="legend-item">
            <div class="legend-color" style="background: #4A90E2;"></div>
            <span>Clusters</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #FF9500;"></div>
            <span>Concepts</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #28A745;"></div>
            <span>Positive relationship</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #DC3545;"></div>
            <span>Negative relationship</span>
        </div>
        <div style="margin-top: 10px; font-style: italic; color: #666;">
            Click clusters to explore internal concepts
        </div>
    </div>

    <script>
        // Embedded data
        const clusterData = {"Environmental Stressors": {"concepts": "maryland, mobile bay, bellingham bay, pacific northwest, olympic peninsula, bonneville dam, alaska, gulf of mexico, puget sound, chesapeake bay", "concept_list": ["maryland", "mobile bay", "bellingham bay", "pacific northwest", "olympic peninsula", "bonneville dam", "alaska", "gulf of mexico", "puget sound", "chesapeake bay"], "type": "cluster", "node_size": 45, "label": "Environmental Stressors"}, "Policy Management": {"concepts": "harmful environment, whirling disease, smelt, chemicals, brake dust, run off, stressors, environmental factors, herring, eggs, bacterias, harmful organisms, forecast", "concept_list": ["harmful environment", "whirling disease", "smelt", "chemicals", "brake dust", "run off", "stressors", "environmental factors", "herring", "eggs", "bacterias", "harmful organisms", "forecast"], "type": "cluster", "node_size": 54, "label": "Policy Management"}, "Stakeholder Perspectives": {"concepts": "development, policies., managers, commission, management decisions, policies, allocation, cc, cca alabama, policy management, management, national lawsuits, treaty tribes, industrial facilities", "concept_list": ["development", "policies.", "managers", "commission", "management decisions", "policies", "allocation", "cc", "cca alabama", "policy management", "management", "national lawsuits", "treaty tribes", "industrial facilities"], "type": "cluster", "node_size": 57, "label": "Stakeholder Perspectives"}, "Fisheries Operations": {"concepts": "researchers, steelhead, consumptive user groups, cca washington, returning adults, blakely ellis, tribal layer, human considerations, resource users, cca, obama, trawler, david sikorsky, roads, cars, perspective, bycatch", "concept_list": ["researchers", "steelhead", "consumptive user groups", "cca washington", "returning adults", "blakely ellis", "tribal layer", "human considerations", "resource users", "cca", "obama", "trawler", "david sikorsky", "roads", "cars", "perspective", "bycatch"], "type": "cluster", "node_size": 66, "label": "Fisheries Operations"}, "Coastal Regions": {"concepts": "hydro, mark flector, canada, harvest, commercial facilities, adipose fin, technical difficulties", "concept_list": ["hydro", "mark flector", "canada", "harvest", "commercial facilities", "adipose fin", "technical difficulties"], "type": "cluster", "node_size": 36, "label": "Coastal Regions"}, "Wild Salmon Advocacy": {"concepts": "wild salmon advocates, wild steelhead, wild salmon, wild spawning fish", "concept_list": ["wild salmon advocates", "wild steelhead", "wild salmon", "wild spawning fish"], "type": "cluster", "node_size": 27, "label": "Wild Salmon Advocacy"}, "Hatchery Opposition": {"concepts": "anti hatchery groups, farm raised, hatchery salmon, hatchery fish, hatchery environment, farm-raised salmon, hatcheries", "concept_list": ["anti hatchery groups", "farm raised", "hatchery salmon", "hatchery fish", "hatchery environment", "farm-raised salmon", "hatcheries"], "type": "cluster", "node_size": 36, "label": "Hatchery Opposition"}, "Salmon Conservation": {"concepts": "salmon problem, salmon, salmon recovery, returning salmon populations, salmon conservation", "concept_list": ["salmon problem", "salmon", "salmon recovery", "returning salmon populations", "salmon conservation"], "type": "cluster", "node_size": 30, "label": "Salmon Conservation"}, "Fish Habitat Management": {"concepts": "forage fish, spawning grounds, department of fish and wildlife, dams, salmon runs, tagging fish", "concept_list": ["forage fish", "spawning grounds", "department of fish and wildlife", "dams", "salmon runs", "tagging fish"], "type": "cluster", "node_size": 33, "label": "Fish Habitat Management"}, "River Systems": {"concepts": "river, columbia river, river drop, river rise, nisqually river, nooksack river", "concept_list": ["river", "columbia river", "river drop", "river rise", "nisqually river", "nooksack river"], "type": "cluster", "node_size": 33, "label": "River Systems"}, "Nutrient Sediment Load": {"concepts": "increased sediments, marine derived nutrients, nutrient enhancement, nutrient load, sediments, water runoff", "concept_list": ["increased sediments", "marine derived nutrients", "nutrient enhancement", "nutrient load", "sediments", "water runoff"], "type": "cluster", "node_size": 33, "label": "Nutrient Sediment Load"}, "Water Activities": {"concepts": "gill netting, irrigating, non-tribal gill netting, warmer water conditions, whitewater rafting", "concept_list": ["gill netting", "irrigating", "non-tribal gill netting", "warmer water conditions", "whitewater rafting"], "type": "cluster", "node_size": 30, "label": "Water Activities"}, "Commercial Overharvest": {"concepts": "commercial harvest, commercial overharvest, commercial over harvest", "concept_list": ["commercial harvest", "commercial overharvest", "commercial over harvest"], "type": "cluster", "node_size": 24, "label": "Commercial Overharvest"}, "Sustainable Harvesting": {"concepts": "sustainable numbers, maximum sustainable yield, harvest policies", "concept_list": ["sustainable numbers", "maximum sustainable yield", "harvest policies"], "type": "cluster", "node_size": 24, "label": "Sustainable Harvesting"}, "Fisheries Management": {"concepts": "fisheries managers, local fishery managers, federal fisheries managers, fisheries management, state fisheries managers", "concept_list": ["fisheries managers", "local fishery managers", "federal fisheries managers", "fisheries management", "state fisheries managers"], "type": "cluster", "node_size": 30, "label": "Fisheries Management"}, "Commercial Fishing": {"concepts": "commercial fishing, commercial ocean harvest, commercial fisheries, commercial fishing seasons, recreational fishermen, recreational fishing, recreational fishing seasons", "concept_list": ["commercial fishing", "commercial ocean harvest", "commercial fisheries", "commercial fishing seasons", "recreational fishermen", "recreational fishing", "recreational fishing seasons"], "type": "cluster", "node_size": 36, "label": "Commercial Fishing"}, "Selective Fisheries": {"concepts": "mark selective fisheries, pacific ocean", "concept_list": ["mark selective fisheries", "pacific ocean"], "type": "cluster", "node_size": 21, "label": "Selective Fisheries"}, "Ecosystem Management": {"concepts": "species of conservation concern, endangered species, biodiversity consideration, ecosystem based management, ecosystem services, key food web supporting species, multi species management, food web, wild populations, single species management, food web species, biodiversity, ecosystem", "concept_list": ["species of conservation concern", "endangered species", "biodiversity consideration", "ecosystem based management", "ecosystem services", "key food web supporting species", "multi species management", "food web", "wild populations", "single species management", "food web species", "biodiversity", "ecosystem"], "type": "cluster", "node_size": 54, "label": "Ecosystem Management"}, "Habitat Restoration": {"concepts": "habitat restoration, natal streams, habitat background, habitat forming species, impervious surfaces, pristine habitat, habitat restoration., habitat protection, habitat", "concept_list": ["habitat restoration", "natal streams", "habitat background", "habitat forming species", "impervious surfaces", "pristine habitat", "habitat restoration.", "habitat protection", "habitat"], "type": "cluster", "node_size": 42, "label": "Habitat Restoration"}};
        const conceptData = {"maryland": {"concepts": "maryland", "type": "concept", "cluster": "Environmental Stressors", "node_size": 10, "label": "maryland"}, "mobile bay": {"concepts": "mobile bay", "type": "concept", "cluster": "Environmental Stressors", "node_size": 10, "label": "mobile bay"}, "bellingham bay": {"concepts": "bellingham bay", "type": "concept", "cluster": "Environmental Stressors", "node_size": 10, "label": "bellingham bay"}, "pacific northwest": {"concepts": "pacific northwest", "type": "concept", "cluster": "Environmental Stressors", "node_size": 10, "label": "pacific northwest"}, "olympic peninsula": {"concepts": "olympic peninsula", "type": "concept", "cluster": "Environmental Stressors", "node_size": 10, "label": "olympic peninsula"}, "bonneville dam": {"concepts": "bonneville dam", "type": "concept", "cluster": "Environmental Stressors", "node_size": 10, "label": "bonneville dam"}, "alaska": {"concepts": "alaska", "type": "concept", "cluster": "Environmental Stressors", "node_size": 10, "label": "alaska"}, "gulf of mexico": {"concepts": "gulf of mexico", "type": "concept", "cluster": "Environmental Stressors", "node_size": 10, "label": "gulf of mexico"}, "puget sound": {"concepts": "puget sound", "type": "concept", "cluster": "Environmental Stressors", "node_size": 10, "label": "puget sound"}, "chesapeake bay": {"concepts": "chesapeake bay", "type": "concept", "cluster": "Environmental Stressors", "node_size": 10, "label": "chesapeake bay"}, "harmful environment": {"concepts": "harmful environment", "type": "concept", "cluster": "Policy Management", "node_size": 10, "label": "harmful environment"}, "whirling disease": {"concepts": "whirling disease", "type": "concept", "cluster": "Policy Management", "node_size": 10, "label": "whirling disease"}, "smelt": {"concepts": "smelt", "type": "concept", "cluster": "Policy Management", "node_size": 10, "label": "smelt"}, "chemicals": {"concepts": "chemicals", "type": "concept", "cluster": "Policy Management", "node_size": 10, "label": "chemicals"}, "brake dust": {"concepts": "brake dust", "type": "concept", "cluster": "Policy Management", "node_size": 10, "label": "brake dust"}, "run off": {"concepts": "run off", "type": "concept", "cluster": "Policy Management", "node_size": 10, "label": "run off"}, "stressors": {"concepts": "stressors", "type": "concept", "cluster": "Policy Management", "node_size": 10, "label": "stressors"}, "environmental factors": {"concepts": "environmental factors", "type": "concept", "cluster": "Policy Management", "node_size": 10, "label": "environmental factors"}, "herring": {"concepts": "herring", "type": "concept", "cluster": "Policy Management", "node_size": 10, "label": "herring"}, "eggs": {"concepts": "eggs", "type": "concept", "cluster": "Policy Management", "node_size": 10, "label": "eggs"}, "bacterias": {"concepts": "bacterias", "type": "concept", "cluster": "Policy Management", "node_size": 10, "label": "bacterias"}, "harmful organisms": {"concepts": "harmful organisms", "type": "concept", "cluster": "Policy Management", "node_size": 10, "label": "harmful organisms"}, "forecast": {"concepts": "forecast", "type": "concept", "cluster": "Policy Management", "node_size": 10, "label": "forecast"}, "development": {"concepts": "development", "type": "concept", "cluster": "Stakeholder Perspectives", "node_size": 10, "label": "development"}, "policies.": {"concepts": "policies.", "type": "concept", "cluster": "Stakeholder Perspectives", "node_size": 10, "label": "policies."}, "managers": {"concepts": "managers", "type": "concept", "cluster": "Stakeholder Perspectives", "node_size": 10, "label": "managers"}, "commission": {"concepts": "commission", "type": "concept", "cluster": "Stakeholder Perspectives", "node_size": 10, "label": "commission"}, "management decisions": {"concepts": "management decisions", "type": "concept", "cluster": "Stakeholder Perspectives", "node_size": 10, "label": "management decisions"}, "policies": {"concepts": "policies", "type": "concept", "cluster": "Stakeholder Perspectives", "node_size": 10, "label": "policies"}, "allocation": {"concepts": "allocation", "type": "concept", "cluster": "Stakeholder Perspectives", "node_size": 10, "label": "allocation"}, "cc": {"concepts": "cc", "type": "concept", "cluster": "Stakeholder Perspectives", "node_size": 10, "label": "cc"}, "cca alabama": {"concepts": "cca alabama", "type": "concept", "cluster": "Stakeholder Perspectives", "node_size": 10, "label": "cca alabama"}, "policy management": {"concepts": "policy management", "type": "concept", "cluster": "Stakeholder Perspectives", "node_size": 10, "label": "policy management"}, "management": {"concepts": "management", "type": "concept", "cluster": "Stakeholder Perspectives", "node_size": 10, "label": "management"}, "national lawsuits": {"concepts": "national lawsuits", "type": "concept", "cluster": "Stakeholder Perspectives", "node_size": 10, "label": "national lawsuits"}, "treaty tribes": {"concepts": "treaty tribes", "type": "concept", "cluster": "Stakeholder Perspectives", "node_size": 10, "label": "treaty tribes"}, "industrial facilities": {"concepts": "industrial facilities", "type": "concept", "cluster": "Stakeholder Perspectives", "node_size": 10, "label": "industrial facilities"}, "researchers": {"concepts": "researchers", "type": "concept", "cluster": "Fisheries Operations", "node_size": 10, "label": "researchers"}, "steelhead": {"concepts": "steelhead", "type": "concept", "cluster": "Fisheries Operations", "node_size": 10, "label": "steelhead"}, "consumptive user groups": {"concepts": "consumptive user groups", "type": "concept", "cluster": "Fisheries Operations", "node_size": 10, "label": "consumptive user groups"}, "cca washington": {"concepts": "cca washington", "type": "concept", "cluster": "Fisheries Operations", "node_size": 10, "label": "cca washington"}, "returning adults": {"concepts": "returning adults", "type": "concept", "cluster": "Fisheries Operations", "node_size": 10, "label": "returning adults"}, "blakely ellis": {"concepts": "blakely ellis", "type": "concept", "cluster": "Fisheries Operations", "node_size": 10, "label": "blakely ellis"}, "tribal layer": {"concepts": "tribal layer", "type": "concept", "cluster": "Fisheries Operations", "node_size": 10, "label": "tribal layer"}, "human considerations": {"concepts": "human considerations", "type": "concept", "cluster": "Fisheries Operations", "node_size": 10, "label": "human considerations"}, "resource users": {"concepts": "resource users", "type": "concept", "cluster": "Fisheries Operations", "node_size": 10, "label": "resource users"}, "cca": {"concepts": "cca", "type": "concept", "cluster": "Fisheries Operations", "node_size": 10, "label": "cca"}, "obama": {"concepts": "obama", "type": "concept", "cluster": "Fisheries Operations", "node_size": 10, "label": "obama"}, "trawler": {"concepts": "trawler", "type": "concept", "cluster": "Fisheries Operations", "node_size": 10, "label": "trawler"}, "david sikorsky": {"concepts": "david sikorsky", "type": "concept", "cluster": "Fisheries Operations", "node_size": 10, "label": "david sikorsky"}, "roads": {"concepts": "roads", "type": "concept", "cluster": "Fisheries Operations", "node_size": 10, "label": "roads"}, "cars": {"concepts": "cars", "type": "concept", "cluster": "Fisheries Operations", "node_size": 10, "label": "cars"}, "perspective": {"concepts": "perspective", "type": "concept", "cluster": "Fisheries Operations", "node_size": 10, "label": "perspective"}, "bycatch": {"concepts": "bycatch", "type": "concept", "cluster": "Fisheries Operations", "node_size": 10, "label": "bycatch"}, "hydro": {"concepts": "hydro", "type": "concept", "cluster": "Coastal Regions", "node_size": 10, "label": "hydro"}, "mark flector": {"concepts": "mark flector", "type": "concept", "cluster": "Coastal Regions", "node_size": 10, "label": "mark flector"}, "canada": {"concepts": "canada", "type": "concept", "cluster": "Coastal Regions", "node_size": 10, "label": "canada"}, "harvest": {"concepts": "harvest", "type": "concept", "cluster": "Coastal Regions", "node_size": 10, "label": "harvest"}, "commercial facilities": {"concepts": "commercial facilities", "type": "concept", "cluster": "Coastal Regions", "node_size": 10, "label": "commercial facilities"}, "adipose fin": {"concepts": "adipose fin", "type": "concept", "cluster": "Coastal Regions", "node_size": 10, "label": "adipose fin"}, "technical difficulties": {"concepts": "technical difficulties", "type": "concept", "cluster": "Coastal Regions", "node_size": 10, "label": "technical difficulties"}, "wild salmon advocates": {"concepts": "wild salmon advocates", "type": "concept", "cluster": "Wild Salmon Advocacy", "node_size": 10, "label": "wild salmon advocates"}, "wild steelhead": {"concepts": "wild steelhead", "type": "concept", "cluster": "Wild Salmon Advocacy", "node_size": 10, "label": "wild steelhead"}, "wild salmon": {"concepts": "wild salmon", "type": "concept", "cluster": "Wild Salmon Advocacy", "node_size": 10, "label": "wild salmon"}, "wild spawning fish": {"concepts": "wild spawning fish", "type": "concept", "cluster": "Wild Salmon Advocacy", "node_size": 10, "label": "wild spawning fish"}, "anti hatchery groups": {"concepts": "anti hatchery groups", "type": "concept", "cluster": "Hatchery Opposition", "node_size": 10, "label": "anti hatchery groups"}, "farm raised": {"concepts": "farm raised", "type": "concept", "cluster": "Hatchery Opposition", "node_size": 10, "label": "farm raised"}, "hatchery salmon": {"concepts": "hatchery salmon", "type": "concept", "cluster": "Hatchery Opposition", "node_size": 10, "label": "hatchery salmon"}, "hatchery fish": {"concepts": "hatchery fish", "type": "concept", "cluster": "Hatchery Opposition", "node_size": 10, "label": "hatchery fish"}, "hatchery environment": {"concepts": "hatchery environment", "type": "concept", "cluster": "Hatchery Opposition", "node_size": 10, "label": "hatchery environment"}, "farm-raised salmon": {"concepts": "farm-raised salmon", "type": "concept", "cluster": "Hatchery Opposition", "node_size": 10, "label": "farm-raised salmon"}, "hatcheries": {"concepts": "hatcheries", "type": "concept", "cluster": "Hatchery Opposition", "node_size": 10, "label": "hatcheries"}, "salmon problem": {"concepts": "salmon problem", "type": "concept", "cluster": "Salmon Conservation", "node_size": 10, "label": "salmon problem"}, "salmon": {"concepts": "salmon", "type": "concept", "cluster": "Salmon Conservation", "node_size": 10, "label": "salmon"}, "salmon recovery": {"concepts": "salmon recovery", "type": "concept", "cluster": "Salmon Conservation", "node_size": 10, "label": "salmon recovery"}, "returning salmon populations": {"concepts": "returning salmon populations", "type": "concept", "cluster": "Salmon Conservation", "node_size": 10, "label": "returning salmon populations"}, "salmon conservation": {"concepts": "salmon conservation", "type": "concept", "cluster": "Salmon Conservation", "node_size": 10, "label": "salmon conservation"}, "forage fish": {"concepts": "forage fish", "type": "concept", "cluster": "Fish Habitat Management", "node_size": 10, "label": "forage fish"}, "spawning grounds": {"concepts": "spawning grounds", "type": "concept", "cluster": "Fish Habitat Management", "node_size": 10, "label": "spawning grounds"}, "department of fish and wildlife": {"concepts": "department of fish and wildlife", "type": "concept", "cluster": "Fish Habitat Management", "node_size": 10, "label": "department of fish and wildlife"}, "dams": {"concepts": "dams", "type": "concept", "cluster": "Fish Habitat Management", "node_size": 10, "label": "dams"}, "salmon runs": {"concepts": "salmon runs", "type": "concept", "cluster": "Fish Habitat Management", "node_size": 10, "label": "salmon runs"}, "tagging fish": {"concepts": "tagging fish", "type": "concept", "cluster": "Fish Habitat Management", "node_size": 10, "label": "tagging fish"}, "river": {"concepts": "river", "type": "concept", "cluster": "River Systems", "node_size": 10, "label": "river"}, "columbia river": {"concepts": "columbia river", "type": "concept", "cluster": "River Systems", "node_size": 10, "label": "columbia river"}, "river drop": {"concepts": "river drop", "type": "concept", "cluster": "River Systems", "node_size": 10, "label": "river drop"}, "river rise": {"concepts": "river rise", "type": "concept", "cluster": "River Systems", "node_size": 10, "label": "river rise"}, "nisqually river": {"concepts": "nisqually river", "type": "concept", "cluster": "River Systems", "node_size": 10, "label": "nisqually river"}, "nooksack river": {"concepts": "nooksack river", "type": "concept", "cluster": "River Systems", "node_size": 10, "label": "nooksack river"}, "increased sediments": {"concepts": "increased sediments", "type": "concept", "cluster": "Nutrient Sediment Load", "node_size": 10, "label": "increased sediments"}, "marine derived nutrients": {"concepts": "marine derived nutrients", "type": "concept", "cluster": "Nutrient Sediment Load", "node_size": 10, "label": "marine derived nutrients"}, "nutrient enhancement": {"concepts": "nutrient enhancement", "type": "concept", "cluster": "Nutrient Sediment Load", "node_size": 10, "label": "nutrient enhancement"}, "nutrient load": {"concepts": "nutrient load", "type": "concept", "cluster": "Nutrient Sediment Load", "node_size": 10, "label": "nutrient load"}, "sediments": {"concepts": "sediments", "type": "concept", "cluster": "Nutrient Sediment Load", "node_size": 10, "label": "sediments"}, "water runoff": {"concepts": "water runoff", "type": "concept", "cluster": "Nutrient Sediment Load", "node_size": 10, "label": "water runoff"}, "gill netting": {"concepts": "gill netting", "type": "concept", "cluster": "Water Activities", "node_size": 10, "label": "gill netting"}, "irrigating": {"concepts": "irrigating", "type": "concept", "cluster": "Water Activities", "node_size": 10, "label": "irrigating"}, "non-tribal gill netting": {"concepts": "non-tribal gill netting", "type": "concept", "cluster": "Water Activities", "node_size": 10, "label": "non-tribal gill netting"}, "warmer water conditions": {"concepts": "warmer water conditions", "type": "concept", "cluster": "Water Activities", "node_size": 10, "label": "warmer water conditions"}, "whitewater rafting": {"concepts": "whitewater rafting", "type": "concept", "cluster": "Water Activities", "node_size": 10, "label": "whitewater rafting"}, "commercial harvest": {"concepts": "commercial harvest", "type": "concept", "cluster": "Commercial Overharvest", "node_size": 10, "label": "commercial harvest"}, "commercial overharvest": {"concepts": "commercial overharvest", "type": "concept", "cluster": "Commercial Overharvest", "node_size": 10, "label": "commercial overharvest"}, "commercial over harvest": {"concepts": "commercial over harvest", "type": "concept", "cluster": "Commercial Overharvest", "node_size": 10, "label": "commercial over harvest"}, "sustainable numbers": {"concepts": "sustainable numbers", "type": "concept", "cluster": "Sustainable Harvesting", "node_size": 10, "label": "sustainable numbers"}, "maximum sustainable yield": {"concepts": "maximum sustainable yield", "type": "concept", "cluster": "Sustainable Harvesting", "node_size": 10, "label": "maximum sustainable yield"}, "harvest policies": {"concepts": "harvest policies", "type": "concept", "cluster": "Sustainable Harvesting", "node_size": 10, "label": "harvest policies"}, "fisheries managers": {"concepts": "fisheries managers", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fisheries managers"}, "local fishery managers": {"concepts": "local fishery managers", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "local fishery managers"}, "federal fisheries managers": {"concepts": "federal fisheries managers", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "federal fisheries managers"}, "fisheries management": {"concepts": "fisheries management", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fisheries management"}, "state fisheries managers": {"concepts": "state fisheries managers", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "state fisheries managers"}, "commercial fishing": {"concepts": "commercial fishing", "type": "concept", "cluster": "Commercial Fishing", "node_size": 10, "label": "commercial fishing"}, "commercial ocean harvest": {"concepts": "commercial ocean harvest", "type": "concept", "cluster": "Commercial Fishing", "node_size": 10, "label": "commercial ocean harvest"}, "commercial fisheries": {"concepts": "commercial fisheries", "type": "concept", "cluster": "Commercial Fishing", "node_size": 10, "label": "commercial fisheries"}, "commercial fishing seasons": {"concepts": "commercial fishing seasons", "type": "concept", "cluster": "Commercial Fishing", "node_size": 10, "label": "commercial fishing seasons"}, "recreational fishermen": {"concepts": "recreational fishermen", "type": "concept", "cluster": "Commercial Fishing", "node_size": 10, "label": "recreational fishermen"}, "recreational fishing": {"concepts": "recreational fishing", "type": "concept", "cluster": "Commercial Fishing", "node_size": 10, "label": "recreational fishing"}, "recreational fishing seasons": {"concepts": "recreational fishing seasons", "type": "concept", "cluster": "Commercial Fishing", "node_size": 10, "label": "recreational fishing seasons"}, "mark selective fisheries": {"concepts": "mark selective fisheries", "type": "concept", "cluster": "Selective Fisheries", "node_size": 10, "label": "mark selective fisheries"}, "pacific ocean": {"concepts": "pacific ocean", "type": "concept", "cluster": "Selective Fisheries", "node_size": 10, "label": "pacific ocean"}, "species of conservation concern": {"concepts": "species of conservation concern", "type": "concept", "cluster": "Ecosystem Management", "node_size": 10, "label": "species of conservation concern"}, "endangered species": {"concepts": "endangered species", "type": "concept", "cluster": "Ecosystem Management", "node_size": 10, "label": "endangered species"}, "biodiversity consideration": {"concepts": "biodiversity consideration", "type": "concept", "cluster": "Ecosystem Management", "node_size": 10, "label": "biodiversity consideration"}, "ecosystem based management": {"concepts": "ecosystem based management", "type": "concept", "cluster": "Ecosystem Management", "node_size": 10, "label": "ecosystem based management"}, "ecosystem services": {"concepts": "ecosystem services", "type": "concept", "cluster": "Ecosystem Management", "node_size": 10, "label": "ecosystem services"}, "key food web supporting species": {"concepts": "key food web supporting species", "type": "concept", "cluster": "Ecosystem Management", "node_size": 10, "label": "key food web supporting species"}, "multi species management": {"concepts": "multi species management", "type": "concept", "cluster": "Ecosystem Management", "node_size": 10, "label": "multi species management"}, "food web": {"concepts": "food web", "type": "concept", "cluster": "Ecosystem Management", "node_size": 10, "label": "food web"}, "wild populations": {"concepts": "wild populations", "type": "concept", "cluster": "Ecosystem Management", "node_size": 10, "label": "wild populations"}, "single species management": {"concepts": "single species management", "type": "concept", "cluster": "Ecosystem Management", "node_size": 10, "label": "single species management"}, "food web species": {"concepts": "food web species", "type": "concept", "cluster": "Ecosystem Management", "node_size": 10, "label": "food web species"}, "biodiversity": {"concepts": "biodiversity", "type": "concept", "cluster": "Ecosystem Management", "node_size": 10, "label": "biodiversity"}, "ecosystem": {"concepts": "ecosystem", "type": "concept", "cluster": "Ecosystem Management", "node_size": 10, "label": "ecosystem"}, "habitat restoration": {"concepts": "habitat restoration", "type": "concept", "cluster": "Habitat Restoration", "node_size": 10, "label": "habitat restoration"}, "natal streams": {"concepts": "natal streams", "type": "concept", "cluster": "Habitat Restoration", "node_size": 10, "label": "natal streams"}, "habitat background": {"concepts": "habitat background", "type": "concept", "cluster": "Habitat Restoration", "node_size": 10, "label": "habitat background"}, "habitat forming species": {"concepts": "habitat forming species", "type": "concept", "cluster": "Habitat Restoration", "node_size": 10, "label": "habitat forming species"}, "impervious surfaces": {"concepts": "impervious surfaces", "type": "concept", "cluster": "Habitat Restoration", "node_size": 10, "label": "impervious surfaces"}, "pristine habitat": {"concepts": "pristine habitat", "type": "concept", "cluster": "Habitat Restoration", "node_size": 10, "label": "pristine habitat"}, "habitat restoration.": {"concepts": "habitat restoration.", "type": "concept", "cluster": "Habitat Restoration", "node_size": 10, "label": "habitat restoration."}, "habitat protection": {"concepts": "habitat protection", "type": "concept", "cluster": "Habitat Restoration", "node_size": 10, "label": "habitat protection"}, "habitat": {"concepts": "habitat", "type": "concept", "cluster": "Habitat Restoration", "node_size": 10, "label": "habitat"}};
        const interClusterEdges = [["Environmental Stressors", "Stakeholder Perspectives", {"weight": 0.75, "confidence": 0.5249999999999999, "type": "inter_cluster", "style": "solid"}], ["Environmental Stressors", "Sustainable Harvesting", {"weight": -0.5, "confidence": 0.35, "type": "inter_cluster", "style": "solid"}], ["Policy Management", "Wild Salmon Advocacy", {"weight": -0.2, "confidence": 0.45999999999999996, "type": "inter_cluster", "style": "solid"}], ["Policy Management", "Salmon Conservation", {"weight": 0.25, "confidence": 0.1875, "type": "inter_cluster", "style": "solid"}], ["Stakeholder Perspectives", "Fish Habitat Management", {"weight": 0.8, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["Stakeholder Perspectives", "Ecosystem Management", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["Fisheries Operations", "Commercial Overharvest", {"weight": 0.6666666666666666, "confidence": 0.4666666666666666, "type": "inter_cluster", "style": "solid"}], ["Fisheries Operations", "Sustainable Harvesting", {"weight": -0.5, "confidence": 0.35, "type": "inter_cluster", "style": "solid"}], ["Fisheries Operations", "Coastal Regions", {"weight": -0.25, "confidence": 0.2125, "type": "inter_cluster", "style": "solid"}], ["Coastal Regions", "Hatchery Opposition", {"weight": -0.25, "confidence": 0.5875, "type": "inter_cluster", "style": "solid"}], ["Coastal Regions", "River Systems", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["Wild Salmon Advocacy", "Fisheries Operations", {"weight": 0.4, "confidence": 0.63, "type": "inter_cluster", "style": "solid"}], ["Wild Salmon Advocacy", "Hatchery Opposition", {"weight": -0.2, "confidence": 0.47000000000000003, "type": "inter_cluster", "style": "solid"}], ["Wild Salmon Advocacy", "Salmon Conservation", {"weight": 0.2, "confidence": 0.43, "type": "inter_cluster", "style": "solid"}], ["Salmon Conservation", "Habitat Restoration", {"weight": 0.75, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["Salmon Conservation", "Water Activities", {"weight": 0.3333333333333333, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["Fish Habitat Management", "Stakeholder Perspectives", {"weight": 0.25, "confidence": 0.575, "type": "inter_cluster", "style": "solid"}], ["Fish Habitat Management", "Policy Management", {"weight": -0.6666666666666666, "confidence": 0.5166666666666667, "type": "inter_cluster", "style": "solid"}], ["Fish Habitat Management", "Coastal Regions", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["River Systems", "Coastal Regions", {"weight": -0.5, "confidence": 0.375, "type": "inter_cluster", "style": "solid"}], ["River Systems", "Selective Fisheries", {"weight": 0.5, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Nutrient Sediment Load", "Hatchery Opposition", {"weight": -0.5, "confidence": 0.4, "type": "inter_cluster", "style": "solid"}], ["Nutrient Sediment Load", "Stakeholder Perspectives", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["Nutrient Sediment Load", "Ecosystem Management", {"weight": -0.25, "confidence": 0.1875, "type": "inter_cluster", "style": "solid"}], ["Water Activities", "Wild Salmon Advocacy", {"weight": 0.2, "confidence": 0.4699999999999999, "type": "inter_cluster", "style": "solid"}], ["Water Activities", "Fisheries Operations", {"weight": -0.25, "confidence": 0.5875, "type": "inter_cluster", "style": "solid"}], ["Water Activities", "Salmon Conservation", {"weight": -0.25, "confidence": 0.1875, "type": "inter_cluster", "style": "solid"}], ["Commercial Overharvest", "River Systems", {"weight": -0.75, "confidence": 0.5875, "type": "inter_cluster", "style": "solid"}], ["Fisheries Management", "River Systems", {"weight": 0.2, "confidence": 0.45999999999999996, "type": "inter_cluster", "style": "solid"}], ["Fisheries Management", "Environmental Stressors", {"weight": -0.2, "confidence": 0.49000000000000005, "type": "inter_cluster", "style": "solid"}], ["Commercial Fishing", "Sustainable Harvesting", {"weight": 0.6, "confidence": 0.8099999999999999, "type": "inter_cluster", "style": "solid"}], ["Commercial Fishing", "Fisheries Operations", {"weight": -0.25, "confidence": 0.575, "type": "inter_cluster", "style": "solid"}], ["Commercial Fishing", "Ecosystem Management", {"weight": -0.6, "confidence": 0.47000000000000003, "type": "inter_cluster", "style": "solid"}], ["Selective Fisheries", "Environmental Stressors", {"weight": -0.25, "confidence": 0.5625, "type": "inter_cluster", "style": "solid"}], ["Selective Fisheries", "Fish Habitat Management", {"weight": 0.6666666666666666, "confidence": 0.48333333333333334, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Management", "Selective Fisheries", {"weight": 0.2, "confidence": 0.78, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Management", "Nutrient Sediment Load", {"weight": -0.2, "confidence": 0.43, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Management", "Coastal Regions", {"weight": 0.5, "confidence": 0.4, "type": "inter_cluster", "style": "solid"}], ["Habitat Restoration", "Hatchery Opposition", {"weight": -0.5, "confidence": 0.35, "type": "inter_cluster", "style": "solid"}], ["Habitat Restoration", "Ecosystem Management", {"weight": -0.3333333333333333, "confidence": 0.2833333333333333, "type": "inter_cluster", "style": "solid"}]];
        const clusterConcepts = {"Environmental Stressors": [["maryland", {"concepts": "maryland", "type": "concept", "cluster": "Environmental Stressors", "node_size": 10, "label": "maryland"}], ["mobile bay", {"concepts": "mobile bay", "type": "concept", "cluster": "Environmental Stressors", "node_size": 10, "label": "mobile bay"}], ["bellingham bay", {"concepts": "bellingham bay", "type": "concept", "cluster": "Environmental Stressors", "node_size": 10, "label": "bellingham bay"}], ["pacific northwest", {"concepts": "pacific northwest", "type": "concept", "cluster": "Environmental Stressors", "node_size": 10, "label": "pacific northwest"}], ["olympic peninsula", {"concepts": "olympic peninsula", "type": "concept", "cluster": "Environmental Stressors", "node_size": 10, "label": "olympic peninsula"}], ["bonneville dam", {"concepts": "bonneville dam", "type": "concept", "cluster": "Environmental Stressors", "node_size": 10, "label": "bonneville dam"}], ["alaska", {"concepts": "alaska", "type": "concept", "cluster": "Environmental Stressors", "node_size": 10, "label": "alaska"}], ["gulf of mexico", {"concepts": "gulf of mexico", "type": "concept", "cluster": "Environmental Stressors", "node_size": 10, "label": "gulf of mexico"}], ["puget sound", {"concepts": "puget sound", "type": "concept", "cluster": "Environmental Stressors", "node_size": 10, "label": "puget sound"}], ["chesapeake bay", {"concepts": "chesapeake bay", "type": "concept", "cluster": "Environmental Stressors", "node_size": 10, "label": "chesapeake bay"}]], "Policy Management": [["harmful environment", {"concepts": "harmful environment", "type": "concept", "cluster": "Policy Management", "node_size": 10, "label": "harmful environment"}], ["whirling disease", {"concepts": "whirling disease", "type": "concept", "cluster": "Policy Management", "node_size": 10, "label": "whirling disease"}], ["smelt", {"concepts": "smelt", "type": "concept", "cluster": "Policy Management", "node_size": 10, "label": "smelt"}], ["chemicals", {"concepts": "chemicals", "type": "concept", "cluster": "Policy Management", "node_size": 10, "label": "chemicals"}], ["brake dust", {"concepts": "brake dust", "type": "concept", "cluster": "Policy Management", "node_size": 10, "label": "brake dust"}], ["run off", {"concepts": "run off", "type": "concept", "cluster": "Policy Management", "node_size": 10, "label": "run off"}], ["stressors", {"concepts": "stressors", "type": "concept", "cluster": "Policy Management", "node_size": 10, "label": "stressors"}], ["environmental factors", {"concepts": "environmental factors", "type": "concept", "cluster": "Policy Management", "node_size": 10, "label": "environmental factors"}], ["herring", {"concepts": "herring", "type": "concept", "cluster": "Policy Management", "node_size": 10, "label": "herring"}], ["eggs", {"concepts": "eggs", "type": "concept", "cluster": "Policy Management", "node_size": 10, "label": "eggs"}], ["bacterias", {"concepts": "bacterias", "type": "concept", "cluster": "Policy Management", "node_size": 10, "label": "bacterias"}], ["harmful organisms", {"concepts": "harmful organisms", "type": "concept", "cluster": "Policy Management", "node_size": 10, "label": "harmful organisms"}], ["forecast", {"concepts": "forecast", "type": "concept", "cluster": "Policy Management", "node_size": 10, "label": "forecast"}]], "Stakeholder Perspectives": [["development", {"concepts": "development", "type": "concept", "cluster": "Stakeholder Perspectives", "node_size": 10, "label": "development"}], ["policies.", {"concepts": "policies.", "type": "concept", "cluster": "Stakeholder Perspectives", "node_size": 10, "label": "policies."}], ["managers", {"concepts": "managers", "type": "concept", "cluster": "Stakeholder Perspectives", "node_size": 10, "label": "managers"}], ["commission", {"concepts": "commission", "type": "concept", "cluster": "Stakeholder Perspectives", "node_size": 10, "label": "commission"}], ["management decisions", {"concepts": "management decisions", "type": "concept", "cluster": "Stakeholder Perspectives", "node_size": 10, "label": "management decisions"}], ["policies", {"concepts": "policies", "type": "concept", "cluster": "Stakeholder Perspectives", "node_size": 10, "label": "policies"}], ["allocation", {"concepts": "allocation", "type": "concept", "cluster": "Stakeholder Perspectives", "node_size": 10, "label": "allocation"}], ["cc", {"concepts": "cc", "type": "concept", "cluster": "Stakeholder Perspectives", "node_size": 10, "label": "cc"}], ["cca alabama", {"concepts": "cca alabama", "type": "concept", "cluster": "Stakeholder Perspectives", "node_size": 10, "label": "cca alabama"}], ["policy management", {"concepts": "policy management", "type": "concept", "cluster": "Stakeholder Perspectives", "node_size": 10, "label": "policy management"}], ["management", {"concepts": "management", "type": "concept", "cluster": "Stakeholder Perspectives", "node_size": 10, "label": "management"}], ["national lawsuits", {"concepts": "national lawsuits", "type": "concept", "cluster": "Stakeholder Perspectives", "node_size": 10, "label": "national lawsuits"}], ["treaty tribes", {"concepts": "treaty tribes", "type": "concept", "cluster": "Stakeholder Perspectives", "node_size": 10, "label": "treaty tribes"}], ["industrial facilities", {"concepts": "industrial facilities", "type": "concept", "cluster": "Stakeholder Perspectives", "node_size": 10, "label": "industrial facilities"}]], "Fisheries Operations": [["researchers", {"concepts": "researchers", "type": "concept", "cluster": "Fisheries Operations", "node_size": 10, "label": "researchers"}], ["steelhead", {"concepts": "steelhead", "type": "concept", "cluster": "Fisheries Operations", "node_size": 10, "label": "steelhead"}], ["consumptive user groups", {"concepts": "consumptive user groups", "type": "concept", "cluster": "Fisheries Operations", "node_size": 10, "label": "consumptive user groups"}], ["cca washington", {"concepts": "cca washington", "type": "concept", "cluster": "Fisheries Operations", "node_size": 10, "label": "cca washington"}], ["returning adults", {"concepts": "returning adults", "type": "concept", "cluster": "Fisheries Operations", "node_size": 10, "label": "returning adults"}], ["blakely ellis", {"concepts": "blakely ellis", "type": "concept", "cluster": "Fisheries Operations", "node_size": 10, "label": "blakely ellis"}], ["tribal layer", {"concepts": "tribal layer", "type": "concept", "cluster": "Fisheries Operations", "node_size": 10, "label": "tribal layer"}], ["human considerations", {"concepts": "human considerations", "type": "concept", "cluster": "Fisheries Operations", "node_size": 10, "label": "human considerations"}], ["resource users", {"concepts": "resource users", "type": "concept", "cluster": "Fisheries Operations", "node_size": 10, "label": "resource users"}], ["cca", {"concepts": "cca", "type": "concept", "cluster": "Fisheries Operations", "node_size": 10, "label": "cca"}], ["obama", {"concepts": "obama", "type": "concept", "cluster": "Fisheries Operations", "node_size": 10, "label": "obama"}], ["trawler", {"concepts": "trawler", "type": "concept", "cluster": "Fisheries Operations", "node_size": 10, "label": "trawler"}], ["david sikorsky", {"concepts": "david sikorsky", "type": "concept", "cluster": "Fisheries Operations", "node_size": 10, "label": "david sikorsky"}], ["roads", {"concepts": "roads", "type": "concept", "cluster": "Fisheries Operations", "node_size": 10, "label": "roads"}], ["cars", {"concepts": "cars", "type": "concept", "cluster": "Fisheries Operations", "node_size": 10, "label": "cars"}], ["perspective", {"concepts": "perspective", "type": "concept", "cluster": "Fisheries Operations", "node_size": 10, "label": "perspective"}], ["bycatch", {"concepts": "bycatch", "type": "concept", "cluster": "Fisheries Operations", "node_size": 10, "label": "bycatch"}]], "Coastal Regions": [["hydro", {"concepts": "hydro", "type": "concept", "cluster": "Coastal Regions", "node_size": 10, "label": "hydro"}], ["mark flector", {"concepts": "mark flector", "type": "concept", "cluster": "Coastal Regions", "node_size": 10, "label": "mark flector"}], ["canada", {"concepts": "canada", "type": "concept", "cluster": "Coastal Regions", "node_size": 10, "label": "canada"}], ["harvest", {"concepts": "harvest", "type": "concept", "cluster": "Coastal Regions", "node_size": 10, "label": "harvest"}], ["commercial facilities", {"concepts": "commercial facilities", "type": "concept", "cluster": "Coastal Regions", "node_size": 10, "label": "commercial facilities"}], ["adipose fin", {"concepts": "adipose fin", "type": "concept", "cluster": "Coastal Regions", "node_size": 10, "label": "adipose fin"}], ["technical difficulties", {"concepts": "technical difficulties", "type": "concept", "cluster": "Coastal Regions", "node_size": 10, "label": "technical difficulties"}]], "Wild Salmon Advocacy": [["wild salmon advocates", {"concepts": "wild salmon advocates", "type": "concept", "cluster": "Wild Salmon Advocacy", "node_size": 10, "label": "wild salmon advocates"}], ["wild steelhead", {"concepts": "wild steelhead", "type": "concept", "cluster": "Wild Salmon Advocacy", "node_size": 10, "label": "wild steelhead"}], ["wild salmon", {"concepts": "wild salmon", "type": "concept", "cluster": "Wild Salmon Advocacy", "node_size": 10, "label": "wild salmon"}], ["wild spawning fish", {"concepts": "wild spawning fish", "type": "concept", "cluster": "Wild Salmon Advocacy", "node_size": 10, "label": "wild spawning fish"}]], "Hatchery Opposition": [["anti hatchery groups", {"concepts": "anti hatchery groups", "type": "concept", "cluster": "Hatchery Opposition", "node_size": 10, "label": "anti hatchery groups"}], ["farm raised", {"concepts": "farm raised", "type": "concept", "cluster": "Hatchery Opposition", "node_size": 10, "label": "farm raised"}], ["hatchery salmon", {"concepts": "hatchery salmon", "type": "concept", "cluster": "Hatchery Opposition", "node_size": 10, "label": "hatchery salmon"}], ["hatchery fish", {"concepts": "hatchery fish", "type": "concept", "cluster": "Hatchery Opposition", "node_size": 10, "label": "hatchery fish"}], ["hatchery environment", {"concepts": "hatchery environment", "type": "concept", "cluster": "Hatchery Opposition", "node_size": 10, "label": "hatchery environment"}], ["farm-raised salmon", {"concepts": "farm-raised salmon", "type": "concept", "cluster": "Hatchery Opposition", "node_size": 10, "label": "farm-raised salmon"}], ["hatcheries", {"concepts": "hatcheries", "type": "concept", "cluster": "Hatchery Opposition", "node_size": 10, "label": "hatcheries"}]], "Salmon Conservation": [["salmon problem", {"concepts": "salmon problem", "type": "concept", "cluster": "Salmon Conservation", "node_size": 10, "label": "salmon problem"}], ["salmon", {"concepts": "salmon", "type": "concept", "cluster": "Salmon Conservation", "node_size": 10, "label": "salmon"}], ["salmon recovery", {"concepts": "salmon recovery", "type": "concept", "cluster": "Salmon Conservation", "node_size": 10, "label": "salmon recovery"}], ["returning salmon populations", {"concepts": "returning salmon populations", "type": "concept", "cluster": "Salmon Conservation", "node_size": 10, "label": "returning salmon populations"}], ["salmon conservation", {"concepts": "salmon conservation", "type": "concept", "cluster": "Salmon Conservation", "node_size": 10, "label": "salmon conservation"}]], "Fish Habitat Management": [["forage fish", {"concepts": "forage fish", "type": "concept", "cluster": "Fish Habitat Management", "node_size": 10, "label": "forage fish"}], ["spawning grounds", {"concepts": "spawning grounds", "type": "concept", "cluster": "Fish Habitat Management", "node_size": 10, "label": "spawning grounds"}], ["department of fish and wildlife", {"concepts": "department of fish and wildlife", "type": "concept", "cluster": "Fish Habitat Management", "node_size": 10, "label": "department of fish and wildlife"}], ["dams", {"concepts": "dams", "type": "concept", "cluster": "Fish Habitat Management", "node_size": 10, "label": "dams"}], ["salmon runs", {"concepts": "salmon runs", "type": "concept", "cluster": "Fish Habitat Management", "node_size": 10, "label": "salmon runs"}], ["tagging fish", {"concepts": "tagging fish", "type": "concept", "cluster": "Fish Habitat Management", "node_size": 10, "label": "tagging fish"}]], "River Systems": [["river", {"concepts": "river", "type": "concept", "cluster": "River Systems", "node_size": 10, "label": "river"}], ["columbia river", {"concepts": "columbia river", "type": "concept", "cluster": "River Systems", "node_size": 10, "label": "columbia river"}], ["river drop", {"concepts": "river drop", "type": "concept", "cluster": "River Systems", "node_size": 10, "label": "river drop"}], ["river rise", {"concepts": "river rise", "type": "concept", "cluster": "River Systems", "node_size": 10, "label": "river rise"}], ["nisqually river", {"concepts": "nisqually river", "type": "concept", "cluster": "River Systems", "node_size": 10, "label": "nisqually river"}], ["nooksack river", {"concepts": "nooksack river", "type": "concept", "cluster": "River Systems", "node_size": 10, "label": "nooksack river"}]], "Nutrient Sediment Load": [["increased sediments", {"concepts": "increased sediments", "type": "concept", "cluster": "Nutrient Sediment Load", "node_size": 10, "label": "increased sediments"}], ["marine derived nutrients", {"concepts": "marine derived nutrients", "type": "concept", "cluster": "Nutrient Sediment Load", "node_size": 10, "label": "marine derived nutrients"}], ["nutrient enhancement", {"concepts": "nutrient enhancement", "type": "concept", "cluster": "Nutrient Sediment Load", "node_size": 10, "label": "nutrient enhancement"}], ["nutrient load", {"concepts": "nutrient load", "type": "concept", "cluster": "Nutrient Sediment Load", "node_size": 10, "label": "nutrient load"}], ["sediments", {"concepts": "sediments", "type": "concept", "cluster": "Nutrient Sediment Load", "node_size": 10, "label": "sediments"}], ["water runoff", {"concepts": "water runoff", "type": "concept", "cluster": "Nutrient Sediment Load", "node_size": 10, "label": "water runoff"}]], "Water Activities": [["gill netting", {"concepts": "gill netting", "type": "concept", "cluster": "Water Activities", "node_size": 10, "label": "gill netting"}], ["irrigating", {"concepts": "irrigating", "type": "concept", "cluster": "Water Activities", "node_size": 10, "label": "irrigating"}], ["non-tribal gill netting", {"concepts": "non-tribal gill netting", "type": "concept", "cluster": "Water Activities", "node_size": 10, "label": "non-tribal gill netting"}], ["warmer water conditions", {"concepts": "warmer water conditions", "type": "concept", "cluster": "Water Activities", "node_size": 10, "label": "warmer water conditions"}], ["whitewater rafting", {"concepts": "whitewater rafting", "type": "concept", "cluster": "Water Activities", "node_size": 10, "label": "whitewater rafting"}]], "Commercial Overharvest": [["commercial harvest", {"concepts": "commercial harvest", "type": "concept", "cluster": "Commercial Overharvest", "node_size": 10, "label": "commercial harvest"}], ["commercial overharvest", {"concepts": "commercial overharvest", "type": "concept", "cluster": "Commercial Overharvest", "node_size": 10, "label": "commercial overharvest"}], ["commercial over harvest", {"concepts": "commercial over harvest", "type": "concept", "cluster": "Commercial Overharvest", "node_size": 10, "label": "commercial over harvest"}]], "Sustainable Harvesting": [["sustainable numbers", {"concepts": "sustainable numbers", "type": "concept", "cluster": "Sustainable Harvesting", "node_size": 10, "label": "sustainable numbers"}], ["maximum sustainable yield", {"concepts": "maximum sustainable yield", "type": "concept", "cluster": "Sustainable Harvesting", "node_size": 10, "label": "maximum sustainable yield"}], ["harvest policies", {"concepts": "harvest policies", "type": "concept", "cluster": "Sustainable Harvesting", "node_size": 10, "label": "harvest policies"}]], "Fisheries Management": [["fisheries managers", {"concepts": "fisheries managers", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fisheries managers"}], ["local fishery managers", {"concepts": "local fishery managers", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "local fishery managers"}], ["federal fisheries managers", {"concepts": "federal fisheries managers", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "federal fisheries managers"}], ["fisheries management", {"concepts": "fisheries management", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fisheries management"}], ["state fisheries managers", {"concepts": "state fisheries managers", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "state fisheries managers"}]], "Commercial Fishing": [["commercial fishing", {"concepts": "commercial fishing", "type": "concept", "cluster": "Commercial Fishing", "node_size": 10, "label": "commercial fishing"}], ["commercial ocean harvest", {"concepts": "commercial ocean harvest", "type": "concept", "cluster": "Commercial Fishing", "node_size": 10, "label": "commercial ocean harvest"}], ["commercial fisheries", {"concepts": "commercial fisheries", "type": "concept", "cluster": "Commercial Fishing", "node_size": 10, "label": "commercial fisheries"}], ["commercial fishing seasons", {"concepts": "commercial fishing seasons", "type": "concept", "cluster": "Commercial Fishing", "node_size": 10, "label": "commercial fishing seasons"}], ["recreational fishermen", {"concepts": "recreational fishermen", "type": "concept", "cluster": "Commercial Fishing", "node_size": 10, "label": "recreational fishermen"}], ["recreational fishing", {"concepts": "recreational fishing", "type": "concept", "cluster": "Commercial Fishing", "node_size": 10, "label": "recreational fishing"}], ["recreational fishing seasons", {"concepts": "recreational fishing seasons", "type": "concept", "cluster": "Commercial Fishing", "node_size": 10, "label": "recreational fishing seasons"}]], "Selective Fisheries": [["mark selective fisheries", {"concepts": "mark selective fisheries", "type": "concept", "cluster": "Selective Fisheries", "node_size": 10, "label": "mark selective fisheries"}], ["pacific ocean", {"concepts": "pacific ocean", "type": "concept", "cluster": "Selective Fisheries", "node_size": 10, "label": "pacific ocean"}]], "Ecosystem Management": [["species of conservation concern", {"concepts": "species of conservation concern", "type": "concept", "cluster": "Ecosystem Management", "node_size": 10, "label": "species of conservation concern"}], ["endangered species", {"concepts": "endangered species", "type": "concept", "cluster": "Ecosystem Management", "node_size": 10, "label": "endangered species"}], ["biodiversity consideration", {"concepts": "biodiversity consideration", "type": "concept", "cluster": "Ecosystem Management", "node_size": 10, "label": "biodiversity consideration"}], ["ecosystem based management", {"concepts": "ecosystem based management", "type": "concept", "cluster": "Ecosystem Management", "node_size": 10, "label": "ecosystem based management"}], ["ecosystem services", {"concepts": "ecosystem services", "type": "concept", "cluster": "Ecosystem Management", "node_size": 10, "label": "ecosystem services"}], ["key food web supporting species", {"concepts": "key food web supporting species", "type": "concept", "cluster": "Ecosystem Management", "node_size": 10, "label": "key food web supporting species"}], ["multi species management", {"concepts": "multi species management", "type": "concept", "cluster": "Ecosystem Management", "node_size": 10, "label": "multi species management"}], ["food web", {"concepts": "food web", "type": "concept", "cluster": "Ecosystem Management", "node_size": 10, "label": "food web"}], ["wild populations", {"concepts": "wild populations", "type": "concept", "cluster": "Ecosystem Management", "node_size": 10, "label": "wild populations"}], ["single species management", {"concepts": "single species management", "type": "concept", "cluster": "Ecosystem Management", "node_size": 10, "label": "single species management"}], ["food web species", {"concepts": "food web species", "type": "concept", "cluster": "Ecosystem Management", "node_size": 10, "label": "food web species"}], ["biodiversity", {"concepts": "biodiversity", "type": "concept", "cluster": "Ecosystem Management", "node_size": 10, "label": "biodiversity"}], ["ecosystem", {"concepts": "ecosystem", "type": "concept", "cluster": "Ecosystem Management", "node_size": 10, "label": "ecosystem"}]], "Habitat Restoration": [["habitat restoration", {"concepts": "habitat restoration", "type": "concept", "cluster": "Habitat Restoration", "node_size": 10, "label": "habitat restoration"}], ["natal streams", {"concepts": "natal streams", "type": "concept", "cluster": "Habitat Restoration", "node_size": 10, "label": "natal streams"}], ["habitat background", {"concepts": "habitat background", "type": "concept", "cluster": "Habitat Restoration", "node_size": 10, "label": "habitat background"}], ["habitat forming species", {"concepts": "habitat forming species", "type": "concept", "cluster": "Habitat Restoration", "node_size": 10, "label": "habitat forming species"}], ["impervious surfaces", {"concepts": "impervious surfaces", "type": "concept", "cluster": "Habitat Restoration", "node_size": 10, "label": "impervious surfaces"}], ["pristine habitat", {"concepts": "pristine habitat", "type": "concept", "cluster": "Habitat Restoration", "node_size": 10, "label": "pristine habitat"}], ["habitat restoration.", {"concepts": "habitat restoration.", "type": "concept", "cluster": "Habitat Restoration", "node_size": 10, "label": "habitat restoration."}], ["habitat protection", {"concepts": "habitat protection", "type": "concept", "cluster": "Habitat Restoration", "node_size": 10, "label": "habitat protection"}], ["habitat", {"concepts": "habitat", "type": "concept", "cluster": "Habitat Restoration", "node_size": 10, "label": "habitat"}]]};
        const clusterEdges = {"Environmental Stressors": [], "Policy Management": [], "Stakeholder Perspectives": [], "Fisheries Operations": [], "Coastal Regions": [], "Wild Salmon Advocacy": [], "Hatchery Opposition": [], "Salmon Conservation": [], "Fish Habitat Management": [], "River Systems": [], "Nutrient Sediment Load": [], "Water Activities": [], "Commercial Overharvest": [], "Sustainable Harvesting": [], "Fisheries Management": [], "Commercial Fishing": [], "Selective Fisheries": [], "Ecosystem Management": [], "Habitat Restoration": []};
        
        let network;
        let currentView = 'clusters';
        let currentCluster = null;
        let minConfidence = 0.3;
        
        // Network options
        const options = {
            nodes: {
                font: { color: 'white', size: 14 },
                borderWidth: 2,
                shadow: true
            },
            edges: {
                arrows: { to: { enabled: true, scaleFactor: 1.2 } },
                shadow: true,
                smooth: { type: 'continuous' }
            },
            physics: {
                stabilization: { iterations: 100 },
                barnesHut: {
                    gravitationalConstant: -8000,
                    springConstant: 0.001,
                    springLength: 200
                }
            },
            interaction: {
                hover: true,
                selectConnectedEdges: false
            }
        };
        
        function initNetwork() {
            const container = document.getElementById('network');
            const data = getClusterViewData();
            network = new vis.Network(container, data, options);
            
            // Handle cluster clicks for drill-down
            network.on("click", function(params) {
                if (params.nodes.length > 0 && currentView === 'clusters') {
                    const clickedNode = params.nodes[0];
                    if (clusterConcepts[clickedNode]) {
                        showClusterDetail(clickedNode);
                    }
                }
            });
        }
        
        function getClusterViewData() {
            const nodes = [];
            const edges = [];
            
            // Add cluster nodes
            Object.entries(clusterData).forEach(([clusterId, data]) => {
                const concepts = data.concepts || [];
                const conceptsStr = Array.isArray(concepts) ? concepts.join(', ') : concepts;
                
                nodes.push({
                    id: clusterId,
                    label: clusterId,
                    title: `Cluster: ${clusterId}\nConcepts: ${conceptsStr}\nClick to explore internal relationships`,
                    color: '#4A90E2',
                    size: 25 + (conceptsStr.split(',').length * 2),
                    font: { color: 'white' }
                });
            });
            
            // Add inter-cluster edges
            interClusterEdges.forEach(([source, target, edgeData]) => {
                const confidence = edgeData.confidence || 1.0;
                const weight = edgeData.weight || 0;
                
                if (confidence >= minConfidence) {
                    edges.push({
                        from: source,
                        to: target,
                        color: weight > 0 ? '#28A745' : '#DC3545',
                        width: Math.abs(weight) * 3 + 1,
                        title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                        dashes: false
                    });
                }
            });
            
            return { nodes: nodes, edges: edges };
        }
        
        function getClusterDetailData(clusterId) {
            const nodes = [];
            const edges = [];
            
            // Add concept nodes for this cluster
            if (clusterConcepts[clusterId]) {
                clusterConcepts[clusterId].forEach(([conceptId, data]) => {
                    nodes.push({
                        id: conceptId,
                        label: conceptId,
                        title: `Concept: ${conceptId}\nFrom cluster: ${clusterId}`,
                        color: '#FF9500',
                        size: 20,
                        font: { color: 'white' }
                    });
                });
            }
            
            // Add intra-cluster edges
            if (clusterEdges[clusterId]) {
                clusterEdges[clusterId].forEach(([source, target, edgeData]) => {
                    const confidence = edgeData.confidence || 1.0;
                    const weight = edgeData.weight || 0;
                    
                    if (confidence >= minConfidence) {
                        edges.push({
                            from: source,
                            to: target,
                            color: weight > 0 ? '#28A745' : '#DC3545',
                            width: Math.abs(weight) * 3 + 1,
                            title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                            dashes: true
                        });
                    }
                });
            }
            
            return { nodes: nodes, edges: edges };
        }
        
        function showClusterView() {
            currentView = 'clusters';
            currentCluster = null;
            const data = getClusterViewData();
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'none';
            document.getElementById('current-view').textContent = 'Cluster Overview';
        }
        
        function showClusterDetail(clusterId) {
            currentView = 'concepts';
            currentCluster = clusterId;
            const data = getClusterDetailData(clusterId);
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'inline-block';
            document.getElementById('current-view').textContent = `Inside Cluster: ${clusterId}`;
        }
        
        function updateConfidenceFilter(value) {
            minConfidence = parseFloat(value);
            document.getElementById('confidence-value').textContent = value;
            
            // Refresh current view
            if (currentView === 'clusters') {
                showClusterView();
            } else {
                showClusterDetail(currentCluster);
            }
        }
        
        // Initialize the network when page loads
        window.onload = function() {
            initNetwork();
        };
    </script>
</body>
</html>
