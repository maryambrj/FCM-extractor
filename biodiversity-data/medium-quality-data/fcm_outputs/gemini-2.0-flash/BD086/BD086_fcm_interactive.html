
<!DOCTYPE html>
<html>
<head>
    <title>Hierarchical FCM Visualization</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 0; 
            padding: 20px;
            background: #f5f5f5;
        }
        
        #network { 
            width: 100%; 
            height: 600px; 
            border: 2px solid #ccc; 
            background: white;
            border-radius: 8px;
        }
        
        #controls {
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn {
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        
        .btn-primary { background: #4A90E2; color: white; }
        .btn-primary:hover { background: #357ABD; }
        
        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #545b62; }
        
        #current-view {
            font-weight: bold;
            color: #333;
            margin-left: 10px;
        }
        
        #legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-size: 12px;
            max-width: 200px;
        }
        
        .legend-item {
            margin: 5px 0;
            display: flex;
            align-items: center;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .legend-line {
            width: 20px;
            height: 2px;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <h1>Fuzzy Cognitive Map - Hierarchical View</h1>
    
    <div id="controls">
        <button class="btn btn-secondary" id="back-btn" onclick="showClusterView()" style="display: none;">
            ‚Üê Back to Clusters
        </button>
        <span id="current-view">Cluster Overview</span>
        <div style="float: right;">
            <label>Min Confidence: </label>
            <input type="range" id="confidence-slider" min="0" max="1" step="0.1" value="0.3" 
                   onchange="updateConfidenceFilter(this.value)">
            <span id="confidence-value">0.3</span>
        </div>
    </div>
    
    <div id="network"></div>
    
    <div id="legend">
        <h4>Legend</h4>
        <div class="legend-item">
            <div class="legend-color" style="background: #4A90E2;"></div>
            <span>Clusters</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #FF9500;"></div>
            <span>Concepts</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #28A745;"></div>
            <span>Positive relationship</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #DC3545;"></div>
            <span>Negative relationship</span>
        </div>
        <div style="margin-top: 10px; font-style: italic; color: #666;">
            Click clusters to explore internal concepts
        </div>
    </div>

    <script>
        // Embedded data
        const clusterData = {"science panel": {"concepts": "science panel", "concept_list": ["science panel"], "type": "cluster", "node_size": 18, "label": "science panel"}, "predator abundance": {"concepts": "predator abundance", "concept_list": ["predator abundance"], "type": "cluster", "node_size": 18, "label": "predator abundance"}, "Puget Sound Impacts": {"concepts": "management scenarios, management interventions, managing, management approaches, management dynamics, co-management, levers, decision support, trade-offs, management decisions", "concept_list": ["management scenarios", "management interventions", "managing", "management approaches", "management dynamics", "co-management", "levers", "decision support", "trade-offs", "management decisions"], "type": "cluster", "node_size": 45, "label": "Puget Sound Impacts"}, "Tribal Perspectives": {"concepts": "puget sound, beach closures, chinook, climate stressors, closure scenarios, health effects", "concept_list": ["puget sound", "beach closures", "chinook", "climate stressors", "closure scenarios", "health effects"], "type": "cluster", "node_size": 33, "label": "Tribal Perspectives"}, "Collaborative Modeling": {"concepts": "tribes, tribal dynamics, tribal resource managers, tribal harvesters, tribal values, treaty rights", "concept_list": ["tribes", "tribal dynamics", "tribal resource managers", "tribal harvesters", "tribal values", "treaty rights"], "type": "cluster", "node_size": 33, "label": "Collaborative Modeling"}, "Social-Ecological Modeling": {"concepts": "collaborative discussion, economic values, preservation, intermediate characteristics, social science advisory committee, framework, trip, intermediate components, data improvement, sociological system, conceptual model, system dynamics, survey, stressors, regulating services, ecotourism operators, community members, supporting functions, science panel meeting, value of trip, conceptual modeling, non-market values, spaghetti model, social science, oral interviews, resource managers, resilience, conservation, state agencies, social science group, case study approach, survey design, anglers, experimental design, choice experiment", "concept_list": ["collaborative discussion", "economic values", "preservation", "intermediate characteristics", "social science advisory committee", "framework", "trip", "intermediate components", "data improvement", "sociological system", "conceptual model", "system dynamics", "survey", "stressors", "regulating services", "ecotourism operators", "community members", "supporting functions", "science panel meeting", "value of trip", "conceptual modeling", "non-market values", "spaghetti model", "social science", "oral interviews", "resource managers", "resilience", "conservation", "state agencies", "social science group", "case study approach", "survey design", "anglers", "experimental design", "choice experiment"], "type": "cluster", "node_size": 120, "label": "Social-Ecological Modeling"}, "Pollution & Contamination": {"concepts": "contamination, pollution events, pollution", "concept_list": ["contamination", "pollution events", "pollution"], "type": "cluster", "node_size": 24, "label": "Pollution & Contamination"}, "River Runoff Pollution": {"concepts": "runoff issues, river, non-point pollution", "concept_list": ["runoff issues", "river", "non-point pollution"], "type": "cluster", "node_size": 24, "label": "River Runoff Pollution"}, "Marine Resource Management": {"concepts": "hatchery management, fishery disaster, us marine resource management", "concept_list": ["hatchery management", "fishery disaster", "us marine resource management"], "type": "cluster", "node_size": 24, "label": "Marine Resource Management"}, "Marine Resource Stakeholders": {"concepts": "marine resource users, fishermen, recreational anglers, recreational fishers, marine resource managers", "concept_list": ["marine resource users", "fishermen", "recreational anglers", "recreational fishers", "marine resource managers"], "type": "cluster", "node_size": 30, "label": "Marine Resource Stakeholders"}, "Steelhead Fishing": {"concepts": "steelhead survey, steelhead fishing, steelhead harvest, recreational fishing", "concept_list": ["steelhead survey", "steelhead fishing", "steelhead harvest", "recreational fishing"], "type": "cluster", "node_size": 27, "label": "Steelhead Fishing"}, "Shellfish Harvesting": {"concepts": "shellfish harvesting, recreational harvest, commercial harvesting, recreational harvesting, shellfish harvest, shellfish, oyster farmers", "concept_list": ["shellfish harvesting", "recreational harvest", "commercial harvesting", "recreational harvesting", "shellfish harvest", "shellfish", "oyster farmers"], "type": "cluster", "node_size": 36, "label": "Shellfish Harvesting"}, "Harmful Algal Blooms": {"concepts": "harmful algal bloom, biotoxin, harmful organisms", "concept_list": ["harmful algal bloom", "biotoxin", "harmful organisms"], "type": "cluster", "node_size": 24, "label": "Harmful Algal Blooms"}, "**Biodiversity & Habitat**": {"concepts": "habitat, southern residents, increased diversity, biodiversity, key species, genetic diversity, marine biodiversity, enclosed ecosystem, species functions, biodiversity components", "concept_list": ["habitat", "southern residents", "increased diversity", "biodiversity", "key species", "genetic diversity", "marine biodiversity", "enclosed ecosystem", "species functions", "biodiversity components"], "type": "cluster", "node_size": 45, "label": "**Biodiversity & Habitat**"}, "Ecosystem Services & ESA": {"concepts": "ecosystem services, esa listed species, ecosystem service, ocean acidification, ecosystem service evaluations", "concept_list": ["ecosystem services", "esa listed species", "ecosystem service", "ocean acidification", "ecosystem service evaluations"], "type": "cluster", "node_size": 30, "label": "Ecosystem Services & ESA"}, "Waterfront Degradation": {"concepts": "biodiversity degradation, conservation concern, septic systems, land use change, waterfront homeowners, degradation biodiversity, ecosystem component", "concept_list": ["biodiversity degradation", "conservation concern", "septic systems", "land use change", "waterfront homeowners", "degradation biodiversity", "ecosystem component"], "type": "cluster", "node_size": 36, "label": "Waterfront Degradation"}, "Salmon Catch Rates": {"concepts": "catch rates, salmon", "concept_list": ["catch rates", "salmon"], "type": "cluster", "node_size": 21, "label": "Salmon Catch Rates"}, "Wild Salmon": {"concepts": "salmon species, wild fish", "concept_list": ["salmon species", "wild fish"], "type": "cluster", "node_size": 21, "label": "Wild Salmon"}, "Food Web Dynamics": {"concepts": "key food web, food web, prey source, food webs, food web services, prey availability", "concept_list": ["key food web", "food web", "prey source", "food webs", "food web services", "prey availability"], "type": "cluster", "node_size": 33, "label": "Food Web Dynamics"}};
        const conceptData = {"management scenarios": {"concepts": "management scenarios", "type": "concept", "cluster": "Puget Sound Impacts", "node_size": 10, "label": "management scenarios"}, "management interventions": {"concepts": "management interventions", "type": "concept", "cluster": "Puget Sound Impacts", "node_size": 10, "label": "management interventions"}, "managing": {"concepts": "managing", "type": "concept", "cluster": "Puget Sound Impacts", "node_size": 10, "label": "managing"}, "management approaches": {"concepts": "management approaches", "type": "concept", "cluster": "Puget Sound Impacts", "node_size": 10, "label": "management approaches"}, "management dynamics": {"concepts": "management dynamics", "type": "concept", "cluster": "Puget Sound Impacts", "node_size": 10, "label": "management dynamics"}, "co-management": {"concepts": "co-management", "type": "concept", "cluster": "Puget Sound Impacts", "node_size": 10, "label": "co-management"}, "levers": {"concepts": "levers", "type": "concept", "cluster": "Puget Sound Impacts", "node_size": 10, "label": "levers"}, "decision support": {"concepts": "decision support", "type": "concept", "cluster": "Puget Sound Impacts", "node_size": 10, "label": "decision support"}, "trade-offs": {"concepts": "trade-offs", "type": "concept", "cluster": "Puget Sound Impacts", "node_size": 10, "label": "trade-offs"}, "management decisions": {"concepts": "management decisions", "type": "concept", "cluster": "Puget Sound Impacts", "node_size": 10, "label": "management decisions"}, "puget sound": {"concepts": "puget sound", "type": "concept", "cluster": "Tribal Perspectives", "node_size": 10, "label": "puget sound"}, "beach closures": {"concepts": "beach closures", "type": "concept", "cluster": "Tribal Perspectives", "node_size": 10, "label": "beach closures"}, "chinook": {"concepts": "chinook", "type": "concept", "cluster": "Tribal Perspectives", "node_size": 10, "label": "chinook"}, "climate stressors": {"concepts": "climate stressors", "type": "concept", "cluster": "Tribal Perspectives", "node_size": 10, "label": "climate stressors"}, "closure scenarios": {"concepts": "closure scenarios", "type": "concept", "cluster": "Tribal Perspectives", "node_size": 10, "label": "closure scenarios"}, "health effects": {"concepts": "health effects", "type": "concept", "cluster": "Tribal Perspectives", "node_size": 10, "label": "health effects"}, "tribes": {"concepts": "tribes", "type": "concept", "cluster": "Collaborative Modeling", "node_size": 10, "label": "tribes"}, "tribal dynamics": {"concepts": "tribal dynamics", "type": "concept", "cluster": "Collaborative Modeling", "node_size": 10, "label": "tribal dynamics"}, "tribal resource managers": {"concepts": "tribal resource managers", "type": "concept", "cluster": "Collaborative Modeling", "node_size": 10, "label": "tribal resource managers"}, "tribal harvesters": {"concepts": "tribal harvesters", "type": "concept", "cluster": "Collaborative Modeling", "node_size": 10, "label": "tribal harvesters"}, "tribal values": {"concepts": "tribal values", "type": "concept", "cluster": "Collaborative Modeling", "node_size": 10, "label": "tribal values"}, "treaty rights": {"concepts": "treaty rights", "type": "concept", "cluster": "Collaborative Modeling", "node_size": 10, "label": "treaty rights"}, "collaborative discussion": {"concepts": "collaborative discussion", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "collaborative discussion"}, "economic values": {"concepts": "economic values", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "economic values"}, "preservation": {"concepts": "preservation", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "preservation"}, "intermediate characteristics": {"concepts": "intermediate characteristics", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "intermediate characteristics"}, "social science advisory committee": {"concepts": "social science advisory committee", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "social science advisory committee"}, "framework": {"concepts": "framework", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "framework"}, "trip": {"concepts": "trip", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "trip"}, "intermediate components": {"concepts": "intermediate components", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "intermediate components"}, "data improvement": {"concepts": "data improvement", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "data improvement"}, "sociological system": {"concepts": "sociological system", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "sociological system"}, "conceptual model": {"concepts": "conceptual model", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "conceptual model"}, "system dynamics": {"concepts": "system dynamics", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "system dynamics"}, "survey": {"concepts": "survey", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "survey"}, "stressors": {"concepts": "stressors", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "stressors"}, "regulating services": {"concepts": "regulating services", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "regulating services"}, "ecotourism operators": {"concepts": "ecotourism operators", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "ecotourism operators"}, "community members": {"concepts": "community members", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "community members"}, "supporting functions": {"concepts": "supporting functions", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "supporting functions"}, "science panel meeting": {"concepts": "science panel meeting", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "science panel meeting"}, "value of trip": {"concepts": "value of trip", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "value of trip"}, "conceptual modeling": {"concepts": "conceptual modeling", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "conceptual modeling"}, "non-market values": {"concepts": "non-market values", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "non-market values"}, "spaghetti model": {"concepts": "spaghetti model", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "spaghetti model"}, "social science": {"concepts": "social science", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "social science"}, "oral interviews": {"concepts": "oral interviews", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "oral interviews"}, "resource managers": {"concepts": "resource managers", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "resource managers"}, "resilience": {"concepts": "resilience", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "resilience"}, "conservation": {"concepts": "conservation", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "conservation"}, "state agencies": {"concepts": "state agencies", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "state agencies"}, "social science group": {"concepts": "social science group", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "social science group"}, "case study approach": {"concepts": "case study approach", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "case study approach"}, "survey design": {"concepts": "survey design", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "survey design"}, "anglers": {"concepts": "anglers", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "anglers"}, "experimental design": {"concepts": "experimental design", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "experimental design"}, "choice experiment": {"concepts": "choice experiment", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "choice experiment"}, "contamination": {"concepts": "contamination", "type": "concept", "cluster": "Pollution & Contamination", "node_size": 10, "label": "contamination"}, "pollution events": {"concepts": "pollution events", "type": "concept", "cluster": "Pollution & Contamination", "node_size": 10, "label": "pollution events"}, "pollution": {"concepts": "pollution", "type": "concept", "cluster": "Pollution & Contamination", "node_size": 10, "label": "pollution"}, "runoff issues": {"concepts": "runoff issues", "type": "concept", "cluster": "River Runoff Pollution", "node_size": 10, "label": "runoff issues"}, "river": {"concepts": "river", "type": "concept", "cluster": "River Runoff Pollution", "node_size": 10, "label": "river"}, "non-point pollution": {"concepts": "non-point pollution", "type": "concept", "cluster": "River Runoff Pollution", "node_size": 10, "label": "non-point pollution"}, "hatchery management": {"concepts": "hatchery management", "type": "concept", "cluster": "Marine Resource Management", "node_size": 10, "label": "hatchery management"}, "fishery disaster": {"concepts": "fishery disaster", "type": "concept", "cluster": "Marine Resource Management", "node_size": 10, "label": "fishery disaster"}, "us marine resource management": {"concepts": "us marine resource management", "type": "concept", "cluster": "Marine Resource Management", "node_size": 10, "label": "us marine resource management"}, "marine resource users": {"concepts": "marine resource users", "type": "concept", "cluster": "Marine Resource Stakeholders", "node_size": 10, "label": "marine resource users"}, "fishermen": {"concepts": "fishermen", "type": "concept", "cluster": "Marine Resource Stakeholders", "node_size": 10, "label": "fishermen"}, "recreational anglers": {"concepts": "recreational anglers", "type": "concept", "cluster": "Marine Resource Stakeholders", "node_size": 10, "label": "recreational anglers"}, "recreational fishers": {"concepts": "recreational fishers", "type": "concept", "cluster": "Marine Resource Stakeholders", "node_size": 10, "label": "recreational fishers"}, "marine resource managers": {"concepts": "marine resource managers", "type": "concept", "cluster": "Marine Resource Stakeholders", "node_size": 10, "label": "marine resource managers"}, "steelhead survey": {"concepts": "steelhead survey", "type": "concept", "cluster": "Steelhead Fishing", "node_size": 10, "label": "steelhead survey"}, "steelhead fishing": {"concepts": "steelhead fishing", "type": "concept", "cluster": "Steelhead Fishing", "node_size": 10, "label": "steelhead fishing"}, "steelhead harvest": {"concepts": "steelhead harvest", "type": "concept", "cluster": "Steelhead Fishing", "node_size": 10, "label": "steelhead harvest"}, "recreational fishing": {"concepts": "recreational fishing", "type": "concept", "cluster": "Steelhead Fishing", "node_size": 10, "label": "recreational fishing"}, "shellfish harvesting": {"concepts": "shellfish harvesting", "type": "concept", "cluster": "Shellfish Harvesting", "node_size": 10, "label": "shellfish harvesting"}, "recreational harvest": {"concepts": "recreational harvest", "type": "concept", "cluster": "Shellfish Harvesting", "node_size": 10, "label": "recreational harvest"}, "commercial harvesting": {"concepts": "commercial harvesting", "type": "concept", "cluster": "Shellfish Harvesting", "node_size": 10, "label": "commercial harvesting"}, "recreational harvesting": {"concepts": "recreational harvesting", "type": "concept", "cluster": "Shellfish Harvesting", "node_size": 10, "label": "recreational harvesting"}, "shellfish harvest": {"concepts": "shellfish harvest", "type": "concept", "cluster": "Shellfish Harvesting", "node_size": 10, "label": "shellfish harvest"}, "shellfish": {"concepts": "shellfish", "type": "concept", "cluster": "Shellfish Harvesting", "node_size": 10, "label": "shellfish"}, "oyster farmers": {"concepts": "oyster farmers", "type": "concept", "cluster": "Shellfish Harvesting", "node_size": 10, "label": "oyster farmers"}, "harmful algal bloom": {"concepts": "harmful algal bloom", "type": "concept", "cluster": "Harmful Algal Blooms", "node_size": 10, "label": "harmful algal bloom"}, "biotoxin": {"concepts": "biotoxin", "type": "concept", "cluster": "Harmful Algal Blooms", "node_size": 10, "label": "biotoxin"}, "harmful organisms": {"concepts": "harmful organisms", "type": "concept", "cluster": "Harmful Algal Blooms", "node_size": 10, "label": "harmful organisms"}, "habitat": {"concepts": "habitat", "type": "concept", "cluster": "**Biodiversity & Habitat**", "node_size": 10, "label": "habitat"}, "southern residents": {"concepts": "southern residents", "type": "concept", "cluster": "**Biodiversity & Habitat**", "node_size": 10, "label": "southern residents"}, "increased diversity": {"concepts": "increased diversity", "type": "concept", "cluster": "**Biodiversity & Habitat**", "node_size": 10, "label": "increased diversity"}, "biodiversity": {"concepts": "biodiversity", "type": "concept", "cluster": "**Biodiversity & Habitat**", "node_size": 10, "label": "biodiversity"}, "key species": {"concepts": "key species", "type": "concept", "cluster": "**Biodiversity & Habitat**", "node_size": 10, "label": "key species"}, "genetic diversity": {"concepts": "genetic diversity", "type": "concept", "cluster": "**Biodiversity & Habitat**", "node_size": 10, "label": "genetic diversity"}, "marine biodiversity": {"concepts": "marine biodiversity", "type": "concept", "cluster": "**Biodiversity & Habitat**", "node_size": 10, "label": "marine biodiversity"}, "enclosed ecosystem": {"concepts": "enclosed ecosystem", "type": "concept", "cluster": "**Biodiversity & Habitat**", "node_size": 10, "label": "enclosed ecosystem"}, "species functions": {"concepts": "species functions", "type": "concept", "cluster": "**Biodiversity & Habitat**", "node_size": 10, "label": "species functions"}, "biodiversity components": {"concepts": "biodiversity components", "type": "concept", "cluster": "**Biodiversity & Habitat**", "node_size": 10, "label": "biodiversity components"}, "ecosystem services": {"concepts": "ecosystem services", "type": "concept", "cluster": "Ecosystem Services & ESA", "node_size": 10, "label": "ecosystem services"}, "esa listed species": {"concepts": "esa listed species", "type": "concept", "cluster": "Ecosystem Services & ESA", "node_size": 10, "label": "esa listed species"}, "ecosystem service": {"concepts": "ecosystem service", "type": "concept", "cluster": "Ecosystem Services & ESA", "node_size": 10, "label": "ecosystem service"}, "ocean acidification": {"concepts": "ocean acidification", "type": "concept", "cluster": "Ecosystem Services & ESA", "node_size": 10, "label": "ocean acidification"}, "ecosystem service evaluations": {"concepts": "ecosystem service evaluations", "type": "concept", "cluster": "Ecosystem Services & ESA", "node_size": 10, "label": "ecosystem service evaluations"}, "biodiversity degradation": {"concepts": "biodiversity degradation", "type": "concept", "cluster": "Waterfront Degradation", "node_size": 10, "label": "biodiversity degradation"}, "conservation concern": {"concepts": "conservation concern", "type": "concept", "cluster": "Waterfront Degradation", "node_size": 10, "label": "conservation concern"}, "septic systems": {"concepts": "septic systems", "type": "concept", "cluster": "Waterfront Degradation", "node_size": 10, "label": "septic systems"}, "land use change": {"concepts": "land use change", "type": "concept", "cluster": "Waterfront Degradation", "node_size": 10, "label": "land use change"}, "waterfront homeowners": {"concepts": "waterfront homeowners", "type": "concept", "cluster": "Waterfront Degradation", "node_size": 10, "label": "waterfront homeowners"}, "degradation biodiversity": {"concepts": "degradation biodiversity", "type": "concept", "cluster": "Waterfront Degradation", "node_size": 10, "label": "degradation biodiversity"}, "ecosystem component": {"concepts": "ecosystem component", "type": "concept", "cluster": "Waterfront Degradation", "node_size": 10, "label": "ecosystem component"}, "catch rates": {"concepts": "catch rates", "type": "concept", "cluster": "Salmon Catch Rates", "node_size": 10, "label": "catch rates"}, "salmon": {"concepts": "salmon", "type": "concept", "cluster": "Salmon Catch Rates", "node_size": 10, "label": "salmon"}, "salmon species": {"concepts": "salmon species", "type": "concept", "cluster": "Wild Salmon", "node_size": 10, "label": "salmon species"}, "wild fish": {"concepts": "wild fish", "type": "concept", "cluster": "Wild Salmon", "node_size": 10, "label": "wild fish"}, "key food web": {"concepts": "key food web", "type": "concept", "cluster": "Food Web Dynamics", "node_size": 10, "label": "key food web"}, "food web": {"concepts": "food web", "type": "concept", "cluster": "Food Web Dynamics", "node_size": 10, "label": "food web"}, "prey source": {"concepts": "prey source", "type": "concept", "cluster": "Food Web Dynamics", "node_size": 10, "label": "prey source"}, "food webs": {"concepts": "food webs", "type": "concept", "cluster": "Food Web Dynamics", "node_size": 10, "label": "food webs"}, "food web services": {"concepts": "food web services", "type": "concept", "cluster": "Food Web Dynamics", "node_size": 10, "label": "food web services"}, "prey availability": {"concepts": "prey availability", "type": "concept", "cluster": "Food Web Dynamics", "node_size": 10, "label": "prey availability"}};
        const interClusterEdges = [["science panel", "Marine Resource Stakeholders", {"weight": 0.6, "confidence": 0.22000000000000003, "type": "inter_cluster", "style": "solid"}], ["science panel", "Steelhead Fishing", {"weight": 0.5, "confidence": 0.125, "type": "inter_cluster", "style": "solid"}], ["science panel", "Wild Salmon", {"weight": 0.5, "confidence": 0.1, "type": "inter_cluster", "style": "solid"}], ["predator abundance", "Waterfront Degradation", {"weight": -1.0, "confidence": 0.3666666666666667, "type": "inter_cluster", "style": "solid"}], ["predator abundance", "Ecosystem Services & ESA", {"weight": 1.0, "confidence": 0.2333333333333333, "type": "inter_cluster", "style": "solid"}], ["predator abundance", "Marine Resource Management", {"weight": 0.5, "confidence": 0.1, "type": "inter_cluster", "style": "solid"}], ["Puget Sound Impacts", "Social-Ecological Modeling", {"weight": 1.0, "confidence": 0.54, "type": "inter_cluster", "style": "solid"}], ["Puget Sound Impacts", "Steelhead Fishing", {"weight": 1.0, "confidence": 0.39999999999999997, "type": "inter_cluster", "style": "solid"}], ["Tribal Perspectives", "Food Web Dynamics", {"weight": -0.6, "confidence": 0.41000000000000003, "type": "inter_cluster", "style": "solid"}], ["Tribal Perspectives", "Social-Ecological Modeling", {"weight": 1.0, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Collaborative Modeling", "Shellfish Harvesting", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["Social-Ecological Modeling", "Ecosystem Services & ESA", {"weight": 1.0, "confidence": 0.525, "type": "inter_cluster", "style": "solid"}], ["Social-Ecological Modeling", "Harmful Algal Blooms", {"weight": -1.0, "confidence": 0.26, "type": "inter_cluster", "style": "solid"}], ["Social-Ecological Modeling", "Wild Salmon", {"weight": 1.0, "confidence": 0.275, "type": "inter_cluster", "style": "solid"}], ["Social-Ecological Modeling", "Collaborative Modeling", {"weight": 1.0, "confidence": 0.35, "type": "inter_cluster", "style": "solid"}], ["Social-Ecological Modeling", "predator abundance", {"weight": 0.75, "confidence": 0.15000000000000002, "type": "inter_cluster", "style": "solid"}], ["Pollution & Contamination", "Food Web Dynamics", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["Pollution & Contamination", "Marine Resource Stakeholders", {"weight": -1.0, "confidence": 0.51, "type": "inter_cluster", "style": "solid"}], ["Pollution & Contamination", "Shellfish Harvesting", {"weight": -1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["River Runoff Pollution", "Waterfront Degradation", {"weight": 0.6, "confidence": 0.6799999999999999, "type": "inter_cluster", "style": "solid"}], ["River Runoff Pollution", "Food Web Dynamics", {"weight": -1.0, "confidence": 0.5666666666666667, "type": "inter_cluster", "style": "solid"}], ["River Runoff Pollution", "**Biodiversity & Habitat**", {"weight": -1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["River Runoff Pollution", "Tribal Perspectives", {"weight": -1.0, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Marine Resource Management", "Tribal Perspectives", {"weight": 0.5, "confidence": 0.1, "type": "inter_cluster", "style": "solid"}], ["Marine Resource Stakeholders", "Puget Sound Impacts", {"weight": 1.0, "confidence": 0.62, "type": "inter_cluster", "style": "solid"}], ["Marine Resource Stakeholders", "**Biodiversity & Habitat**", {"weight": 1.0, "confidence": 0.42500000000000004, "type": "inter_cluster", "style": "solid"}], ["Marine Resource Stakeholders", "Waterfront Degradation", {"weight": -1.0, "confidence": 0.25, "type": "inter_cluster", "style": "solid"}], ["Steelhead Fishing", "Puget Sound Impacts", {"weight": 1.0, "confidence": 0.54, "type": "inter_cluster", "style": "solid"}], ["Steelhead Fishing", "Wild Salmon", {"weight": 1.0, "confidence": 0.3333333333333333, "type": "inter_cluster", "style": "solid"}], ["Steelhead Fishing", "Social-Ecological Modeling", {"weight": 1.0, "confidence": 0.4, "type": "inter_cluster", "style": "solid"}], ["Steelhead Fishing", "Tribal Perspectives", {"weight": -1.0, "confidence": 0.2, "type": "inter_cluster", "style": "solid"}], ["Shellfish Harvesting", "Harmful Algal Blooms", {"weight": -0.6, "confidence": 0.6199999999999999, "type": "inter_cluster", "style": "solid"}], ["Harmful Algal Blooms", "Waterfront Degradation", {"weight": 0.6, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["Harmful Algal Blooms", "River Runoff Pollution", {"weight": 1.0, "confidence": 0.39999999999999997, "type": "inter_cluster", "style": "solid"}], ["Harmful Algal Blooms", "Collaborative Modeling", {"weight": -1.0, "confidence": 0.35, "type": "inter_cluster", "style": "solid"}], ["**Biodiversity & Habitat**", "Marine Resource Stakeholders", {"weight": 1.0, "confidence": 0.5, "type": "inter_cluster", "style": "solid"}], ["**Biodiversity & Habitat**", "Collaborative Modeling", {"weight": 1.0, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["**Biodiversity & Habitat**", "Social-Ecological Modeling", {"weight": 1.0, "confidence": 0.35, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Services & ESA", "Shellfish Harvesting", {"weight": 1.0, "confidence": 0.42500000000000004, "type": "inter_cluster", "style": "solid"}], ["Waterfront Degradation", "River Runoff Pollution", {"weight": 0.5, "confidence": 0.4, "type": "inter_cluster", "style": "solid"}], ["Waterfront Degradation", "Marine Resource Stakeholders", {"weight": -1.0, "confidence": 0.4, "type": "inter_cluster", "style": "solid"}], ["Salmon Catch Rates", "Ecosystem Services & ESA", {"weight": 1.0, "confidence": 0.425, "type": "inter_cluster", "style": "solid"}], ["Salmon Catch Rates", "**Biodiversity & Habitat**", {"weight": 1.0, "confidence": 0.43333333333333335, "type": "inter_cluster", "style": "solid"}], ["Wild Salmon", "Marine Resource Stakeholders", {"weight": 1.0, "confidence": 0.5599999999999999, "type": "inter_cluster", "style": "solid"}], ["Wild Salmon", "Collaborative Modeling", {"weight": 1.0, "confidence": 0.43333333333333335, "type": "inter_cluster", "style": "solid"}], ["Wild Salmon", "Tribal Perspectives", {"weight": -0.25, "confidence": 0.22499999999999998, "type": "inter_cluster", "style": "solid"}], ["Wild Salmon", "predator abundance", {"weight": 1.0, "confidence": 0.4, "type": "inter_cluster", "style": "solid"}], ["Food Web Dynamics", "Marine Resource Stakeholders", {"weight": 1.0, "confidence": 0.5, "type": "inter_cluster", "style": "solid"}], ["Food Web Dynamics", "Collaborative Modeling", {"weight": 1.0, "confidence": 0.35, "type": "inter_cluster", "style": "solid"}], ["Food Web Dynamics", "Tribal Perspectives", {"weight": -0.3333333333333333, "confidence": 0.30000000000000004, "type": "inter_cluster", "style": "solid"}]];
        const clusterConcepts = {"Puget Sound Impacts": [["management scenarios", {"concepts": "management scenarios", "type": "concept", "cluster": "Puget Sound Impacts", "node_size": 10, "label": "management scenarios"}], ["management interventions", {"concepts": "management interventions", "type": "concept", "cluster": "Puget Sound Impacts", "node_size": 10, "label": "management interventions"}], ["managing", {"concepts": "managing", "type": "concept", "cluster": "Puget Sound Impacts", "node_size": 10, "label": "managing"}], ["management approaches", {"concepts": "management approaches", "type": "concept", "cluster": "Puget Sound Impacts", "node_size": 10, "label": "management approaches"}], ["management dynamics", {"concepts": "management dynamics", "type": "concept", "cluster": "Puget Sound Impacts", "node_size": 10, "label": "management dynamics"}], ["co-management", {"concepts": "co-management", "type": "concept", "cluster": "Puget Sound Impacts", "node_size": 10, "label": "co-management"}], ["levers", {"concepts": "levers", "type": "concept", "cluster": "Puget Sound Impacts", "node_size": 10, "label": "levers"}], ["decision support", {"concepts": "decision support", "type": "concept", "cluster": "Puget Sound Impacts", "node_size": 10, "label": "decision support"}], ["trade-offs", {"concepts": "trade-offs", "type": "concept", "cluster": "Puget Sound Impacts", "node_size": 10, "label": "trade-offs"}], ["management decisions", {"concepts": "management decisions", "type": "concept", "cluster": "Puget Sound Impacts", "node_size": 10, "label": "management decisions"}]], "Tribal Perspectives": [["puget sound", {"concepts": "puget sound", "type": "concept", "cluster": "Tribal Perspectives", "node_size": 10, "label": "puget sound"}], ["beach closures", {"concepts": "beach closures", "type": "concept", "cluster": "Tribal Perspectives", "node_size": 10, "label": "beach closures"}], ["chinook", {"concepts": "chinook", "type": "concept", "cluster": "Tribal Perspectives", "node_size": 10, "label": "chinook"}], ["climate stressors", {"concepts": "climate stressors", "type": "concept", "cluster": "Tribal Perspectives", "node_size": 10, "label": "climate stressors"}], ["closure scenarios", {"concepts": "closure scenarios", "type": "concept", "cluster": "Tribal Perspectives", "node_size": 10, "label": "closure scenarios"}], ["health effects", {"concepts": "health effects", "type": "concept", "cluster": "Tribal Perspectives", "node_size": 10, "label": "health effects"}]], "Collaborative Modeling": [["tribes", {"concepts": "tribes", "type": "concept", "cluster": "Collaborative Modeling", "node_size": 10, "label": "tribes"}], ["tribal dynamics", {"concepts": "tribal dynamics", "type": "concept", "cluster": "Collaborative Modeling", "node_size": 10, "label": "tribal dynamics"}], ["tribal resource managers", {"concepts": "tribal resource managers", "type": "concept", "cluster": "Collaborative Modeling", "node_size": 10, "label": "tribal resource managers"}], ["tribal harvesters", {"concepts": "tribal harvesters", "type": "concept", "cluster": "Collaborative Modeling", "node_size": 10, "label": "tribal harvesters"}], ["tribal values", {"concepts": "tribal values", "type": "concept", "cluster": "Collaborative Modeling", "node_size": 10, "label": "tribal values"}], ["treaty rights", {"concepts": "treaty rights", "type": "concept", "cluster": "Collaborative Modeling", "node_size": 10, "label": "treaty rights"}]], "Social-Ecological Modeling": [["collaborative discussion", {"concepts": "collaborative discussion", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "collaborative discussion"}], ["economic values", {"concepts": "economic values", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "economic values"}], ["preservation", {"concepts": "preservation", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "preservation"}], ["intermediate characteristics", {"concepts": "intermediate characteristics", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "intermediate characteristics"}], ["social science advisory committee", {"concepts": "social science advisory committee", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "social science advisory committee"}], ["framework", {"concepts": "framework", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "framework"}], ["trip", {"concepts": "trip", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "trip"}], ["intermediate components", {"concepts": "intermediate components", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "intermediate components"}], ["data improvement", {"concepts": "data improvement", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "data improvement"}], ["sociological system", {"concepts": "sociological system", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "sociological system"}], ["conceptual model", {"concepts": "conceptual model", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "conceptual model"}], ["system dynamics", {"concepts": "system dynamics", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "system dynamics"}], ["survey", {"concepts": "survey", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "survey"}], ["stressors", {"concepts": "stressors", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "stressors"}], ["regulating services", {"concepts": "regulating services", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "regulating services"}], ["ecotourism operators", {"concepts": "ecotourism operators", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "ecotourism operators"}], ["community members", {"concepts": "community members", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "community members"}], ["supporting functions", {"concepts": "supporting functions", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "supporting functions"}], ["science panel meeting", {"concepts": "science panel meeting", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "science panel meeting"}], ["value of trip", {"concepts": "value of trip", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "value of trip"}], ["conceptual modeling", {"concepts": "conceptual modeling", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "conceptual modeling"}], ["non-market values", {"concepts": "non-market values", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "non-market values"}], ["spaghetti model", {"concepts": "spaghetti model", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "spaghetti model"}], ["social science", {"concepts": "social science", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "social science"}], ["oral interviews", {"concepts": "oral interviews", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "oral interviews"}], ["resource managers", {"concepts": "resource managers", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "resource managers"}], ["resilience", {"concepts": "resilience", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "resilience"}], ["conservation", {"concepts": "conservation", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "conservation"}], ["state agencies", {"concepts": "state agencies", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "state agencies"}], ["social science group", {"concepts": "social science group", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "social science group"}], ["case study approach", {"concepts": "case study approach", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "case study approach"}], ["survey design", {"concepts": "survey design", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "survey design"}], ["anglers", {"concepts": "anglers", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "anglers"}], ["experimental design", {"concepts": "experimental design", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "experimental design"}], ["choice experiment", {"concepts": "choice experiment", "type": "concept", "cluster": "Social-Ecological Modeling", "node_size": 10, "label": "choice experiment"}]], "Pollution & Contamination": [["contamination", {"concepts": "contamination", "type": "concept", "cluster": "Pollution & Contamination", "node_size": 10, "label": "contamination"}], ["pollution events", {"concepts": "pollution events", "type": "concept", "cluster": "Pollution & Contamination", "node_size": 10, "label": "pollution events"}], ["pollution", {"concepts": "pollution", "type": "concept", "cluster": "Pollution & Contamination", "node_size": 10, "label": "pollution"}]], "River Runoff Pollution": [["runoff issues", {"concepts": "runoff issues", "type": "concept", "cluster": "River Runoff Pollution", "node_size": 10, "label": "runoff issues"}], ["river", {"concepts": "river", "type": "concept", "cluster": "River Runoff Pollution", "node_size": 10, "label": "river"}], ["non-point pollution", {"concepts": "non-point pollution", "type": "concept", "cluster": "River Runoff Pollution", "node_size": 10, "label": "non-point pollution"}]], "Marine Resource Management": [["hatchery management", {"concepts": "hatchery management", "type": "concept", "cluster": "Marine Resource Management", "node_size": 10, "label": "hatchery management"}], ["fishery disaster", {"concepts": "fishery disaster", "type": "concept", "cluster": "Marine Resource Management", "node_size": 10, "label": "fishery disaster"}], ["us marine resource management", {"concepts": "us marine resource management", "type": "concept", "cluster": "Marine Resource Management", "node_size": 10, "label": "us marine resource management"}]], "Marine Resource Stakeholders": [["marine resource users", {"concepts": "marine resource users", "type": "concept", "cluster": "Marine Resource Stakeholders", "node_size": 10, "label": "marine resource users"}], ["fishermen", {"concepts": "fishermen", "type": "concept", "cluster": "Marine Resource Stakeholders", "node_size": 10, "label": "fishermen"}], ["recreational anglers", {"concepts": "recreational anglers", "type": "concept", "cluster": "Marine Resource Stakeholders", "node_size": 10, "label": "recreational anglers"}], ["recreational fishers", {"concepts": "recreational fishers", "type": "concept", "cluster": "Marine Resource Stakeholders", "node_size": 10, "label": "recreational fishers"}], ["marine resource managers", {"concepts": "marine resource managers", "type": "concept", "cluster": "Marine Resource Stakeholders", "node_size": 10, "label": "marine resource managers"}]], "Steelhead Fishing": [["steelhead survey", {"concepts": "steelhead survey", "type": "concept", "cluster": "Steelhead Fishing", "node_size": 10, "label": "steelhead survey"}], ["steelhead fishing", {"concepts": "steelhead fishing", "type": "concept", "cluster": "Steelhead Fishing", "node_size": 10, "label": "steelhead fishing"}], ["steelhead harvest", {"concepts": "steelhead harvest", "type": "concept", "cluster": "Steelhead Fishing", "node_size": 10, "label": "steelhead harvest"}], ["recreational fishing", {"concepts": "recreational fishing", "type": "concept", "cluster": "Steelhead Fishing", "node_size": 10, "label": "recreational fishing"}]], "Shellfish Harvesting": [["shellfish harvesting", {"concepts": "shellfish harvesting", "type": "concept", "cluster": "Shellfish Harvesting", "node_size": 10, "label": "shellfish harvesting"}], ["recreational harvest", {"concepts": "recreational harvest", "type": "concept", "cluster": "Shellfish Harvesting", "node_size": 10, "label": "recreational harvest"}], ["commercial harvesting", {"concepts": "commercial harvesting", "type": "concept", "cluster": "Shellfish Harvesting", "node_size": 10, "label": "commercial harvesting"}], ["recreational harvesting", {"concepts": "recreational harvesting", "type": "concept", "cluster": "Shellfish Harvesting", "node_size": 10, "label": "recreational harvesting"}], ["shellfish harvest", {"concepts": "shellfish harvest", "type": "concept", "cluster": "Shellfish Harvesting", "node_size": 10, "label": "shellfish harvest"}], ["shellfish", {"concepts": "shellfish", "type": "concept", "cluster": "Shellfish Harvesting", "node_size": 10, "label": "shellfish"}], ["oyster farmers", {"concepts": "oyster farmers", "type": "concept", "cluster": "Shellfish Harvesting", "node_size": 10, "label": "oyster farmers"}]], "Harmful Algal Blooms": [["harmful algal bloom", {"concepts": "harmful algal bloom", "type": "concept", "cluster": "Harmful Algal Blooms", "node_size": 10, "label": "harmful algal bloom"}], ["biotoxin", {"concepts": "biotoxin", "type": "concept", "cluster": "Harmful Algal Blooms", "node_size": 10, "label": "biotoxin"}], ["harmful organisms", {"concepts": "harmful organisms", "type": "concept", "cluster": "Harmful Algal Blooms", "node_size": 10, "label": "harmful organisms"}]], "**Biodiversity & Habitat**": [["habitat", {"concepts": "habitat", "type": "concept", "cluster": "**Biodiversity & Habitat**", "node_size": 10, "label": "habitat"}], ["southern residents", {"concepts": "southern residents", "type": "concept", "cluster": "**Biodiversity & Habitat**", "node_size": 10, "label": "southern residents"}], ["increased diversity", {"concepts": "increased diversity", "type": "concept", "cluster": "**Biodiversity & Habitat**", "node_size": 10, "label": "increased diversity"}], ["biodiversity", {"concepts": "biodiversity", "type": "concept", "cluster": "**Biodiversity & Habitat**", "node_size": 10, "label": "biodiversity"}], ["key species", {"concepts": "key species", "type": "concept", "cluster": "**Biodiversity & Habitat**", "node_size": 10, "label": "key species"}], ["genetic diversity", {"concepts": "genetic diversity", "type": "concept", "cluster": "**Biodiversity & Habitat**", "node_size": 10, "label": "genetic diversity"}], ["marine biodiversity", {"concepts": "marine biodiversity", "type": "concept", "cluster": "**Biodiversity & Habitat**", "node_size": 10, "label": "marine biodiversity"}], ["enclosed ecosystem", {"concepts": "enclosed ecosystem", "type": "concept", "cluster": "**Biodiversity & Habitat**", "node_size": 10, "label": "enclosed ecosystem"}], ["species functions", {"concepts": "species functions", "type": "concept", "cluster": "**Biodiversity & Habitat**", "node_size": 10, "label": "species functions"}], ["biodiversity components", {"concepts": "biodiversity components", "type": "concept", "cluster": "**Biodiversity & Habitat**", "node_size": 10, "label": "biodiversity components"}]], "Ecosystem Services & ESA": [["ecosystem services", {"concepts": "ecosystem services", "type": "concept", "cluster": "Ecosystem Services & ESA", "node_size": 10, "label": "ecosystem services"}], ["esa listed species", {"concepts": "esa listed species", "type": "concept", "cluster": "Ecosystem Services & ESA", "node_size": 10, "label": "esa listed species"}], ["ecosystem service", {"concepts": "ecosystem service", "type": "concept", "cluster": "Ecosystem Services & ESA", "node_size": 10, "label": "ecosystem service"}], ["ocean acidification", {"concepts": "ocean acidification", "type": "concept", "cluster": "Ecosystem Services & ESA", "node_size": 10, "label": "ocean acidification"}], ["ecosystem service evaluations", {"concepts": "ecosystem service evaluations", "type": "concept", "cluster": "Ecosystem Services & ESA", "node_size": 10, "label": "ecosystem service evaluations"}]], "Waterfront Degradation": [["biodiversity degradation", {"concepts": "biodiversity degradation", "type": "concept", "cluster": "Waterfront Degradation", "node_size": 10, "label": "biodiversity degradation"}], ["conservation concern", {"concepts": "conservation concern", "type": "concept", "cluster": "Waterfront Degradation", "node_size": 10, "label": "conservation concern"}], ["septic systems", {"concepts": "septic systems", "type": "concept", "cluster": "Waterfront Degradation", "node_size": 10, "label": "septic systems"}], ["land use change", {"concepts": "land use change", "type": "concept", "cluster": "Waterfront Degradation", "node_size": 10, "label": "land use change"}], ["waterfront homeowners", {"concepts": "waterfront homeowners", "type": "concept", "cluster": "Waterfront Degradation", "node_size": 10, "label": "waterfront homeowners"}], ["degradation biodiversity", {"concepts": "degradation biodiversity", "type": "concept", "cluster": "Waterfront Degradation", "node_size": 10, "label": "degradation biodiversity"}], ["ecosystem component", {"concepts": "ecosystem component", "type": "concept", "cluster": "Waterfront Degradation", "node_size": 10, "label": "ecosystem component"}]], "Salmon Catch Rates": [["catch rates", {"concepts": "catch rates", "type": "concept", "cluster": "Salmon Catch Rates", "node_size": 10, "label": "catch rates"}], ["salmon", {"concepts": "salmon", "type": "concept", "cluster": "Salmon Catch Rates", "node_size": 10, "label": "salmon"}]], "Wild Salmon": [["salmon species", {"concepts": "salmon species", "type": "concept", "cluster": "Wild Salmon", "node_size": 10, "label": "salmon species"}], ["wild fish", {"concepts": "wild fish", "type": "concept", "cluster": "Wild Salmon", "node_size": 10, "label": "wild fish"}]], "Food Web Dynamics": [["key food web", {"concepts": "key food web", "type": "concept", "cluster": "Food Web Dynamics", "node_size": 10, "label": "key food web"}], ["food web", {"concepts": "food web", "type": "concept", "cluster": "Food Web Dynamics", "node_size": 10, "label": "food web"}], ["prey source", {"concepts": "prey source", "type": "concept", "cluster": "Food Web Dynamics", "node_size": 10, "label": "prey source"}], ["food webs", {"concepts": "food webs", "type": "concept", "cluster": "Food Web Dynamics", "node_size": 10, "label": "food webs"}], ["food web services", {"concepts": "food web services", "type": "concept", "cluster": "Food Web Dynamics", "node_size": 10, "label": "food web services"}], ["prey availability", {"concepts": "prey availability", "type": "concept", "cluster": "Food Web Dynamics", "node_size": 10, "label": "prey availability"}]]};
        const clusterEdges = {"Puget Sound Impacts": [], "Tribal Perspectives": [], "Collaborative Modeling": [], "Social-Ecological Modeling": [], "Pollution & Contamination": [], "River Runoff Pollution": [], "Marine Resource Management": [], "Marine Resource Stakeholders": [], "Steelhead Fishing": [], "Shellfish Harvesting": [], "Harmful Algal Blooms": [], "**Biodiversity & Habitat**": [], "Ecosystem Services & ESA": [], "Waterfront Degradation": [], "Salmon Catch Rates": [], "Wild Salmon": [], "Food Web Dynamics": []};
        
        let network;
        let currentView = 'clusters';
        let currentCluster = null;
        let minConfidence = 0.3;
        
        // Network options
        const options = {
            nodes: {
                font: { color: 'white', size: 14 },
                borderWidth: 2,
                shadow: true
            },
            edges: {
                arrows: { to: { enabled: true, scaleFactor: 1.2 } },
                shadow: true,
                smooth: { type: 'continuous' }
            },
            physics: {
                stabilization: { iterations: 100 },
                barnesHut: {
                    gravitationalConstant: -8000,
                    springConstant: 0.001,
                    springLength: 200
                }
            },
            interaction: {
                hover: true,
                selectConnectedEdges: false
            }
        };
        
        function initNetwork() {
            const container = document.getElementById('network');
            const data = getClusterViewData();
            network = new vis.Network(container, data, options);
            
            // Handle cluster clicks for drill-down
            network.on("click", function(params) {
                if (params.nodes.length > 0 && currentView === 'clusters') {
                    const clickedNode = params.nodes[0];
                    if (clusterConcepts[clickedNode]) {
                        showClusterDetail(clickedNode);
                    }
                }
            });
        }
        
        function getClusterViewData() {
            const nodes = [];
            const edges = [];
            
            // Add cluster nodes
            Object.entries(clusterData).forEach(([clusterId, data]) => {
                const concepts = data.concepts || [];
                const conceptsStr = Array.isArray(concepts) ? concepts.join(', ') : concepts;
                
                nodes.push({
                    id: clusterId,
                    label: clusterId,
                    title: `Cluster: ${clusterId}\nConcepts: ${conceptsStr}\nClick to explore internal relationships`,
                    color: '#4A90E2',
                    size: 25 + (conceptsStr.split(',').length * 2),
                    font: { color: 'white' }
                });
            });
            
            // Add inter-cluster edges
            interClusterEdges.forEach(([source, target, edgeData]) => {
                const confidence = edgeData.confidence || 1.0;
                const weight = edgeData.weight || 0;
                
                if (confidence >= minConfidence) {
                    edges.push({
                        from: source,
                        to: target,
                        color: weight > 0 ? '#28A745' : '#DC3545',
                        width: Math.abs(weight) * 3 + 1,
                        title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                        dashes: false
                    });
                }
            });
            
            return { nodes: nodes, edges: edges };
        }
        
        function getClusterDetailData(clusterId) {
            const nodes = [];
            const edges = [];
            
            // Add concept nodes for this cluster
            if (clusterConcepts[clusterId]) {
                clusterConcepts[clusterId].forEach(([conceptId, data]) => {
                    nodes.push({
                        id: conceptId,
                        label: conceptId,
                        title: `Concept: ${conceptId}\nFrom cluster: ${clusterId}`,
                        color: '#FF9500',
                        size: 20,
                        font: { color: 'white' }
                    });
                });
            }
            
            // Add intra-cluster edges
            if (clusterEdges[clusterId]) {
                clusterEdges[clusterId].forEach(([source, target, edgeData]) => {
                    const confidence = edgeData.confidence || 1.0;
                    const weight = edgeData.weight || 0;
                    
                    if (confidence >= minConfidence) {
                        edges.push({
                            from: source,
                            to: target,
                            color: weight > 0 ? '#28A745' : '#DC3545',
                            width: Math.abs(weight) * 3 + 1,
                            title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                            dashes: true
                        });
                    }
                });
            }
            
            return { nodes: nodes, edges: edges };
        }
        
        function showClusterView() {
            currentView = 'clusters';
            currentCluster = null;
            const data = getClusterViewData();
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'none';
            document.getElementById('current-view').textContent = 'Cluster Overview';
        }
        
        function showClusterDetail(clusterId) {
            currentView = 'concepts';
            currentCluster = clusterId;
            const data = getClusterDetailData(clusterId);
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'inline-block';
            document.getElementById('current-view').textContent = `Inside Cluster: ${clusterId}`;
        }
        
        function updateConfidenceFilter(value) {
            minConfidence = parseFloat(value);
            document.getElementById('confidence-value').textContent = value;
            
            // Refresh current view
            if (currentView === 'clusters') {
                showClusterView();
            } else {
                showClusterDetail(currentCluster);
            }
        }
        
        // Initialize the network when page loads
        window.onload = function() {
            initNetwork();
        };
    </script>
</body>
</html>
