
<!DOCTYPE html>
<html>
<head>
    <title>Hierarchical FCM Visualization</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 0; 
            padding: 20px;
            background: #f5f5f5;
        }
        
        #network { 
            width: 100%; 
            height: 600px; 
            border: 2px solid #ccc; 
            background: white;
            border-radius: 8px;
        }
        
        #controls {
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn {
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        
        .btn-primary { background: #4A90E2; color: white; }
        .btn-primary:hover { background: #357ABD; }
        
        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #545b62; }
        
        #current-view {
            font-weight: bold;
            color: #333;
            margin-left: 10px;
        }
        
        #legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-size: 12px;
            max-width: 200px;
        }
        
        .legend-item {
            margin: 5px 0;
            display: flex;
            align-items: center;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .legend-line {
            width: 20px;
            height: 2px;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <h1>Fuzzy Cognitive Map - Hierarchical View</h1>
    
    <div id="controls">
        <button class="btn btn-secondary" id="back-btn" onclick="showClusterView()" style="display: none;">
            ‚Üê Back to Clusters
        </button>
        <span id="current-view">Cluster Overview</span>
        <div style="float: right;">
            <label>Min Confidence: </label>
            <input type="range" id="confidence-slider" min="0" max="1" step="0.1" value="0.3" 
                   onchange="updateConfidenceFilter(this.value)">
            <span id="confidence-value">0.3</span>
        </div>
    </div>
    
    <div id="network"></div>
    
    <div id="legend">
        <h4>Legend</h4>
        <div class="legend-item">
            <div class="legend-color" style="background: #4A90E2;"></div>
            <span>Clusters</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #FF9500;"></div>
            <span>Concepts</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #28A745;"></div>
            <span>Positive relationship</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #DC3545;"></div>
            <span>Negative relationship</span>
        </div>
        <div style="margin-top: 10px; font-style: italic; color: #666;">
            Click clusters to explore internal concepts
        </div>
    </div>

    <script>
        // Embedded data
        const clusterData = {"mitigation banks": {"concepts": "mitigation banks", "concept_list": ["mitigation banks"], "type": "cluster", "node_size": 18, "label": "mitigation banks"}, "poster child species": {"concepts": "poster child species, sackett, alvin, surveyor, dali, rorschach test, picasso paintings, ai platform, visualization, relationship weights", "concept_list": ["poster child species", "sackett", "alvin", "surveyor", "dali", "rorschach test", "picasso paintings", "ai platform", "visualization", "relationship weights"], "type": "cluster", "node_size": 45, "label": "poster child species"}, "riparian bank": {"concepts": "riparian bank", "concept_list": ["riparian bank"], "type": "cluster", "node_size": 18, "label": "riparian bank"}, "Ecosystem Conservation": {"concepts": "public engagement, audubon society, nonprofit groups, waterkeeper alliance", "concept_list": ["public engagement", "audubon society", "nonprofit groups", "waterkeeper alliance"], "type": "cluster", "node_size": 27, "label": "Ecosystem Conservation"}, "Water Quality Regulations": {"concepts": "ecosystem health, ecosystem diversity, us fish and wildlife service", "concept_list": ["ecosystem health", "ecosystem diversity", "us fish and wildlife service"], "type": "cluster", "node_size": 24, "label": "Water Quality Regulations"}, "Wetland Protection": {"concepts": "clean water act, water quality enforcement, water quality, water quality thresholds", "concept_list": ["clean water act", "water quality enforcement", "water quality", "water quality thresholds"], "type": "cluster", "node_size": 27, "label": "Wetland Protection"}, "Water Monitoring & Treatment": {"concepts": "wetland protection, wetlands, tributary waters", "concept_list": ["wetland protection", "wetlands", "tributary waters"], "type": "cluster", "node_size": 24, "label": "Water Monitoring & Treatment"}, "Community Partnerships": {"concepts": "water quality monitoring, wastewater treatment, effluent, water quality thresholds decrease", "concept_list": ["water quality monitoring", "wastewater treatment", "effluent", "water quality thresholds decrease"], "type": "cluster", "node_size": 27, "label": "Community Partnerships"}, "Water Improvement": {"concepts": "water improvement plans, water quality improvement", "concept_list": ["water improvement plans", "water quality improvement"], "type": "cluster", "node_size": 21, "label": "Water Improvement"}, "Species Conservation": {"concepts": "protected species, protected species habitat, species protection", "concept_list": ["protected species", "protected species habitat", "species protection"], "type": "cluster", "node_size": 24, "label": "Species Conservation"}, "Habitat Access": {"concepts": "access to habitats, habitat access, habitat use, species habitat support", "concept_list": ["access to habitats", "habitat access", "habitat use", "species habitat support"], "type": "cluster", "node_size": 27, "label": "Habitat Access"}, "Habitat Development": {"concepts": "wildlife propagation, habitat production, habitat forming species", "concept_list": ["wildlife propagation", "habitat production", "habitat forming species"], "type": "cluster", "node_size": 24, "label": "Habitat Development"}, "Water Quality": {"concepts": "habitat functionality, species habitat gap, habitat protection, habitat fragmentation, agricultural uses, urban wildlife interactions, native vegetation", "concept_list": ["habitat functionality", "species habitat gap", "habitat protection", "habitat fragmentation", "agricultural uses", "urban wildlife interactions", "native vegetation"], "type": "cluster", "node_size": 36, "label": "Water Quality"}, "Ecosystem Functions": {"concepts": "ecosystems, ecosystem function, ecosystem functionality", "concept_list": ["ecosystems", "ecosystem function", "ecosystem functionality"], "type": "cluster", "node_size": 24, "label": "Ecosystem Functions"}, "Food Webs": {"concepts": "food web, food webs", "concept_list": ["food web", "food webs"], "type": "cluster", "node_size": 21, "label": "Food Webs"}, "Environmental Regulation Enforcement": {"concepts": "us army corps of engineers, epa enforcement, epa", "concept_list": ["us army corps of engineers", "epa enforcement", "epa"], "type": "cluster", "node_size": 24, "label": "Environmental Regulation Enforcement"}, "Team Development": {"concepts": "staff scientist, universities, workshop, team retreat, mental modeler, improvement plans", "concept_list": ["staff scientist", "universities", "workshop", "team retreat", "mental modeler", "improvement plans"], "type": "cluster", "node_size": 33, "label": "Team Development"}, "Ecosystem Services": {"concepts": "diversity of organisms, filtration services", "concept_list": ["diversity of organisms", "filtration services"], "type": "cluster", "node_size": 21, "label": "Ecosystem Services"}, "Legal and Mitigation": {"concepts": "litigation, court, court involvement, mitigation banks decrease, development credits", "concept_list": ["litigation", "court", "court involvement", "mitigation banks decrease", "development credits"], "type": "cluster", "node_size": 30, "label": "Legal and Mitigation"}, "Regulatory Standards": {"concepts": "state standards, federal standards, state agencies", "concept_list": ["state standards", "federal standards", "state agencies"], "type": "cluster", "node_size": 24, "label": "Regulatory Standards"}, "Enforcement and Jurisdiction": {"concepts": "jurisdictional protection, army corps enforcement, regulatory agencies, regulatory enforcement, federal enforcement, national enforcement, local enforcement, enforcement disconnect, local experts", "concept_list": ["jurisdictional protection", "army corps enforcement", "regulatory agencies", "regulatory enforcement", "federal enforcement", "national enforcement", "local enforcement", "enforcement disconnect", "local experts"], "type": "cluster", "node_size": 42, "label": "Enforcement and Jurisdiction"}, "Biodiversity Metrics": {"concepts": "species counts, public species counts, biodiversity data, species presence, species diversity", "concept_list": ["species counts", "public species counts", "biodiversity data", "species presence", "species diversity"], "type": "cluster", "node_size": 30, "label": "Biodiversity Metrics"}, "Species Impact": {"concepts": "invasive species, sensitive species, harmful organisms", "concept_list": ["invasive species", "sensitive species", "harmful organisms"], "type": "cluster", "node_size": 24, "label": "Species Impact"}, "Ecosystem Dynamics": {"concepts": "biodiversity, species dependency, species migration, keystone species", "concept_list": ["biodiversity", "species dependency", "species migration", "keystone species"], "type": "cluster", "node_size": 27, "label": "Ecosystem Dynamics"}, "Permit Management Policies": {"concepts": "management policies, permits, permit, incentivization, army corps of engineers, industrial uses", "concept_list": ["management policies", "permits", "permit", "incentivization", "army corps of engineers", "industrial uses"], "type": "cluster", "node_size": 33, "label": "Permit Management Policies"}, "Coastal Ecosystem Dynamics": {"concepts": "migration, seasonality, habitats, ecosystem resources, coastal waters, habitat, sediment stabilization, seagrass beds, fish propagation", "concept_list": ["migration", "seasonality", "habitats", "ecosystem resources", "coastal waters", "habitat", "sediment stabilization", "seagrass beds", "fish propagation"], "type": "cluster", "node_size": 42, "label": "Coastal Ecosystem Dynamics"}, "Environmental Conservation": {"concepts": "environmental nonprofit, restoration ecologist, marine resource management, environmental surveys, citizen scientists", "concept_list": ["environmental nonprofit", "restoration ecologist", "marine resource management", "environmental surveys", "citizen scientists"], "type": "cluster", "node_size": 30, "label": "Environmental Conservation"}, "Mobile Bay Biodiversity": {"concepts": "human impacts, species of conservation concern, listed species, food web supporting species, preferred state, fish consumption, marine biodiversity, mobile bay, species, public data, data sharing, mobile bay area, conservation science", "concept_list": ["human impacts", "species of conservation concern", "listed species", "food web supporting species", "preferred state", "fish consumption", "marine biodiversity", "mobile bay", "species", "public data", "data sharing", "mobile bay area", "conservation science"], "type": "cluster", "node_size": 54, "label": "Mobile Bay Biodiversity"}, "Aquatic Habitat Restoration": {"concepts": "submerged aquatic vegetation, seagrass restoration, oyster restoration", "concept_list": ["submerged aquatic vegetation", "seagrass restoration", "oyster restoration"], "type": "cluster", "node_size": 24, "label": "Aquatic Habitat Restoration"}, "Water Management": {"concepts": "watershed, waterways, runoff", "concept_list": ["watershed", "waterways", "runoff"], "type": "cluster", "node_size": 24, "label": "Water Management"}, "Waterway Classification": {"concepts": "waterway designation, recreational waterways, impaired waterways", "concept_list": ["waterway designation", "recreational waterways", "impaired waterways"], "type": "cluster", "node_size": 24, "label": "Waterway Classification"}};
        const conceptData = {"sackett": {"concepts": "sackett", "type": "concept", "cluster": "poster child species", "node_size": 10, "label": "sackett"}, "alvin": {"concepts": "alvin", "type": "concept", "cluster": "poster child species", "node_size": 10, "label": "alvin"}, "surveyor": {"concepts": "surveyor", "type": "concept", "cluster": "poster child species", "node_size": 10, "label": "surveyor"}, "dali": {"concepts": "dali", "type": "concept", "cluster": "poster child species", "node_size": 10, "label": "dali"}, "rorschach test": {"concepts": "rorschach test", "type": "concept", "cluster": "poster child species", "node_size": 10, "label": "rorschach test"}, "picasso paintings": {"concepts": "picasso paintings", "type": "concept", "cluster": "poster child species", "node_size": 10, "label": "picasso paintings"}, "ai platform": {"concepts": "ai platform", "type": "concept", "cluster": "poster child species", "node_size": 10, "label": "ai platform"}, "visualization": {"concepts": "visualization", "type": "concept", "cluster": "poster child species", "node_size": 10, "label": "visualization"}, "relationship weights": {"concepts": "relationship weights", "type": "concept", "cluster": "poster child species", "node_size": 10, "label": "relationship weights"}, "public engagement": {"concepts": "public engagement", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "public engagement"}, "audubon society": {"concepts": "audubon society", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "audubon society"}, "nonprofit groups": {"concepts": "nonprofit groups", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "nonprofit groups"}, "waterkeeper alliance": {"concepts": "waterkeeper alliance", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "waterkeeper alliance"}, "ecosystem health": {"concepts": "ecosystem health", "type": "concept", "cluster": "Water Quality Regulations", "node_size": 10, "label": "ecosystem health"}, "ecosystem diversity": {"concepts": "ecosystem diversity", "type": "concept", "cluster": "Water Quality Regulations", "node_size": 10, "label": "ecosystem diversity"}, "us fish and wildlife service": {"concepts": "us fish and wildlife service", "type": "concept", "cluster": "Water Quality Regulations", "node_size": 10, "label": "us fish and wildlife service"}, "clean water act": {"concepts": "clean water act", "type": "concept", "cluster": "Wetland Protection", "node_size": 10, "label": "clean water act"}, "water quality enforcement": {"concepts": "water quality enforcement", "type": "concept", "cluster": "Wetland Protection", "node_size": 10, "label": "water quality enforcement"}, "water quality": {"concepts": "water quality", "type": "concept", "cluster": "Wetland Protection", "node_size": 10, "label": "water quality"}, "water quality thresholds": {"concepts": "water quality thresholds", "type": "concept", "cluster": "Wetland Protection", "node_size": 10, "label": "water quality thresholds"}, "wetland protection": {"concepts": "wetland protection", "type": "concept", "cluster": "Water Monitoring & Treatment", "node_size": 10, "label": "wetland protection"}, "wetlands": {"concepts": "wetlands", "type": "concept", "cluster": "Water Monitoring & Treatment", "node_size": 10, "label": "wetlands"}, "tributary waters": {"concepts": "tributary waters", "type": "concept", "cluster": "Water Monitoring & Treatment", "node_size": 10, "label": "tributary waters"}, "water quality monitoring": {"concepts": "water quality monitoring", "type": "concept", "cluster": "Community Partnerships", "node_size": 10, "label": "water quality monitoring"}, "wastewater treatment": {"concepts": "wastewater treatment", "type": "concept", "cluster": "Community Partnerships", "node_size": 10, "label": "wastewater treatment"}, "effluent": {"concepts": "effluent", "type": "concept", "cluster": "Community Partnerships", "node_size": 10, "label": "effluent"}, "water quality thresholds decrease": {"concepts": "water quality thresholds decrease", "type": "concept", "cluster": "Community Partnerships", "node_size": 10, "label": "water quality thresholds decrease"}, "water improvement plans": {"concepts": "water improvement plans", "type": "concept", "cluster": "Water Improvement", "node_size": 10, "label": "water improvement plans"}, "water quality improvement": {"concepts": "water quality improvement", "type": "concept", "cluster": "Water Improvement", "node_size": 10, "label": "water quality improvement"}, "protected species": {"concepts": "protected species", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "protected species"}, "protected species habitat": {"concepts": "protected species habitat", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "protected species habitat"}, "species protection": {"concepts": "species protection", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "species protection"}, "access to habitats": {"concepts": "access to habitats", "type": "concept", "cluster": "Habitat Access", "node_size": 10, "label": "access to habitats"}, "habitat access": {"concepts": "habitat access", "type": "concept", "cluster": "Habitat Access", "node_size": 10, "label": "habitat access"}, "habitat use": {"concepts": "habitat use", "type": "concept", "cluster": "Habitat Access", "node_size": 10, "label": "habitat use"}, "species habitat support": {"concepts": "species habitat support", "type": "concept", "cluster": "Habitat Access", "node_size": 10, "label": "species habitat support"}, "wildlife propagation": {"concepts": "wildlife propagation", "type": "concept", "cluster": "Habitat Development", "node_size": 10, "label": "wildlife propagation"}, "habitat production": {"concepts": "habitat production", "type": "concept", "cluster": "Habitat Development", "node_size": 10, "label": "habitat production"}, "habitat forming species": {"concepts": "habitat forming species", "type": "concept", "cluster": "Habitat Development", "node_size": 10, "label": "habitat forming species"}, "habitat functionality": {"concepts": "habitat functionality", "type": "concept", "cluster": "Water Quality", "node_size": 10, "label": "habitat functionality"}, "species habitat gap": {"concepts": "species habitat gap", "type": "concept", "cluster": "Water Quality", "node_size": 10, "label": "species habitat gap"}, "habitat protection": {"concepts": "habitat protection", "type": "concept", "cluster": "Water Quality", "node_size": 10, "label": "habitat protection"}, "habitat fragmentation": {"concepts": "habitat fragmentation", "type": "concept", "cluster": "Water Quality", "node_size": 10, "label": "habitat fragmentation"}, "agricultural uses": {"concepts": "agricultural uses", "type": "concept", "cluster": "Water Quality", "node_size": 10, "label": "agricultural uses"}, "urban wildlife interactions": {"concepts": "urban wildlife interactions", "type": "concept", "cluster": "Water Quality", "node_size": 10, "label": "urban wildlife interactions"}, "native vegetation": {"concepts": "native vegetation", "type": "concept", "cluster": "Water Quality", "node_size": 10, "label": "native vegetation"}, "ecosystems": {"concepts": "ecosystems", "type": "concept", "cluster": "Ecosystem Functions", "node_size": 10, "label": "ecosystems"}, "ecosystem function": {"concepts": "ecosystem function", "type": "concept", "cluster": "Ecosystem Functions", "node_size": 10, "label": "ecosystem function"}, "ecosystem functionality": {"concepts": "ecosystem functionality", "type": "concept", "cluster": "Ecosystem Functions", "node_size": 10, "label": "ecosystem functionality"}, "food web": {"concepts": "food web", "type": "concept", "cluster": "Food Webs", "node_size": 10, "label": "food web"}, "food webs": {"concepts": "food webs", "type": "concept", "cluster": "Food Webs", "node_size": 10, "label": "food webs"}, "us army corps of engineers": {"concepts": "us army corps of engineers", "type": "concept", "cluster": "Environmental Regulation Enforcement", "node_size": 10, "label": "us army corps of engineers"}, "epa enforcement": {"concepts": "epa enforcement", "type": "concept", "cluster": "Environmental Regulation Enforcement", "node_size": 10, "label": "epa enforcement"}, "epa": {"concepts": "epa", "type": "concept", "cluster": "Environmental Regulation Enforcement", "node_size": 10, "label": "epa"}, "staff scientist": {"concepts": "staff scientist", "type": "concept", "cluster": "Team Development", "node_size": 10, "label": "staff scientist"}, "universities": {"concepts": "universities", "type": "concept", "cluster": "Team Development", "node_size": 10, "label": "universities"}, "workshop": {"concepts": "workshop", "type": "concept", "cluster": "Team Development", "node_size": 10, "label": "workshop"}, "team retreat": {"concepts": "team retreat", "type": "concept", "cluster": "Team Development", "node_size": 10, "label": "team retreat"}, "mental modeler": {"concepts": "mental modeler", "type": "concept", "cluster": "Team Development", "node_size": 10, "label": "mental modeler"}, "improvement plans": {"concepts": "improvement plans", "type": "concept", "cluster": "Team Development", "node_size": 10, "label": "improvement plans"}, "diversity of organisms": {"concepts": "diversity of organisms", "type": "concept", "cluster": "Ecosystem Services", "node_size": 10, "label": "diversity of organisms"}, "filtration services": {"concepts": "filtration services", "type": "concept", "cluster": "Ecosystem Services", "node_size": 10, "label": "filtration services"}, "litigation": {"concepts": "litigation", "type": "concept", "cluster": "Legal and Mitigation", "node_size": 10, "label": "litigation"}, "court": {"concepts": "court", "type": "concept", "cluster": "Legal and Mitigation", "node_size": 10, "label": "court"}, "court involvement": {"concepts": "court involvement", "type": "concept", "cluster": "Legal and Mitigation", "node_size": 10, "label": "court involvement"}, "mitigation banks decrease": {"concepts": "mitigation banks decrease", "type": "concept", "cluster": "Legal and Mitigation", "node_size": 10, "label": "mitigation banks decrease"}, "development credits": {"concepts": "development credits", "type": "concept", "cluster": "Legal and Mitigation", "node_size": 10, "label": "development credits"}, "state standards": {"concepts": "state standards", "type": "concept", "cluster": "Regulatory Standards", "node_size": 10, "label": "state standards"}, "federal standards": {"concepts": "federal standards", "type": "concept", "cluster": "Regulatory Standards", "node_size": 10, "label": "federal standards"}, "state agencies": {"concepts": "state agencies", "type": "concept", "cluster": "Regulatory Standards", "node_size": 10, "label": "state agencies"}, "jurisdictional protection": {"concepts": "jurisdictional protection", "type": "concept", "cluster": "Enforcement and Jurisdiction", "node_size": 10, "label": "jurisdictional protection"}, "army corps enforcement": {"concepts": "army corps enforcement", "type": "concept", "cluster": "Enforcement and Jurisdiction", "node_size": 10, "label": "army corps enforcement"}, "regulatory agencies": {"concepts": "regulatory agencies", "type": "concept", "cluster": "Enforcement and Jurisdiction", "node_size": 10, "label": "regulatory agencies"}, "regulatory enforcement": {"concepts": "regulatory enforcement", "type": "concept", "cluster": "Enforcement and Jurisdiction", "node_size": 10, "label": "regulatory enforcement"}, "federal enforcement": {"concepts": "federal enforcement", "type": "concept", "cluster": "Enforcement and Jurisdiction", "node_size": 10, "label": "federal enforcement"}, "national enforcement": {"concepts": "national enforcement", "type": "concept", "cluster": "Enforcement and Jurisdiction", "node_size": 10, "label": "national enforcement"}, "local enforcement": {"concepts": "local enforcement", "type": "concept", "cluster": "Enforcement and Jurisdiction", "node_size": 10, "label": "local enforcement"}, "enforcement disconnect": {"concepts": "enforcement disconnect", "type": "concept", "cluster": "Enforcement and Jurisdiction", "node_size": 10, "label": "enforcement disconnect"}, "local experts": {"concepts": "local experts", "type": "concept", "cluster": "Enforcement and Jurisdiction", "node_size": 10, "label": "local experts"}, "species counts": {"concepts": "species counts", "type": "concept", "cluster": "Biodiversity Metrics", "node_size": 10, "label": "species counts"}, "public species counts": {"concepts": "public species counts", "type": "concept", "cluster": "Biodiversity Metrics", "node_size": 10, "label": "public species counts"}, "biodiversity data": {"concepts": "biodiversity data", "type": "concept", "cluster": "Biodiversity Metrics", "node_size": 10, "label": "biodiversity data"}, "species presence": {"concepts": "species presence", "type": "concept", "cluster": "Biodiversity Metrics", "node_size": 10, "label": "species presence"}, "species diversity": {"concepts": "species diversity", "type": "concept", "cluster": "Biodiversity Metrics", "node_size": 10, "label": "species diversity"}, "invasive species": {"concepts": "invasive species", "type": "concept", "cluster": "Species Impact", "node_size": 10, "label": "invasive species"}, "sensitive species": {"concepts": "sensitive species", "type": "concept", "cluster": "Species Impact", "node_size": 10, "label": "sensitive species"}, "harmful organisms": {"concepts": "harmful organisms", "type": "concept", "cluster": "Species Impact", "node_size": 10, "label": "harmful organisms"}, "biodiversity": {"concepts": "biodiversity", "type": "concept", "cluster": "Ecosystem Dynamics", "node_size": 10, "label": "biodiversity"}, "species dependency": {"concepts": "species dependency", "type": "concept", "cluster": "Ecosystem Dynamics", "node_size": 10, "label": "species dependency"}, "species migration": {"concepts": "species migration", "type": "concept", "cluster": "Ecosystem Dynamics", "node_size": 10, "label": "species migration"}, "keystone species": {"concepts": "keystone species", "type": "concept", "cluster": "Ecosystem Dynamics", "node_size": 10, "label": "keystone species"}, "management policies": {"concepts": "management policies", "type": "concept", "cluster": "Permit Management Policies", "node_size": 10, "label": "management policies"}, "permits": {"concepts": "permits", "type": "concept", "cluster": "Permit Management Policies", "node_size": 10, "label": "permits"}, "permit": {"concepts": "permit", "type": "concept", "cluster": "Permit Management Policies", "node_size": 10, "label": "permit"}, "incentivization": {"concepts": "incentivization", "type": "concept", "cluster": "Permit Management Policies", "node_size": 10, "label": "incentivization"}, "army corps of engineers": {"concepts": "army corps of engineers", "type": "concept", "cluster": "Permit Management Policies", "node_size": 10, "label": "army corps of engineers"}, "industrial uses": {"concepts": "industrial uses", "type": "concept", "cluster": "Permit Management Policies", "node_size": 10, "label": "industrial uses"}, "migration": {"concepts": "migration", "type": "concept", "cluster": "Coastal Ecosystem Dynamics", "node_size": 10, "label": "migration"}, "seasonality": {"concepts": "seasonality", "type": "concept", "cluster": "Coastal Ecosystem Dynamics", "node_size": 10, "label": "seasonality"}, "habitats": {"concepts": "habitats", "type": "concept", "cluster": "Coastal Ecosystem Dynamics", "node_size": 10, "label": "habitats"}, "ecosystem resources": {"concepts": "ecosystem resources", "type": "concept", "cluster": "Coastal Ecosystem Dynamics", "node_size": 10, "label": "ecosystem resources"}, "coastal waters": {"concepts": "coastal waters", "type": "concept", "cluster": "Coastal Ecosystem Dynamics", "node_size": 10, "label": "coastal waters"}, "habitat": {"concepts": "habitat", "type": "concept", "cluster": "Coastal Ecosystem Dynamics", "node_size": 10, "label": "habitat"}, "sediment stabilization": {"concepts": "sediment stabilization", "type": "concept", "cluster": "Coastal Ecosystem Dynamics", "node_size": 10, "label": "sediment stabilization"}, "seagrass beds": {"concepts": "seagrass beds", "type": "concept", "cluster": "Coastal Ecosystem Dynamics", "node_size": 10, "label": "seagrass beds"}, "fish propagation": {"concepts": "fish propagation", "type": "concept", "cluster": "Coastal Ecosystem Dynamics", "node_size": 10, "label": "fish propagation"}, "environmental nonprofit": {"concepts": "environmental nonprofit", "type": "concept", "cluster": "Environmental Conservation", "node_size": 10, "label": "environmental nonprofit"}, "restoration ecologist": {"concepts": "restoration ecologist", "type": "concept", "cluster": "Environmental Conservation", "node_size": 10, "label": "restoration ecologist"}, "marine resource management": {"concepts": "marine resource management", "type": "concept", "cluster": "Environmental Conservation", "node_size": 10, "label": "marine resource management"}, "environmental surveys": {"concepts": "environmental surveys", "type": "concept", "cluster": "Environmental Conservation", "node_size": 10, "label": "environmental surveys"}, "citizen scientists": {"concepts": "citizen scientists", "type": "concept", "cluster": "Environmental Conservation", "node_size": 10, "label": "citizen scientists"}, "human impacts": {"concepts": "human impacts", "type": "concept", "cluster": "Mobile Bay Biodiversity", "node_size": 10, "label": "human impacts"}, "species of conservation concern": {"concepts": "species of conservation concern", "type": "concept", "cluster": "Mobile Bay Biodiversity", "node_size": 10, "label": "species of conservation concern"}, "listed species": {"concepts": "listed species", "type": "concept", "cluster": "Mobile Bay Biodiversity", "node_size": 10, "label": "listed species"}, "food web supporting species": {"concepts": "food web supporting species", "type": "concept", "cluster": "Mobile Bay Biodiversity", "node_size": 10, "label": "food web supporting species"}, "preferred state": {"concepts": "preferred state", "type": "concept", "cluster": "Mobile Bay Biodiversity", "node_size": 10, "label": "preferred state"}, "fish consumption": {"concepts": "fish consumption", "type": "concept", "cluster": "Mobile Bay Biodiversity", "node_size": 10, "label": "fish consumption"}, "marine biodiversity": {"concepts": "marine biodiversity", "type": "concept", "cluster": "Mobile Bay Biodiversity", "node_size": 10, "label": "marine biodiversity"}, "mobile bay": {"concepts": "mobile bay", "type": "concept", "cluster": "Mobile Bay Biodiversity", "node_size": 10, "label": "mobile bay"}, "species": {"concepts": "species", "type": "concept", "cluster": "Mobile Bay Biodiversity", "node_size": 10, "label": "species"}, "public data": {"concepts": "public data", "type": "concept", "cluster": "Mobile Bay Biodiversity", "node_size": 10, "label": "public data"}, "data sharing": {"concepts": "data sharing", "type": "concept", "cluster": "Mobile Bay Biodiversity", "node_size": 10, "label": "data sharing"}, "mobile bay area": {"concepts": "mobile bay area", "type": "concept", "cluster": "Mobile Bay Biodiversity", "node_size": 10, "label": "mobile bay area"}, "conservation science": {"concepts": "conservation science", "type": "concept", "cluster": "Mobile Bay Biodiversity", "node_size": 10, "label": "conservation science"}, "submerged aquatic vegetation": {"concepts": "submerged aquatic vegetation", "type": "concept", "cluster": "Aquatic Habitat Restoration", "node_size": 10, "label": "submerged aquatic vegetation"}, "seagrass restoration": {"concepts": "seagrass restoration", "type": "concept", "cluster": "Aquatic Habitat Restoration", "node_size": 10, "label": "seagrass restoration"}, "oyster restoration": {"concepts": "oyster restoration", "type": "concept", "cluster": "Aquatic Habitat Restoration", "node_size": 10, "label": "oyster restoration"}, "watershed": {"concepts": "watershed", "type": "concept", "cluster": "Water Management", "node_size": 10, "label": "watershed"}, "waterways": {"concepts": "waterways", "type": "concept", "cluster": "Water Management", "node_size": 10, "label": "waterways"}, "runoff": {"concepts": "runoff", "type": "concept", "cluster": "Water Management", "node_size": 10, "label": "runoff"}, "waterway designation": {"concepts": "waterway designation", "type": "concept", "cluster": "Waterway Classification", "node_size": 10, "label": "waterway designation"}, "recreational waterways": {"concepts": "recreational waterways", "type": "concept", "cluster": "Waterway Classification", "node_size": 10, "label": "recreational waterways"}, "impaired waterways": {"concepts": "impaired waterways", "type": "concept", "cluster": "Waterway Classification", "node_size": 10, "label": "impaired waterways"}};
        const interClusterEdges = [["mitigation banks", "Species Conservation", {"weight": -1.0, "confidence": 0.86, "type": "inter_cluster", "style": "solid"}], ["mitigation banks", "Environmental Regulation Enforcement", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["mitigation banks", "Wetland Protection", {"weight": -1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["mitigation banks", "Permit Management Policies", {"weight": 1.0, "confidence": 0.8125, "type": "inter_cluster", "style": "solid"}], ["mitigation banks", "Water Improvement", {"weight": -1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["poster child species", "Coastal Ecosystem Dynamics", {"weight": 1.0, "confidence": 0.7375, "type": "inter_cluster", "style": "solid"}], ["poster child species", "Habitat Access", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["riparian bank", "Ecosystem Dynamics", {"weight": 1.0, "confidence": 0.725, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Conservation", "Water Quality", {"weight": 1.0, "confidence": 0.76, "type": "inter_cluster", "style": "solid"}], ["Water Quality Regulations", "Ecosystem Services", {"weight": 1.0, "confidence": 0.775, "type": "inter_cluster", "style": "solid"}], ["Water Quality Regulations", "Aquatic Habitat Restoration", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["Wetland Protection", "Water Quality Regulations", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["Wetland Protection", "Enforcement and Jurisdiction", {"weight": 1.0, "confidence": 0.8166666666666668, "type": "inter_cluster", "style": "solid"}], ["Wetland Protection", "Habitat Access", {"weight": 1.0, "confidence": 0.775, "type": "inter_cluster", "style": "solid"}], ["Water Monitoring & Treatment", "Waterway Classification", {"weight": 1.0, "confidence": 0.7875, "type": "inter_cluster", "style": "solid"}], ["Water Monitoring & Treatment", "Aquatic Habitat Restoration", {"weight": 1.0, "confidence": 0.7666666666666666, "type": "inter_cluster", "style": "solid"}], ["Community Partnerships", "Water Quality", {"weight": 1.0, "confidence": 0.79, "type": "inter_cluster", "style": "solid"}], ["Community Partnerships", "Enforcement and Jurisdiction", {"weight": 1.0, "confidence": 0.7300000000000001, "type": "inter_cluster", "style": "solid"}], ["Community Partnerships", "Waterway Classification", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["Water Improvement", "riparian bank", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["Species Conservation", "Aquatic Habitat Restoration", {"weight": 1.0, "confidence": 0.7000000000000001, "type": "inter_cluster", "style": "solid"}], ["Habitat Access", "Water Improvement", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["Habitat Development", "Ecosystem Dynamics", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["Habitat Development", "Enforcement and Jurisdiction", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["Water Quality", "Species Conservation", {"weight": 1.0, "confidence": 0.86, "type": "inter_cluster", "style": "solid"}], ["Water Quality", "Environmental Conservation", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["Water Quality", "Biodiversity Metrics", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["Water Quality", "Water Monitoring & Treatment", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Functions", "Water Quality", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Functions", "Biodiversity Metrics", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["Food Webs", "Aquatic Habitat Restoration", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["Food Webs", "Ecosystem Services", {"weight": 1.0, "confidence": 0.825, "type": "inter_cluster", "style": "solid"}], ["Environmental Regulation Enforcement", "Water Quality", {"weight": -0.2, "confidence": 0.7700000000000001, "type": "inter_cluster", "style": "solid"}], ["Environmental Regulation Enforcement", "Species Conservation", {"weight": 1.0, "confidence": 0.7625, "type": "inter_cluster", "style": "solid"}], ["Team Development", "Ecosystem Functions", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["Team Development", "Species Conservation", {"weight": 1.0, "confidence": 0.74, "type": "inter_cluster", "style": "solid"}], ["Team Development", "Environmental Conservation", {"weight": 1.0, "confidence": 0.74, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Services", "Water Improvement", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["Legal and Mitigation", "Permit Management Policies", {"weight": -0.5, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["Legal and Mitigation", "Wetland Protection", {"weight": 1.0, "confidence": 0.7666666666666666, "type": "inter_cluster", "style": "solid"}], ["Biodiversity Metrics", "Coastal Ecosystem Dynamics", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["Biodiversity Metrics", "Team Development", {"weight": 1.0, "confidence": 0.7100000000000001, "type": "inter_cluster", "style": "solid"}], ["Species Impact", "Coastal Ecosystem Dynamics", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["Species Impact", "Enforcement and Jurisdiction", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["Species Impact", "Aquatic Habitat Restoration", {"weight": -1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Dynamics", "Habitat Development", {"weight": 1.0, "confidence": 0.8400000000000001, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Dynamics", "Water Monitoring & Treatment", {"weight": 1.0, "confidence": 0.775, "type": "inter_cluster", "style": "solid"}], ["Permit Management Policies", "Habitat Development", {"weight": -1.0, "confidence": 0.7375, "type": "inter_cluster", "style": "solid"}], ["Environmental Conservation", "Ecosystem Dynamics", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["Environmental Conservation", "Species Conservation", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["Mobile Bay Biodiversity", "Regulatory Standards", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["Aquatic Habitat Restoration", "Enforcement and Jurisdiction", {"weight": 1.0, "confidence": 0.7166666666666667, "type": "inter_cluster", "style": "solid"}], ["Aquatic Habitat Restoration", "Coastal Ecosystem Dynamics", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["Aquatic Habitat Restoration", "Environmental Regulation Enforcement", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["Water Management", "Water Improvement", {"weight": 0.2, "confidence": 0.8099999999999999, "type": "inter_cluster", "style": "solid"}], ["Water Management", "Water Quality", {"weight": -0.5, "confidence": 0.7749999999999999, "type": "inter_cluster", "style": "solid"}], ["Water Management", "Species Conservation", {"weight": 0.3333333333333333, "confidence": 0.7166666666666668, "type": "inter_cluster", "style": "solid"}]];
        const clusterConcepts = {"poster child species": [["sackett", {"concepts": "sackett", "type": "concept", "cluster": "poster child species", "node_size": 10, "label": "sackett"}], ["alvin", {"concepts": "alvin", "type": "concept", "cluster": "poster child species", "node_size": 10, "label": "alvin"}], ["surveyor", {"concepts": "surveyor", "type": "concept", "cluster": "poster child species", "node_size": 10, "label": "surveyor"}], ["dali", {"concepts": "dali", "type": "concept", "cluster": "poster child species", "node_size": 10, "label": "dali"}], ["rorschach test", {"concepts": "rorschach test", "type": "concept", "cluster": "poster child species", "node_size": 10, "label": "rorschach test"}], ["picasso paintings", {"concepts": "picasso paintings", "type": "concept", "cluster": "poster child species", "node_size": 10, "label": "picasso paintings"}], ["ai platform", {"concepts": "ai platform", "type": "concept", "cluster": "poster child species", "node_size": 10, "label": "ai platform"}], ["visualization", {"concepts": "visualization", "type": "concept", "cluster": "poster child species", "node_size": 10, "label": "visualization"}], ["relationship weights", {"concepts": "relationship weights", "type": "concept", "cluster": "poster child species", "node_size": 10, "label": "relationship weights"}]], "Ecosystem Conservation": [["public engagement", {"concepts": "public engagement", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "public engagement"}], ["audubon society", {"concepts": "audubon society", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "audubon society"}], ["nonprofit groups", {"concepts": "nonprofit groups", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "nonprofit groups"}], ["waterkeeper alliance", {"concepts": "waterkeeper alliance", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "waterkeeper alliance"}]], "Water Quality Regulations": [["ecosystem health", {"concepts": "ecosystem health", "type": "concept", "cluster": "Water Quality Regulations", "node_size": 10, "label": "ecosystem health"}], ["ecosystem diversity", {"concepts": "ecosystem diversity", "type": "concept", "cluster": "Water Quality Regulations", "node_size": 10, "label": "ecosystem diversity"}], ["us fish and wildlife service", {"concepts": "us fish and wildlife service", "type": "concept", "cluster": "Water Quality Regulations", "node_size": 10, "label": "us fish and wildlife service"}]], "Wetland Protection": [["clean water act", {"concepts": "clean water act", "type": "concept", "cluster": "Wetland Protection", "node_size": 10, "label": "clean water act"}], ["water quality enforcement", {"concepts": "water quality enforcement", "type": "concept", "cluster": "Wetland Protection", "node_size": 10, "label": "water quality enforcement"}], ["water quality", {"concepts": "water quality", "type": "concept", "cluster": "Wetland Protection", "node_size": 10, "label": "water quality"}], ["water quality thresholds", {"concepts": "water quality thresholds", "type": "concept", "cluster": "Wetland Protection", "node_size": 10, "label": "water quality thresholds"}]], "Water Monitoring & Treatment": [["wetland protection", {"concepts": "wetland protection", "type": "concept", "cluster": "Water Monitoring & Treatment", "node_size": 10, "label": "wetland protection"}], ["wetlands", {"concepts": "wetlands", "type": "concept", "cluster": "Water Monitoring & Treatment", "node_size": 10, "label": "wetlands"}], ["tributary waters", {"concepts": "tributary waters", "type": "concept", "cluster": "Water Monitoring & Treatment", "node_size": 10, "label": "tributary waters"}]], "Community Partnerships": [["water quality monitoring", {"concepts": "water quality monitoring", "type": "concept", "cluster": "Community Partnerships", "node_size": 10, "label": "water quality monitoring"}], ["wastewater treatment", {"concepts": "wastewater treatment", "type": "concept", "cluster": "Community Partnerships", "node_size": 10, "label": "wastewater treatment"}], ["effluent", {"concepts": "effluent", "type": "concept", "cluster": "Community Partnerships", "node_size": 10, "label": "effluent"}], ["water quality thresholds decrease", {"concepts": "water quality thresholds decrease", "type": "concept", "cluster": "Community Partnerships", "node_size": 10, "label": "water quality thresholds decrease"}]], "Water Improvement": [["water improvement plans", {"concepts": "water improvement plans", "type": "concept", "cluster": "Water Improvement", "node_size": 10, "label": "water improvement plans"}], ["water quality improvement", {"concepts": "water quality improvement", "type": "concept", "cluster": "Water Improvement", "node_size": 10, "label": "water quality improvement"}]], "Species Conservation": [["protected species", {"concepts": "protected species", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "protected species"}], ["protected species habitat", {"concepts": "protected species habitat", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "protected species habitat"}], ["species protection", {"concepts": "species protection", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "species protection"}]], "Habitat Access": [["access to habitats", {"concepts": "access to habitats", "type": "concept", "cluster": "Habitat Access", "node_size": 10, "label": "access to habitats"}], ["habitat access", {"concepts": "habitat access", "type": "concept", "cluster": "Habitat Access", "node_size": 10, "label": "habitat access"}], ["habitat use", {"concepts": "habitat use", "type": "concept", "cluster": "Habitat Access", "node_size": 10, "label": "habitat use"}], ["species habitat support", {"concepts": "species habitat support", "type": "concept", "cluster": "Habitat Access", "node_size": 10, "label": "species habitat support"}]], "Habitat Development": [["wildlife propagation", {"concepts": "wildlife propagation", "type": "concept", "cluster": "Habitat Development", "node_size": 10, "label": "wildlife propagation"}], ["habitat production", {"concepts": "habitat production", "type": "concept", "cluster": "Habitat Development", "node_size": 10, "label": "habitat production"}], ["habitat forming species", {"concepts": "habitat forming species", "type": "concept", "cluster": "Habitat Development", "node_size": 10, "label": "habitat forming species"}]], "Water Quality": [["habitat functionality", {"concepts": "habitat functionality", "type": "concept", "cluster": "Water Quality", "node_size": 10, "label": "habitat functionality"}], ["species habitat gap", {"concepts": "species habitat gap", "type": "concept", "cluster": "Water Quality", "node_size": 10, "label": "species habitat gap"}], ["habitat protection", {"concepts": "habitat protection", "type": "concept", "cluster": "Water Quality", "node_size": 10, "label": "habitat protection"}], ["habitat fragmentation", {"concepts": "habitat fragmentation", "type": "concept", "cluster": "Water Quality", "node_size": 10, "label": "habitat fragmentation"}], ["agricultural uses", {"concepts": "agricultural uses", "type": "concept", "cluster": "Water Quality", "node_size": 10, "label": "agricultural uses"}], ["urban wildlife interactions", {"concepts": "urban wildlife interactions", "type": "concept", "cluster": "Water Quality", "node_size": 10, "label": "urban wildlife interactions"}], ["native vegetation", {"concepts": "native vegetation", "type": "concept", "cluster": "Water Quality", "node_size": 10, "label": "native vegetation"}]], "Ecosystem Functions": [["ecosystems", {"concepts": "ecosystems", "type": "concept", "cluster": "Ecosystem Functions", "node_size": 10, "label": "ecosystems"}], ["ecosystem function", {"concepts": "ecosystem function", "type": "concept", "cluster": "Ecosystem Functions", "node_size": 10, "label": "ecosystem function"}], ["ecosystem functionality", {"concepts": "ecosystem functionality", "type": "concept", "cluster": "Ecosystem Functions", "node_size": 10, "label": "ecosystem functionality"}]], "Food Webs": [["food web", {"concepts": "food web", "type": "concept", "cluster": "Food Webs", "node_size": 10, "label": "food web"}], ["food webs", {"concepts": "food webs", "type": "concept", "cluster": "Food Webs", "node_size": 10, "label": "food webs"}]], "Environmental Regulation Enforcement": [["us army corps of engineers", {"concepts": "us army corps of engineers", "type": "concept", "cluster": "Environmental Regulation Enforcement", "node_size": 10, "label": "us army corps of engineers"}], ["epa enforcement", {"concepts": "epa enforcement", "type": "concept", "cluster": "Environmental Regulation Enforcement", "node_size": 10, "label": "epa enforcement"}], ["epa", {"concepts": "epa", "type": "concept", "cluster": "Environmental Regulation Enforcement", "node_size": 10, "label": "epa"}]], "Team Development": [["staff scientist", {"concepts": "staff scientist", "type": "concept", "cluster": "Team Development", "node_size": 10, "label": "staff scientist"}], ["universities", {"concepts": "universities", "type": "concept", "cluster": "Team Development", "node_size": 10, "label": "universities"}], ["workshop", {"concepts": "workshop", "type": "concept", "cluster": "Team Development", "node_size": 10, "label": "workshop"}], ["team retreat", {"concepts": "team retreat", "type": "concept", "cluster": "Team Development", "node_size": 10, "label": "team retreat"}], ["mental modeler", {"concepts": "mental modeler", "type": "concept", "cluster": "Team Development", "node_size": 10, "label": "mental modeler"}], ["improvement plans", {"concepts": "improvement plans", "type": "concept", "cluster": "Team Development", "node_size": 10, "label": "improvement plans"}]], "Ecosystem Services": [["diversity of organisms", {"concepts": "diversity of organisms", "type": "concept", "cluster": "Ecosystem Services", "node_size": 10, "label": "diversity of organisms"}], ["filtration services", {"concepts": "filtration services", "type": "concept", "cluster": "Ecosystem Services", "node_size": 10, "label": "filtration services"}]], "Legal and Mitigation": [["litigation", {"concepts": "litigation", "type": "concept", "cluster": "Legal and Mitigation", "node_size": 10, "label": "litigation"}], ["court", {"concepts": "court", "type": "concept", "cluster": "Legal and Mitigation", "node_size": 10, "label": "court"}], ["court involvement", {"concepts": "court involvement", "type": "concept", "cluster": "Legal and Mitigation", "node_size": 10, "label": "court involvement"}], ["mitigation banks decrease", {"concepts": "mitigation banks decrease", "type": "concept", "cluster": "Legal and Mitigation", "node_size": 10, "label": "mitigation banks decrease"}], ["development credits", {"concepts": "development credits", "type": "concept", "cluster": "Legal and Mitigation", "node_size": 10, "label": "development credits"}]], "Regulatory Standards": [["state standards", {"concepts": "state standards", "type": "concept", "cluster": "Regulatory Standards", "node_size": 10, "label": "state standards"}], ["federal standards", {"concepts": "federal standards", "type": "concept", "cluster": "Regulatory Standards", "node_size": 10, "label": "federal standards"}], ["state agencies", {"concepts": "state agencies", "type": "concept", "cluster": "Regulatory Standards", "node_size": 10, "label": "state agencies"}]], "Enforcement and Jurisdiction": [["jurisdictional protection", {"concepts": "jurisdictional protection", "type": "concept", "cluster": "Enforcement and Jurisdiction", "node_size": 10, "label": "jurisdictional protection"}], ["army corps enforcement", {"concepts": "army corps enforcement", "type": "concept", "cluster": "Enforcement and Jurisdiction", "node_size": 10, "label": "army corps enforcement"}], ["regulatory agencies", {"concepts": "regulatory agencies", "type": "concept", "cluster": "Enforcement and Jurisdiction", "node_size": 10, "label": "regulatory agencies"}], ["regulatory enforcement", {"concepts": "regulatory enforcement", "type": "concept", "cluster": "Enforcement and Jurisdiction", "node_size": 10, "label": "regulatory enforcement"}], ["federal enforcement", {"concepts": "federal enforcement", "type": "concept", "cluster": "Enforcement and Jurisdiction", "node_size": 10, "label": "federal enforcement"}], ["national enforcement", {"concepts": "national enforcement", "type": "concept", "cluster": "Enforcement and Jurisdiction", "node_size": 10, "label": "national enforcement"}], ["local enforcement", {"concepts": "local enforcement", "type": "concept", "cluster": "Enforcement and Jurisdiction", "node_size": 10, "label": "local enforcement"}], ["enforcement disconnect", {"concepts": "enforcement disconnect", "type": "concept", "cluster": "Enforcement and Jurisdiction", "node_size": 10, "label": "enforcement disconnect"}], ["local experts", {"concepts": "local experts", "type": "concept", "cluster": "Enforcement and Jurisdiction", "node_size": 10, "label": "local experts"}]], "Biodiversity Metrics": [["species counts", {"concepts": "species counts", "type": "concept", "cluster": "Biodiversity Metrics", "node_size": 10, "label": "species counts"}], ["public species counts", {"concepts": "public species counts", "type": "concept", "cluster": "Biodiversity Metrics", "node_size": 10, "label": "public species counts"}], ["biodiversity data", {"concepts": "biodiversity data", "type": "concept", "cluster": "Biodiversity Metrics", "node_size": 10, "label": "biodiversity data"}], ["species presence", {"concepts": "species presence", "type": "concept", "cluster": "Biodiversity Metrics", "node_size": 10, "label": "species presence"}], ["species diversity", {"concepts": "species diversity", "type": "concept", "cluster": "Biodiversity Metrics", "node_size": 10, "label": "species diversity"}]], "Species Impact": [["invasive species", {"concepts": "invasive species", "type": "concept", "cluster": "Species Impact", "node_size": 10, "label": "invasive species"}], ["sensitive species", {"concepts": "sensitive species", "type": "concept", "cluster": "Species Impact", "node_size": 10, "label": "sensitive species"}], ["harmful organisms", {"concepts": "harmful organisms", "type": "concept", "cluster": "Species Impact", "node_size": 10, "label": "harmful organisms"}]], "Ecosystem Dynamics": [["biodiversity", {"concepts": "biodiversity", "type": "concept", "cluster": "Ecosystem Dynamics", "node_size": 10, "label": "biodiversity"}], ["species dependency", {"concepts": "species dependency", "type": "concept", "cluster": "Ecosystem Dynamics", "node_size": 10, "label": "species dependency"}], ["species migration", {"concepts": "species migration", "type": "concept", "cluster": "Ecosystem Dynamics", "node_size": 10, "label": "species migration"}], ["keystone species", {"concepts": "keystone species", "type": "concept", "cluster": "Ecosystem Dynamics", "node_size": 10, "label": "keystone species"}]], "Permit Management Policies": [["management policies", {"concepts": "management policies", "type": "concept", "cluster": "Permit Management Policies", "node_size": 10, "label": "management policies"}], ["permits", {"concepts": "permits", "type": "concept", "cluster": "Permit Management Policies", "node_size": 10, "label": "permits"}], ["permit", {"concepts": "permit", "type": "concept", "cluster": "Permit Management Policies", "node_size": 10, "label": "permit"}], ["incentivization", {"concepts": "incentivization", "type": "concept", "cluster": "Permit Management Policies", "node_size": 10, "label": "incentivization"}], ["army corps of engineers", {"concepts": "army corps of engineers", "type": "concept", "cluster": "Permit Management Policies", "node_size": 10, "label": "army corps of engineers"}], ["industrial uses", {"concepts": "industrial uses", "type": "concept", "cluster": "Permit Management Policies", "node_size": 10, "label": "industrial uses"}]], "Coastal Ecosystem Dynamics": [["migration", {"concepts": "migration", "type": "concept", "cluster": "Coastal Ecosystem Dynamics", "node_size": 10, "label": "migration"}], ["seasonality", {"concepts": "seasonality", "type": "concept", "cluster": "Coastal Ecosystem Dynamics", "node_size": 10, "label": "seasonality"}], ["habitats", {"concepts": "habitats", "type": "concept", "cluster": "Coastal Ecosystem Dynamics", "node_size": 10, "label": "habitats"}], ["ecosystem resources", {"concepts": "ecosystem resources", "type": "concept", "cluster": "Coastal Ecosystem Dynamics", "node_size": 10, "label": "ecosystem resources"}], ["coastal waters", {"concepts": "coastal waters", "type": "concept", "cluster": "Coastal Ecosystem Dynamics", "node_size": 10, "label": "coastal waters"}], ["habitat", {"concepts": "habitat", "type": "concept", "cluster": "Coastal Ecosystem Dynamics", "node_size": 10, "label": "habitat"}], ["sediment stabilization", {"concepts": "sediment stabilization", "type": "concept", "cluster": "Coastal Ecosystem Dynamics", "node_size": 10, "label": "sediment stabilization"}], ["seagrass beds", {"concepts": "seagrass beds", "type": "concept", "cluster": "Coastal Ecosystem Dynamics", "node_size": 10, "label": "seagrass beds"}], ["fish propagation", {"concepts": "fish propagation", "type": "concept", "cluster": "Coastal Ecosystem Dynamics", "node_size": 10, "label": "fish propagation"}]], "Environmental Conservation": [["environmental nonprofit", {"concepts": "environmental nonprofit", "type": "concept", "cluster": "Environmental Conservation", "node_size": 10, "label": "environmental nonprofit"}], ["restoration ecologist", {"concepts": "restoration ecologist", "type": "concept", "cluster": "Environmental Conservation", "node_size": 10, "label": "restoration ecologist"}], ["marine resource management", {"concepts": "marine resource management", "type": "concept", "cluster": "Environmental Conservation", "node_size": 10, "label": "marine resource management"}], ["environmental surveys", {"concepts": "environmental surveys", "type": "concept", "cluster": "Environmental Conservation", "node_size": 10, "label": "environmental surveys"}], ["citizen scientists", {"concepts": "citizen scientists", "type": "concept", "cluster": "Environmental Conservation", "node_size": 10, "label": "citizen scientists"}]], "Mobile Bay Biodiversity": [["human impacts", {"concepts": "human impacts", "type": "concept", "cluster": "Mobile Bay Biodiversity", "node_size": 10, "label": "human impacts"}], ["species of conservation concern", {"concepts": "species of conservation concern", "type": "concept", "cluster": "Mobile Bay Biodiversity", "node_size": 10, "label": "species of conservation concern"}], ["listed species", {"concepts": "listed species", "type": "concept", "cluster": "Mobile Bay Biodiversity", "node_size": 10, "label": "listed species"}], ["food web supporting species", {"concepts": "food web supporting species", "type": "concept", "cluster": "Mobile Bay Biodiversity", "node_size": 10, "label": "food web supporting species"}], ["preferred state", {"concepts": "preferred state", "type": "concept", "cluster": "Mobile Bay Biodiversity", "node_size": 10, "label": "preferred state"}], ["fish consumption", {"concepts": "fish consumption", "type": "concept", "cluster": "Mobile Bay Biodiversity", "node_size": 10, "label": "fish consumption"}], ["marine biodiversity", {"concepts": "marine biodiversity", "type": "concept", "cluster": "Mobile Bay Biodiversity", "node_size": 10, "label": "marine biodiversity"}], ["mobile bay", {"concepts": "mobile bay", "type": "concept", "cluster": "Mobile Bay Biodiversity", "node_size": 10, "label": "mobile bay"}], ["species", {"concepts": "species", "type": "concept", "cluster": "Mobile Bay Biodiversity", "node_size": 10, "label": "species"}], ["public data", {"concepts": "public data", "type": "concept", "cluster": "Mobile Bay Biodiversity", "node_size": 10, "label": "public data"}], ["data sharing", {"concepts": "data sharing", "type": "concept", "cluster": "Mobile Bay Biodiversity", "node_size": 10, "label": "data sharing"}], ["mobile bay area", {"concepts": "mobile bay area", "type": "concept", "cluster": "Mobile Bay Biodiversity", "node_size": 10, "label": "mobile bay area"}], ["conservation science", {"concepts": "conservation science", "type": "concept", "cluster": "Mobile Bay Biodiversity", "node_size": 10, "label": "conservation science"}]], "Aquatic Habitat Restoration": [["submerged aquatic vegetation", {"concepts": "submerged aquatic vegetation", "type": "concept", "cluster": "Aquatic Habitat Restoration", "node_size": 10, "label": "submerged aquatic vegetation"}], ["seagrass restoration", {"concepts": "seagrass restoration", "type": "concept", "cluster": "Aquatic Habitat Restoration", "node_size": 10, "label": "seagrass restoration"}], ["oyster restoration", {"concepts": "oyster restoration", "type": "concept", "cluster": "Aquatic Habitat Restoration", "node_size": 10, "label": "oyster restoration"}]], "Water Management": [["watershed", {"concepts": "watershed", "type": "concept", "cluster": "Water Management", "node_size": 10, "label": "watershed"}], ["waterways", {"concepts": "waterways", "type": "concept", "cluster": "Water Management", "node_size": 10, "label": "waterways"}], ["runoff", {"concepts": "runoff", "type": "concept", "cluster": "Water Management", "node_size": 10, "label": "runoff"}]], "Waterway Classification": [["waterway designation", {"concepts": "waterway designation", "type": "concept", "cluster": "Waterway Classification", "node_size": 10, "label": "waterway designation"}], ["recreational waterways", {"concepts": "recreational waterways", "type": "concept", "cluster": "Waterway Classification", "node_size": 10, "label": "recreational waterways"}], ["impaired waterways", {"concepts": "impaired waterways", "type": "concept", "cluster": "Waterway Classification", "node_size": 10, "label": "impaired waterways"}]]};
        const clusterEdges = {"poster child species": [], "Ecosystem Conservation": [], "Water Quality Regulations": [], "Wetland Protection": [], "Water Monitoring & Treatment": [], "Community Partnerships": [], "Water Improvement": [], "Species Conservation": [], "Habitat Access": [], "Habitat Development": [], "Water Quality": [], "Ecosystem Functions": [], "Food Webs": [], "Environmental Regulation Enforcement": [], "Team Development": [], "Ecosystem Services": [], "Legal and Mitigation": [], "Regulatory Standards": [], "Enforcement and Jurisdiction": [], "Biodiversity Metrics": [], "Species Impact": [], "Ecosystem Dynamics": [], "Permit Management Policies": [], "Coastal Ecosystem Dynamics": [], "Environmental Conservation": [], "Mobile Bay Biodiversity": [], "Aquatic Habitat Restoration": [], "Water Management": [], "Waterway Classification": []};
        
        let network;
        let currentView = 'clusters';
        let currentCluster = null;
        let minConfidence = 0.3;
        
        // Network options
        const options = {
            nodes: {
                font: { color: 'white', size: 14 },
                borderWidth: 2,
                shadow: true
            },
            edges: {
                arrows: { to: { enabled: true, scaleFactor: 1.2 } },
                shadow: true,
                smooth: { type: 'continuous' }
            },
            physics: {
                stabilization: { iterations: 100 },
                barnesHut: {
                    gravitationalConstant: -8000,
                    springConstant: 0.001,
                    springLength: 200
                }
            },
            interaction: {
                hover: true,
                selectConnectedEdges: false
            }
        };
        
        function initNetwork() {
            const container = document.getElementById('network');
            const data = getClusterViewData();
            network = new vis.Network(container, data, options);
            
            // Handle cluster clicks for drill-down
            network.on("click", function(params) {
                if (params.nodes.length > 0 && currentView === 'clusters') {
                    const clickedNode = params.nodes[0];
                    if (clusterConcepts[clickedNode]) {
                        showClusterDetail(clickedNode);
                    }
                }
            });
        }
        
        function getClusterViewData() {
            const nodes = [];
            const edges = [];
            
            // Add cluster nodes
            Object.entries(clusterData).forEach(([clusterId, data]) => {
                const concepts = data.concepts || [];
                const conceptsStr = Array.isArray(concepts) ? concepts.join(', ') : concepts;
                
                nodes.push({
                    id: clusterId,
                    label: clusterId,
                    title: `Cluster: ${clusterId}\nConcepts: ${conceptsStr}\nClick to explore internal relationships`,
                    color: '#4A90E2',
                    size: 25 + (conceptsStr.split(',').length * 2),
                    font: { color: 'white' }
                });
            });
            
            // Add inter-cluster edges
            interClusterEdges.forEach(([source, target, edgeData]) => {
                const confidence = edgeData.confidence || 1.0;
                const weight = edgeData.weight || 0;
                
                if (confidence >= minConfidence) {
                    edges.push({
                        from: source,
                        to: target,
                        color: weight > 0 ? '#28A745' : '#DC3545',
                        width: Math.abs(weight) * 3 + 1,
                        title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                        dashes: false
                    });
                }
            });
            
            return { nodes: nodes, edges: edges };
        }
        
        function getClusterDetailData(clusterId) {
            const nodes = [];
            const edges = [];
            
            // Add concept nodes for this cluster
            if (clusterConcepts[clusterId]) {
                clusterConcepts[clusterId].forEach(([conceptId, data]) => {
                    nodes.push({
                        id: conceptId,
                        label: conceptId,
                        title: `Concept: ${conceptId}\nFrom cluster: ${clusterId}`,
                        color: '#FF9500',
                        size: 20,
                        font: { color: 'white' }
                    });
                });
            }
            
            // Add intra-cluster edges
            if (clusterEdges[clusterId]) {
                clusterEdges[clusterId].forEach(([source, target, edgeData]) => {
                    const confidence = edgeData.confidence || 1.0;
                    const weight = edgeData.weight || 0;
                    
                    if (confidence >= minConfidence) {
                        edges.push({
                            from: source,
                            to: target,
                            color: weight > 0 ? '#28A745' : '#DC3545',
                            width: Math.abs(weight) * 3 + 1,
                            title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                            dashes: true
                        });
                    }
                });
            }
            
            return { nodes: nodes, edges: edges };
        }
        
        function showClusterView() {
            currentView = 'clusters';
            currentCluster = null;
            const data = getClusterViewData();
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'none';
            document.getElementById('current-view').textContent = 'Cluster Overview';
        }
        
        function showClusterDetail(clusterId) {
            currentView = 'concepts';
            currentCluster = clusterId;
            const data = getClusterDetailData(clusterId);
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'inline-block';
            document.getElementById('current-view').textContent = `Inside Cluster: ${clusterId}`;
        }
        
        function updateConfidenceFilter(value) {
            minConfidence = parseFloat(value);
            document.getElementById('confidence-value').textContent = value;
            
            // Refresh current view
            if (currentView === 'clusters') {
                showClusterView();
            } else {
                showClusterDetail(currentCluster);
            }
        }
        
        // Initialize the network when page loads
        window.onload = function() {
            initNetwork();
        };
    </script>
</body>
</html>
