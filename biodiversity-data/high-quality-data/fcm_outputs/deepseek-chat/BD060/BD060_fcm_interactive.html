
<!DOCTYPE html>
<html>
<head>
    <title>Hierarchical FCM Visualization</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 0; 
            padding: 20px;
            background: #f5f5f5;
        }
        
        #network { 
            width: 100%; 
            height: 600px; 
            border: 2px solid #ccc; 
            background: white;
            border-radius: 8px;
        }
        
        #controls {
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn {
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        
        .btn-primary { background: #4A90E2; color: white; }
        .btn-primary:hover { background: #357ABD; }
        
        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #545b62; }
        
        #current-view {
            font-weight: bold;
            color: #333;
            margin-left: 10px;
        }
        
        #legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-size: 12px;
            max-width: 200px;
        }
        
        .legend-item {
            margin: 5px 0;
            display: flex;
            align-items: center;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .legend-line {
            width: 20px;
            height: 2px;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <h1>Fuzzy Cognitive Map - Hierarchical View</h1>
    
    <div id="controls">
        <button class="btn btn-secondary" id="back-btn" onclick="showClusterView()" style="display: none;">
            ‚Üê Back to Clusters
        </button>
        <span id="current-view">Cluster Overview</span>
        <div style="float: right;">
            <label>Min Confidence: </label>
            <input type="range" id="confidence-slider" min="0" max="1" step="0.1" value="0.3" 
                   onchange="updateConfidenceFilter(this.value)">
            <span id="confidence-value">0.3</span>
        </div>
    </div>
    
    <div id="network"></div>
    
    <div id="legend">
        <h4>Legend</h4>
        <div class="legend-item">
            <div class="legend-color" style="background: #4A90E2;"></div>
            <span>Clusters</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #FF9500;"></div>
            <span>Concepts</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #28A745;"></div>
            <span>Positive relationship</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #DC3545;"></div>
            <span>Negative relationship</span>
        </div>
        <div style="margin-top: 10px; font-style: italic; color: #666;">
            Click clusters to explore internal concepts
        </div>
    </div>

    <script>
        // Embedded data
        const clusterData = {"Marsh Habitat Dynamics": {"concepts": "resource users, social ecological complexity, system dynamics, habitat support, marsh creation, land acquisition, rare endangered species, community ecology, endangered species, restoration projects, farmland abandonment, invasive species control, management activities, dredge oil, population genetics, population genetic diversity, genetic diversity, planting, legacy effects, sparrows, stembor, salinity, social ecological, dredging, physiological stressors, conservation concern, environmental stressors, food web support, stakeholder engagement, mental map, monitoring, habitat forming species, runneling, noaa, species biodiversity, stress response, easements, core relationships, incentive structures, drainage, outcompeting, restoration planting, selective force, accretion, biodiversity, food-web supporting species, chesapeake bay, disturbance, forest mortality, ecosystem engineers, harmful organisms, research institutions, plant communities, institutional structures, agricultural land, stress, rare species, burning, private property, efficacy, adaptive potential, dredge oil creation, property rights, crop mortality, biodiversity preservation, ghost forests, stressor, flooding, future habitat, regulatory power, management interventions, tnc, social dynamics, knowledge capturing, native species, epa, mental modeler, phragmites, farmlands, landscape scale, food web, salish sea, learning processes, primary producers, prescribed burning, restoration management, population sizes, conservation, dredge approaches, ecological definition, ecosystem services, gulf of mexico, invasive species, ditching, global change drivers, management, new jersey coast, climate change stressors, physiological stress, restoration, sea level rise, habitat loss, drainage approaches, seed mixes, herbicide", "concept_list": ["resource users", "social ecological complexity", "system dynamics", "habitat support", "marsh creation", "land acquisition", "rare endangered species", "community ecology", "endangered species", "restoration projects", "farmland abandonment", "invasive species control", "management activities", "dredge oil", "population genetics", "population genetic diversity", "genetic diversity", "planting", "legacy effects", "sparrows", "stembor", "salinity", "social ecological", "dredging", "physiological stressors", "conservation concern", "environmental stressors", "food web support", "stakeholder engagement", "mental map", "monitoring", "habitat forming species", "runneling", "noaa", "species biodiversity", "stress response", "easements", "core relationships", "incentive structures", "drainage", "outcompeting", "restoration planting", "selective force", "accretion", "biodiversity", "food-web supporting species", "chesapeake bay", "disturbance", "forest mortality", "ecosystem engineers", "harmful organisms", "research institutions", "plant communities", "institutional structures", "agricultural land", "stress", "rare species", "burning", "private property", "efficacy", "adaptive potential", "dredge oil creation", "property rights", "crop mortality", "biodiversity preservation", "ghost forests", "stressor", "flooding", "future habitat", "regulatory power", "management interventions", "tnc", "social dynamics", "knowledge capturing", "native species", "epa", "mental modeler", "phragmites", "farmlands", "landscape scale", "food web", "salish sea", "learning processes", "primary producers", "prescribed burning", "restoration management", "population sizes", "conservation", "dredge approaches", "ecological definition", "ecosystem services", "gulf of mexico", "invasive species", "ditching", "global change drivers", "management", "new jersey coast", "climate change stressors", "physiological stress", "restoration", "sea level rise", "habitat loss", "drainage approaches", "seed mixes", "herbicide"], "type": "cluster", "node_size": 330, "label": "Marsh Habitat Dynamics"}, "Coastal Ecosystem Restoration": {"concepts": "microtidal marshes, water quality management, ponding, marsh habitat loss, salt marsh birds, eutrophication, marsh water, sinuous creek, coastal community, wetland ecology, marsh loss, droughts, tidal marsh loss, barrier ponding, marsh interior, marine resource management, intertidal zones, low marsh, uplands, marsh habitat, marsh accretion, coastal ecosystems, tidal marshes, coastal management, hydrology, marsh migration corridors, tidal creek extension, interior ponding, high marsh", "concept_list": ["microtidal marshes", "water quality management", "ponding", "marsh habitat loss", "salt marsh birds", "eutrophication", "marsh water", "sinuous creek", "coastal community", "wetland ecology", "marsh loss", "droughts", "tidal marsh loss", "barrier ponding", "marsh interior", "marine resource management", "intertidal zones", "low marsh", "uplands", "marsh habitat", "marsh accretion", "coastal ecosystems", "tidal marshes", "coastal management", "hydrology", "marsh migration corridors", "tidal creek extension", "interior ponding", "high marsh"], "type": "cluster", "node_size": 102, "label": "Coastal Ecosystem Restoration"}};
        const conceptData = {"resource users": {"concepts": "resource users", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "resource users"}, "social ecological complexity": {"concepts": "social ecological complexity", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "social ecological complexity"}, "system dynamics": {"concepts": "system dynamics", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "system dynamics"}, "habitat support": {"concepts": "habitat support", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "habitat support"}, "marsh creation": {"concepts": "marsh creation", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "marsh creation"}, "land acquisition": {"concepts": "land acquisition", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "land acquisition"}, "rare endangered species": {"concepts": "rare endangered species", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "rare endangered species"}, "community ecology": {"concepts": "community ecology", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "community ecology"}, "endangered species": {"concepts": "endangered species", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "endangered species"}, "restoration projects": {"concepts": "restoration projects", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "restoration projects"}, "farmland abandonment": {"concepts": "farmland abandonment", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "farmland abandonment"}, "invasive species control": {"concepts": "invasive species control", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "invasive species control"}, "management activities": {"concepts": "management activities", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "management activities"}, "dredge oil": {"concepts": "dredge oil", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "dredge oil"}, "population genetics": {"concepts": "population genetics", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "population genetics"}, "population genetic diversity": {"concepts": "population genetic diversity", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "population genetic diversity"}, "genetic diversity": {"concepts": "genetic diversity", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "genetic diversity"}, "planting": {"concepts": "planting", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "planting"}, "legacy effects": {"concepts": "legacy effects", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "legacy effects"}, "sparrows": {"concepts": "sparrows", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "sparrows"}, "stembor": {"concepts": "stembor", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "stembor"}, "salinity": {"concepts": "salinity", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "salinity"}, "social ecological": {"concepts": "social ecological", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "social ecological"}, "dredging": {"concepts": "dredging", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "dredging"}, "physiological stressors": {"concepts": "physiological stressors", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "physiological stressors"}, "conservation concern": {"concepts": "conservation concern", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "conservation concern"}, "environmental stressors": {"concepts": "environmental stressors", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "environmental stressors"}, "food web support": {"concepts": "food web support", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "food web support"}, "stakeholder engagement": {"concepts": "stakeholder engagement", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "stakeholder engagement"}, "mental map": {"concepts": "mental map", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "mental map"}, "monitoring": {"concepts": "monitoring", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "monitoring"}, "habitat forming species": {"concepts": "habitat forming species", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "habitat forming species"}, "runneling": {"concepts": "runneling", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "runneling"}, "noaa": {"concepts": "noaa", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "noaa"}, "species biodiversity": {"concepts": "species biodiversity", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "species biodiversity"}, "stress response": {"concepts": "stress response", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "stress response"}, "easements": {"concepts": "easements", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "easements"}, "core relationships": {"concepts": "core relationships", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "core relationships"}, "incentive structures": {"concepts": "incentive structures", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "incentive structures"}, "drainage": {"concepts": "drainage", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "drainage"}, "outcompeting": {"concepts": "outcompeting", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "outcompeting"}, "restoration planting": {"concepts": "restoration planting", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "restoration planting"}, "selective force": {"concepts": "selective force", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "selective force"}, "accretion": {"concepts": "accretion", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "accretion"}, "biodiversity": {"concepts": "biodiversity", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "biodiversity"}, "food-web supporting species": {"concepts": "food-web supporting species", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "food-web supporting species"}, "chesapeake bay": {"concepts": "chesapeake bay", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "chesapeake bay"}, "disturbance": {"concepts": "disturbance", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "disturbance"}, "forest mortality": {"concepts": "forest mortality", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "forest mortality"}, "ecosystem engineers": {"concepts": "ecosystem engineers", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "ecosystem engineers"}, "harmful organisms": {"concepts": "harmful organisms", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "harmful organisms"}, "research institutions": {"concepts": "research institutions", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "research institutions"}, "plant communities": {"concepts": "plant communities", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "plant communities"}, "institutional structures": {"concepts": "institutional structures", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "institutional structures"}, "agricultural land": {"concepts": "agricultural land", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "agricultural land"}, "stress": {"concepts": "stress", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "stress"}, "rare species": {"concepts": "rare species", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "rare species"}, "burning": {"concepts": "burning", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "burning"}, "private property": {"concepts": "private property", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "private property"}, "efficacy": {"concepts": "efficacy", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "efficacy"}, "adaptive potential": {"concepts": "adaptive potential", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "adaptive potential"}, "dredge oil creation": {"concepts": "dredge oil creation", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "dredge oil creation"}, "property rights": {"concepts": "property rights", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "property rights"}, "crop mortality": {"concepts": "crop mortality", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "crop mortality"}, "biodiversity preservation": {"concepts": "biodiversity preservation", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "biodiversity preservation"}, "ghost forests": {"concepts": "ghost forests", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "ghost forests"}, "stressor": {"concepts": "stressor", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "stressor"}, "flooding": {"concepts": "flooding", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "flooding"}, "future habitat": {"concepts": "future habitat", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "future habitat"}, "regulatory power": {"concepts": "regulatory power", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "regulatory power"}, "management interventions": {"concepts": "management interventions", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "management interventions"}, "tnc": {"concepts": "tnc", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "tnc"}, "social dynamics": {"concepts": "social dynamics", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "social dynamics"}, "knowledge capturing": {"concepts": "knowledge capturing", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "knowledge capturing"}, "native species": {"concepts": "native species", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "native species"}, "epa": {"concepts": "epa", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "epa"}, "mental modeler": {"concepts": "mental modeler", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "mental modeler"}, "phragmites": {"concepts": "phragmites", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "phragmites"}, "farmlands": {"concepts": "farmlands", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "farmlands"}, "landscape scale": {"concepts": "landscape scale", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "landscape scale"}, "food web": {"concepts": "food web", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "food web"}, "salish sea": {"concepts": "salish sea", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "salish sea"}, "learning processes": {"concepts": "learning processes", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "learning processes"}, "primary producers": {"concepts": "primary producers", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "primary producers"}, "prescribed burning": {"concepts": "prescribed burning", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "prescribed burning"}, "restoration management": {"concepts": "restoration management", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "restoration management"}, "population sizes": {"concepts": "population sizes", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "population sizes"}, "conservation": {"concepts": "conservation", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "conservation"}, "dredge approaches": {"concepts": "dredge approaches", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "dredge approaches"}, "ecological definition": {"concepts": "ecological definition", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "ecological definition"}, "ecosystem services": {"concepts": "ecosystem services", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "ecosystem services"}, "gulf of mexico": {"concepts": "gulf of mexico", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "gulf of mexico"}, "invasive species": {"concepts": "invasive species", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "invasive species"}, "ditching": {"concepts": "ditching", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "ditching"}, "global change drivers": {"concepts": "global change drivers", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "global change drivers"}, "management": {"concepts": "management", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "management"}, "new jersey coast": {"concepts": "new jersey coast", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "new jersey coast"}, "climate change stressors": {"concepts": "climate change stressors", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "climate change stressors"}, "physiological stress": {"concepts": "physiological stress", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "physiological stress"}, "restoration": {"concepts": "restoration", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "restoration"}, "sea level rise": {"concepts": "sea level rise", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "sea level rise"}, "habitat loss": {"concepts": "habitat loss", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "habitat loss"}, "drainage approaches": {"concepts": "drainage approaches", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "drainage approaches"}, "seed mixes": {"concepts": "seed mixes", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "seed mixes"}, "herbicide": {"concepts": "herbicide", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "herbicide"}, "microtidal marshes": {"concepts": "microtidal marshes", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "microtidal marshes"}, "water quality management": {"concepts": "water quality management", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "water quality management"}, "ponding": {"concepts": "ponding", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "ponding"}, "marsh habitat loss": {"concepts": "marsh habitat loss", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "marsh habitat loss"}, "salt marsh birds": {"concepts": "salt marsh birds", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "salt marsh birds"}, "eutrophication": {"concepts": "eutrophication", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "eutrophication"}, "marsh water": {"concepts": "marsh water", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "marsh water"}, "sinuous creek": {"concepts": "sinuous creek", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "sinuous creek"}, "coastal community": {"concepts": "coastal community", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "coastal community"}, "wetland ecology": {"concepts": "wetland ecology", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "wetland ecology"}, "marsh loss": {"concepts": "marsh loss", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "marsh loss"}, "droughts": {"concepts": "droughts", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "droughts"}, "tidal marsh loss": {"concepts": "tidal marsh loss", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "tidal marsh loss"}, "barrier ponding": {"concepts": "barrier ponding", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "barrier ponding"}, "marsh interior": {"concepts": "marsh interior", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "marsh interior"}, "marine resource management": {"concepts": "marine resource management", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "marine resource management"}, "intertidal zones": {"concepts": "intertidal zones", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "intertidal zones"}, "low marsh": {"concepts": "low marsh", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "low marsh"}, "uplands": {"concepts": "uplands", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "uplands"}, "marsh habitat": {"concepts": "marsh habitat", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "marsh habitat"}, "marsh accretion": {"concepts": "marsh accretion", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "marsh accretion"}, "coastal ecosystems": {"concepts": "coastal ecosystems", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "coastal ecosystems"}, "tidal marshes": {"concepts": "tidal marshes", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "tidal marshes"}, "coastal management": {"concepts": "coastal management", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "coastal management"}, "hydrology": {"concepts": "hydrology", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "hydrology"}, "marsh migration corridors": {"concepts": "marsh migration corridors", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "marsh migration corridors"}, "tidal creek extension": {"concepts": "tidal creek extension", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "tidal creek extension"}, "interior ponding": {"concepts": "interior ponding", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "interior ponding"}, "high marsh": {"concepts": "high marsh", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "high marsh"}};
        const interClusterEdges = [["Marsh Habitat Dynamics", "Coastal Ecosystem Restoration", {"weight": 1.0, "confidence": 0.9166666666666666, "type": "inter_cluster", "style": "solid"}], ["Coastal Ecosystem Restoration", "Marsh Habitat Dynamics", {"weight": -0.3333333333333333, "confidence": 0.9, "type": "inter_cluster", "style": "solid"}]];
        const clusterConcepts = {"Marsh Habitat Dynamics": [["resource users", {"concepts": "resource users", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "resource users"}], ["social ecological complexity", {"concepts": "social ecological complexity", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "social ecological complexity"}], ["system dynamics", {"concepts": "system dynamics", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "system dynamics"}], ["habitat support", {"concepts": "habitat support", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "habitat support"}], ["marsh creation", {"concepts": "marsh creation", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "marsh creation"}], ["land acquisition", {"concepts": "land acquisition", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "land acquisition"}], ["rare endangered species", {"concepts": "rare endangered species", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "rare endangered species"}], ["community ecology", {"concepts": "community ecology", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "community ecology"}], ["endangered species", {"concepts": "endangered species", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "endangered species"}], ["restoration projects", {"concepts": "restoration projects", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "restoration projects"}], ["farmland abandonment", {"concepts": "farmland abandonment", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "farmland abandonment"}], ["invasive species control", {"concepts": "invasive species control", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "invasive species control"}], ["management activities", {"concepts": "management activities", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "management activities"}], ["dredge oil", {"concepts": "dredge oil", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "dredge oil"}], ["population genetics", {"concepts": "population genetics", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "population genetics"}], ["population genetic diversity", {"concepts": "population genetic diversity", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "population genetic diversity"}], ["genetic diversity", {"concepts": "genetic diversity", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "genetic diversity"}], ["planting", {"concepts": "planting", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "planting"}], ["legacy effects", {"concepts": "legacy effects", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "legacy effects"}], ["sparrows", {"concepts": "sparrows", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "sparrows"}], ["stembor", {"concepts": "stembor", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "stembor"}], ["salinity", {"concepts": "salinity", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "salinity"}], ["social ecological", {"concepts": "social ecological", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "social ecological"}], ["dredging", {"concepts": "dredging", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "dredging"}], ["physiological stressors", {"concepts": "physiological stressors", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "physiological stressors"}], ["conservation concern", {"concepts": "conservation concern", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "conservation concern"}], ["environmental stressors", {"concepts": "environmental stressors", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "environmental stressors"}], ["food web support", {"concepts": "food web support", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "food web support"}], ["stakeholder engagement", {"concepts": "stakeholder engagement", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "stakeholder engagement"}], ["mental map", {"concepts": "mental map", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "mental map"}], ["monitoring", {"concepts": "monitoring", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "monitoring"}], ["habitat forming species", {"concepts": "habitat forming species", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "habitat forming species"}], ["runneling", {"concepts": "runneling", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "runneling"}], ["noaa", {"concepts": "noaa", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "noaa"}], ["species biodiversity", {"concepts": "species biodiversity", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "species biodiversity"}], ["stress response", {"concepts": "stress response", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "stress response"}], ["easements", {"concepts": "easements", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "easements"}], ["core relationships", {"concepts": "core relationships", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "core relationships"}], ["incentive structures", {"concepts": "incentive structures", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "incentive structures"}], ["drainage", {"concepts": "drainage", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "drainage"}], ["outcompeting", {"concepts": "outcompeting", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "outcompeting"}], ["restoration planting", {"concepts": "restoration planting", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "restoration planting"}], ["selective force", {"concepts": "selective force", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "selective force"}], ["accretion", {"concepts": "accretion", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "accretion"}], ["biodiversity", {"concepts": "biodiversity", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "biodiversity"}], ["food-web supporting species", {"concepts": "food-web supporting species", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "food-web supporting species"}], ["chesapeake bay", {"concepts": "chesapeake bay", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "chesapeake bay"}], ["disturbance", {"concepts": "disturbance", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "disturbance"}], ["forest mortality", {"concepts": "forest mortality", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "forest mortality"}], ["ecosystem engineers", {"concepts": "ecosystem engineers", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "ecosystem engineers"}], ["harmful organisms", {"concepts": "harmful organisms", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "harmful organisms"}], ["research institutions", {"concepts": "research institutions", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "research institutions"}], ["plant communities", {"concepts": "plant communities", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "plant communities"}], ["institutional structures", {"concepts": "institutional structures", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "institutional structures"}], ["agricultural land", {"concepts": "agricultural land", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "agricultural land"}], ["stress", {"concepts": "stress", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "stress"}], ["rare species", {"concepts": "rare species", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "rare species"}], ["burning", {"concepts": "burning", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "burning"}], ["private property", {"concepts": "private property", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "private property"}], ["efficacy", {"concepts": "efficacy", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "efficacy"}], ["adaptive potential", {"concepts": "adaptive potential", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "adaptive potential"}], ["dredge oil creation", {"concepts": "dredge oil creation", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "dredge oil creation"}], ["property rights", {"concepts": "property rights", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "property rights"}], ["crop mortality", {"concepts": "crop mortality", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "crop mortality"}], ["biodiversity preservation", {"concepts": "biodiversity preservation", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "biodiversity preservation"}], ["ghost forests", {"concepts": "ghost forests", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "ghost forests"}], ["stressor", {"concepts": "stressor", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "stressor"}], ["flooding", {"concepts": "flooding", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "flooding"}], ["future habitat", {"concepts": "future habitat", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "future habitat"}], ["regulatory power", {"concepts": "regulatory power", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "regulatory power"}], ["management interventions", {"concepts": "management interventions", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "management interventions"}], ["tnc", {"concepts": "tnc", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "tnc"}], ["social dynamics", {"concepts": "social dynamics", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "social dynamics"}], ["knowledge capturing", {"concepts": "knowledge capturing", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "knowledge capturing"}], ["native species", {"concepts": "native species", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "native species"}], ["epa", {"concepts": "epa", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "epa"}], ["mental modeler", {"concepts": "mental modeler", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "mental modeler"}], ["phragmites", {"concepts": "phragmites", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "phragmites"}], ["farmlands", {"concepts": "farmlands", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "farmlands"}], ["landscape scale", {"concepts": "landscape scale", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "landscape scale"}], ["food web", {"concepts": "food web", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "food web"}], ["salish sea", {"concepts": "salish sea", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "salish sea"}], ["learning processes", {"concepts": "learning processes", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "learning processes"}], ["primary producers", {"concepts": "primary producers", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "primary producers"}], ["prescribed burning", {"concepts": "prescribed burning", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "prescribed burning"}], ["restoration management", {"concepts": "restoration management", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "restoration management"}], ["population sizes", {"concepts": "population sizes", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "population sizes"}], ["conservation", {"concepts": "conservation", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "conservation"}], ["dredge approaches", {"concepts": "dredge approaches", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "dredge approaches"}], ["ecological definition", {"concepts": "ecological definition", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "ecological definition"}], ["ecosystem services", {"concepts": "ecosystem services", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "ecosystem services"}], ["gulf of mexico", {"concepts": "gulf of mexico", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "gulf of mexico"}], ["invasive species", {"concepts": "invasive species", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "invasive species"}], ["ditching", {"concepts": "ditching", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "ditching"}], ["global change drivers", {"concepts": "global change drivers", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "global change drivers"}], ["management", {"concepts": "management", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "management"}], ["new jersey coast", {"concepts": "new jersey coast", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "new jersey coast"}], ["climate change stressors", {"concepts": "climate change stressors", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "climate change stressors"}], ["physiological stress", {"concepts": "physiological stress", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "physiological stress"}], ["restoration", {"concepts": "restoration", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "restoration"}], ["sea level rise", {"concepts": "sea level rise", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "sea level rise"}], ["habitat loss", {"concepts": "habitat loss", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "habitat loss"}], ["drainage approaches", {"concepts": "drainage approaches", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "drainage approaches"}], ["seed mixes", {"concepts": "seed mixes", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "seed mixes"}], ["herbicide", {"concepts": "herbicide", "type": "concept", "cluster": "Marsh Habitat Dynamics", "node_size": 10, "label": "herbicide"}]], "Coastal Ecosystem Restoration": [["microtidal marshes", {"concepts": "microtidal marshes", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "microtidal marshes"}], ["water quality management", {"concepts": "water quality management", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "water quality management"}], ["ponding", {"concepts": "ponding", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "ponding"}], ["marsh habitat loss", {"concepts": "marsh habitat loss", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "marsh habitat loss"}], ["salt marsh birds", {"concepts": "salt marsh birds", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "salt marsh birds"}], ["eutrophication", {"concepts": "eutrophication", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "eutrophication"}], ["marsh water", {"concepts": "marsh water", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "marsh water"}], ["sinuous creek", {"concepts": "sinuous creek", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "sinuous creek"}], ["coastal community", {"concepts": "coastal community", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "coastal community"}], ["wetland ecology", {"concepts": "wetland ecology", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "wetland ecology"}], ["marsh loss", {"concepts": "marsh loss", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "marsh loss"}], ["droughts", {"concepts": "droughts", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "droughts"}], ["tidal marsh loss", {"concepts": "tidal marsh loss", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "tidal marsh loss"}], ["barrier ponding", {"concepts": "barrier ponding", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "barrier ponding"}], ["marsh interior", {"concepts": "marsh interior", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "marsh interior"}], ["marine resource management", {"concepts": "marine resource management", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "marine resource management"}], ["intertidal zones", {"concepts": "intertidal zones", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "intertidal zones"}], ["low marsh", {"concepts": "low marsh", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "low marsh"}], ["uplands", {"concepts": "uplands", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "uplands"}], ["marsh habitat", {"concepts": "marsh habitat", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "marsh habitat"}], ["marsh accretion", {"concepts": "marsh accretion", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "marsh accretion"}], ["coastal ecosystems", {"concepts": "coastal ecosystems", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "coastal ecosystems"}], ["tidal marshes", {"concepts": "tidal marshes", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "tidal marshes"}], ["coastal management", {"concepts": "coastal management", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "coastal management"}], ["hydrology", {"concepts": "hydrology", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "hydrology"}], ["marsh migration corridors", {"concepts": "marsh migration corridors", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "marsh migration corridors"}], ["tidal creek extension", {"concepts": "tidal creek extension", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "tidal creek extension"}], ["interior ponding", {"concepts": "interior ponding", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "interior ponding"}], ["high marsh", {"concepts": "high marsh", "type": "concept", "cluster": "Coastal Ecosystem Restoration", "node_size": 10, "label": "high marsh"}]]};
        const clusterEdges = {"Marsh Habitat Dynamics": [], "Coastal Ecosystem Restoration": []};
        
        let network;
        let currentView = 'clusters';
        let currentCluster = null;
        let minConfidence = 0.3;
        
        // Network options
        const options = {
            nodes: {
                font: { color: 'white', size: 14 },
                borderWidth: 2,
                shadow: true
            },
            edges: {
                arrows: { to: { enabled: true, scaleFactor: 1.2 } },
                shadow: true,
                smooth: { type: 'continuous' }
            },
            physics: {
                stabilization: { iterations: 100 },
                barnesHut: {
                    gravitationalConstant: -8000,
                    springConstant: 0.001,
                    springLength: 200
                }
            },
            interaction: {
                hover: true,
                selectConnectedEdges: false
            }
        };
        
        function initNetwork() {
            const container = document.getElementById('network');
            const data = getClusterViewData();
            network = new vis.Network(container, data, options);
            
            // Handle cluster clicks for drill-down
            network.on("click", function(params) {
                if (params.nodes.length > 0 && currentView === 'clusters') {
                    const clickedNode = params.nodes[0];
                    if (clusterConcepts[clickedNode]) {
                        showClusterDetail(clickedNode);
                    }
                }
            });
        }
        
        function getClusterViewData() {
            const nodes = [];
            const edges = [];
            
            // Add cluster nodes
            Object.entries(clusterData).forEach(([clusterId, data]) => {
                const concepts = data.concepts || [];
                const conceptsStr = Array.isArray(concepts) ? concepts.join(', ') : concepts;
                
                nodes.push({
                    id: clusterId,
                    label: clusterId,
                    title: `Cluster: ${clusterId}\nConcepts: ${conceptsStr}\nClick to explore internal relationships`,
                    color: '#4A90E2',
                    size: 25 + (conceptsStr.split(',').length * 2),
                    font: { color: 'white' }
                });
            });
            
            // Add inter-cluster edges
            interClusterEdges.forEach(([source, target, edgeData]) => {
                const confidence = edgeData.confidence || 1.0;
                const weight = edgeData.weight || 0;
                
                if (confidence >= minConfidence) {
                    edges.push({
                        from: source,
                        to: target,
                        color: weight > 0 ? '#28A745' : '#DC3545',
                        width: Math.abs(weight) * 3 + 1,
                        title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                        dashes: false
                    });
                }
            });
            
            return { nodes: nodes, edges: edges };
        }
        
        function getClusterDetailData(clusterId) {
            const nodes = [];
            const edges = [];
            
            // Add concept nodes for this cluster
            if (clusterConcepts[clusterId]) {
                clusterConcepts[clusterId].forEach(([conceptId, data]) => {
                    nodes.push({
                        id: conceptId,
                        label: conceptId,
                        title: `Concept: ${conceptId}\nFrom cluster: ${clusterId}`,
                        color: '#FF9500',
                        size: 20,
                        font: { color: 'white' }
                    });
                });
            }
            
            // Add intra-cluster edges
            if (clusterEdges[clusterId]) {
                clusterEdges[clusterId].forEach(([source, target, edgeData]) => {
                    const confidence = edgeData.confidence || 1.0;
                    const weight = edgeData.weight || 0;
                    
                    if (confidence >= minConfidence) {
                        edges.push({
                            from: source,
                            to: target,
                            color: weight > 0 ? '#28A745' : '#DC3545',
                            width: Math.abs(weight) * 3 + 1,
                            title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                            dashes: true
                        });
                    }
                });
            }
            
            return { nodes: nodes, edges: edges };
        }
        
        function showClusterView() {
            currentView = 'clusters';
            currentCluster = null;
            const data = getClusterViewData();
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'none';
            document.getElementById('current-view').textContent = 'Cluster Overview';
        }
        
        function showClusterDetail(clusterId) {
            currentView = 'concepts';
            currentCluster = clusterId;
            const data = getClusterDetailData(clusterId);
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'inline-block';
            document.getElementById('current-view').textContent = `Inside Cluster: ${clusterId}`;
        }
        
        function updateConfidenceFilter(value) {
            minConfidence = parseFloat(value);
            document.getElementById('confidence-value').textContent = value;
            
            // Refresh current view
            if (currentView === 'clusters') {
                showClusterView();
            } else {
                showClusterDetail(currentCluster);
            }
        }
        
        // Initialize the network when page loads
        window.onload = function() {
            initNetwork();
        };
    </script>
</body>
</html>
