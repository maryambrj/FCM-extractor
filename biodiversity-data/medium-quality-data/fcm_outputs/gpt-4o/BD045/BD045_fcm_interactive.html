
<!DOCTYPE html>
<html>
<head>
    <title>Hierarchical FCM Visualization</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 0; 
            padding: 20px;
            background: #f5f5f5;
        }
        
        #network { 
            width: 100%; 
            height: 600px; 
            border: 2px solid #ccc; 
            background: white;
            border-radius: 8px;
        }
        
        #controls {
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn {
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        
        .btn-primary { background: #4A90E2; color: white; }
        .btn-primary:hover { background: #357ABD; }
        
        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #545b62; }
        
        #current-view {
            font-weight: bold;
            color: #333;
            margin-left: 10px;
        }
        
        #legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-size: 12px;
            max-width: 200px;
        }
        
        .legend-item {
            margin: 5px 0;
            display: flex;
            align-items: center;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .legend-line {
            width: 20px;
            height: 2px;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <h1>Fuzzy Cognitive Map - Hierarchical View</h1>
    
    <div id="controls">
        <button class="btn btn-secondary" id="back-btn" onclick="showClusterView()" style="display: none;">
            ‚Üê Back to Clusters
        </button>
        <span id="current-view">Cluster Overview</span>
        <div style="float: right;">
            <label>Min Confidence: </label>
            <input type="range" id="confidence-slider" min="0" max="1" step="0.1" value="0.3" 
                   onchange="updateConfidenceFilter(this.value)">
            <span id="confidence-value">0.3</span>
        </div>
    </div>
    
    <div id="network"></div>
    
    <div id="legend">
        <h4>Legend</h4>
        <div class="legend-item">
            <div class="legend-color" style="background: #4A90E2;"></div>
            <span>Clusters</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #FF9500;"></div>
            <span>Concepts</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #28A745;"></div>
            <span>Positive relationship</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #DC3545;"></div>
            <span>Negative relationship</span>
        </div>
        <div style="margin-top: 10px; font-style: italic; color: #666;">
            Click clusters to explore internal concepts
        </div>
    </div>

    <script>
        // Embedded data
        const clusterData = {"human consumption": {"concepts": "human consumption", "concept_list": ["human consumption"], "type": "cluster", "node_size": 18, "label": "human consumption"}, "Species Biodiversity": {"concepts": "chesapeake oysters, oyster reefs, marine recreation, water quality, oysters, marine resource management, corals, marine resources division, marine ecosystems division, harmful algal blooms, oyster harvests", "concept_list": ["chesapeake oysters", "oyster reefs", "marine recreation", "water quality", "oysters", "marine resource management", "corals", "marine resources division", "marine ecosystems division", "harmful algal blooms", "oyster harvests"], "type": "cluster", "node_size": 48, "label": "Species Biodiversity"}, "Fisheries Management": {"concepts": "biodiversity, protected species, trophic level species, charismatic species, top level predators, human recreation, endangered species, key food web supporting species, non-charismatic species, species of conservation concern, single species management, trophic pyramid, target species, biodiversity indices, fisher folks, harmful organisms, diversity of species, invader species, food species, intermediate species, species indices, mid-level secondary predators, food web", "concept_list": ["biodiversity", "protected species", "trophic level species", "charismatic species", "top level predators", "human recreation", "endangered species", "key food web supporting species", "non-charismatic species", "species of conservation concern", "single species management", "trophic pyramid", "target species", "biodiversity indices", "fisher folks", "harmful organisms", "diversity of species", "invader species", "food species", "intermediate species", "species indices", "mid-level secondary predators", "food web"], "type": "cluster", "node_size": 84, "label": "Fisheries Management"}, "Ecosystem Modeling": {"concepts": "ecosystem based fisheries management, atlantic marine fisheries commission, sustainable fisheries git, fisheries management, fisheries, noaa fisheries, chesapeake river fisheries commission, mid-atlantic fisheries council", "concept_list": ["ecosystem based fisheries management", "atlantic marine fisheries commission", "sustainable fisheries git", "fisheries management", "fisheries", "noaa fisheries", "chesapeake river fisheries commission", "mid-atlantic fisheries council"], "type": "cluster", "node_size": 39, "label": "Ecosystem Modeling"}, "Conservation Stakeholders": {"concepts": "ecosystem modeling, ecosystem function, ecosystem based management, ecological models, ecosystem modeling coordinator, ecosystem services, ecosystem resilience, national spatial scales, ecosystem management, ecosystem modeler, mangroves, sustainable ecosystem", "concept_list": ["ecosystem modeling", "ecosystem function", "ecosystem based management", "ecological models", "ecosystem modeling coordinator", "ecosystem services", "ecosystem resilience", "national spatial scales", "ecosystem management", "ecosystem modeler", "mangroves", "sustainable ecosystem"], "type": "cluster", "node_size": 51, "label": "Conservation Stakeholders"}, "Marine Resources": {"concepts": "quantitative, cca, overharvesting, workshop, councils, amy frietag, maryland dnr, tom ihdi, noaa chesapeake office, management decisions, annapolis, megan melligan pearson, emmett duffy, conservation, gulf rehabilitation, workshop recruitment, mental modeler, manuscript, agencies, policy management, stakeholder groups, steven gray, maryland watermen association, economic value, microplastics, feedback loop, maryland watermen, tradeoffs, national systematics lab, chesapeake conservation association, linn fagely, society, preservation, protected resources, gulf of mexico, chesapeake bay, management agencies, stakeholders, dnr, noaa, pure science, management, resource users", "concept_list": ["quantitative", "cca", "overharvesting", "workshop", "councils", "amy frietag", "maryland dnr", "tom ihdi", "noaa chesapeake office", "management decisions", "annapolis", "megan melligan pearson", "emmett duffy", "conservation", "gulf rehabilitation", "workshop recruitment", "mental modeler", "manuscript", "agencies", "policy management", "stakeholder groups", "steven gray", "maryland watermen association", "economic value", "microplastics", "feedback loop", "maryland watermen", "tradeoffs", "national systematics lab", "chesapeake conservation association", "linn fagely", "society", "preservation", "protected resources", "gulf of mexico", "chesapeake bay", "management agencies", "stakeholders", "dnr", "noaa", "pure science", "management", "resource users"], "type": "cluster", "node_size": 144, "label": "Marine Resources"}, "Environmental Threats": {"concepts": "pollution, habitat destruction, climate change", "concept_list": ["pollution", "habitat destruction", "climate change"], "type": "cluster", "node_size": 24, "label": "Environmental Threats"}, "Sustainable Projects": {"concepts": "sustainability, salish sea, climate projects", "concept_list": ["sustainability", "salish sea", "climate projects"], "type": "cluster", "node_size": 24, "label": "Sustainable Projects"}, "Core Stressors": {"concepts": "stressor, stressors, core stressors", "concept_list": ["stressor", "stressors", "core stressors"], "type": "cluster", "node_size": 24, "label": "Core Stressors"}, "Chesapeake Funders": {"concepts": "chesapeake network funders, chesapeake funders network", "concept_list": ["chesapeake network funders", "chesapeake funders network"], "type": "cluster", "node_size": 21, "label": "Chesapeake Funders"}, "Key Species": {"concepts": "habitat forming species, human consumption species", "concept_list": ["habitat forming species", "human consumption species"], "type": "cluster", "node_size": 21, "label": "Key Species"}, "Marine Conservation": {"concepts": "virginia marine resource commission, chesapeake bay foundation", "concept_list": ["virginia marine resource commission", "chesapeake bay foundation"], "type": "cluster", "node_size": 21, "label": "Marine Conservation"}, "Research Institutions": {"concepts": "university of south alabama, smithsonian environmental research center", "concept_list": ["university of south alabama", "smithsonian environmental research center"], "type": "cluster", "node_size": 21, "label": "Research Institutions"}, "Environmental Organizations": {"concepts": "environmental ngos, chesapeake bay foundation", "concept_list": ["environmental ngos", "chesapeake bay foundation"], "type": "cluster", "node_size": 21, "label": "Environmental Organizations"}, "Science Policy Analysis": {"concepts": "office of science and technology, scenario analysis", "concept_list": ["office of science and technology", "scenario analysis"], "type": "cluster", "node_size": 21, "label": "Science Policy Analysis"}};
        const conceptData = {"chesapeake oysters": {"concepts": "chesapeake oysters", "type": "concept", "cluster": "Species Biodiversity", "node_size": 10, "label": "chesapeake oysters"}, "oyster reefs": {"concepts": "oyster reefs", "type": "concept", "cluster": "Species Biodiversity", "node_size": 10, "label": "oyster reefs"}, "marine recreation": {"concepts": "marine recreation", "type": "concept", "cluster": "Species Biodiversity", "node_size": 10, "label": "marine recreation"}, "water quality": {"concepts": "water quality", "type": "concept", "cluster": "Species Biodiversity", "node_size": 10, "label": "water quality"}, "oysters": {"concepts": "oysters", "type": "concept", "cluster": "Species Biodiversity", "node_size": 10, "label": "oysters"}, "marine resource management": {"concepts": "marine resource management", "type": "concept", "cluster": "Species Biodiversity", "node_size": 10, "label": "marine resource management"}, "corals": {"concepts": "corals", "type": "concept", "cluster": "Species Biodiversity", "node_size": 10, "label": "corals"}, "marine resources division": {"concepts": "marine resources division", "type": "concept", "cluster": "Species Biodiversity", "node_size": 10, "label": "marine resources division"}, "marine ecosystems division": {"concepts": "marine ecosystems division", "type": "concept", "cluster": "Species Biodiversity", "node_size": 10, "label": "marine ecosystems division"}, "harmful algal blooms": {"concepts": "harmful algal blooms", "type": "concept", "cluster": "Species Biodiversity", "node_size": 10, "label": "harmful algal blooms"}, "oyster harvests": {"concepts": "oyster harvests", "type": "concept", "cluster": "Species Biodiversity", "node_size": 10, "label": "oyster harvests"}, "biodiversity": {"concepts": "biodiversity", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "biodiversity"}, "protected species": {"concepts": "protected species", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "protected species"}, "trophic level species": {"concepts": "trophic level species", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "trophic level species"}, "charismatic species": {"concepts": "charismatic species", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "charismatic species"}, "top level predators": {"concepts": "top level predators", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "top level predators"}, "human recreation": {"concepts": "human recreation", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "human recreation"}, "endangered species": {"concepts": "endangered species", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "endangered species"}, "key food web supporting species": {"concepts": "key food web supporting species", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "key food web supporting species"}, "non-charismatic species": {"concepts": "non-charismatic species", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "non-charismatic species"}, "species of conservation concern": {"concepts": "species of conservation concern", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "species of conservation concern"}, "single species management": {"concepts": "single species management", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "single species management"}, "trophic pyramid": {"concepts": "trophic pyramid", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "trophic pyramid"}, "target species": {"concepts": "target species", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "target species"}, "biodiversity indices": {"concepts": "biodiversity indices", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "biodiversity indices"}, "fisher folks": {"concepts": "fisher folks", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fisher folks"}, "harmful organisms": {"concepts": "harmful organisms", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "harmful organisms"}, "diversity of species": {"concepts": "diversity of species", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "diversity of species"}, "invader species": {"concepts": "invader species", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "invader species"}, "food species": {"concepts": "food species", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "food species"}, "intermediate species": {"concepts": "intermediate species", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "intermediate species"}, "species indices": {"concepts": "species indices", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "species indices"}, "mid-level secondary predators": {"concepts": "mid-level secondary predators", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "mid-level secondary predators"}, "food web": {"concepts": "food web", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "food web"}, "ecosystem based fisheries management": {"concepts": "ecosystem based fisheries management", "type": "concept", "cluster": "Ecosystem Modeling", "node_size": 10, "label": "ecosystem based fisheries management"}, "atlantic marine fisheries commission": {"concepts": "atlantic marine fisheries commission", "type": "concept", "cluster": "Ecosystem Modeling", "node_size": 10, "label": "atlantic marine fisheries commission"}, "sustainable fisheries git": {"concepts": "sustainable fisheries git", "type": "concept", "cluster": "Ecosystem Modeling", "node_size": 10, "label": "sustainable fisheries git"}, "fisheries management": {"concepts": "fisheries management", "type": "concept", "cluster": "Ecosystem Modeling", "node_size": 10, "label": "fisheries management"}, "fisheries": {"concepts": "fisheries", "type": "concept", "cluster": "Ecosystem Modeling", "node_size": 10, "label": "fisheries"}, "noaa fisheries": {"concepts": "noaa fisheries", "type": "concept", "cluster": "Ecosystem Modeling", "node_size": 10, "label": "noaa fisheries"}, "chesapeake river fisheries commission": {"concepts": "chesapeake river fisheries commission", "type": "concept", "cluster": "Ecosystem Modeling", "node_size": 10, "label": "chesapeake river fisheries commission"}, "mid-atlantic fisheries council": {"concepts": "mid-atlantic fisheries council", "type": "concept", "cluster": "Ecosystem Modeling", "node_size": 10, "label": "mid-atlantic fisheries council"}, "ecosystem modeling": {"concepts": "ecosystem modeling", "type": "concept", "cluster": "Conservation Stakeholders", "node_size": 10, "label": "ecosystem modeling"}, "ecosystem function": {"concepts": "ecosystem function", "type": "concept", "cluster": "Conservation Stakeholders", "node_size": 10, "label": "ecosystem function"}, "ecosystem based management": {"concepts": "ecosystem based management", "type": "concept", "cluster": "Conservation Stakeholders", "node_size": 10, "label": "ecosystem based management"}, "ecological models": {"concepts": "ecological models", "type": "concept", "cluster": "Conservation Stakeholders", "node_size": 10, "label": "ecological models"}, "ecosystem modeling coordinator": {"concepts": "ecosystem modeling coordinator", "type": "concept", "cluster": "Conservation Stakeholders", "node_size": 10, "label": "ecosystem modeling coordinator"}, "ecosystem services": {"concepts": "ecosystem services", "type": "concept", "cluster": "Conservation Stakeholders", "node_size": 10, "label": "ecosystem services"}, "ecosystem resilience": {"concepts": "ecosystem resilience", "type": "concept", "cluster": "Conservation Stakeholders", "node_size": 10, "label": "ecosystem resilience"}, "national spatial scales": {"concepts": "national spatial scales", "type": "concept", "cluster": "Conservation Stakeholders", "node_size": 10, "label": "national spatial scales"}, "ecosystem management": {"concepts": "ecosystem management", "type": "concept", "cluster": "Conservation Stakeholders", "node_size": 10, "label": "ecosystem management"}, "ecosystem modeler": {"concepts": "ecosystem modeler", "type": "concept", "cluster": "Conservation Stakeholders", "node_size": 10, "label": "ecosystem modeler"}, "mangroves": {"concepts": "mangroves", "type": "concept", "cluster": "Conservation Stakeholders", "node_size": 10, "label": "mangroves"}, "sustainable ecosystem": {"concepts": "sustainable ecosystem", "type": "concept", "cluster": "Conservation Stakeholders", "node_size": 10, "label": "sustainable ecosystem"}, "quantitative": {"concepts": "quantitative", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "quantitative"}, "cca": {"concepts": "cca", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "cca"}, "overharvesting": {"concepts": "overharvesting", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "overharvesting"}, "workshop": {"concepts": "workshop", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "workshop"}, "councils": {"concepts": "councils", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "councils"}, "amy frietag": {"concepts": "amy frietag", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "amy frietag"}, "maryland dnr": {"concepts": "maryland dnr", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "maryland dnr"}, "tom ihdi": {"concepts": "tom ihdi", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "tom ihdi"}, "noaa chesapeake office": {"concepts": "noaa chesapeake office", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "noaa chesapeake office"}, "management decisions": {"concepts": "management decisions", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "management decisions"}, "annapolis": {"concepts": "annapolis", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "annapolis"}, "megan melligan pearson": {"concepts": "megan melligan pearson", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "megan melligan pearson"}, "emmett duffy": {"concepts": "emmett duffy", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "emmett duffy"}, "conservation": {"concepts": "conservation", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "conservation"}, "gulf rehabilitation": {"concepts": "gulf rehabilitation", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "gulf rehabilitation"}, "workshop recruitment": {"concepts": "workshop recruitment", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "workshop recruitment"}, "mental modeler": {"concepts": "mental modeler", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "mental modeler"}, "manuscript": {"concepts": "manuscript", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "manuscript"}, "agencies": {"concepts": "agencies", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "agencies"}, "policy management": {"concepts": "policy management", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "policy management"}, "stakeholder groups": {"concepts": "stakeholder groups", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "stakeholder groups"}, "steven gray": {"concepts": "steven gray", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "steven gray"}, "maryland watermen association": {"concepts": "maryland watermen association", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "maryland watermen association"}, "economic value": {"concepts": "economic value", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "economic value"}, "microplastics": {"concepts": "microplastics", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "microplastics"}, "feedback loop": {"concepts": "feedback loop", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "feedback loop"}, "maryland watermen": {"concepts": "maryland watermen", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "maryland watermen"}, "tradeoffs": {"concepts": "tradeoffs", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "tradeoffs"}, "national systematics lab": {"concepts": "national systematics lab", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "national systematics lab"}, "chesapeake conservation association": {"concepts": "chesapeake conservation association", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "chesapeake conservation association"}, "linn fagely": {"concepts": "linn fagely", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "linn fagely"}, "society": {"concepts": "society", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "society"}, "preservation": {"concepts": "preservation", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "preservation"}, "protected resources": {"concepts": "protected resources", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "protected resources"}, "gulf of mexico": {"concepts": "gulf of mexico", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "gulf of mexico"}, "chesapeake bay": {"concepts": "chesapeake bay", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "chesapeake bay"}, "management agencies": {"concepts": "management agencies", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "management agencies"}, "stakeholders": {"concepts": "stakeholders", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "stakeholders"}, "dnr": {"concepts": "dnr", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "dnr"}, "noaa": {"concepts": "noaa", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "noaa"}, "pure science": {"concepts": "pure science", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "pure science"}, "management": {"concepts": "management", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "management"}, "resource users": {"concepts": "resource users", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "resource users"}, "pollution": {"concepts": "pollution", "type": "concept", "cluster": "Environmental Threats", "node_size": 10, "label": "pollution"}, "habitat destruction": {"concepts": "habitat destruction", "type": "concept", "cluster": "Environmental Threats", "node_size": 10, "label": "habitat destruction"}, "climate change": {"concepts": "climate change", "type": "concept", "cluster": "Environmental Threats", "node_size": 10, "label": "climate change"}, "sustainability": {"concepts": "sustainability", "type": "concept", "cluster": "Sustainable Projects", "node_size": 10, "label": "sustainability"}, "salish sea": {"concepts": "salish sea", "type": "concept", "cluster": "Sustainable Projects", "node_size": 10, "label": "salish sea"}, "climate projects": {"concepts": "climate projects", "type": "concept", "cluster": "Sustainable Projects", "node_size": 10, "label": "climate projects"}, "stressor": {"concepts": "stressor", "type": "concept", "cluster": "Core Stressors", "node_size": 10, "label": "stressor"}, "stressors": {"concepts": "stressors", "type": "concept", "cluster": "Core Stressors", "node_size": 10, "label": "stressors"}, "core stressors": {"concepts": "core stressors", "type": "concept", "cluster": "Core Stressors", "node_size": 10, "label": "core stressors"}, "chesapeake network funders": {"concepts": "chesapeake network funders", "type": "concept", "cluster": "Chesapeake Funders", "node_size": 10, "label": "chesapeake network funders"}, "chesapeake funders network": {"concepts": "chesapeake funders network", "type": "concept", "cluster": "Chesapeake Funders", "node_size": 10, "label": "chesapeake funders network"}, "habitat forming species": {"concepts": "habitat forming species", "type": "concept", "cluster": "Key Species", "node_size": 10, "label": "habitat forming species"}, "human consumption species": {"concepts": "human consumption species", "type": "concept", "cluster": "Key Species", "node_size": 10, "label": "human consumption species"}, "virginia marine resource commission": {"concepts": "virginia marine resource commission", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "virginia marine resource commission"}, "chesapeake bay foundation": {"concepts": "chesapeake bay foundation", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "chesapeake bay foundation"}, "university of south alabama": {"concepts": "university of south alabama", "type": "concept", "cluster": "Research Institutions", "node_size": 10, "label": "university of south alabama"}, "smithsonian environmental research center": {"concepts": "smithsonian environmental research center", "type": "concept", "cluster": "Research Institutions", "node_size": 10, "label": "smithsonian environmental research center"}, "environmental ngos": {"concepts": "environmental ngos", "type": "concept", "cluster": "Environmental Organizations", "node_size": 10, "label": "environmental ngos"}, "office of science and technology": {"concepts": "office of science and technology", "type": "concept", "cluster": "Science Policy Analysis", "node_size": 10, "label": "office of science and technology"}, "scenario analysis": {"concepts": "scenario analysis", "type": "concept", "cluster": "Science Policy Analysis", "node_size": 10, "label": "scenario analysis"}};
        const interClusterEdges = [["human consumption", "Environmental Threats", {"weight": -0.25, "confidence": 0.5874999999999999, "type": "inter_cluster", "style": "solid"}], ["human consumption", "Fisheries Management", {"weight": -0.2, "confidence": 0.45999999999999996, "type": "inter_cluster", "style": "solid"}], ["human consumption", "Environmental Organizations", {"weight": -1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["Species Biodiversity", "Core Stressors", {"weight": -0.4, "confidence": 0.6300000000000001, "type": "inter_cluster", "style": "solid"}], ["Species Biodiversity", "Chesapeake Funders", {"weight": 0.25, "confidence": 0.5375, "type": "inter_cluster", "style": "solid"}], ["Fisheries Management", "Marine Resources", {"weight": 0.6, "confidence": 0.74, "type": "inter_cluster", "style": "solid"}], ["Fisheries Management", "Chesapeake Funders", {"weight": 0.5, "confidence": 0.38749999999999996, "type": "inter_cluster", "style": "solid"}], ["Fisheries Management", "Marine Conservation", {"weight": 0.6666666666666666, "confidence": 0.48333333333333334, "type": "inter_cluster", "style": "solid"}], ["Fisheries Management", "Sustainable Projects", {"weight": 0.4, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Fisheries Management", "Ecosystem Modeling", {"weight": -1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Modeling", "Core Stressors", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["Conservation Stakeholders", "Species Biodiversity", {"weight": 0.2, "confidence": 0.78, "type": "inter_cluster", "style": "solid"}], ["Conservation Stakeholders", "Science Policy Analysis", {"weight": -0.25, "confidence": 0.575, "type": "inter_cluster", "style": "solid"}], ["Conservation Stakeholders", "Research Institutions", {"weight": 0.5, "confidence": 0.35, "type": "inter_cluster", "style": "solid"}], ["Environmental Threats", "Species Biodiversity", {"weight": -0.25, "confidence": 0.625, "type": "inter_cluster", "style": "solid"}], ["Environmental Threats", "Ecosystem Modeling", {"weight": -0.2, "confidence": 0.49000000000000005, "type": "inter_cluster", "style": "solid"}], ["Environmental Threats", "Key Species", {"weight": -0.25, "confidence": 0.5625, "type": "inter_cluster", "style": "solid"}], ["Environmental Threats", "Sustainable Projects", {"weight": -0.6, "confidence": 0.45, "type": "inter_cluster", "style": "solid"}], ["Environmental Threats", "Marine Conservation", {"weight": -0.6666666666666666, "confidence": 0.5499999999999999, "type": "inter_cluster", "style": "solid"}], ["Sustainable Projects", "Species Biodiversity", {"weight": 0.8, "confidence": 0.5800000000000001, "type": "inter_cluster", "style": "solid"}], ["Sustainable Projects", "Environmental Threats", {"weight": 0.25, "confidence": 0.5625, "type": "inter_cluster", "style": "solid"}], ["Core Stressors", "Ecosystem Modeling", {"weight": -0.2, "confidence": 0.4699999999999999, "type": "inter_cluster", "style": "solid"}], ["Core Stressors", "Marine Conservation", {"weight": -0.2, "confidence": 0.45, "type": "inter_cluster", "style": "solid"}], ["Chesapeake Funders", "Environmental Threats", {"weight": -0.2, "confidence": 0.42000000000000004, "type": "inter_cluster", "style": "solid"}], ["Chesapeake Funders", "Core Stressors", {"weight": -0.2, "confidence": 0.42000000000000004, "type": "inter_cluster", "style": "solid"}], ["Key Species", "human consumption", {"weight": 0.6, "confidence": 0.45, "type": "inter_cluster", "style": "solid"}], ["Key Species", "Species Biodiversity", {"weight": 0.5, "confidence": 0.375, "type": "inter_cluster", "style": "solid"}], ["Marine Conservation", "Species Biodiversity", {"weight": 0.3333333333333333, "confidence": 0.7666666666666666, "type": "inter_cluster", "style": "solid"}], ["Marine Conservation", "Conservation Stakeholders", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["Research Institutions", "Marine Resources", {"weight": 0.25, "confidence": 0.2, "type": "inter_cluster", "style": "solid"}], ["Environmental Organizations", "Conservation Stakeholders", {"weight": 0.4, "confidence": 0.58, "type": "inter_cluster", "style": "solid"}], ["Environmental Organizations", "Marine Resources", {"weight": 0.2, "confidence": 0.45999999999999996, "type": "inter_cluster", "style": "solid"}], ["Environmental Organizations", "Fisheries Management", {"weight": 0.6, "confidence": 0.47000000000000003, "type": "inter_cluster", "style": "solid"}], ["Environmental Organizations", "Ecosystem Modeling", {"weight": 0.4, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Environmental Organizations", "Research Institutions", {"weight": 0.5, "confidence": 0.375, "type": "inter_cluster", "style": "solid"}], ["Science Policy Analysis", "Environmental Threats", {"weight": -1.0, "confidence": 0.7749999999999999, "type": "inter_cluster", "style": "solid"}], ["Science Policy Analysis", "Sustainable Projects", {"weight": 0.25, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["Science Policy Analysis", "Conservation Stakeholders", {"weight": 0.4, "confidence": 0.32999999999999996, "type": "inter_cluster", "style": "solid"}], ["Science Policy Analysis", "Marine Resources", {"weight": 0.5, "confidence": 0.35, "type": "inter_cluster", "style": "solid"}]];
        const clusterConcepts = {"Species Biodiversity": [["chesapeake oysters", {"concepts": "chesapeake oysters", "type": "concept", "cluster": "Species Biodiversity", "node_size": 10, "label": "chesapeake oysters"}], ["oyster reefs", {"concepts": "oyster reefs", "type": "concept", "cluster": "Species Biodiversity", "node_size": 10, "label": "oyster reefs"}], ["marine recreation", {"concepts": "marine recreation", "type": "concept", "cluster": "Species Biodiversity", "node_size": 10, "label": "marine recreation"}], ["water quality", {"concepts": "water quality", "type": "concept", "cluster": "Species Biodiversity", "node_size": 10, "label": "water quality"}], ["oysters", {"concepts": "oysters", "type": "concept", "cluster": "Species Biodiversity", "node_size": 10, "label": "oysters"}], ["marine resource management", {"concepts": "marine resource management", "type": "concept", "cluster": "Species Biodiversity", "node_size": 10, "label": "marine resource management"}], ["corals", {"concepts": "corals", "type": "concept", "cluster": "Species Biodiversity", "node_size": 10, "label": "corals"}], ["marine resources division", {"concepts": "marine resources division", "type": "concept", "cluster": "Species Biodiversity", "node_size": 10, "label": "marine resources division"}], ["marine ecosystems division", {"concepts": "marine ecosystems division", "type": "concept", "cluster": "Species Biodiversity", "node_size": 10, "label": "marine ecosystems division"}], ["harmful algal blooms", {"concepts": "harmful algal blooms", "type": "concept", "cluster": "Species Biodiversity", "node_size": 10, "label": "harmful algal blooms"}], ["oyster harvests", {"concepts": "oyster harvests", "type": "concept", "cluster": "Species Biodiversity", "node_size": 10, "label": "oyster harvests"}]], "Fisheries Management": [["biodiversity", {"concepts": "biodiversity", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "biodiversity"}], ["protected species", {"concepts": "protected species", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "protected species"}], ["trophic level species", {"concepts": "trophic level species", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "trophic level species"}], ["charismatic species", {"concepts": "charismatic species", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "charismatic species"}], ["top level predators", {"concepts": "top level predators", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "top level predators"}], ["human recreation", {"concepts": "human recreation", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "human recreation"}], ["endangered species", {"concepts": "endangered species", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "endangered species"}], ["key food web supporting species", {"concepts": "key food web supporting species", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "key food web supporting species"}], ["non-charismatic species", {"concepts": "non-charismatic species", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "non-charismatic species"}], ["species of conservation concern", {"concepts": "species of conservation concern", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "species of conservation concern"}], ["single species management", {"concepts": "single species management", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "single species management"}], ["trophic pyramid", {"concepts": "trophic pyramid", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "trophic pyramid"}], ["target species", {"concepts": "target species", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "target species"}], ["biodiversity indices", {"concepts": "biodiversity indices", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "biodiversity indices"}], ["fisher folks", {"concepts": "fisher folks", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fisher folks"}], ["harmful organisms", {"concepts": "harmful organisms", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "harmful organisms"}], ["diversity of species", {"concepts": "diversity of species", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "diversity of species"}], ["invader species", {"concepts": "invader species", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "invader species"}], ["food species", {"concepts": "food species", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "food species"}], ["intermediate species", {"concepts": "intermediate species", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "intermediate species"}], ["species indices", {"concepts": "species indices", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "species indices"}], ["mid-level secondary predators", {"concepts": "mid-level secondary predators", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "mid-level secondary predators"}], ["food web", {"concepts": "food web", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "food web"}]], "Ecosystem Modeling": [["ecosystem based fisheries management", {"concepts": "ecosystem based fisheries management", "type": "concept", "cluster": "Ecosystem Modeling", "node_size": 10, "label": "ecosystem based fisheries management"}], ["atlantic marine fisheries commission", {"concepts": "atlantic marine fisheries commission", "type": "concept", "cluster": "Ecosystem Modeling", "node_size": 10, "label": "atlantic marine fisheries commission"}], ["sustainable fisheries git", {"concepts": "sustainable fisheries git", "type": "concept", "cluster": "Ecosystem Modeling", "node_size": 10, "label": "sustainable fisheries git"}], ["fisheries management", {"concepts": "fisheries management", "type": "concept", "cluster": "Ecosystem Modeling", "node_size": 10, "label": "fisheries management"}], ["fisheries", {"concepts": "fisheries", "type": "concept", "cluster": "Ecosystem Modeling", "node_size": 10, "label": "fisheries"}], ["noaa fisheries", {"concepts": "noaa fisheries", "type": "concept", "cluster": "Ecosystem Modeling", "node_size": 10, "label": "noaa fisheries"}], ["chesapeake river fisheries commission", {"concepts": "chesapeake river fisheries commission", "type": "concept", "cluster": "Ecosystem Modeling", "node_size": 10, "label": "chesapeake river fisheries commission"}], ["mid-atlantic fisheries council", {"concepts": "mid-atlantic fisheries council", "type": "concept", "cluster": "Ecosystem Modeling", "node_size": 10, "label": "mid-atlantic fisheries council"}]], "Conservation Stakeholders": [["ecosystem modeling", {"concepts": "ecosystem modeling", "type": "concept", "cluster": "Conservation Stakeholders", "node_size": 10, "label": "ecosystem modeling"}], ["ecosystem function", {"concepts": "ecosystem function", "type": "concept", "cluster": "Conservation Stakeholders", "node_size": 10, "label": "ecosystem function"}], ["ecosystem based management", {"concepts": "ecosystem based management", "type": "concept", "cluster": "Conservation Stakeholders", "node_size": 10, "label": "ecosystem based management"}], ["ecological models", {"concepts": "ecological models", "type": "concept", "cluster": "Conservation Stakeholders", "node_size": 10, "label": "ecological models"}], ["ecosystem modeling coordinator", {"concepts": "ecosystem modeling coordinator", "type": "concept", "cluster": "Conservation Stakeholders", "node_size": 10, "label": "ecosystem modeling coordinator"}], ["ecosystem services", {"concepts": "ecosystem services", "type": "concept", "cluster": "Conservation Stakeholders", "node_size": 10, "label": "ecosystem services"}], ["ecosystem resilience", {"concepts": "ecosystem resilience", "type": "concept", "cluster": "Conservation Stakeholders", "node_size": 10, "label": "ecosystem resilience"}], ["national spatial scales", {"concepts": "national spatial scales", "type": "concept", "cluster": "Conservation Stakeholders", "node_size": 10, "label": "national spatial scales"}], ["ecosystem management", {"concepts": "ecosystem management", "type": "concept", "cluster": "Conservation Stakeholders", "node_size": 10, "label": "ecosystem management"}], ["ecosystem modeler", {"concepts": "ecosystem modeler", "type": "concept", "cluster": "Conservation Stakeholders", "node_size": 10, "label": "ecosystem modeler"}], ["mangroves", {"concepts": "mangroves", "type": "concept", "cluster": "Conservation Stakeholders", "node_size": 10, "label": "mangroves"}], ["sustainable ecosystem", {"concepts": "sustainable ecosystem", "type": "concept", "cluster": "Conservation Stakeholders", "node_size": 10, "label": "sustainable ecosystem"}]], "Marine Resources": [["quantitative", {"concepts": "quantitative", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "quantitative"}], ["cca", {"concepts": "cca", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "cca"}], ["overharvesting", {"concepts": "overharvesting", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "overharvesting"}], ["workshop", {"concepts": "workshop", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "workshop"}], ["councils", {"concepts": "councils", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "councils"}], ["amy frietag", {"concepts": "amy frietag", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "amy frietag"}], ["maryland dnr", {"concepts": "maryland dnr", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "maryland dnr"}], ["tom ihdi", {"concepts": "tom ihdi", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "tom ihdi"}], ["noaa chesapeake office", {"concepts": "noaa chesapeake office", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "noaa chesapeake office"}], ["management decisions", {"concepts": "management decisions", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "management decisions"}], ["annapolis", {"concepts": "annapolis", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "annapolis"}], ["megan melligan pearson", {"concepts": "megan melligan pearson", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "megan melligan pearson"}], ["emmett duffy", {"concepts": "emmett duffy", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "emmett duffy"}], ["conservation", {"concepts": "conservation", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "conservation"}], ["gulf rehabilitation", {"concepts": "gulf rehabilitation", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "gulf rehabilitation"}], ["workshop recruitment", {"concepts": "workshop recruitment", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "workshop recruitment"}], ["mental modeler", {"concepts": "mental modeler", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "mental modeler"}], ["manuscript", {"concepts": "manuscript", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "manuscript"}], ["agencies", {"concepts": "agencies", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "agencies"}], ["policy management", {"concepts": "policy management", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "policy management"}], ["stakeholder groups", {"concepts": "stakeholder groups", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "stakeholder groups"}], ["steven gray", {"concepts": "steven gray", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "steven gray"}], ["maryland watermen association", {"concepts": "maryland watermen association", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "maryland watermen association"}], ["economic value", {"concepts": "economic value", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "economic value"}], ["microplastics", {"concepts": "microplastics", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "microplastics"}], ["feedback loop", {"concepts": "feedback loop", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "feedback loop"}], ["maryland watermen", {"concepts": "maryland watermen", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "maryland watermen"}], ["tradeoffs", {"concepts": "tradeoffs", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "tradeoffs"}], ["national systematics lab", {"concepts": "national systematics lab", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "national systematics lab"}], ["chesapeake conservation association", {"concepts": "chesapeake conservation association", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "chesapeake conservation association"}], ["linn fagely", {"concepts": "linn fagely", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "linn fagely"}], ["society", {"concepts": "society", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "society"}], ["preservation", {"concepts": "preservation", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "preservation"}], ["protected resources", {"concepts": "protected resources", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "protected resources"}], ["gulf of mexico", {"concepts": "gulf of mexico", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "gulf of mexico"}], ["chesapeake bay", {"concepts": "chesapeake bay", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "chesapeake bay"}], ["management agencies", {"concepts": "management agencies", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "management agencies"}], ["stakeholders", {"concepts": "stakeholders", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "stakeholders"}], ["dnr", {"concepts": "dnr", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "dnr"}], ["noaa", {"concepts": "noaa", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "noaa"}], ["pure science", {"concepts": "pure science", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "pure science"}], ["management", {"concepts": "management", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "management"}], ["resource users", {"concepts": "resource users", "type": "concept", "cluster": "Marine Resources", "node_size": 10, "label": "resource users"}]], "Environmental Threats": [["pollution", {"concepts": "pollution", "type": "concept", "cluster": "Environmental Threats", "node_size": 10, "label": "pollution"}], ["habitat destruction", {"concepts": "habitat destruction", "type": "concept", "cluster": "Environmental Threats", "node_size": 10, "label": "habitat destruction"}], ["climate change", {"concepts": "climate change", "type": "concept", "cluster": "Environmental Threats", "node_size": 10, "label": "climate change"}]], "Sustainable Projects": [["sustainability", {"concepts": "sustainability", "type": "concept", "cluster": "Sustainable Projects", "node_size": 10, "label": "sustainability"}], ["salish sea", {"concepts": "salish sea", "type": "concept", "cluster": "Sustainable Projects", "node_size": 10, "label": "salish sea"}], ["climate projects", {"concepts": "climate projects", "type": "concept", "cluster": "Sustainable Projects", "node_size": 10, "label": "climate projects"}]], "Core Stressors": [["stressor", {"concepts": "stressor", "type": "concept", "cluster": "Core Stressors", "node_size": 10, "label": "stressor"}], ["stressors", {"concepts": "stressors", "type": "concept", "cluster": "Core Stressors", "node_size": 10, "label": "stressors"}], ["core stressors", {"concepts": "core stressors", "type": "concept", "cluster": "Core Stressors", "node_size": 10, "label": "core stressors"}]], "Chesapeake Funders": [["chesapeake network funders", {"concepts": "chesapeake network funders", "type": "concept", "cluster": "Chesapeake Funders", "node_size": 10, "label": "chesapeake network funders"}], ["chesapeake funders network", {"concepts": "chesapeake funders network", "type": "concept", "cluster": "Chesapeake Funders", "node_size": 10, "label": "chesapeake funders network"}]], "Key Species": [["habitat forming species", {"concepts": "habitat forming species", "type": "concept", "cluster": "Key Species", "node_size": 10, "label": "habitat forming species"}], ["human consumption species", {"concepts": "human consumption species", "type": "concept", "cluster": "Key Species", "node_size": 10, "label": "human consumption species"}]], "Marine Conservation": [["virginia marine resource commission", {"concepts": "virginia marine resource commission", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "virginia marine resource commission"}], ["chesapeake bay foundation", {"concepts": "chesapeake bay foundation", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "chesapeake bay foundation"}]], "Research Institutions": [["university of south alabama", {"concepts": "university of south alabama", "type": "concept", "cluster": "Research Institutions", "node_size": 10, "label": "university of south alabama"}], ["smithsonian environmental research center", {"concepts": "smithsonian environmental research center", "type": "concept", "cluster": "Research Institutions", "node_size": 10, "label": "smithsonian environmental research center"}]], "Environmental Organizations": [["environmental ngos", {"concepts": "environmental ngos", "type": "concept", "cluster": "Environmental Organizations", "node_size": 10, "label": "environmental ngos"}]], "Science Policy Analysis": [["office of science and technology", {"concepts": "office of science and technology", "type": "concept", "cluster": "Science Policy Analysis", "node_size": 10, "label": "office of science and technology"}], ["scenario analysis", {"concepts": "scenario analysis", "type": "concept", "cluster": "Science Policy Analysis", "node_size": 10, "label": "scenario analysis"}]]};
        const clusterEdges = {"Species Biodiversity": [], "Fisheries Management": [], "Ecosystem Modeling": [], "Conservation Stakeholders": [], "Marine Resources": [], "Environmental Threats": [], "Sustainable Projects": [], "Core Stressors": [], "Chesapeake Funders": [], "Key Species": [], "Marine Conservation": [], "Research Institutions": [], "Environmental Organizations": [], "Science Policy Analysis": []};
        
        let network;
        let currentView = 'clusters';
        let currentCluster = null;
        let minConfidence = 0.3;
        
        // Network options
        const options = {
            nodes: {
                font: { color: 'white', size: 14 },
                borderWidth: 2,
                shadow: true
            },
            edges: {
                arrows: { to: { enabled: true, scaleFactor: 1.2 } },
                shadow: true,
                smooth: { type: 'continuous' }
            },
            physics: {
                stabilization: { iterations: 100 },
                barnesHut: {
                    gravitationalConstant: -8000,
                    springConstant: 0.001,
                    springLength: 200
                }
            },
            interaction: {
                hover: true,
                selectConnectedEdges: false
            }
        };
        
        function initNetwork() {
            const container = document.getElementById('network');
            const data = getClusterViewData();
            network = new vis.Network(container, data, options);
            
            // Handle cluster clicks for drill-down
            network.on("click", function(params) {
                if (params.nodes.length > 0 && currentView === 'clusters') {
                    const clickedNode = params.nodes[0];
                    if (clusterConcepts[clickedNode]) {
                        showClusterDetail(clickedNode);
                    }
                }
            });
        }
        
        function getClusterViewData() {
            const nodes = [];
            const edges = [];
            
            // Add cluster nodes
            Object.entries(clusterData).forEach(([clusterId, data]) => {
                const concepts = data.concepts || [];
                const conceptsStr = Array.isArray(concepts) ? concepts.join(', ') : concepts;
                
                nodes.push({
                    id: clusterId,
                    label: clusterId,
                    title: `Cluster: ${clusterId}\nConcepts: ${conceptsStr}\nClick to explore internal relationships`,
                    color: '#4A90E2',
                    size: 25 + (conceptsStr.split(',').length * 2),
                    font: { color: 'white' }
                });
            });
            
            // Add inter-cluster edges
            interClusterEdges.forEach(([source, target, edgeData]) => {
                const confidence = edgeData.confidence || 1.0;
                const weight = edgeData.weight || 0;
                
                if (confidence >= minConfidence) {
                    edges.push({
                        from: source,
                        to: target,
                        color: weight > 0 ? '#28A745' : '#DC3545',
                        width: Math.abs(weight) * 3 + 1,
                        title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                        dashes: false
                    });
                }
            });
            
            return { nodes: nodes, edges: edges };
        }
        
        function getClusterDetailData(clusterId) {
            const nodes = [];
            const edges = [];
            
            // Add concept nodes for this cluster
            if (clusterConcepts[clusterId]) {
                clusterConcepts[clusterId].forEach(([conceptId, data]) => {
                    nodes.push({
                        id: conceptId,
                        label: conceptId,
                        title: `Concept: ${conceptId}\nFrom cluster: ${clusterId}`,
                        color: '#FF9500',
                        size: 20,
                        font: { color: 'white' }
                    });
                });
            }
            
            // Add intra-cluster edges
            if (clusterEdges[clusterId]) {
                clusterEdges[clusterId].forEach(([source, target, edgeData]) => {
                    const confidence = edgeData.confidence || 1.0;
                    const weight = edgeData.weight || 0;
                    
                    if (confidence >= minConfidence) {
                        edges.push({
                            from: source,
                            to: target,
                            color: weight > 0 ? '#28A745' : '#DC3545',
                            width: Math.abs(weight) * 3 + 1,
                            title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                            dashes: true
                        });
                    }
                });
            }
            
            return { nodes: nodes, edges: edges };
        }
        
        function showClusterView() {
            currentView = 'clusters';
            currentCluster = null;
            const data = getClusterViewData();
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'none';
            document.getElementById('current-view').textContent = 'Cluster Overview';
        }
        
        function showClusterDetail(clusterId) {
            currentView = 'concepts';
            currentCluster = clusterId;
            const data = getClusterDetailData(clusterId);
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'inline-block';
            document.getElementById('current-view').textContent = `Inside Cluster: ${clusterId}`;
        }
        
        function updateConfidenceFilter(value) {
            minConfidence = parseFloat(value);
            document.getElementById('confidence-value').textContent = value;
            
            // Refresh current view
            if (currentView === 'clusters') {
                showClusterView();
            } else {
                showClusterDetail(currentCluster);
            }
        }
        
        // Initialize the network when page loads
        window.onload = function() {
            initNetwork();
        };
    </script>
</body>
</html>
