
<!DOCTYPE html>
<html>
<head>
    <title>Hierarchical FCM Visualization</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 0; 
            padding: 20px;
            background: #f5f5f5;
        }
        
        #network { 
            width: 100%; 
            height: 600px; 
            border: 2px solid #ccc; 
            background: white;
            border-radius: 8px;
        }
        
        #controls {
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn {
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        
        .btn-primary { background: #4A90E2; color: white; }
        .btn-primary:hover { background: #357ABD; }
        
        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #545b62; }
        
        #current-view {
            font-weight: bold;
            color: #333;
            margin-left: 10px;
        }
        
        #legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-size: 12px;
            max-width: 200px;
        }
        
        .legend-item {
            margin: 5px 0;
            display: flex;
            align-items: center;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .legend-line {
            width: 20px;
            height: 2px;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <h1>Fuzzy Cognitive Map - Hierarchical View</h1>
    
    <div id="controls">
        <button class="btn btn-secondary" id="back-btn" onclick="showClusterView()" style="display: none;">
            ‚Üê Back to Clusters
        </button>
        <span id="current-view">Cluster Overview</span>
        <div style="float: right;">
            <label>Min Confidence: </label>
            <input type="range" id="confidence-slider" min="0" max="1" step="0.1" value="0.3" 
                   onchange="updateConfidenceFilter(this.value)">
            <span id="confidence-value">0.3</span>
        </div>
    </div>
    
    <div id="network"></div>
    
    <div id="legend">
        <h4>Legend</h4>
        <div class="legend-item">
            <div class="legend-color" style="background: #4A90E2;"></div>
            <span>Clusters</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #FF9500;"></div>
            <span>Concepts</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #28A745;"></div>
            <span>Positive relationship</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #DC3545;"></div>
            <span>Negative relationship</span>
        </div>
        <div style="margin-top: 10px; font-style: italic; color: #666;">
            Click clusters to explore internal concepts
        </div>
    </div>

    <script>
        // Embedded data
        const clusterData = {"wetland migration": {"concepts": "wetland migration, tidal wetland permitors, tidal wetland, tidal flooding, stormwater, saltwater intrusion", "concept_list": ["wetland migration", "tidal wetland permitors", "tidal wetland", "tidal flooding", "stormwater", "saltwater intrusion"], "type": "cluster", "node_size": 33, "label": "wetland migration"}, "storm events": {"concepts": "storm events", "concept_list": ["storm events"], "type": "cluster", "node_size": 18, "label": "storm events"}, "climate change": {"concepts": "climate change", "concept_list": ["climate change"], "type": "cluster", "node_size": 18, "label": "climate change"}, "community members": {"concepts": "community members", "concept_list": ["community members"], "type": "cluster", "node_size": 18, "label": "community members"}, "waterfront homeowners": {"concepts": "waterfront homeowners", "concept_list": ["waterfront homeowners"], "type": "cluster", "node_size": 18, "label": "waterfront homeowners"}, "local economy": {"concepts": "local economy", "concept_list": ["local economy"], "type": "cluster", "node_size": 18, "label": "local economy"}, "marine resources": {"concepts": "marine resources", "concept_list": ["marine resources"], "type": "cluster", "node_size": 18, "label": "marine resources"}, "fishermen": {"concepts": "fishermen", "concept_list": ["fishermen"], "type": "cluster", "node_size": 18, "label": "fishermen"}, "stressor": {"concepts": "stressor", "concept_list": ["stressor"], "type": "cluster", "node_size": 18, "label": "stressor"}, "resilience": {"concepts": "resilience", "concept_list": ["resilience"], "type": "cluster", "node_size": 18, "label": "resilience"}, "People & Equity": {"concepts": "management approaches, adaptive management, management structure, resource managers, technical person, restoration program, data management, core relationships, food web, restoration teams", "concept_list": ["management approaches", "adaptive management", "management structure", "resource managers", "technical person", "restoration program", "data management", "core relationships", "food web", "restoration teams"], "type": "cluster", "node_size": 45, "label": "People & Equity"}, "Agency Personnel": {"concepts": "communities, people, values, equity, equity work, stakeholders, practitioners, diversity", "concept_list": ["communities", "people", "values", "equity", "equity work", "stakeholders", "practitioners", "diversity"], "type": "cluster", "node_size": 39, "label": "Agency Personnel"}, "Bay Issues & Impacts": {"concepts": "director, resource users, dnr, grant specialists, government researchers, staff, finance, planners", "concept_list": ["director", "resource users", "dnr", "grant specialists", "government researchers", "staff", "finance", "planners"], "type": "cluster", "node_size": 39, "label": "Bay Issues & Impacts"}, "Research & Technology": {"concepts": "migration, public health, chesapeake bay program, chesapeake bay, critical area, erosion reduction, local dynamics, developed areas, erosion, virginia, nde, flooding, regulatory power, current concerns, maryland sea grant, priority areas", "concept_list": ["migration", "public health", "chesapeake bay program", "chesapeake bay", "critical area", "erosion reduction", "local dynamics", "developed areas", "erosion", "virginia", "nde", "flooding", "regulatory power", "current concerns", "maryland sea grant", "priority areas"], "type": "cluster", "node_size": 63, "label": "Research & Technology"}, "Management & Resources": {"concepts": "gis group, perspectives, tree cover, monitoring, research proposals, visual assessment, sav, academic researchers, permits, focus area, system dynamics, innovative technology, public access, wave energy, mental modeler, research, decision making, data background, robust system, system components", "concept_list": ["gis group", "perspectives", "tree cover", "monitoring", "research proposals", "visual assessment", "sav", "academic researchers", "permits", "focus area", "system dynamics", "innovative technology", "public access", "wave energy", "mental modeler", "research", "decision making", "data background", "robust system", "system components"], "type": "cluster", "node_size": 75, "label": "Management & Resources"}, "Conservation Permits": {"concepts": "conservation, permitors", "concept_list": ["conservation", "permitors"], "type": "cluster", "node_size": 21, "label": "Conservation Permits"}, "Water Quality Projects": {"concepts": "water quality projects, turbidity, water quality", "concept_list": ["water quality projects", "turbidity", "water quality"], "type": "cluster", "node_size": 24, "label": "Water Quality Projects"}, "Land-Water Interaction": {"concepts": "water temperature, impervious surface, agricultural lands, land water", "concept_list": ["water temperature", "impervious surface", "agricultural lands", "land water"], "type": "cluster", "node_size": 27, "label": "Land-Water Interaction"}, "[Conservation Permitting]": {"concepts": "ecosystem services, habitat, salinity, ecosystems, biodiversity", "concept_list": ["ecosystem services", "habitat", "salinity", "ecosystems", "biodiversity"], "type": "cluster", "node_size": 30, "label": "[Conservation Permitting]"}, "Coastal Resources": {"concepts": "sediment, watermen, fish, wildlife, buffer habitat, wildlife heritage service", "concept_list": ["sediment", "watermen", "fish", "wildlife", "buffer habitat", "wildlife heritage service"], "type": "cluster", "node_size": 33, "label": "Coastal Resources"}, "Outdoor Recreation & Carbon": {"concepts": "outdoor recreation, recreation, recreational benefits, carbon storage", "concept_list": ["outdoor recreation", "recreation", "recreational benefits", "carbon storage"], "type": "cluster", "node_size": 27, "label": "Outdoor Recreation & Carbon"}, "Species Conservation": {"concepts": "endangered species, conservation concern, native species", "concept_list": ["endangered species", "conservation concern", "native species"], "type": "cluster", "node_size": 24, "label": "Species Conservation"}, "Ecosystem Conservation": {"concepts": "invasive species, restoration goals, conservation practices, environmental management, species conservation", "concept_list": ["invasive species", "restoration goals", "conservation practices", "environmental management", "species conservation"], "type": "cluster", "node_size": 30, "label": "Ecosystem Conservation"}, "Coastal Resilience": {"concepts": "coastal resiliency, green infrastructure, infrastructure, sav beds, marsh migration, marshes, living shorelines, flood reduction, coastal protection", "concept_list": ["coastal resiliency", "green infrastructure", "infrastructure", "sav beds", "marsh migration", "marshes", "living shorelines", "flood reduction", "coastal protection"], "type": "cluster", "node_size": 42, "label": "Coastal Resilience"}, "Coastal Land Use": {"concepts": "land use, coastal management, coastal planners, coastal planning", "concept_list": ["land use", "coastal management", "coastal planners", "coastal planning"], "type": "cluster", "node_size": 27, "label": "Coastal Land Use"}, "Shoreline Analysis": {"concepts": "geospatial analysis, shoreline visits, adaptability, tourism industry, conceptual model, spatial data, shoreline dynamics", "concept_list": ["geospatial analysis", "shoreline visits", "adaptability", "tourism industry", "conceptual model", "spatial data", "shoreline dynamics"], "type": "cluster", "node_size": 36, "label": "Shoreline Analysis"}, "Rainfall Events": {"concepts": "rain events, precipitation", "concept_list": ["rain events", "precipitation"], "type": "cluster", "node_size": 21, "label": "Rainfall Events"}, "Environmental Changes": {"concepts": "air quality, sea level rise, precipitation changes, storm energy", "concept_list": ["air quality", "sea level rise", "precipitation changes", "storm energy"], "type": "cluster", "node_size": 27, "label": "Environmental Changes"}, "Local Community Planning": {"concepts": "community planning, local community, regional managers, local homeowners", "concept_list": ["community planning", "local community", "regional managers", "local homeowners"], "type": "cluster", "node_size": 27, "label": "Local Community Planning"}, "Fisheries Management": {"concepts": "fisheries regulations, fisheries populations", "concept_list": ["fisheries regulations", "fisheries populations"], "type": "cluster", "node_size": 21, "label": "Fisheries Management"}, "Oyster Fisheries": {"concepts": "oyster reefs, marine resource, oyster farmers, fisheries", "concept_list": ["oyster reefs", "marine resource", "oyster farmers", "fisheries"], "type": "cluster", "node_size": 27, "label": "Oyster Fisheries"}, "Community Resilience": {"concepts": "disease resilience, vulnerability assessment, negative impact, community resilience, positive effect", "concept_list": ["disease resilience", "vulnerability assessment", "negative impact", "community resilience", "positive effect"], "type": "cluster", "node_size": 30, "label": "Community Resilience"}};
        const conceptData = {"tidal wetland permitors": {"concepts": "tidal wetland permitors", "type": "concept", "cluster": "wetland migration", "node_size": 10, "label": "tidal wetland permitors"}, "tidal wetland": {"concepts": "tidal wetland", "type": "concept", "cluster": "wetland migration", "node_size": 10, "label": "tidal wetland"}, "tidal flooding": {"concepts": "tidal flooding", "type": "concept", "cluster": "wetland migration", "node_size": 10, "label": "tidal flooding"}, "stormwater": {"concepts": "stormwater", "type": "concept", "cluster": "wetland migration", "node_size": 10, "label": "stormwater"}, "saltwater intrusion": {"concepts": "saltwater intrusion", "type": "concept", "cluster": "wetland migration", "node_size": 10, "label": "saltwater intrusion"}, "management approaches": {"concepts": "management approaches", "type": "concept", "cluster": "People & Equity", "node_size": 10, "label": "management approaches"}, "adaptive management": {"concepts": "adaptive management", "type": "concept", "cluster": "People & Equity", "node_size": 10, "label": "adaptive management"}, "management structure": {"concepts": "management structure", "type": "concept", "cluster": "People & Equity", "node_size": 10, "label": "management structure"}, "resource managers": {"concepts": "resource managers", "type": "concept", "cluster": "People & Equity", "node_size": 10, "label": "resource managers"}, "technical person": {"concepts": "technical person", "type": "concept", "cluster": "People & Equity", "node_size": 10, "label": "technical person"}, "restoration program": {"concepts": "restoration program", "type": "concept", "cluster": "People & Equity", "node_size": 10, "label": "restoration program"}, "data management": {"concepts": "data management", "type": "concept", "cluster": "People & Equity", "node_size": 10, "label": "data management"}, "core relationships": {"concepts": "core relationships", "type": "concept", "cluster": "People & Equity", "node_size": 10, "label": "core relationships"}, "food web": {"concepts": "food web", "type": "concept", "cluster": "People & Equity", "node_size": 10, "label": "food web"}, "restoration teams": {"concepts": "restoration teams", "type": "concept", "cluster": "People & Equity", "node_size": 10, "label": "restoration teams"}, "communities": {"concepts": "communities", "type": "concept", "cluster": "Agency Personnel", "node_size": 10, "label": "communities"}, "people": {"concepts": "people", "type": "concept", "cluster": "Agency Personnel", "node_size": 10, "label": "people"}, "values": {"concepts": "values", "type": "concept", "cluster": "Agency Personnel", "node_size": 10, "label": "values"}, "equity": {"concepts": "equity", "type": "concept", "cluster": "Agency Personnel", "node_size": 10, "label": "equity"}, "equity work": {"concepts": "equity work", "type": "concept", "cluster": "Agency Personnel", "node_size": 10, "label": "equity work"}, "stakeholders": {"concepts": "stakeholders", "type": "concept", "cluster": "Agency Personnel", "node_size": 10, "label": "stakeholders"}, "practitioners": {"concepts": "practitioners", "type": "concept", "cluster": "Agency Personnel", "node_size": 10, "label": "practitioners"}, "diversity": {"concepts": "diversity", "type": "concept", "cluster": "Agency Personnel", "node_size": 10, "label": "diversity"}, "director": {"concepts": "director", "type": "concept", "cluster": "Bay Issues & Impacts", "node_size": 10, "label": "director"}, "resource users": {"concepts": "resource users", "type": "concept", "cluster": "Bay Issues & Impacts", "node_size": 10, "label": "resource users"}, "dnr": {"concepts": "dnr", "type": "concept", "cluster": "Bay Issues & Impacts", "node_size": 10, "label": "dnr"}, "grant specialists": {"concepts": "grant specialists", "type": "concept", "cluster": "Bay Issues & Impacts", "node_size": 10, "label": "grant specialists"}, "government researchers": {"concepts": "government researchers", "type": "concept", "cluster": "Bay Issues & Impacts", "node_size": 10, "label": "government researchers"}, "staff": {"concepts": "staff", "type": "concept", "cluster": "Bay Issues & Impacts", "node_size": 10, "label": "staff"}, "finance": {"concepts": "finance", "type": "concept", "cluster": "Bay Issues & Impacts", "node_size": 10, "label": "finance"}, "planners": {"concepts": "planners", "type": "concept", "cluster": "Bay Issues & Impacts", "node_size": 10, "label": "planners"}, "migration": {"concepts": "migration", "type": "concept", "cluster": "Research & Technology", "node_size": 10, "label": "migration"}, "public health": {"concepts": "public health", "type": "concept", "cluster": "Research & Technology", "node_size": 10, "label": "public health"}, "chesapeake bay program": {"concepts": "chesapeake bay program", "type": "concept", "cluster": "Research & Technology", "node_size": 10, "label": "chesapeake bay program"}, "chesapeake bay": {"concepts": "chesapeake bay", "type": "concept", "cluster": "Research & Technology", "node_size": 10, "label": "chesapeake bay"}, "critical area": {"concepts": "critical area", "type": "concept", "cluster": "Research & Technology", "node_size": 10, "label": "critical area"}, "erosion reduction": {"concepts": "erosion reduction", "type": "concept", "cluster": "Research & Technology", "node_size": 10, "label": "erosion reduction"}, "local dynamics": {"concepts": "local dynamics", "type": "concept", "cluster": "Research & Technology", "node_size": 10, "label": "local dynamics"}, "developed areas": {"concepts": "developed areas", "type": "concept", "cluster": "Research & Technology", "node_size": 10, "label": "developed areas"}, "erosion": {"concepts": "erosion", "type": "concept", "cluster": "Research & Technology", "node_size": 10, "label": "erosion"}, "virginia": {"concepts": "virginia", "type": "concept", "cluster": "Research & Technology", "node_size": 10, "label": "virginia"}, "nde": {"concepts": "nde", "type": "concept", "cluster": "Research & Technology", "node_size": 10, "label": "nde"}, "flooding": {"concepts": "flooding", "type": "concept", "cluster": "Research & Technology", "node_size": 10, "label": "flooding"}, "regulatory power": {"concepts": "regulatory power", "type": "concept", "cluster": "Research & Technology", "node_size": 10, "label": "regulatory power"}, "current concerns": {"concepts": "current concerns", "type": "concept", "cluster": "Research & Technology", "node_size": 10, "label": "current concerns"}, "maryland sea grant": {"concepts": "maryland sea grant", "type": "concept", "cluster": "Research & Technology", "node_size": 10, "label": "maryland sea grant"}, "priority areas": {"concepts": "priority areas", "type": "concept", "cluster": "Research & Technology", "node_size": 10, "label": "priority areas"}, "gis group": {"concepts": "gis group", "type": "concept", "cluster": "Management & Resources", "node_size": 10, "label": "gis group"}, "perspectives": {"concepts": "perspectives", "type": "concept", "cluster": "Management & Resources", "node_size": 10, "label": "perspectives"}, "tree cover": {"concepts": "tree cover", "type": "concept", "cluster": "Management & Resources", "node_size": 10, "label": "tree cover"}, "monitoring": {"concepts": "monitoring", "type": "concept", "cluster": "Management & Resources", "node_size": 10, "label": "monitoring"}, "research proposals": {"concepts": "research proposals", "type": "concept", "cluster": "Management & Resources", "node_size": 10, "label": "research proposals"}, "visual assessment": {"concepts": "visual assessment", "type": "concept", "cluster": "Management & Resources", "node_size": 10, "label": "visual assessment"}, "sav": {"concepts": "sav", "type": "concept", "cluster": "Management & Resources", "node_size": 10, "label": "sav"}, "academic researchers": {"concepts": "academic researchers", "type": "concept", "cluster": "Management & Resources", "node_size": 10, "label": "academic researchers"}, "permits": {"concepts": "permits", "type": "concept", "cluster": "Management & Resources", "node_size": 10, "label": "permits"}, "focus area": {"concepts": "focus area", "type": "concept", "cluster": "Management & Resources", "node_size": 10, "label": "focus area"}, "system dynamics": {"concepts": "system dynamics", "type": "concept", "cluster": "Management & Resources", "node_size": 10, "label": "system dynamics"}, "innovative technology": {"concepts": "innovative technology", "type": "concept", "cluster": "Management & Resources", "node_size": 10, "label": "innovative technology"}, "public access": {"concepts": "public access", "type": "concept", "cluster": "Management & Resources", "node_size": 10, "label": "public access"}, "wave energy": {"concepts": "wave energy", "type": "concept", "cluster": "Management & Resources", "node_size": 10, "label": "wave energy"}, "mental modeler": {"concepts": "mental modeler", "type": "concept", "cluster": "Management & Resources", "node_size": 10, "label": "mental modeler"}, "research": {"concepts": "research", "type": "concept", "cluster": "Management & Resources", "node_size": 10, "label": "research"}, "decision making": {"concepts": "decision making", "type": "concept", "cluster": "Management & Resources", "node_size": 10, "label": "decision making"}, "data background": {"concepts": "data background", "type": "concept", "cluster": "Management & Resources", "node_size": 10, "label": "data background"}, "robust system": {"concepts": "robust system", "type": "concept", "cluster": "Management & Resources", "node_size": 10, "label": "robust system"}, "system components": {"concepts": "system components", "type": "concept", "cluster": "Management & Resources", "node_size": 10, "label": "system components"}, "conservation": {"concepts": "conservation", "type": "concept", "cluster": "Conservation Permits", "node_size": 10, "label": "conservation"}, "permitors": {"concepts": "permitors", "type": "concept", "cluster": "Conservation Permits", "node_size": 10, "label": "permitors"}, "water quality projects": {"concepts": "water quality projects", "type": "concept", "cluster": "Water Quality Projects", "node_size": 10, "label": "water quality projects"}, "turbidity": {"concepts": "turbidity", "type": "concept", "cluster": "Water Quality Projects", "node_size": 10, "label": "turbidity"}, "water quality": {"concepts": "water quality", "type": "concept", "cluster": "Water Quality Projects", "node_size": 10, "label": "water quality"}, "water temperature": {"concepts": "water temperature", "type": "concept", "cluster": "Land-Water Interaction", "node_size": 10, "label": "water temperature"}, "impervious surface": {"concepts": "impervious surface", "type": "concept", "cluster": "Land-Water Interaction", "node_size": 10, "label": "impervious surface"}, "agricultural lands": {"concepts": "agricultural lands", "type": "concept", "cluster": "Land-Water Interaction", "node_size": 10, "label": "agricultural lands"}, "land water": {"concepts": "land water", "type": "concept", "cluster": "Land-Water Interaction", "node_size": 10, "label": "land water"}, "ecosystem services": {"concepts": "ecosystem services", "type": "concept", "cluster": "[Conservation Permitting]", "node_size": 10, "label": "ecosystem services"}, "habitat": {"concepts": "habitat", "type": "concept", "cluster": "[Conservation Permitting]", "node_size": 10, "label": "habitat"}, "salinity": {"concepts": "salinity", "type": "concept", "cluster": "[Conservation Permitting]", "node_size": 10, "label": "salinity"}, "ecosystems": {"concepts": "ecosystems", "type": "concept", "cluster": "[Conservation Permitting]", "node_size": 10, "label": "ecosystems"}, "biodiversity": {"concepts": "biodiversity", "type": "concept", "cluster": "[Conservation Permitting]", "node_size": 10, "label": "biodiversity"}, "sediment": {"concepts": "sediment", "type": "concept", "cluster": "Coastal Resources", "node_size": 10, "label": "sediment"}, "watermen": {"concepts": "watermen", "type": "concept", "cluster": "Coastal Resources", "node_size": 10, "label": "watermen"}, "fish": {"concepts": "fish", "type": "concept", "cluster": "Coastal Resources", "node_size": 10, "label": "fish"}, "wildlife": {"concepts": "wildlife", "type": "concept", "cluster": "Coastal Resources", "node_size": 10, "label": "wildlife"}, "buffer habitat": {"concepts": "buffer habitat", "type": "concept", "cluster": "Coastal Resources", "node_size": 10, "label": "buffer habitat"}, "wildlife heritage service": {"concepts": "wildlife heritage service", "type": "concept", "cluster": "Coastal Resources", "node_size": 10, "label": "wildlife heritage service"}, "outdoor recreation": {"concepts": "outdoor recreation", "type": "concept", "cluster": "Outdoor Recreation & Carbon", "node_size": 10, "label": "outdoor recreation"}, "recreation": {"concepts": "recreation", "type": "concept", "cluster": "Outdoor Recreation & Carbon", "node_size": 10, "label": "recreation"}, "recreational benefits": {"concepts": "recreational benefits", "type": "concept", "cluster": "Outdoor Recreation & Carbon", "node_size": 10, "label": "recreational benefits"}, "carbon storage": {"concepts": "carbon storage", "type": "concept", "cluster": "Outdoor Recreation & Carbon", "node_size": 10, "label": "carbon storage"}, "endangered species": {"concepts": "endangered species", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "endangered species"}, "conservation concern": {"concepts": "conservation concern", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "conservation concern"}, "native species": {"concepts": "native species", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "native species"}, "invasive species": {"concepts": "invasive species", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "invasive species"}, "restoration goals": {"concepts": "restoration goals", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "restoration goals"}, "conservation practices": {"concepts": "conservation practices", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "conservation practices"}, "environmental management": {"concepts": "environmental management", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "environmental management"}, "species conservation": {"concepts": "species conservation", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "species conservation"}, "coastal resiliency": {"concepts": "coastal resiliency", "type": "concept", "cluster": "Coastal Resilience", "node_size": 10, "label": "coastal resiliency"}, "green infrastructure": {"concepts": "green infrastructure", "type": "concept", "cluster": "Coastal Resilience", "node_size": 10, "label": "green infrastructure"}, "infrastructure": {"concepts": "infrastructure", "type": "concept", "cluster": "Coastal Resilience", "node_size": 10, "label": "infrastructure"}, "sav beds": {"concepts": "sav beds", "type": "concept", "cluster": "Coastal Resilience", "node_size": 10, "label": "sav beds"}, "marsh migration": {"concepts": "marsh migration", "type": "concept", "cluster": "Coastal Resilience", "node_size": 10, "label": "marsh migration"}, "marshes": {"concepts": "marshes", "type": "concept", "cluster": "Coastal Resilience", "node_size": 10, "label": "marshes"}, "living shorelines": {"concepts": "living shorelines", "type": "concept", "cluster": "Coastal Resilience", "node_size": 10, "label": "living shorelines"}, "flood reduction": {"concepts": "flood reduction", "type": "concept", "cluster": "Coastal Resilience", "node_size": 10, "label": "flood reduction"}, "coastal protection": {"concepts": "coastal protection", "type": "concept", "cluster": "Coastal Resilience", "node_size": 10, "label": "coastal protection"}, "land use": {"concepts": "land use", "type": "concept", "cluster": "Coastal Land Use", "node_size": 10, "label": "land use"}, "coastal management": {"concepts": "coastal management", "type": "concept", "cluster": "Coastal Land Use", "node_size": 10, "label": "coastal management"}, "coastal planners": {"concepts": "coastal planners", "type": "concept", "cluster": "Coastal Land Use", "node_size": 10, "label": "coastal planners"}, "coastal planning": {"concepts": "coastal planning", "type": "concept", "cluster": "Coastal Land Use", "node_size": 10, "label": "coastal planning"}, "geospatial analysis": {"concepts": "geospatial analysis", "type": "concept", "cluster": "Shoreline Analysis", "node_size": 10, "label": "geospatial analysis"}, "shoreline visits": {"concepts": "shoreline visits", "type": "concept", "cluster": "Shoreline Analysis", "node_size": 10, "label": "shoreline visits"}, "adaptability": {"concepts": "adaptability", "type": "concept", "cluster": "Shoreline Analysis", "node_size": 10, "label": "adaptability"}, "tourism industry": {"concepts": "tourism industry", "type": "concept", "cluster": "Shoreline Analysis", "node_size": 10, "label": "tourism industry"}, "conceptual model": {"concepts": "conceptual model", "type": "concept", "cluster": "Shoreline Analysis", "node_size": 10, "label": "conceptual model"}, "spatial data": {"concepts": "spatial data", "type": "concept", "cluster": "Shoreline Analysis", "node_size": 10, "label": "spatial data"}, "shoreline dynamics": {"concepts": "shoreline dynamics", "type": "concept", "cluster": "Shoreline Analysis", "node_size": 10, "label": "shoreline dynamics"}, "rain events": {"concepts": "rain events", "type": "concept", "cluster": "Rainfall Events", "node_size": 10, "label": "rain events"}, "precipitation": {"concepts": "precipitation", "type": "concept", "cluster": "Rainfall Events", "node_size": 10, "label": "precipitation"}, "air quality": {"concepts": "air quality", "type": "concept", "cluster": "Environmental Changes", "node_size": 10, "label": "air quality"}, "sea level rise": {"concepts": "sea level rise", "type": "concept", "cluster": "Environmental Changes", "node_size": 10, "label": "sea level rise"}, "precipitation changes": {"concepts": "precipitation changes", "type": "concept", "cluster": "Environmental Changes", "node_size": 10, "label": "precipitation changes"}, "storm energy": {"concepts": "storm energy", "type": "concept", "cluster": "Environmental Changes", "node_size": 10, "label": "storm energy"}, "community planning": {"concepts": "community planning", "type": "concept", "cluster": "Local Community Planning", "node_size": 10, "label": "community planning"}, "local community": {"concepts": "local community", "type": "concept", "cluster": "Local Community Planning", "node_size": 10, "label": "local community"}, "regional managers": {"concepts": "regional managers", "type": "concept", "cluster": "Local Community Planning", "node_size": 10, "label": "regional managers"}, "local homeowners": {"concepts": "local homeowners", "type": "concept", "cluster": "Local Community Planning", "node_size": 10, "label": "local homeowners"}, "fisheries regulations": {"concepts": "fisheries regulations", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fisheries regulations"}, "fisheries populations": {"concepts": "fisheries populations", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fisheries populations"}, "oyster reefs": {"concepts": "oyster reefs", "type": "concept", "cluster": "Oyster Fisheries", "node_size": 10, "label": "oyster reefs"}, "marine resource": {"concepts": "marine resource", "type": "concept", "cluster": "Oyster Fisheries", "node_size": 10, "label": "marine resource"}, "oyster farmers": {"concepts": "oyster farmers", "type": "concept", "cluster": "Oyster Fisheries", "node_size": 10, "label": "oyster farmers"}, "fisheries": {"concepts": "fisheries", "type": "concept", "cluster": "Oyster Fisheries", "node_size": 10, "label": "fisheries"}, "disease resilience": {"concepts": "disease resilience", "type": "concept", "cluster": "Community Resilience", "node_size": 10, "label": "disease resilience"}, "vulnerability assessment": {"concepts": "vulnerability assessment", "type": "concept", "cluster": "Community Resilience", "node_size": 10, "label": "vulnerability assessment"}, "negative impact": {"concepts": "negative impact", "type": "concept", "cluster": "Community Resilience", "node_size": 10, "label": "negative impact"}, "community resilience": {"concepts": "community resilience", "type": "concept", "cluster": "Community Resilience", "node_size": 10, "label": "community resilience"}, "positive effect": {"concepts": "positive effect", "type": "concept", "cluster": "Community Resilience", "node_size": 10, "label": "positive effect"}};
        const interClusterEdges = [["wetland migration", "Research & Technology", {"weight": 0.6666666666666666, "confidence": 0.3333333333333333, "type": "inter_cluster", "style": "solid"}], ["wetland migration", "Ecosystem Conservation", {"weight": -1.0, "confidence": 0.4, "type": "inter_cluster", "style": "solid"}], ["storm events", "Coastal Resources", {"weight": -0.2, "confidence": 0.48, "type": "inter_cluster", "style": "solid"}], ["storm events", "resilience", {"weight": -1.0, "confidence": 0.475, "type": "inter_cluster", "style": "solid"}], ["storm events", "wetland migration", {"weight": 1.0, "confidence": 0.375, "type": "inter_cluster", "style": "solid"}], ["storm events", "Water Quality Projects", {"weight": -1.0, "confidence": 0.4833333333333334, "type": "inter_cluster", "style": "solid"}], ["climate change", "Coastal Resilience", {"weight": 0.2, "confidence": 0.59, "type": "inter_cluster", "style": "solid"}], ["climate change", "Oyster Fisheries", {"weight": -1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["local economy", "Outdoor Recreation & Carbon", {"weight": 1.0, "confidence": 0.5, "type": "inter_cluster", "style": "solid"}], ["local economy", "Fisheries Management", {"weight": 1.0, "confidence": 0.4333333333333333, "type": "inter_cluster", "style": "solid"}], ["marine resources", "Water Quality Projects", {"weight": 1.0, "confidence": 0.5, "type": "inter_cluster", "style": "solid"}], ["resilience", "stressor", {"weight": -1.0, "confidence": 0.525, "type": "inter_cluster", "style": "solid"}], ["resilience", "wetland migration", {"weight": 1.0, "confidence": 0.38, "type": "inter_cluster", "style": "solid"}], ["resilience", "Ecosystem Conservation", {"weight": 1.0, "confidence": 0.4333333333333333, "type": "inter_cluster", "style": "solid"}], ["resilience", "Oyster Fisheries", {"weight": 1.0, "confidence": 0.4, "type": "inter_cluster", "style": "solid"}], ["resilience", "Rainfall Events", {"weight": -1.0, "confidence": 0.4, "type": "inter_cluster", "style": "solid"}], ["People & Equity", "Water Quality Projects", {"weight": 1.0, "confidence": 0.54, "type": "inter_cluster", "style": "solid"}], ["People & Equity", "Coastal Resilience", {"weight": 1.0, "confidence": 0.6833333333333332, "type": "inter_cluster", "style": "solid"}], ["People & Equity", "wetland migration", {"weight": 1.0, "confidence": 0.38, "type": "inter_cluster", "style": "solid"}], ["People & Equity", "Management & Resources", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["People & Equity", "Coastal Land Use", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["Bay Issues & Impacts", "Management & Resources", {"weight": 1.0, "confidence": 0.5333333333333333, "type": "inter_cluster", "style": "solid"}], ["Research & Technology", "wetland migration", {"weight": 0.5, "confidence": 0.45, "type": "inter_cluster", "style": "solid"}], ["Management & Resources", "Bay Issues & Impacts", {"weight": 0.5, "confidence": 0.25, "type": "inter_cluster", "style": "solid"}], ["Management & Resources", "resilience", {"weight": 1.0, "confidence": 0.4, "type": "inter_cluster", "style": "solid"}], ["Conservation Permits", "Ecosystem Conservation", {"weight": 1.0, "confidence": 0.525, "type": "inter_cluster", "style": "solid"}], ["Conservation Permits", "local economy", {"weight": 1.0, "confidence": 0.4, "type": "inter_cluster", "style": "solid"}], ["Water Quality Projects", "Fisheries Management", {"weight": 1.0, "confidence": 0.4666666666666666, "type": "inter_cluster", "style": "solid"}], ["Water Quality Projects", "Shoreline Analysis", {"weight": 0.3333333333333333, "confidence": 0.13333333333333333, "type": "inter_cluster", "style": "solid"}], ["Land-Water Interaction", "Environmental Changes", {"weight": 1.0, "confidence": 0.4000000000000001, "type": "inter_cluster", "style": "solid"}], ["Coastal Resources", "[Conservation Permitting]", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["Coastal Resources", "Coastal Resilience", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["Coastal Resources", "Management & Resources", {"weight": 0.5, "confidence": 0.2, "type": "inter_cluster", "style": "solid"}], ["Species Conservation", "[Conservation Permitting]", {"weight": 1.0, "confidence": 0.76, "type": "inter_cluster", "style": "solid"}], ["Species Conservation", "Outdoor Recreation & Carbon", {"weight": -0.3333333333333333, "confidence": 0.13333333333333333, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Conservation", "Water Quality Projects", {"weight": 0.3333333333333333, "confidence": 0.4166666666666667, "type": "inter_cluster", "style": "solid"}], ["Coastal Resilience", "Species Conservation", {"weight": 1.0, "confidence": 0.5, "type": "inter_cluster", "style": "solid"}], ["Coastal Resilience", "resilience", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["Coastal Land Use", "Agency Personnel", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["Coastal Land Use", "community members", {"weight": 1.0, "confidence": 0.425, "type": "inter_cluster", "style": "solid"}], ["Coastal Land Use", "Outdoor Recreation & Carbon", {"weight": 1.0, "confidence": 0.35, "type": "inter_cluster", "style": "solid"}], ["Coastal Land Use", "marine resources", {"weight": 1.0, "confidence": 0.4, "type": "inter_cluster", "style": "solid"}], ["Coastal Land Use", "waterfront homeowners", {"weight": 1.0, "confidence": 0.4, "type": "inter_cluster", "style": "solid"}], ["Shoreline Analysis", "Management & Resources", {"weight": 1.0, "confidence": 0.69, "type": "inter_cluster", "style": "solid"}], ["Shoreline Analysis", "Bay Issues & Impacts", {"weight": 0.25, "confidence": 0.1, "type": "inter_cluster", "style": "solid"}], ["Environmental Changes", "Oyster Fisheries", {"weight": -1.0, "confidence": 0.45, "type": "inter_cluster", "style": "solid"}], ["Local Community Planning", "People & Equity", {"weight": 1.0, "confidence": 0.5874999999999999, "type": "inter_cluster", "style": "solid"}], ["Oyster Fisheries", "fishermen", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["Oyster Fisheries", "marine resources", {"weight": 1.0, "confidence": 0.7999999999999999, "type": "inter_cluster", "style": "solid"}], ["Oyster Fisheries", "Coastal Resilience", {"weight": 1.0, "confidence": 0.51, "type": "inter_cluster", "style": "solid"}], ["Oyster Fisheries", "Agency Personnel", {"weight": 1.0, "confidence": 0.4600000000000001, "type": "inter_cluster", "style": "solid"}], ["Oyster Fisheries", "community members", {"weight": 1.0, "confidence": 0.4, "type": "inter_cluster", "style": "solid"}], ["Community Resilience", "community members", {"weight": 1.0, "confidence": 0.45, "type": "inter_cluster", "style": "solid"}]];
        const clusterConcepts = {"wetland migration": [["tidal wetland permitors", {"concepts": "tidal wetland permitors", "type": "concept", "cluster": "wetland migration", "node_size": 10, "label": "tidal wetland permitors"}], ["tidal wetland", {"concepts": "tidal wetland", "type": "concept", "cluster": "wetland migration", "node_size": 10, "label": "tidal wetland"}], ["tidal flooding", {"concepts": "tidal flooding", "type": "concept", "cluster": "wetland migration", "node_size": 10, "label": "tidal flooding"}], ["stormwater", {"concepts": "stormwater", "type": "concept", "cluster": "wetland migration", "node_size": 10, "label": "stormwater"}], ["saltwater intrusion", {"concepts": "saltwater intrusion", "type": "concept", "cluster": "wetland migration", "node_size": 10, "label": "saltwater intrusion"}]], "People & Equity": [["management approaches", {"concepts": "management approaches", "type": "concept", "cluster": "People & Equity", "node_size": 10, "label": "management approaches"}], ["adaptive management", {"concepts": "adaptive management", "type": "concept", "cluster": "People & Equity", "node_size": 10, "label": "adaptive management"}], ["management structure", {"concepts": "management structure", "type": "concept", "cluster": "People & Equity", "node_size": 10, "label": "management structure"}], ["resource managers", {"concepts": "resource managers", "type": "concept", "cluster": "People & Equity", "node_size": 10, "label": "resource managers"}], ["technical person", {"concepts": "technical person", "type": "concept", "cluster": "People & Equity", "node_size": 10, "label": "technical person"}], ["restoration program", {"concepts": "restoration program", "type": "concept", "cluster": "People & Equity", "node_size": 10, "label": "restoration program"}], ["data management", {"concepts": "data management", "type": "concept", "cluster": "People & Equity", "node_size": 10, "label": "data management"}], ["core relationships", {"concepts": "core relationships", "type": "concept", "cluster": "People & Equity", "node_size": 10, "label": "core relationships"}], ["food web", {"concepts": "food web", "type": "concept", "cluster": "People & Equity", "node_size": 10, "label": "food web"}], ["restoration teams", {"concepts": "restoration teams", "type": "concept", "cluster": "People & Equity", "node_size": 10, "label": "restoration teams"}]], "Agency Personnel": [["communities", {"concepts": "communities", "type": "concept", "cluster": "Agency Personnel", "node_size": 10, "label": "communities"}], ["people", {"concepts": "people", "type": "concept", "cluster": "Agency Personnel", "node_size": 10, "label": "people"}], ["values", {"concepts": "values", "type": "concept", "cluster": "Agency Personnel", "node_size": 10, "label": "values"}], ["equity", {"concepts": "equity", "type": "concept", "cluster": "Agency Personnel", "node_size": 10, "label": "equity"}], ["equity work", {"concepts": "equity work", "type": "concept", "cluster": "Agency Personnel", "node_size": 10, "label": "equity work"}], ["stakeholders", {"concepts": "stakeholders", "type": "concept", "cluster": "Agency Personnel", "node_size": 10, "label": "stakeholders"}], ["practitioners", {"concepts": "practitioners", "type": "concept", "cluster": "Agency Personnel", "node_size": 10, "label": "practitioners"}], ["diversity", {"concepts": "diversity", "type": "concept", "cluster": "Agency Personnel", "node_size": 10, "label": "diversity"}]], "Bay Issues & Impacts": [["director", {"concepts": "director", "type": "concept", "cluster": "Bay Issues & Impacts", "node_size": 10, "label": "director"}], ["resource users", {"concepts": "resource users", "type": "concept", "cluster": "Bay Issues & Impacts", "node_size": 10, "label": "resource users"}], ["dnr", {"concepts": "dnr", "type": "concept", "cluster": "Bay Issues & Impacts", "node_size": 10, "label": "dnr"}], ["grant specialists", {"concepts": "grant specialists", "type": "concept", "cluster": "Bay Issues & Impacts", "node_size": 10, "label": "grant specialists"}], ["government researchers", {"concepts": "government researchers", "type": "concept", "cluster": "Bay Issues & Impacts", "node_size": 10, "label": "government researchers"}], ["staff", {"concepts": "staff", "type": "concept", "cluster": "Bay Issues & Impacts", "node_size": 10, "label": "staff"}], ["finance", {"concepts": "finance", "type": "concept", "cluster": "Bay Issues & Impacts", "node_size": 10, "label": "finance"}], ["planners", {"concepts": "planners", "type": "concept", "cluster": "Bay Issues & Impacts", "node_size": 10, "label": "planners"}]], "Research & Technology": [["migration", {"concepts": "migration", "type": "concept", "cluster": "Research & Technology", "node_size": 10, "label": "migration"}], ["public health", {"concepts": "public health", "type": "concept", "cluster": "Research & Technology", "node_size": 10, "label": "public health"}], ["chesapeake bay program", {"concepts": "chesapeake bay program", "type": "concept", "cluster": "Research & Technology", "node_size": 10, "label": "chesapeake bay program"}], ["chesapeake bay", {"concepts": "chesapeake bay", "type": "concept", "cluster": "Research & Technology", "node_size": 10, "label": "chesapeake bay"}], ["critical area", {"concepts": "critical area", "type": "concept", "cluster": "Research & Technology", "node_size": 10, "label": "critical area"}], ["erosion reduction", {"concepts": "erosion reduction", "type": "concept", "cluster": "Research & Technology", "node_size": 10, "label": "erosion reduction"}], ["local dynamics", {"concepts": "local dynamics", "type": "concept", "cluster": "Research & Technology", "node_size": 10, "label": "local dynamics"}], ["developed areas", {"concepts": "developed areas", "type": "concept", "cluster": "Research & Technology", "node_size": 10, "label": "developed areas"}], ["erosion", {"concepts": "erosion", "type": "concept", "cluster": "Research & Technology", "node_size": 10, "label": "erosion"}], ["virginia", {"concepts": "virginia", "type": "concept", "cluster": "Research & Technology", "node_size": 10, "label": "virginia"}], ["nde", {"concepts": "nde", "type": "concept", "cluster": "Research & Technology", "node_size": 10, "label": "nde"}], ["flooding", {"concepts": "flooding", "type": "concept", "cluster": "Research & Technology", "node_size": 10, "label": "flooding"}], ["regulatory power", {"concepts": "regulatory power", "type": "concept", "cluster": "Research & Technology", "node_size": 10, "label": "regulatory power"}], ["current concerns", {"concepts": "current concerns", "type": "concept", "cluster": "Research & Technology", "node_size": 10, "label": "current concerns"}], ["maryland sea grant", {"concepts": "maryland sea grant", "type": "concept", "cluster": "Research & Technology", "node_size": 10, "label": "maryland sea grant"}], ["priority areas", {"concepts": "priority areas", "type": "concept", "cluster": "Research & Technology", "node_size": 10, "label": "priority areas"}]], "Management & Resources": [["gis group", {"concepts": "gis group", "type": "concept", "cluster": "Management & Resources", "node_size": 10, "label": "gis group"}], ["perspectives", {"concepts": "perspectives", "type": "concept", "cluster": "Management & Resources", "node_size": 10, "label": "perspectives"}], ["tree cover", {"concepts": "tree cover", "type": "concept", "cluster": "Management & Resources", "node_size": 10, "label": "tree cover"}], ["monitoring", {"concepts": "monitoring", "type": "concept", "cluster": "Management & Resources", "node_size": 10, "label": "monitoring"}], ["research proposals", {"concepts": "research proposals", "type": "concept", "cluster": "Management & Resources", "node_size": 10, "label": "research proposals"}], ["visual assessment", {"concepts": "visual assessment", "type": "concept", "cluster": "Management & Resources", "node_size": 10, "label": "visual assessment"}], ["sav", {"concepts": "sav", "type": "concept", "cluster": "Management & Resources", "node_size": 10, "label": "sav"}], ["academic researchers", {"concepts": "academic researchers", "type": "concept", "cluster": "Management & Resources", "node_size": 10, "label": "academic researchers"}], ["permits", {"concepts": "permits", "type": "concept", "cluster": "Management & Resources", "node_size": 10, "label": "permits"}], ["focus area", {"concepts": "focus area", "type": "concept", "cluster": "Management & Resources", "node_size": 10, "label": "focus area"}], ["system dynamics", {"concepts": "system dynamics", "type": "concept", "cluster": "Management & Resources", "node_size": 10, "label": "system dynamics"}], ["innovative technology", {"concepts": "innovative technology", "type": "concept", "cluster": "Management & Resources", "node_size": 10, "label": "innovative technology"}], ["public access", {"concepts": "public access", "type": "concept", "cluster": "Management & Resources", "node_size": 10, "label": "public access"}], ["wave energy", {"concepts": "wave energy", "type": "concept", "cluster": "Management & Resources", "node_size": 10, "label": "wave energy"}], ["mental modeler", {"concepts": "mental modeler", "type": "concept", "cluster": "Management & Resources", "node_size": 10, "label": "mental modeler"}], ["research", {"concepts": "research", "type": "concept", "cluster": "Management & Resources", "node_size": 10, "label": "research"}], ["decision making", {"concepts": "decision making", "type": "concept", "cluster": "Management & Resources", "node_size": 10, "label": "decision making"}], ["data background", {"concepts": "data background", "type": "concept", "cluster": "Management & Resources", "node_size": 10, "label": "data background"}], ["robust system", {"concepts": "robust system", "type": "concept", "cluster": "Management & Resources", "node_size": 10, "label": "robust system"}], ["system components", {"concepts": "system components", "type": "concept", "cluster": "Management & Resources", "node_size": 10, "label": "system components"}]], "Conservation Permits": [["conservation", {"concepts": "conservation", "type": "concept", "cluster": "Conservation Permits", "node_size": 10, "label": "conservation"}], ["permitors", {"concepts": "permitors", "type": "concept", "cluster": "Conservation Permits", "node_size": 10, "label": "permitors"}]], "Water Quality Projects": [["water quality projects", {"concepts": "water quality projects", "type": "concept", "cluster": "Water Quality Projects", "node_size": 10, "label": "water quality projects"}], ["turbidity", {"concepts": "turbidity", "type": "concept", "cluster": "Water Quality Projects", "node_size": 10, "label": "turbidity"}], ["water quality", {"concepts": "water quality", "type": "concept", "cluster": "Water Quality Projects", "node_size": 10, "label": "water quality"}]], "Land-Water Interaction": [["water temperature", {"concepts": "water temperature", "type": "concept", "cluster": "Land-Water Interaction", "node_size": 10, "label": "water temperature"}], ["impervious surface", {"concepts": "impervious surface", "type": "concept", "cluster": "Land-Water Interaction", "node_size": 10, "label": "impervious surface"}], ["agricultural lands", {"concepts": "agricultural lands", "type": "concept", "cluster": "Land-Water Interaction", "node_size": 10, "label": "agricultural lands"}], ["land water", {"concepts": "land water", "type": "concept", "cluster": "Land-Water Interaction", "node_size": 10, "label": "land water"}]], "[Conservation Permitting]": [["ecosystem services", {"concepts": "ecosystem services", "type": "concept", "cluster": "[Conservation Permitting]", "node_size": 10, "label": "ecosystem services"}], ["habitat", {"concepts": "habitat", "type": "concept", "cluster": "[Conservation Permitting]", "node_size": 10, "label": "habitat"}], ["salinity", {"concepts": "salinity", "type": "concept", "cluster": "[Conservation Permitting]", "node_size": 10, "label": "salinity"}], ["ecosystems", {"concepts": "ecosystems", "type": "concept", "cluster": "[Conservation Permitting]", "node_size": 10, "label": "ecosystems"}], ["biodiversity", {"concepts": "biodiversity", "type": "concept", "cluster": "[Conservation Permitting]", "node_size": 10, "label": "biodiversity"}]], "Coastal Resources": [["sediment", {"concepts": "sediment", "type": "concept", "cluster": "Coastal Resources", "node_size": 10, "label": "sediment"}], ["watermen", {"concepts": "watermen", "type": "concept", "cluster": "Coastal Resources", "node_size": 10, "label": "watermen"}], ["fish", {"concepts": "fish", "type": "concept", "cluster": "Coastal Resources", "node_size": 10, "label": "fish"}], ["wildlife", {"concepts": "wildlife", "type": "concept", "cluster": "Coastal Resources", "node_size": 10, "label": "wildlife"}], ["buffer habitat", {"concepts": "buffer habitat", "type": "concept", "cluster": "Coastal Resources", "node_size": 10, "label": "buffer habitat"}], ["wildlife heritage service", {"concepts": "wildlife heritage service", "type": "concept", "cluster": "Coastal Resources", "node_size": 10, "label": "wildlife heritage service"}]], "Outdoor Recreation & Carbon": [["outdoor recreation", {"concepts": "outdoor recreation", "type": "concept", "cluster": "Outdoor Recreation & Carbon", "node_size": 10, "label": "outdoor recreation"}], ["recreation", {"concepts": "recreation", "type": "concept", "cluster": "Outdoor Recreation & Carbon", "node_size": 10, "label": "recreation"}], ["recreational benefits", {"concepts": "recreational benefits", "type": "concept", "cluster": "Outdoor Recreation & Carbon", "node_size": 10, "label": "recreational benefits"}], ["carbon storage", {"concepts": "carbon storage", "type": "concept", "cluster": "Outdoor Recreation & Carbon", "node_size": 10, "label": "carbon storage"}]], "Species Conservation": [["endangered species", {"concepts": "endangered species", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "endangered species"}], ["conservation concern", {"concepts": "conservation concern", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "conservation concern"}], ["native species", {"concepts": "native species", "type": "concept", "cluster": "Species Conservation", "node_size": 10, "label": "native species"}]], "Ecosystem Conservation": [["invasive species", {"concepts": "invasive species", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "invasive species"}], ["restoration goals", {"concepts": "restoration goals", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "restoration goals"}], ["conservation practices", {"concepts": "conservation practices", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "conservation practices"}], ["environmental management", {"concepts": "environmental management", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "environmental management"}], ["species conservation", {"concepts": "species conservation", "type": "concept", "cluster": "Ecosystem Conservation", "node_size": 10, "label": "species conservation"}]], "Coastal Resilience": [["coastal resiliency", {"concepts": "coastal resiliency", "type": "concept", "cluster": "Coastal Resilience", "node_size": 10, "label": "coastal resiliency"}], ["green infrastructure", {"concepts": "green infrastructure", "type": "concept", "cluster": "Coastal Resilience", "node_size": 10, "label": "green infrastructure"}], ["infrastructure", {"concepts": "infrastructure", "type": "concept", "cluster": "Coastal Resilience", "node_size": 10, "label": "infrastructure"}], ["sav beds", {"concepts": "sav beds", "type": "concept", "cluster": "Coastal Resilience", "node_size": 10, "label": "sav beds"}], ["marsh migration", {"concepts": "marsh migration", "type": "concept", "cluster": "Coastal Resilience", "node_size": 10, "label": "marsh migration"}], ["marshes", {"concepts": "marshes", "type": "concept", "cluster": "Coastal Resilience", "node_size": 10, "label": "marshes"}], ["living shorelines", {"concepts": "living shorelines", "type": "concept", "cluster": "Coastal Resilience", "node_size": 10, "label": "living shorelines"}], ["flood reduction", {"concepts": "flood reduction", "type": "concept", "cluster": "Coastal Resilience", "node_size": 10, "label": "flood reduction"}], ["coastal protection", {"concepts": "coastal protection", "type": "concept", "cluster": "Coastal Resilience", "node_size": 10, "label": "coastal protection"}]], "Coastal Land Use": [["land use", {"concepts": "land use", "type": "concept", "cluster": "Coastal Land Use", "node_size": 10, "label": "land use"}], ["coastal management", {"concepts": "coastal management", "type": "concept", "cluster": "Coastal Land Use", "node_size": 10, "label": "coastal management"}], ["coastal planners", {"concepts": "coastal planners", "type": "concept", "cluster": "Coastal Land Use", "node_size": 10, "label": "coastal planners"}], ["coastal planning", {"concepts": "coastal planning", "type": "concept", "cluster": "Coastal Land Use", "node_size": 10, "label": "coastal planning"}]], "Shoreline Analysis": [["geospatial analysis", {"concepts": "geospatial analysis", "type": "concept", "cluster": "Shoreline Analysis", "node_size": 10, "label": "geospatial analysis"}], ["shoreline visits", {"concepts": "shoreline visits", "type": "concept", "cluster": "Shoreline Analysis", "node_size": 10, "label": "shoreline visits"}], ["adaptability", {"concepts": "adaptability", "type": "concept", "cluster": "Shoreline Analysis", "node_size": 10, "label": "adaptability"}], ["tourism industry", {"concepts": "tourism industry", "type": "concept", "cluster": "Shoreline Analysis", "node_size": 10, "label": "tourism industry"}], ["conceptual model", {"concepts": "conceptual model", "type": "concept", "cluster": "Shoreline Analysis", "node_size": 10, "label": "conceptual model"}], ["spatial data", {"concepts": "spatial data", "type": "concept", "cluster": "Shoreline Analysis", "node_size": 10, "label": "spatial data"}], ["shoreline dynamics", {"concepts": "shoreline dynamics", "type": "concept", "cluster": "Shoreline Analysis", "node_size": 10, "label": "shoreline dynamics"}]], "Rainfall Events": [["rain events", {"concepts": "rain events", "type": "concept", "cluster": "Rainfall Events", "node_size": 10, "label": "rain events"}], ["precipitation", {"concepts": "precipitation", "type": "concept", "cluster": "Rainfall Events", "node_size": 10, "label": "precipitation"}]], "Environmental Changes": [["air quality", {"concepts": "air quality", "type": "concept", "cluster": "Environmental Changes", "node_size": 10, "label": "air quality"}], ["sea level rise", {"concepts": "sea level rise", "type": "concept", "cluster": "Environmental Changes", "node_size": 10, "label": "sea level rise"}], ["precipitation changes", {"concepts": "precipitation changes", "type": "concept", "cluster": "Environmental Changes", "node_size": 10, "label": "precipitation changes"}], ["storm energy", {"concepts": "storm energy", "type": "concept", "cluster": "Environmental Changes", "node_size": 10, "label": "storm energy"}]], "Local Community Planning": [["community planning", {"concepts": "community planning", "type": "concept", "cluster": "Local Community Planning", "node_size": 10, "label": "community planning"}], ["local community", {"concepts": "local community", "type": "concept", "cluster": "Local Community Planning", "node_size": 10, "label": "local community"}], ["regional managers", {"concepts": "regional managers", "type": "concept", "cluster": "Local Community Planning", "node_size": 10, "label": "regional managers"}], ["local homeowners", {"concepts": "local homeowners", "type": "concept", "cluster": "Local Community Planning", "node_size": 10, "label": "local homeowners"}]], "Fisheries Management": [["fisheries regulations", {"concepts": "fisheries regulations", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fisheries regulations"}], ["fisheries populations", {"concepts": "fisheries populations", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fisheries populations"}]], "Oyster Fisheries": [["oyster reefs", {"concepts": "oyster reefs", "type": "concept", "cluster": "Oyster Fisheries", "node_size": 10, "label": "oyster reefs"}], ["marine resource", {"concepts": "marine resource", "type": "concept", "cluster": "Oyster Fisheries", "node_size": 10, "label": "marine resource"}], ["oyster farmers", {"concepts": "oyster farmers", "type": "concept", "cluster": "Oyster Fisheries", "node_size": 10, "label": "oyster farmers"}], ["fisheries", {"concepts": "fisheries", "type": "concept", "cluster": "Oyster Fisheries", "node_size": 10, "label": "fisheries"}]], "Community Resilience": [["disease resilience", {"concepts": "disease resilience", "type": "concept", "cluster": "Community Resilience", "node_size": 10, "label": "disease resilience"}], ["vulnerability assessment", {"concepts": "vulnerability assessment", "type": "concept", "cluster": "Community Resilience", "node_size": 10, "label": "vulnerability assessment"}], ["negative impact", {"concepts": "negative impact", "type": "concept", "cluster": "Community Resilience", "node_size": 10, "label": "negative impact"}], ["community resilience", {"concepts": "community resilience", "type": "concept", "cluster": "Community Resilience", "node_size": 10, "label": "community resilience"}], ["positive effect", {"concepts": "positive effect", "type": "concept", "cluster": "Community Resilience", "node_size": 10, "label": "positive effect"}]]};
        const clusterEdges = {"wetland migration": [], "People & Equity": [], "Agency Personnel": [], "Bay Issues & Impacts": [], "Research & Technology": [], "Management & Resources": [], "Conservation Permits": [], "Water Quality Projects": [], "Land-Water Interaction": [], "[Conservation Permitting]": [], "Coastal Resources": [], "Outdoor Recreation & Carbon": [], "Species Conservation": [], "Ecosystem Conservation": [], "Coastal Resilience": [], "Coastal Land Use": [], "Shoreline Analysis": [], "Rainfall Events": [], "Environmental Changes": [], "Local Community Planning": [], "Fisheries Management": [], "Oyster Fisheries": [], "Community Resilience": []};
        
        let network;
        let currentView = 'clusters';
        let currentCluster = null;
        let minConfidence = 0.3;
        
        // Network options
        const options = {
            nodes: {
                font: { color: 'white', size: 14 },
                borderWidth: 2,
                shadow: true
            },
            edges: {
                arrows: { to: { enabled: true, scaleFactor: 1.2 } },
                shadow: true,
                smooth: { type: 'continuous' }
            },
            physics: {
                stabilization: { iterations: 100 },
                barnesHut: {
                    gravitationalConstant: -8000,
                    springConstant: 0.001,
                    springLength: 200
                }
            },
            interaction: {
                hover: true,
                selectConnectedEdges: false
            }
        };
        
        function initNetwork() {
            const container = document.getElementById('network');
            const data = getClusterViewData();
            network = new vis.Network(container, data, options);
            
            // Handle cluster clicks for drill-down
            network.on("click", function(params) {
                if (params.nodes.length > 0 && currentView === 'clusters') {
                    const clickedNode = params.nodes[0];
                    if (clusterConcepts[clickedNode]) {
                        showClusterDetail(clickedNode);
                    }
                }
            });
        }
        
        function getClusterViewData() {
            const nodes = [];
            const edges = [];
            
            // Add cluster nodes
            Object.entries(clusterData).forEach(([clusterId, data]) => {
                const concepts = data.concepts || [];
                const conceptsStr = Array.isArray(concepts) ? concepts.join(', ') : concepts;
                
                nodes.push({
                    id: clusterId,
                    label: clusterId,
                    title: `Cluster: ${clusterId}\nConcepts: ${conceptsStr}\nClick to explore internal relationships`,
                    color: '#4A90E2',
                    size: 25 + (conceptsStr.split(',').length * 2),
                    font: { color: 'white' }
                });
            });
            
            // Add inter-cluster edges
            interClusterEdges.forEach(([source, target, edgeData]) => {
                const confidence = edgeData.confidence || 1.0;
                const weight = edgeData.weight || 0;
                
                if (confidence >= minConfidence) {
                    edges.push({
                        from: source,
                        to: target,
                        color: weight > 0 ? '#28A745' : '#DC3545',
                        width: Math.abs(weight) * 3 + 1,
                        title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                        dashes: false
                    });
                }
            });
            
            return { nodes: nodes, edges: edges };
        }
        
        function getClusterDetailData(clusterId) {
            const nodes = [];
            const edges = [];
            
            // Add concept nodes for this cluster
            if (clusterConcepts[clusterId]) {
                clusterConcepts[clusterId].forEach(([conceptId, data]) => {
                    nodes.push({
                        id: conceptId,
                        label: conceptId,
                        title: `Concept: ${conceptId}\nFrom cluster: ${clusterId}`,
                        color: '#FF9500',
                        size: 20,
                        font: { color: 'white' }
                    });
                });
            }
            
            // Add intra-cluster edges
            if (clusterEdges[clusterId]) {
                clusterEdges[clusterId].forEach(([source, target, edgeData]) => {
                    const confidence = edgeData.confidence || 1.0;
                    const weight = edgeData.weight || 0;
                    
                    if (confidence >= minConfidence) {
                        edges.push({
                            from: source,
                            to: target,
                            color: weight > 0 ? '#28A745' : '#DC3545',
                            width: Math.abs(weight) * 3 + 1,
                            title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                            dashes: true
                        });
                    }
                });
            }
            
            return { nodes: nodes, edges: edges };
        }
        
        function showClusterView() {
            currentView = 'clusters';
            currentCluster = null;
            const data = getClusterViewData();
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'none';
            document.getElementById('current-view').textContent = 'Cluster Overview';
        }
        
        function showClusterDetail(clusterId) {
            currentView = 'concepts';
            currentCluster = clusterId;
            const data = getClusterDetailData(clusterId);
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'inline-block';
            document.getElementById('current-view').textContent = `Inside Cluster: ${clusterId}`;
        }
        
        function updateConfidenceFilter(value) {
            minConfidence = parseFloat(value);
            document.getElementById('confidence-value').textContent = value;
            
            // Refresh current view
            if (currentView === 'clusters') {
                showClusterView();
            } else {
                showClusterDetail(currentCluster);
            }
        }
        
        // Initialize the network when page loads
        window.onload = function() {
            initNetwork();
        };
    </script>
</body>
</html>
