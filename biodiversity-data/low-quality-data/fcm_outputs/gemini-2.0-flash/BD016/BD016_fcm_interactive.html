
<!DOCTYPE html>
<html>
<head>
    <title>Hierarchical FCM Visualization</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 0; 
            padding: 20px;
            background: #f5f5f5;
        }
        
        #network { 
            width: 100%; 
            height: 600px; 
            border: 2px solid #ccc; 
            background: white;
            border-radius: 8px;
        }
        
        #controls {
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn {
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        
        .btn-primary { background: #4A90E2; color: white; }
        .btn-primary:hover { background: #357ABD; }
        
        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #545b62; }
        
        #current-view {
            font-weight: bold;
            color: #333;
            margin-left: 10px;
        }
        
        #legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-size: 12px;
            max-width: 200px;
        }
        
        .legend-item {
            margin: 5px 0;
            display: flex;
            align-items: center;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .legend-line {
            width: 20px;
            height: 2px;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <h1>Fuzzy Cognitive Map - Hierarchical View</h1>
    
    <div id="controls">
        <button class="btn btn-secondary" id="back-btn" onclick="showClusterView()" style="display: none;">
            ‚Üê Back to Clusters
        </button>
        <span id="current-view">Cluster Overview</span>
        <div style="float: right;">
            <label>Min Confidence: </label>
            <input type="range" id="confidence-slider" min="0" max="1" step="0.1" value="0.3" 
                   onchange="updateConfidenceFilter(this.value)">
            <span id="confidence-value">0.3</span>
        </div>
    </div>
    
    <div id="network"></div>
    
    <div id="legend">
        <h4>Legend</h4>
        <div class="legend-item">
            <div class="legend-color" style="background: #4A90E2;"></div>
            <span>Clusters</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #FF9500;"></div>
            <span>Concepts</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #28A745;"></div>
            <span>Positive relationship</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #DC3545;"></div>
            <span>Negative relationship</span>
        </div>
        <div style="margin-top: 10px; font-style: italic; color: #666;">
            Click clusters to explore internal concepts
        </div>
    </div>

    <script>
        // Embedded data
        const clusterData = {"Endangered Species Conservation": {"concepts": "naturalized species, harmful organisms, species loss, invasive species, species extinctions, ecosystem alteration, climate change, antibiotic use, ecosystem, food web, biodiversity concerns, pest species", "concept_list": ["naturalized species", "harmful organisms", "species loss", "invasive species", "species extinctions", "ecosystem alteration", "climate change", "antibiotic use", "ecosystem", "food web", "biodiversity concerns", "pest species"], "type": "cluster", "node_size": 51, "label": "Endangered Species Conservation"}, "Ecosystem Data & Components": {"concepts": "esa, right whales, conservation, endangered species act, esa concerns, conservation concern, management effects, bycatch, turtle catch, esa regulations, bycatch reduction, whales, protected resources, esa issues", "concept_list": ["esa", "right whales", "conservation", "endangered species act", "esa concerns", "conservation concern", "management effects", "bycatch", "turtle catch", "esa regulations", "bycatch reduction", "whales", "protected resources", "esa issues"], "type": "cluster", "node_size": 57, "label": "Ecosystem Data & Components"}, "Fisheries Management Policy": {"concepts": "data collection, cumulative impacts, habitat concerns, conceptual models, habitat forming, species assessment, genetic groupings, ecosystem health, prey species, biomass levels, stock assessment, bycatch information, unmanaged forage, ecosystem approach, cumulative effects, coral, environmental drivers, biodiversity management, unmanaged species, habitat, scientific integration, efh, key species, native species, distinct stocks, system components, precautionary manner, species distributions, wind farms, genetic diversity, separate stocks, biodiversity, genetic stocks, forage species, genetic populations", "concept_list": ["data collection", "cumulative impacts", "habitat concerns", "conceptual models", "habitat forming", "species assessment", "genetic groupings", "ecosystem health", "prey species", "biomass levels", "stock assessment", "bycatch information", "unmanaged forage", "ecosystem approach", "cumulative effects", "coral", "environmental drivers", "biodiversity management", "unmanaged species", "habitat", "scientific integration", "efh", "key species", "native species", "distinct stocks", "system components", "precautionary manner", "species distributions", "wind farms", "genetic diversity", "separate stocks", "biodiversity", "genetic stocks", "forage species", "genetic populations"], "type": "cluster", "node_size": 120, "label": "Fisheries Management Policy"}, "Fisheries Management": {"concepts": "homogeneous population, forage concerns, species conservation, quota decisions, recreational interests, shad, council priorities, species caught, management policy, mental models, stakeholders, non-target species, council dynamics, sturgeon reduction, council process, educational program, management approaches, area closures, sturgeon bycatch, policy choices, permits, adaptive management, effort shifting, mesh gill nets, bycatch rates, infrastructure, regulatory policy, observer coverage, sturgeon, nepa analyses, management, management action, policy regulations, public relations, risk policy, right whale, commercial interests, species managed, species management, landings report, strategic plan", "concept_list": ["homogeneous population", "forage concerns", "species conservation", "quota decisions", "recreational interests", "shad", "council priorities", "species caught", "management policy", "mental models", "stakeholders", "non-target species", "council dynamics", "sturgeon reduction", "council process", "educational program", "management approaches", "area closures", "sturgeon bycatch", "policy choices", "permits", "adaptive management", "effort shifting", "mesh gill nets", "bycatch rates", "infrastructure", "regulatory policy", "observer coverage", "sturgeon", "nepa analyses", "management", "management action", "policy regulations", "public relations", "risk policy", "right whale", "commercial interests", "species managed", "species management", "landings report", "strategic plan"], "type": "cluster", "node_size": 138, "label": "Fisheries Management"}, "Biodiversity Threats": {"concepts": "fishing mortality, fishing effort, fishing permits, fishing permit applications, fishing effects, fishery management, fisheries, fisheries management, squid fishery, fisheries effects", "concept_list": ["fishing mortality", "fishing effort", "fishing permits", "fishing permit applications", "fishing effects", "fishery management", "fisheries", "fisheries management", "squid fishery", "fisheries effects"], "type": "cluster", "node_size": 45, "label": "Biodiversity Threats"}, "Offshore Aquaculture Policy": {"concepts": "aquaculture policy, offshore aquaculture", "concept_list": ["aquaculture policy", "offshore aquaculture"], "type": "cluster", "node_size": 21, "label": "Offshore Aquaculture Policy"}, "Marine Habitat": {"concepts": "spawning grounds, marine ecosystems, deep water coral, essential fish habitat", "concept_list": ["spawning grounds", "marine ecosystems", "deep water coral", "essential fish habitat"], "type": "cluster", "node_size": 27, "label": "Marine Habitat"}, "Herring & Marine Mammals": {"concepts": "river herring caps, marine mammal, river herring, marine mammal issues, subsistence fishing", "concept_list": ["river herring caps", "marine mammal", "river herring", "marine mammal issues", "subsistence fishing"], "type": "cluster", "node_size": 30, "label": "Herring & Marine Mammals"}};
        const conceptData = {"naturalized species": {"concepts": "naturalized species", "type": "concept", "cluster": "Endangered Species Conservation", "node_size": 10, "label": "naturalized species"}, "harmful organisms": {"concepts": "harmful organisms", "type": "concept", "cluster": "Endangered Species Conservation", "node_size": 10, "label": "harmful organisms"}, "species loss": {"concepts": "species loss", "type": "concept", "cluster": "Endangered Species Conservation", "node_size": 10, "label": "species loss"}, "invasive species": {"concepts": "invasive species", "type": "concept", "cluster": "Endangered Species Conservation", "node_size": 10, "label": "invasive species"}, "species extinctions": {"concepts": "species extinctions", "type": "concept", "cluster": "Endangered Species Conservation", "node_size": 10, "label": "species extinctions"}, "ecosystem alteration": {"concepts": "ecosystem alteration", "type": "concept", "cluster": "Endangered Species Conservation", "node_size": 10, "label": "ecosystem alteration"}, "climate change": {"concepts": "climate change", "type": "concept", "cluster": "Endangered Species Conservation", "node_size": 10, "label": "climate change"}, "antibiotic use": {"concepts": "antibiotic use", "type": "concept", "cluster": "Endangered Species Conservation", "node_size": 10, "label": "antibiotic use"}, "ecosystem": {"concepts": "ecosystem", "type": "concept", "cluster": "Endangered Species Conservation", "node_size": 10, "label": "ecosystem"}, "food web": {"concepts": "food web", "type": "concept", "cluster": "Endangered Species Conservation", "node_size": 10, "label": "food web"}, "biodiversity concerns": {"concepts": "biodiversity concerns", "type": "concept", "cluster": "Endangered Species Conservation", "node_size": 10, "label": "biodiversity concerns"}, "pest species": {"concepts": "pest species", "type": "concept", "cluster": "Endangered Species Conservation", "node_size": 10, "label": "pest species"}, "esa": {"concepts": "esa", "type": "concept", "cluster": "Ecosystem Data & Components", "node_size": 10, "label": "esa"}, "right whales": {"concepts": "right whales", "type": "concept", "cluster": "Ecosystem Data & Components", "node_size": 10, "label": "right whales"}, "conservation": {"concepts": "conservation", "type": "concept", "cluster": "Ecosystem Data & Components", "node_size": 10, "label": "conservation"}, "endangered species act": {"concepts": "endangered species act", "type": "concept", "cluster": "Ecosystem Data & Components", "node_size": 10, "label": "endangered species act"}, "esa concerns": {"concepts": "esa concerns", "type": "concept", "cluster": "Ecosystem Data & Components", "node_size": 10, "label": "esa concerns"}, "conservation concern": {"concepts": "conservation concern", "type": "concept", "cluster": "Ecosystem Data & Components", "node_size": 10, "label": "conservation concern"}, "management effects": {"concepts": "management effects", "type": "concept", "cluster": "Ecosystem Data & Components", "node_size": 10, "label": "management effects"}, "bycatch": {"concepts": "bycatch", "type": "concept", "cluster": "Ecosystem Data & Components", "node_size": 10, "label": "bycatch"}, "turtle catch": {"concepts": "turtle catch", "type": "concept", "cluster": "Ecosystem Data & Components", "node_size": 10, "label": "turtle catch"}, "esa regulations": {"concepts": "esa regulations", "type": "concept", "cluster": "Ecosystem Data & Components", "node_size": 10, "label": "esa regulations"}, "bycatch reduction": {"concepts": "bycatch reduction", "type": "concept", "cluster": "Ecosystem Data & Components", "node_size": 10, "label": "bycatch reduction"}, "whales": {"concepts": "whales", "type": "concept", "cluster": "Ecosystem Data & Components", "node_size": 10, "label": "whales"}, "protected resources": {"concepts": "protected resources", "type": "concept", "cluster": "Ecosystem Data & Components", "node_size": 10, "label": "protected resources"}, "esa issues": {"concepts": "esa issues", "type": "concept", "cluster": "Ecosystem Data & Components", "node_size": 10, "label": "esa issues"}, "data collection": {"concepts": "data collection", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "data collection"}, "cumulative impacts": {"concepts": "cumulative impacts", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "cumulative impacts"}, "habitat concerns": {"concepts": "habitat concerns", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "habitat concerns"}, "conceptual models": {"concepts": "conceptual models", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "conceptual models"}, "habitat forming": {"concepts": "habitat forming", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "habitat forming"}, "species assessment": {"concepts": "species assessment", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "species assessment"}, "genetic groupings": {"concepts": "genetic groupings", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "genetic groupings"}, "ecosystem health": {"concepts": "ecosystem health", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "ecosystem health"}, "prey species": {"concepts": "prey species", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "prey species"}, "biomass levels": {"concepts": "biomass levels", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "biomass levels"}, "stock assessment": {"concepts": "stock assessment", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "stock assessment"}, "bycatch information": {"concepts": "bycatch information", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "bycatch information"}, "unmanaged forage": {"concepts": "unmanaged forage", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "unmanaged forage"}, "ecosystem approach": {"concepts": "ecosystem approach", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "ecosystem approach"}, "cumulative effects": {"concepts": "cumulative effects", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "cumulative effects"}, "coral": {"concepts": "coral", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "coral"}, "environmental drivers": {"concepts": "environmental drivers", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "environmental drivers"}, "biodiversity management": {"concepts": "biodiversity management", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "biodiversity management"}, "unmanaged species": {"concepts": "unmanaged species", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "unmanaged species"}, "habitat": {"concepts": "habitat", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "habitat"}, "scientific integration": {"concepts": "scientific integration", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "scientific integration"}, "efh": {"concepts": "efh", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "efh"}, "key species": {"concepts": "key species", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "key species"}, "native species": {"concepts": "native species", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "native species"}, "distinct stocks": {"concepts": "distinct stocks", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "distinct stocks"}, "system components": {"concepts": "system components", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "system components"}, "precautionary manner": {"concepts": "precautionary manner", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "precautionary manner"}, "species distributions": {"concepts": "species distributions", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "species distributions"}, "wind farms": {"concepts": "wind farms", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "wind farms"}, "genetic diversity": {"concepts": "genetic diversity", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "genetic diversity"}, "separate stocks": {"concepts": "separate stocks", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "separate stocks"}, "biodiversity": {"concepts": "biodiversity", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "biodiversity"}, "genetic stocks": {"concepts": "genetic stocks", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "genetic stocks"}, "forage species": {"concepts": "forage species", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "forage species"}, "genetic populations": {"concepts": "genetic populations", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "genetic populations"}, "homogeneous population": {"concepts": "homogeneous population", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "homogeneous population"}, "forage concerns": {"concepts": "forage concerns", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "forage concerns"}, "species conservation": {"concepts": "species conservation", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "species conservation"}, "quota decisions": {"concepts": "quota decisions", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "quota decisions"}, "recreational interests": {"concepts": "recreational interests", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "recreational interests"}, "shad": {"concepts": "shad", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "shad"}, "council priorities": {"concepts": "council priorities", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "council priorities"}, "species caught": {"concepts": "species caught", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "species caught"}, "management policy": {"concepts": "management policy", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "management policy"}, "mental models": {"concepts": "mental models", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "mental models"}, "stakeholders": {"concepts": "stakeholders", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "stakeholders"}, "non-target species": {"concepts": "non-target species", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "non-target species"}, "council dynamics": {"concepts": "council dynamics", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "council dynamics"}, "sturgeon reduction": {"concepts": "sturgeon reduction", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "sturgeon reduction"}, "council process": {"concepts": "council process", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "council process"}, "educational program": {"concepts": "educational program", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "educational program"}, "management approaches": {"concepts": "management approaches", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "management approaches"}, "area closures": {"concepts": "area closures", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "area closures"}, "sturgeon bycatch": {"concepts": "sturgeon bycatch", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "sturgeon bycatch"}, "policy choices": {"concepts": "policy choices", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "policy choices"}, "permits": {"concepts": "permits", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "permits"}, "adaptive management": {"concepts": "adaptive management", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "adaptive management"}, "effort shifting": {"concepts": "effort shifting", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "effort shifting"}, "mesh gill nets": {"concepts": "mesh gill nets", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "mesh gill nets"}, "bycatch rates": {"concepts": "bycatch rates", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "bycatch rates"}, "infrastructure": {"concepts": "infrastructure", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "infrastructure"}, "regulatory policy": {"concepts": "regulatory policy", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "regulatory policy"}, "observer coverage": {"concepts": "observer coverage", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "observer coverage"}, "sturgeon": {"concepts": "sturgeon", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "sturgeon"}, "nepa analyses": {"concepts": "nepa analyses", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "nepa analyses"}, "management": {"concepts": "management", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "management"}, "management action": {"concepts": "management action", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "management action"}, "policy regulations": {"concepts": "policy regulations", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "policy regulations"}, "public relations": {"concepts": "public relations", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "public relations"}, "risk policy": {"concepts": "risk policy", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "risk policy"}, "right whale": {"concepts": "right whale", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "right whale"}, "commercial interests": {"concepts": "commercial interests", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "commercial interests"}, "species managed": {"concepts": "species managed", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "species managed"}, "species management": {"concepts": "species management", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "species management"}, "landings report": {"concepts": "landings report", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "landings report"}, "strategic plan": {"concepts": "strategic plan", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "strategic plan"}, "fishing mortality": {"concepts": "fishing mortality", "type": "concept", "cluster": "Biodiversity Threats", "node_size": 10, "label": "fishing mortality"}, "fishing effort": {"concepts": "fishing effort", "type": "concept", "cluster": "Biodiversity Threats", "node_size": 10, "label": "fishing effort"}, "fishing permits": {"concepts": "fishing permits", "type": "concept", "cluster": "Biodiversity Threats", "node_size": 10, "label": "fishing permits"}, "fishing permit applications": {"concepts": "fishing permit applications", "type": "concept", "cluster": "Biodiversity Threats", "node_size": 10, "label": "fishing permit applications"}, "fishing effects": {"concepts": "fishing effects", "type": "concept", "cluster": "Biodiversity Threats", "node_size": 10, "label": "fishing effects"}, "fishery management": {"concepts": "fishery management", "type": "concept", "cluster": "Biodiversity Threats", "node_size": 10, "label": "fishery management"}, "fisheries": {"concepts": "fisheries", "type": "concept", "cluster": "Biodiversity Threats", "node_size": 10, "label": "fisheries"}, "fisheries management": {"concepts": "fisheries management", "type": "concept", "cluster": "Biodiversity Threats", "node_size": 10, "label": "fisheries management"}, "squid fishery": {"concepts": "squid fishery", "type": "concept", "cluster": "Biodiversity Threats", "node_size": 10, "label": "squid fishery"}, "fisheries effects": {"concepts": "fisheries effects", "type": "concept", "cluster": "Biodiversity Threats", "node_size": 10, "label": "fisheries effects"}, "aquaculture policy": {"concepts": "aquaculture policy", "type": "concept", "cluster": "Offshore Aquaculture Policy", "node_size": 10, "label": "aquaculture policy"}, "offshore aquaculture": {"concepts": "offshore aquaculture", "type": "concept", "cluster": "Offshore Aquaculture Policy", "node_size": 10, "label": "offshore aquaculture"}, "spawning grounds": {"concepts": "spawning grounds", "type": "concept", "cluster": "Marine Habitat", "node_size": 10, "label": "spawning grounds"}, "marine ecosystems": {"concepts": "marine ecosystems", "type": "concept", "cluster": "Marine Habitat", "node_size": 10, "label": "marine ecosystems"}, "deep water coral": {"concepts": "deep water coral", "type": "concept", "cluster": "Marine Habitat", "node_size": 10, "label": "deep water coral"}, "essential fish habitat": {"concepts": "essential fish habitat", "type": "concept", "cluster": "Marine Habitat", "node_size": 10, "label": "essential fish habitat"}, "river herring caps": {"concepts": "river herring caps", "type": "concept", "cluster": "Herring & Marine Mammals", "node_size": 10, "label": "river herring caps"}, "marine mammal": {"concepts": "marine mammal", "type": "concept", "cluster": "Herring & Marine Mammals", "node_size": 10, "label": "marine mammal"}, "river herring": {"concepts": "river herring", "type": "concept", "cluster": "Herring & Marine Mammals", "node_size": 10, "label": "river herring"}, "marine mammal issues": {"concepts": "marine mammal issues", "type": "concept", "cluster": "Herring & Marine Mammals", "node_size": 10, "label": "marine mammal issues"}, "subsistence fishing": {"concepts": "subsistence fishing", "type": "concept", "cluster": "Herring & Marine Mammals", "node_size": 10, "label": "subsistence fishing"}};
        const interClusterEdges = [["Endangered Species Conservation", "Marine Habitat", {"weight": -1.0, "confidence": 0.6124999999999999, "type": "inter_cluster", "style": "solid"}], ["Endangered Species Conservation", "Fisheries Management", {"weight": -1.0, "confidence": 0.35, "type": "inter_cluster", "style": "solid"}], ["Endangered Species Conservation", "Ecosystem Data & Components", {"weight": 1.0, "confidence": 0.2, "type": "inter_cluster", "style": "solid"}], ["Endangered Species Conservation", "Biodiversity Threats", {"weight": 1.0, "confidence": 0.2, "type": "inter_cluster", "style": "solid"}], ["Endangered Species Conservation", "Offshore Aquaculture Policy", {"weight": 1.0, "confidence": 0.2, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Data & Components", "Fisheries Management Policy", {"weight": 1.0, "confidence": 0.54, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Data & Components", "Biodiversity Threats", {"weight": 1.0, "confidence": 0.4, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Data & Components", "Herring & Marine Mammals", {"weight": 1.0, "confidence": 0.4, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Data & Components", "Marine Habitat", {"weight": 1.0, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Data & Components", "Endangered Species Conservation", {"weight": 1.0, "confidence": 0.2, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Data & Components", "Offshore Aquaculture Policy", {"weight": 1.0, "confidence": 0.2, "type": "inter_cluster", "style": "solid"}], ["Fisheries Management Policy", "Ecosystem Data & Components", {"weight": 1.0, "confidence": 0.52, "type": "inter_cluster", "style": "solid"}], ["Fisheries Management Policy", "Fisheries Management", {"weight": 1.0, "confidence": 0.6749999999999999, "type": "inter_cluster", "style": "solid"}], ["Fisheries Management Policy", "Biodiversity Threats", {"weight": 0.6, "confidence": 0.44000000000000006, "type": "inter_cluster", "style": "solid"}], ["Fisheries Management Policy", "Herring & Marine Mammals", {"weight": 0.6666666666666666, "confidence": 0.26666666666666666, "type": "inter_cluster", "style": "solid"}], ["Fisheries Management Policy", "Offshore Aquaculture Policy", {"weight": 0.75, "confidence": 0.22499999999999998, "type": "inter_cluster", "style": "solid"}], ["Fisheries Management Policy", "Endangered Species Conservation", {"weight": 1.0, "confidence": 0.30000000000000004, "type": "inter_cluster", "style": "solid"}], ["Fisheries Management Policy", "Marine Habitat", {"weight": 1.0, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Fisheries Management", "Fisheries Management Policy", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["Fisheries Management", "Herring & Marine Mammals", {"weight": 1.0, "confidence": 0.5499999999999999, "type": "inter_cluster", "style": "solid"}], ["Fisheries Management", "Ecosystem Data & Components", {"weight": 1.0, "confidence": 0.4, "type": "inter_cluster", "style": "solid"}], ["Fisheries Management", "Marine Habitat", {"weight": 1.0, "confidence": 0.35, "type": "inter_cluster", "style": "solid"}], ["Fisheries Management", "Endangered Species Conservation", {"weight": -0.6666666666666666, "confidence": 0.21666666666666665, "type": "inter_cluster", "style": "solid"}], ["Fisheries Management", "Offshore Aquaculture Policy", {"weight": 1.0, "confidence": 0.2, "type": "inter_cluster", "style": "solid"}], ["Biodiversity Threats", "Ecosystem Data & Components", {"weight": 1.0, "confidence": 0.5399999999999999, "type": "inter_cluster", "style": "solid"}], ["Biodiversity Threats", "Herring & Marine Mammals", {"weight": 0.6, "confidence": 0.51, "type": "inter_cluster", "style": "solid"}], ["Biodiversity Threats", "Fisheries Management Policy", {"weight": 1.0, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Biodiversity Threats", "Fisheries Management", {"weight": 1.0, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Biodiversity Threats", "Marine Habitat", {"weight": 0.5, "confidence": 0.15, "type": "inter_cluster", "style": "solid"}], ["Biodiversity Threats", "Endangered Species Conservation", {"weight": 1.0, "confidence": 0.2, "type": "inter_cluster", "style": "solid"}], ["Offshore Aquaculture Policy", "Endangered Species Conservation", {"weight": 1.0, "confidence": 0.45, "type": "inter_cluster", "style": "solid"}], ["Offshore Aquaculture Policy", "Ecosystem Data & Components", {"weight": 1.0, "confidence": 0.2, "type": "inter_cluster", "style": "solid"}], ["Offshore Aquaculture Policy", "Fisheries Management Policy", {"weight": 1.0, "confidence": 0.2, "type": "inter_cluster", "style": "solid"}], ["Offshore Aquaculture Policy", "Biodiversity Threats", {"weight": 0.5, "confidence": 0.1, "type": "inter_cluster", "style": "solid"}], ["Offshore Aquaculture Policy", "Marine Habitat", {"weight": 0.5, "confidence": 0.1, "type": "inter_cluster", "style": "solid"}], ["Offshore Aquaculture Policy", "Herring & Marine Mammals", {"weight": 1.0, "confidence": 0.2, "type": "inter_cluster", "style": "solid"}], ["Marine Habitat", "Ecosystem Data & Components", {"weight": 1.0, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Marine Habitat", "Fisheries Management Policy", {"weight": 1.0, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Marine Habitat", "Fisheries Management", {"weight": 1.0, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Marine Habitat", "Biodiversity Threats", {"weight": 0.5, "confidence": 0.15, "type": "inter_cluster", "style": "solid"}], ["Marine Habitat", "Herring & Marine Mammals", {"weight": 0.3333333333333333, "confidence": 0.09999999999999999, "type": "inter_cluster", "style": "solid"}], ["Marine Habitat", "Endangered Species Conservation", {"weight": 0.5, "confidence": 0.1, "type": "inter_cluster", "style": "solid"}], ["Herring & Marine Mammals", "Fisheries Management Policy", {"weight": 1.0, "confidence": 0.48, "type": "inter_cluster", "style": "solid"}], ["Herring & Marine Mammals", "Fisheries Management", {"weight": 1.0, "confidence": 0.47500000000000003, "type": "inter_cluster", "style": "solid"}], ["Herring & Marine Mammals", "Ecosystem Data & Components", {"weight": 1.0, "confidence": 0.4, "type": "inter_cluster", "style": "solid"}], ["Herring & Marine Mammals", "Biodiversity Threats", {"weight": 0.5, "confidence": 0.15, "type": "inter_cluster", "style": "solid"}], ["Herring & Marine Mammals", "Marine Habitat", {"weight": 0.5, "confidence": 0.15, "type": "inter_cluster", "style": "solid"}], ["Herring & Marine Mammals", "Endangered Species Conservation", {"weight": 0.5, "confidence": 0.1, "type": "inter_cluster", "style": "solid"}], ["Herring & Marine Mammals", "Offshore Aquaculture Policy", {"weight": 0.5, "confidence": 0.1, "type": "inter_cluster", "style": "solid"}]];
        const clusterConcepts = {"Endangered Species Conservation": [["naturalized species", {"concepts": "naturalized species", "type": "concept", "cluster": "Endangered Species Conservation", "node_size": 10, "label": "naturalized species"}], ["harmful organisms", {"concepts": "harmful organisms", "type": "concept", "cluster": "Endangered Species Conservation", "node_size": 10, "label": "harmful organisms"}], ["species loss", {"concepts": "species loss", "type": "concept", "cluster": "Endangered Species Conservation", "node_size": 10, "label": "species loss"}], ["invasive species", {"concepts": "invasive species", "type": "concept", "cluster": "Endangered Species Conservation", "node_size": 10, "label": "invasive species"}], ["species extinctions", {"concepts": "species extinctions", "type": "concept", "cluster": "Endangered Species Conservation", "node_size": 10, "label": "species extinctions"}], ["ecosystem alteration", {"concepts": "ecosystem alteration", "type": "concept", "cluster": "Endangered Species Conservation", "node_size": 10, "label": "ecosystem alteration"}], ["climate change", {"concepts": "climate change", "type": "concept", "cluster": "Endangered Species Conservation", "node_size": 10, "label": "climate change"}], ["antibiotic use", {"concepts": "antibiotic use", "type": "concept", "cluster": "Endangered Species Conservation", "node_size": 10, "label": "antibiotic use"}], ["ecosystem", {"concepts": "ecosystem", "type": "concept", "cluster": "Endangered Species Conservation", "node_size": 10, "label": "ecosystem"}], ["food web", {"concepts": "food web", "type": "concept", "cluster": "Endangered Species Conservation", "node_size": 10, "label": "food web"}], ["biodiversity concerns", {"concepts": "biodiversity concerns", "type": "concept", "cluster": "Endangered Species Conservation", "node_size": 10, "label": "biodiversity concerns"}], ["pest species", {"concepts": "pest species", "type": "concept", "cluster": "Endangered Species Conservation", "node_size": 10, "label": "pest species"}]], "Ecosystem Data & Components": [["esa", {"concepts": "esa", "type": "concept", "cluster": "Ecosystem Data & Components", "node_size": 10, "label": "esa"}], ["right whales", {"concepts": "right whales", "type": "concept", "cluster": "Ecosystem Data & Components", "node_size": 10, "label": "right whales"}], ["conservation", {"concepts": "conservation", "type": "concept", "cluster": "Ecosystem Data & Components", "node_size": 10, "label": "conservation"}], ["endangered species act", {"concepts": "endangered species act", "type": "concept", "cluster": "Ecosystem Data & Components", "node_size": 10, "label": "endangered species act"}], ["esa concerns", {"concepts": "esa concerns", "type": "concept", "cluster": "Ecosystem Data & Components", "node_size": 10, "label": "esa concerns"}], ["conservation concern", {"concepts": "conservation concern", "type": "concept", "cluster": "Ecosystem Data & Components", "node_size": 10, "label": "conservation concern"}], ["management effects", {"concepts": "management effects", "type": "concept", "cluster": "Ecosystem Data & Components", "node_size": 10, "label": "management effects"}], ["bycatch", {"concepts": "bycatch", "type": "concept", "cluster": "Ecosystem Data & Components", "node_size": 10, "label": "bycatch"}], ["turtle catch", {"concepts": "turtle catch", "type": "concept", "cluster": "Ecosystem Data & Components", "node_size": 10, "label": "turtle catch"}], ["esa regulations", {"concepts": "esa regulations", "type": "concept", "cluster": "Ecosystem Data & Components", "node_size": 10, "label": "esa regulations"}], ["bycatch reduction", {"concepts": "bycatch reduction", "type": "concept", "cluster": "Ecosystem Data & Components", "node_size": 10, "label": "bycatch reduction"}], ["whales", {"concepts": "whales", "type": "concept", "cluster": "Ecosystem Data & Components", "node_size": 10, "label": "whales"}], ["protected resources", {"concepts": "protected resources", "type": "concept", "cluster": "Ecosystem Data & Components", "node_size": 10, "label": "protected resources"}], ["esa issues", {"concepts": "esa issues", "type": "concept", "cluster": "Ecosystem Data & Components", "node_size": 10, "label": "esa issues"}]], "Fisheries Management Policy": [["data collection", {"concepts": "data collection", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "data collection"}], ["cumulative impacts", {"concepts": "cumulative impacts", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "cumulative impacts"}], ["habitat concerns", {"concepts": "habitat concerns", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "habitat concerns"}], ["conceptual models", {"concepts": "conceptual models", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "conceptual models"}], ["habitat forming", {"concepts": "habitat forming", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "habitat forming"}], ["species assessment", {"concepts": "species assessment", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "species assessment"}], ["genetic groupings", {"concepts": "genetic groupings", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "genetic groupings"}], ["ecosystem health", {"concepts": "ecosystem health", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "ecosystem health"}], ["prey species", {"concepts": "prey species", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "prey species"}], ["biomass levels", {"concepts": "biomass levels", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "biomass levels"}], ["stock assessment", {"concepts": "stock assessment", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "stock assessment"}], ["bycatch information", {"concepts": "bycatch information", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "bycatch information"}], ["unmanaged forage", {"concepts": "unmanaged forage", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "unmanaged forage"}], ["ecosystem approach", {"concepts": "ecosystem approach", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "ecosystem approach"}], ["cumulative effects", {"concepts": "cumulative effects", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "cumulative effects"}], ["coral", {"concepts": "coral", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "coral"}], ["environmental drivers", {"concepts": "environmental drivers", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "environmental drivers"}], ["biodiversity management", {"concepts": "biodiversity management", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "biodiversity management"}], ["unmanaged species", {"concepts": "unmanaged species", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "unmanaged species"}], ["habitat", {"concepts": "habitat", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "habitat"}], ["scientific integration", {"concepts": "scientific integration", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "scientific integration"}], ["efh", {"concepts": "efh", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "efh"}], ["key species", {"concepts": "key species", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "key species"}], ["native species", {"concepts": "native species", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "native species"}], ["distinct stocks", {"concepts": "distinct stocks", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "distinct stocks"}], ["system components", {"concepts": "system components", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "system components"}], ["precautionary manner", {"concepts": "precautionary manner", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "precautionary manner"}], ["species distributions", {"concepts": "species distributions", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "species distributions"}], ["wind farms", {"concepts": "wind farms", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "wind farms"}], ["genetic diversity", {"concepts": "genetic diversity", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "genetic diversity"}], ["separate stocks", {"concepts": "separate stocks", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "separate stocks"}], ["biodiversity", {"concepts": "biodiversity", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "biodiversity"}], ["genetic stocks", {"concepts": "genetic stocks", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "genetic stocks"}], ["forage species", {"concepts": "forage species", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "forage species"}], ["genetic populations", {"concepts": "genetic populations", "type": "concept", "cluster": "Fisheries Management Policy", "node_size": 10, "label": "genetic populations"}]], "Fisheries Management": [["homogeneous population", {"concepts": "homogeneous population", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "homogeneous population"}], ["forage concerns", {"concepts": "forage concerns", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "forage concerns"}], ["species conservation", {"concepts": "species conservation", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "species conservation"}], ["quota decisions", {"concepts": "quota decisions", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "quota decisions"}], ["recreational interests", {"concepts": "recreational interests", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "recreational interests"}], ["shad", {"concepts": "shad", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "shad"}], ["council priorities", {"concepts": "council priorities", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "council priorities"}], ["species caught", {"concepts": "species caught", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "species caught"}], ["management policy", {"concepts": "management policy", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "management policy"}], ["mental models", {"concepts": "mental models", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "mental models"}], ["stakeholders", {"concepts": "stakeholders", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "stakeholders"}], ["non-target species", {"concepts": "non-target species", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "non-target species"}], ["council dynamics", {"concepts": "council dynamics", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "council dynamics"}], ["sturgeon reduction", {"concepts": "sturgeon reduction", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "sturgeon reduction"}], ["council process", {"concepts": "council process", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "council process"}], ["educational program", {"concepts": "educational program", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "educational program"}], ["management approaches", {"concepts": "management approaches", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "management approaches"}], ["area closures", {"concepts": "area closures", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "area closures"}], ["sturgeon bycatch", {"concepts": "sturgeon bycatch", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "sturgeon bycatch"}], ["policy choices", {"concepts": "policy choices", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "policy choices"}], ["permits", {"concepts": "permits", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "permits"}], ["adaptive management", {"concepts": "adaptive management", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "adaptive management"}], ["effort shifting", {"concepts": "effort shifting", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "effort shifting"}], ["mesh gill nets", {"concepts": "mesh gill nets", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "mesh gill nets"}], ["bycatch rates", {"concepts": "bycatch rates", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "bycatch rates"}], ["infrastructure", {"concepts": "infrastructure", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "infrastructure"}], ["regulatory policy", {"concepts": "regulatory policy", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "regulatory policy"}], ["observer coverage", {"concepts": "observer coverage", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "observer coverage"}], ["sturgeon", {"concepts": "sturgeon", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "sturgeon"}], ["nepa analyses", {"concepts": "nepa analyses", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "nepa analyses"}], ["management", {"concepts": "management", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "management"}], ["management action", {"concepts": "management action", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "management action"}], ["policy regulations", {"concepts": "policy regulations", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "policy regulations"}], ["public relations", {"concepts": "public relations", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "public relations"}], ["risk policy", {"concepts": "risk policy", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "risk policy"}], ["right whale", {"concepts": "right whale", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "right whale"}], ["commercial interests", {"concepts": "commercial interests", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "commercial interests"}], ["species managed", {"concepts": "species managed", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "species managed"}], ["species management", {"concepts": "species management", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "species management"}], ["landings report", {"concepts": "landings report", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "landings report"}], ["strategic plan", {"concepts": "strategic plan", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "strategic plan"}]], "Biodiversity Threats": [["fishing mortality", {"concepts": "fishing mortality", "type": "concept", "cluster": "Biodiversity Threats", "node_size": 10, "label": "fishing mortality"}], ["fishing effort", {"concepts": "fishing effort", "type": "concept", "cluster": "Biodiversity Threats", "node_size": 10, "label": "fishing effort"}], ["fishing permits", {"concepts": "fishing permits", "type": "concept", "cluster": "Biodiversity Threats", "node_size": 10, "label": "fishing permits"}], ["fishing permit applications", {"concepts": "fishing permit applications", "type": "concept", "cluster": "Biodiversity Threats", "node_size": 10, "label": "fishing permit applications"}], ["fishing effects", {"concepts": "fishing effects", "type": "concept", "cluster": "Biodiversity Threats", "node_size": 10, "label": "fishing effects"}], ["fishery management", {"concepts": "fishery management", "type": "concept", "cluster": "Biodiversity Threats", "node_size": 10, "label": "fishery management"}], ["fisheries", {"concepts": "fisheries", "type": "concept", "cluster": "Biodiversity Threats", "node_size": 10, "label": "fisheries"}], ["fisheries management", {"concepts": "fisheries management", "type": "concept", "cluster": "Biodiversity Threats", "node_size": 10, "label": "fisheries management"}], ["squid fishery", {"concepts": "squid fishery", "type": "concept", "cluster": "Biodiversity Threats", "node_size": 10, "label": "squid fishery"}], ["fisheries effects", {"concepts": "fisheries effects", "type": "concept", "cluster": "Biodiversity Threats", "node_size": 10, "label": "fisheries effects"}]], "Offshore Aquaculture Policy": [["aquaculture policy", {"concepts": "aquaculture policy", "type": "concept", "cluster": "Offshore Aquaculture Policy", "node_size": 10, "label": "aquaculture policy"}], ["offshore aquaculture", {"concepts": "offshore aquaculture", "type": "concept", "cluster": "Offshore Aquaculture Policy", "node_size": 10, "label": "offshore aquaculture"}]], "Marine Habitat": [["spawning grounds", {"concepts": "spawning grounds", "type": "concept", "cluster": "Marine Habitat", "node_size": 10, "label": "spawning grounds"}], ["marine ecosystems", {"concepts": "marine ecosystems", "type": "concept", "cluster": "Marine Habitat", "node_size": 10, "label": "marine ecosystems"}], ["deep water coral", {"concepts": "deep water coral", "type": "concept", "cluster": "Marine Habitat", "node_size": 10, "label": "deep water coral"}], ["essential fish habitat", {"concepts": "essential fish habitat", "type": "concept", "cluster": "Marine Habitat", "node_size": 10, "label": "essential fish habitat"}]], "Herring & Marine Mammals": [["river herring caps", {"concepts": "river herring caps", "type": "concept", "cluster": "Herring & Marine Mammals", "node_size": 10, "label": "river herring caps"}], ["marine mammal", {"concepts": "marine mammal", "type": "concept", "cluster": "Herring & Marine Mammals", "node_size": 10, "label": "marine mammal"}], ["river herring", {"concepts": "river herring", "type": "concept", "cluster": "Herring & Marine Mammals", "node_size": 10, "label": "river herring"}], ["marine mammal issues", {"concepts": "marine mammal issues", "type": "concept", "cluster": "Herring & Marine Mammals", "node_size": 10, "label": "marine mammal issues"}], ["subsistence fishing", {"concepts": "subsistence fishing", "type": "concept", "cluster": "Herring & Marine Mammals", "node_size": 10, "label": "subsistence fishing"}]]};
        const clusterEdges = {"Endangered Species Conservation": [], "Ecosystem Data & Components": [], "Fisheries Management Policy": [], "Fisheries Management": [], "Biodiversity Threats": [], "Offshore Aquaculture Policy": [], "Marine Habitat": [], "Herring & Marine Mammals": []};
        
        let network;
        let currentView = 'clusters';
        let currentCluster = null;
        let minConfidence = 0.3;
        
        // Network options
        const options = {
            nodes: {
                font: { color: 'white', size: 14 },
                borderWidth: 2,
                shadow: true
            },
            edges: {
                arrows: { to: { enabled: true, scaleFactor: 1.2 } },
                shadow: true,
                smooth: { type: 'continuous' }
            },
            physics: {
                stabilization: { iterations: 100 },
                barnesHut: {
                    gravitationalConstant: -8000,
                    springConstant: 0.001,
                    springLength: 200
                }
            },
            interaction: {
                hover: true,
                selectConnectedEdges: false
            }
        };
        
        function initNetwork() {
            const container = document.getElementById('network');
            const data = getClusterViewData();
            network = new vis.Network(container, data, options);
            
            // Handle cluster clicks for drill-down
            network.on("click", function(params) {
                if (params.nodes.length > 0 && currentView === 'clusters') {
                    const clickedNode = params.nodes[0];
                    if (clusterConcepts[clickedNode]) {
                        showClusterDetail(clickedNode);
                    }
                }
            });
        }
        
        function getClusterViewData() {
            const nodes = [];
            const edges = [];
            
            // Add cluster nodes
            Object.entries(clusterData).forEach(([clusterId, data]) => {
                const concepts = data.concepts || [];
                const conceptsStr = Array.isArray(concepts) ? concepts.join(', ') : concepts;
                
                nodes.push({
                    id: clusterId,
                    label: clusterId,
                    title: `Cluster: ${clusterId}\nConcepts: ${conceptsStr}\nClick to explore internal relationships`,
                    color: '#4A90E2',
                    size: 25 + (conceptsStr.split(',').length * 2),
                    font: { color: 'white' }
                });
            });
            
            // Add inter-cluster edges
            interClusterEdges.forEach(([source, target, edgeData]) => {
                const confidence = edgeData.confidence || 1.0;
                const weight = edgeData.weight || 0;
                
                if (confidence >= minConfidence) {
                    edges.push({
                        from: source,
                        to: target,
                        color: weight > 0 ? '#28A745' : '#DC3545',
                        width: Math.abs(weight) * 3 + 1,
                        title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                        dashes: false
                    });
                }
            });
            
            return { nodes: nodes, edges: edges };
        }
        
        function getClusterDetailData(clusterId) {
            const nodes = [];
            const edges = [];
            
            // Add concept nodes for this cluster
            if (clusterConcepts[clusterId]) {
                clusterConcepts[clusterId].forEach(([conceptId, data]) => {
                    nodes.push({
                        id: conceptId,
                        label: conceptId,
                        title: `Concept: ${conceptId}\nFrom cluster: ${clusterId}`,
                        color: '#FF9500',
                        size: 20,
                        font: { color: 'white' }
                    });
                });
            }
            
            // Add intra-cluster edges
            if (clusterEdges[clusterId]) {
                clusterEdges[clusterId].forEach(([source, target, edgeData]) => {
                    const confidence = edgeData.confidence || 1.0;
                    const weight = edgeData.weight || 0;
                    
                    if (confidence >= minConfidence) {
                        edges.push({
                            from: source,
                            to: target,
                            color: weight > 0 ? '#28A745' : '#DC3545',
                            width: Math.abs(weight) * 3 + 1,
                            title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                            dashes: true
                        });
                    }
                });
            }
            
            return { nodes: nodes, edges: edges };
        }
        
        function showClusterView() {
            currentView = 'clusters';
            currentCluster = null;
            const data = getClusterViewData();
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'none';
            document.getElementById('current-view').textContent = 'Cluster Overview';
        }
        
        function showClusterDetail(clusterId) {
            currentView = 'concepts';
            currentCluster = clusterId;
            const data = getClusterDetailData(clusterId);
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'inline-block';
            document.getElementById('current-view').textContent = `Inside Cluster: ${clusterId}`;
        }
        
        function updateConfidenceFilter(value) {
            minConfidence = parseFloat(value);
            document.getElementById('confidence-value').textContent = value;
            
            // Refresh current view
            if (currentView === 'clusters') {
                showClusterView();
            } else {
                showClusterDetail(currentCluster);
            }
        }
        
        // Initialize the network when page loads
        window.onload = function() {
            initNetwork();
        };
    </script>
</body>
</html>
