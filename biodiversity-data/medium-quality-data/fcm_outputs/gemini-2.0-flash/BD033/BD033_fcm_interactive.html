
<!DOCTYPE html>
<html>
<head>
    <title>Hierarchical FCM Visualization</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 0; 
            padding: 20px;
            background: #f5f5f5;
        }
        
        #network { 
            width: 100%; 
            height: 600px; 
            border: 2px solid #ccc; 
            background: white;
            border-radius: 8px;
        }
        
        #controls {
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn {
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        
        .btn-primary { background: #4A90E2; color: white; }
        .btn-primary:hover { background: #357ABD; }
        
        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #545b62; }
        
        #current-view {
            font-weight: bold;
            color: #333;
            margin-left: 10px;
        }
        
        #legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-size: 12px;
            max-width: 200px;
        }
        
        .legend-item {
            margin: 5px 0;
            display: flex;
            align-items: center;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .legend-line {
            width: 20px;
            height: 2px;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <h1>Fuzzy Cognitive Map - Hierarchical View</h1>
    
    <div id="controls">
        <button class="btn btn-secondary" id="back-btn" onclick="showClusterView()" style="display: none;">
            ← Back to Clusters
        </button>
        <span id="current-view">Cluster Overview</span>
        <div style="float: right;">
            <label>Min Confidence: </label>
            <input type="range" id="confidence-slider" min="0" max="1" step="0.1" value="0.3" 
                   onchange="updateConfidenceFilter(this.value)">
            <span id="confidence-value">0.3</span>
        </div>
    </div>
    
    <div id="network"></div>
    
    <div id="legend">
        <h4>Legend</h4>
        <div class="legend-item">
            <div class="legend-color" style="background: #4A90E2;"></div>
            <span>Clusters</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #FF9500;"></div>
            <span>Concepts</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #28A745;"></div>
            <span>Positive relationship</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #DC3545;"></div>
            <span>Negative relationship</span>
        </div>
        <div style="margin-top: 10px; font-style: italic; color: #666;">
            Click clusters to explore internal concepts
        </div>
    </div>

    <script>
        // Embedded data
        const clusterData = {"dolphin cruise guide": {"concepts": "dolphin cruise guide", "concept_list": ["dolphin cruise guide"], "type": "cluster", "node_size": 18, "label": "dolphin cruise guide"}, "Social Interactions": {"concepts": "business, management decisions, economic standing, industry, economic impacts, expensive meal, economic benefits", "concept_list": ["business", "management decisions", "economic standing", "industry", "economic impacts", "expensive meal", "economic benefits"], "type": "cluster", "node_size": 36, "label": "Social Interactions"}, "Environmental Concerns": {"concepts": "social benefits, social impacts, great people, social media", "concept_list": ["social benefits", "social impacts", "great people", "social media"], "type": "cluster", "node_size": 27, "label": "Environmental Concerns"}, "Fishing & Marine Life": {"concepts": "litter, environmental factors, biodiversity, lack of regulation, negative impacts, trash, area impact, environmental groups", "concept_list": ["litter", "environmental factors", "biodiversity", "lack of regulation", "negative impacts", "trash", "area impact", "environmental groups"], "type": "cluster", "node_size": 39, "label": "Fishing & Marine Life"}, "Cognitive Understanding": {"concepts": "fishing, charter captain, target species, inshore charter, experience, positive reviews, snorkeling, variety of prey, youtube videos, audience, state trooper, snorkeling trips, hard biology, filets, predatory animals, hard facts, opinions, snorkeling trip, concept mapping, island hopping, weeks bay, manatees, size regulation, snorkeling habitat", "concept_list": ["fishing", "charter captain", "target species", "inshore charter", "experience", "positive reviews", "snorkeling", "variety of prey", "youtube videos", "audience", "state trooper", "snorkeling trips", "hard biology", "filets", "predatory animals", "hard facts", "opinions", "snorkeling trip", "concept mapping", "island hopping", "weeks bay", "manatees", "size regulation", "snorkeling habitat"], "type": "cluster", "node_size": 87, "label": "Cognitive Understanding"}, "Southern Science Reviews": {"concepts": "soft science, southern rows, reviews, cognitive mapping, different audience, mindset, note-taking, unique ecosystems, psychological map", "concept_list": ["soft science", "southern rows", "reviews", "cognitive mapping", "different audience", "mindset", "note-taking", "unique ecosystems", "psychological map"], "type": "cluster", "node_size": 42, "label": "Southern Science Reviews"}, "Marine Biodiversity": {"concepts": "marine biodiversity, fish diversity, marine activities, marine life, coastal biodiversity", "concept_list": ["marine biodiversity", "fish diversity", "marine activities", "marine life", "coastal biodiversity"], "type": "cluster", "node_size": 30, "label": "Marine Biodiversity"}, "Estuary Ecosystem": {"concepts": "jellyfish, oyster reefs, intercoastal waterways, estuary protection, seagrass, protecting seagrass, estuaries", "concept_list": ["jellyfish", "oyster reefs", "intercoastal waterways", "estuary protection", "seagrass", "protecting seagrass", "estuaries"], "type": "cluster", "node_size": 36, "label": "Estuary Ecosystem"}, "Fisheries Management": {"concepts": "marine police, fish protection, fishing guides, experience fishery, breeder fish, poaching, white trout, fishing charters, speckled trout, marine regulations, fisheries management, fish max, overfishing, recreational fishing, fishery", "concept_list": ["marine police", "fish protection", "fishing guides", "experience fishery", "breeder fish", "poaching", "white trout", "fishing charters", "speckled trout", "marine regulations", "fisheries management", "fish max", "overfishing", "recreational fishing", "fishery"], "type": "cluster", "node_size": 60, "label": "Fisheries Management"}, "Regulations & Rules": {"concepts": "state regulations, stricter regulations, guide regulations, personal regulations, regulations, integrity, anonymity, confidentiality", "concept_list": ["state regulations", "stricter regulations", "guide regulations", "personal regulations", "regulations", "integrity", "anonymity", "confidentiality"], "type": "cluster", "node_size": 39, "label": "Regulations & Rules"}, "Boat Cruises": {"concepts": "sunset cruises, dolphin cruises, boat cruise, dolphin cruise", "concept_list": ["sunset cruises", "dolphin cruises", "boat cruise", "dolphin cruise"], "type": "cluster", "node_size": 27, "label": "Boat Cruises"}, "Boating Harassment": {"concepts": "boat traffic, harassment, boat captains, booze cruise", "concept_list": ["boat traffic", "harassment", "boat captains", "booze cruise"], "type": "cluster", "node_size": 27, "label": "Boating Harassment"}};
        const conceptData = {"business": {"concepts": "business", "type": "concept", "cluster": "Social Interactions", "node_size": 10, "label": "business"}, "management decisions": {"concepts": "management decisions", "type": "concept", "cluster": "Social Interactions", "node_size": 10, "label": "management decisions"}, "economic standing": {"concepts": "economic standing", "type": "concept", "cluster": "Social Interactions", "node_size": 10, "label": "economic standing"}, "industry": {"concepts": "industry", "type": "concept", "cluster": "Social Interactions", "node_size": 10, "label": "industry"}, "economic impacts": {"concepts": "economic impacts", "type": "concept", "cluster": "Social Interactions", "node_size": 10, "label": "economic impacts"}, "expensive meal": {"concepts": "expensive meal", "type": "concept", "cluster": "Social Interactions", "node_size": 10, "label": "expensive meal"}, "economic benefits": {"concepts": "economic benefits", "type": "concept", "cluster": "Social Interactions", "node_size": 10, "label": "economic benefits"}, "social benefits": {"concepts": "social benefits", "type": "concept", "cluster": "Environmental Concerns", "node_size": 10, "label": "social benefits"}, "social impacts": {"concepts": "social impacts", "type": "concept", "cluster": "Environmental Concerns", "node_size": 10, "label": "social impacts"}, "great people": {"concepts": "great people", "type": "concept", "cluster": "Environmental Concerns", "node_size": 10, "label": "great people"}, "social media": {"concepts": "social media", "type": "concept", "cluster": "Environmental Concerns", "node_size": 10, "label": "social media"}, "litter": {"concepts": "litter", "type": "concept", "cluster": "Fishing & Marine Life", "node_size": 10, "label": "litter"}, "environmental factors": {"concepts": "environmental factors", "type": "concept", "cluster": "Fishing & Marine Life", "node_size": 10, "label": "environmental factors"}, "biodiversity": {"concepts": "biodiversity", "type": "concept", "cluster": "Fishing & Marine Life", "node_size": 10, "label": "biodiversity"}, "lack of regulation": {"concepts": "lack of regulation", "type": "concept", "cluster": "Fishing & Marine Life", "node_size": 10, "label": "lack of regulation"}, "negative impacts": {"concepts": "negative impacts", "type": "concept", "cluster": "Fishing & Marine Life", "node_size": 10, "label": "negative impacts"}, "trash": {"concepts": "trash", "type": "concept", "cluster": "Fishing & Marine Life", "node_size": 10, "label": "trash"}, "area impact": {"concepts": "area impact", "type": "concept", "cluster": "Fishing & Marine Life", "node_size": 10, "label": "area impact"}, "environmental groups": {"concepts": "environmental groups", "type": "concept", "cluster": "Fishing & Marine Life", "node_size": 10, "label": "environmental groups"}, "fishing": {"concepts": "fishing", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "fishing"}, "charter captain": {"concepts": "charter captain", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "charter captain"}, "target species": {"concepts": "target species", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "target species"}, "inshore charter": {"concepts": "inshore charter", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "inshore charter"}, "experience": {"concepts": "experience", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "experience"}, "positive reviews": {"concepts": "positive reviews", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "positive reviews"}, "snorkeling": {"concepts": "snorkeling", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "snorkeling"}, "variety of prey": {"concepts": "variety of prey", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "variety of prey"}, "youtube videos": {"concepts": "youtube videos", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "youtube videos"}, "audience": {"concepts": "audience", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "audience"}, "state trooper": {"concepts": "state trooper", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "state trooper"}, "snorkeling trips": {"concepts": "snorkeling trips", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "snorkeling trips"}, "hard biology": {"concepts": "hard biology", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "hard biology"}, "filets": {"concepts": "filets", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "filets"}, "predatory animals": {"concepts": "predatory animals", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "predatory animals"}, "hard facts": {"concepts": "hard facts", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "hard facts"}, "opinions": {"concepts": "opinions", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "opinions"}, "snorkeling trip": {"concepts": "snorkeling trip", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "snorkeling trip"}, "concept mapping": {"concepts": "concept mapping", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "concept mapping"}, "island hopping": {"concepts": "island hopping", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "island hopping"}, "weeks bay": {"concepts": "weeks bay", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "weeks bay"}, "manatees": {"concepts": "manatees", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "manatees"}, "size regulation": {"concepts": "size regulation", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "size regulation"}, "snorkeling habitat": {"concepts": "snorkeling habitat", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "snorkeling habitat"}, "soft science": {"concepts": "soft science", "type": "concept", "cluster": "Southern Science Reviews", "node_size": 10, "label": "soft science"}, "southern rows": {"concepts": "southern rows", "type": "concept", "cluster": "Southern Science Reviews", "node_size": 10, "label": "southern rows"}, "reviews": {"concepts": "reviews", "type": "concept", "cluster": "Southern Science Reviews", "node_size": 10, "label": "reviews"}, "cognitive mapping": {"concepts": "cognitive mapping", "type": "concept", "cluster": "Southern Science Reviews", "node_size": 10, "label": "cognitive mapping"}, "different audience": {"concepts": "different audience", "type": "concept", "cluster": "Southern Science Reviews", "node_size": 10, "label": "different audience"}, "mindset": {"concepts": "mindset", "type": "concept", "cluster": "Southern Science Reviews", "node_size": 10, "label": "mindset"}, "note-taking": {"concepts": "note-taking", "type": "concept", "cluster": "Southern Science Reviews", "node_size": 10, "label": "note-taking"}, "unique ecosystems": {"concepts": "unique ecosystems", "type": "concept", "cluster": "Southern Science Reviews", "node_size": 10, "label": "unique ecosystems"}, "psychological map": {"concepts": "psychological map", "type": "concept", "cluster": "Southern Science Reviews", "node_size": 10, "label": "psychological map"}, "marine biodiversity": {"concepts": "marine biodiversity", "type": "concept", "cluster": "Marine Biodiversity", "node_size": 10, "label": "marine biodiversity"}, "fish diversity": {"concepts": "fish diversity", "type": "concept", "cluster": "Marine Biodiversity", "node_size": 10, "label": "fish diversity"}, "marine activities": {"concepts": "marine activities", "type": "concept", "cluster": "Marine Biodiversity", "node_size": 10, "label": "marine activities"}, "marine life": {"concepts": "marine life", "type": "concept", "cluster": "Marine Biodiversity", "node_size": 10, "label": "marine life"}, "coastal biodiversity": {"concepts": "coastal biodiversity", "type": "concept", "cluster": "Marine Biodiversity", "node_size": 10, "label": "coastal biodiversity"}, "jellyfish": {"concepts": "jellyfish", "type": "concept", "cluster": "Estuary Ecosystem", "node_size": 10, "label": "jellyfish"}, "oyster reefs": {"concepts": "oyster reefs", "type": "concept", "cluster": "Estuary Ecosystem", "node_size": 10, "label": "oyster reefs"}, "intercoastal waterways": {"concepts": "intercoastal waterways", "type": "concept", "cluster": "Estuary Ecosystem", "node_size": 10, "label": "intercoastal waterways"}, "estuary protection": {"concepts": "estuary protection", "type": "concept", "cluster": "Estuary Ecosystem", "node_size": 10, "label": "estuary protection"}, "seagrass": {"concepts": "seagrass", "type": "concept", "cluster": "Estuary Ecosystem", "node_size": 10, "label": "seagrass"}, "protecting seagrass": {"concepts": "protecting seagrass", "type": "concept", "cluster": "Estuary Ecosystem", "node_size": 10, "label": "protecting seagrass"}, "estuaries": {"concepts": "estuaries", "type": "concept", "cluster": "Estuary Ecosystem", "node_size": 10, "label": "estuaries"}, "marine police": {"concepts": "marine police", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "marine police"}, "fish protection": {"concepts": "fish protection", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fish protection"}, "fishing guides": {"concepts": "fishing guides", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fishing guides"}, "experience fishery": {"concepts": "experience fishery", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "experience fishery"}, "breeder fish": {"concepts": "breeder fish", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "breeder fish"}, "poaching": {"concepts": "poaching", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "poaching"}, "white trout": {"concepts": "white trout", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "white trout"}, "fishing charters": {"concepts": "fishing charters", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fishing charters"}, "speckled trout": {"concepts": "speckled trout", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "speckled trout"}, "marine regulations": {"concepts": "marine regulations", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "marine regulations"}, "fisheries management": {"concepts": "fisheries management", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fisheries management"}, "fish max": {"concepts": "fish max", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fish max"}, "overfishing": {"concepts": "overfishing", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "overfishing"}, "recreational fishing": {"concepts": "recreational fishing", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "recreational fishing"}, "fishery": {"concepts": "fishery", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fishery"}, "state regulations": {"concepts": "state regulations", "type": "concept", "cluster": "Regulations & Rules", "node_size": 10, "label": "state regulations"}, "stricter regulations": {"concepts": "stricter regulations", "type": "concept", "cluster": "Regulations & Rules", "node_size": 10, "label": "stricter regulations"}, "guide regulations": {"concepts": "guide regulations", "type": "concept", "cluster": "Regulations & Rules", "node_size": 10, "label": "guide regulations"}, "personal regulations": {"concepts": "personal regulations", "type": "concept", "cluster": "Regulations & Rules", "node_size": 10, "label": "personal regulations"}, "regulations": {"concepts": "regulations", "type": "concept", "cluster": "Regulations & Rules", "node_size": 10, "label": "regulations"}, "integrity": {"concepts": "integrity", "type": "concept", "cluster": "Regulations & Rules", "node_size": 10, "label": "integrity"}, "anonymity": {"concepts": "anonymity", "type": "concept", "cluster": "Regulations & Rules", "node_size": 10, "label": "anonymity"}, "confidentiality": {"concepts": "confidentiality", "type": "concept", "cluster": "Regulations & Rules", "node_size": 10, "label": "confidentiality"}, "sunset cruises": {"concepts": "sunset cruises", "type": "concept", "cluster": "Boat Cruises", "node_size": 10, "label": "sunset cruises"}, "dolphin cruises": {"concepts": "dolphin cruises", "type": "concept", "cluster": "Boat Cruises", "node_size": 10, "label": "dolphin cruises"}, "boat cruise": {"concepts": "boat cruise", "type": "concept", "cluster": "Boat Cruises", "node_size": 10, "label": "boat cruise"}, "dolphin cruise": {"concepts": "dolphin cruise", "type": "concept", "cluster": "Boat Cruises", "node_size": 10, "label": "dolphin cruise"}, "boat traffic": {"concepts": "boat traffic", "type": "concept", "cluster": "Boating Harassment", "node_size": 10, "label": "boat traffic"}, "harassment": {"concepts": "harassment", "type": "concept", "cluster": "Boating Harassment", "node_size": 10, "label": "harassment"}, "boat captains": {"concepts": "boat captains", "type": "concept", "cluster": "Boating Harassment", "node_size": 10, "label": "boat captains"}, "booze cruise": {"concepts": "booze cruise", "type": "concept", "cluster": "Boating Harassment", "node_size": 10, "label": "booze cruise"}};
        const interClusterEdges = [["dolphin cruise guide", "Boat Cruises", {"weight": 1.0, "confidence": 0.7999999999999999, "type": "inter_cluster", "style": "solid"}], ["dolphin cruise guide", "Cognitive Understanding", {"weight": 1.0, "confidence": 0.5, "type": "inter_cluster", "style": "solid"}], ["Social Interactions", "Cognitive Understanding", {"weight": 1.0, "confidence": 0.625, "type": "inter_cluster", "style": "solid"}], ["Fishing & Marine Life", "Marine Biodiversity", {"weight": -1.0, "confidence": 0.7250000000000001, "type": "inter_cluster", "style": "solid"}], ["Fishing & Marine Life", "Cognitive Understanding", {"weight": -1.0, "confidence": 0.5399999999999999, "type": "inter_cluster", "style": "solid"}], ["Fishing & Marine Life", "Estuary Ecosystem", {"weight": -1.0, "confidence": 0.525, "type": "inter_cluster", "style": "solid"}], ["Fishing & Marine Life", "Environmental Concerns", {"weight": -0.8, "confidence": 0.25999999999999995, "type": "inter_cluster", "style": "solid"}], ["Fishing & Marine Life", "dolphin cruise guide", {"weight": -0.6666666666666666, "confidence": 0.19999999999999998, "type": "inter_cluster", "style": "solid"}], ["Cognitive Understanding", "Social Interactions", {"weight": 1.0, "confidence": 0.74, "type": "inter_cluster", "style": "solid"}], ["Cognitive Understanding", "Marine Biodiversity", {"weight": 1.0, "confidence": 0.61, "type": "inter_cluster", "style": "solid"}], ["Cognitive Understanding", "Estuary Ecosystem", {"weight": 1.0, "confidence": 0.42000000000000004, "type": "inter_cluster", "style": "solid"}], ["Cognitive Understanding", "Fishing & Marine Life", {"weight": -1.0, "confidence": 0.35, "type": "inter_cluster", "style": "solid"}], ["Cognitive Understanding", "Fisheries Management", {"weight": -0.5, "confidence": 0.1, "type": "inter_cluster", "style": "solid"}], ["Cognitive Understanding", "Boating Harassment", {"weight": -0.3333333333333333, "confidence": 0.06666666666666667, "type": "inter_cluster", "style": "solid"}], ["Marine Biodiversity", "Estuary Ecosystem", {"weight": 1.0, "confidence": 0.6900000000000001, "type": "inter_cluster", "style": "solid"}], ["Marine Biodiversity", "Boat Cruises", {"weight": 1.0, "confidence": 0.6875, "type": "inter_cluster", "style": "solid"}], ["Marine Biodiversity", "Environmental Concerns", {"weight": 1.0, "confidence": 0.4, "type": "inter_cluster", "style": "solid"}], ["Marine Biodiversity", "Fishing & Marine Life", {"weight": -1.0, "confidence": 0.4666666666666666, "type": "inter_cluster", "style": "solid"}], ["Marine Biodiversity", "Fisheries Management", {"weight": 0.6666666666666666, "confidence": 0.2333333333333333, "type": "inter_cluster", "style": "solid"}], ["Estuary Ecosystem", "Southern Science Reviews", {"weight": 0.3333333333333333, "confidence": 0.06666666666666667, "type": "inter_cluster", "style": "solid"}], ["Fisheries Management", "Cognitive Understanding", {"weight": 0.5, "confidence": 0.475, "type": "inter_cluster", "style": "solid"}], ["Fisheries Management", "Regulations & Rules", {"weight": 0.8, "confidence": 0.44000000000000006, "type": "inter_cluster", "style": "solid"}], ["Fisheries Management", "Marine Biodiversity", {"weight": 1.0, "confidence": 0.4666666666666666, "type": "inter_cluster", "style": "solid"}], ["Fisheries Management", "Estuary Ecosystem", {"weight": 0.6666666666666666, "confidence": 0.2333333333333333, "type": "inter_cluster", "style": "solid"}], ["Regulations & Rules", "Fisheries Management", {"weight": 1.0, "confidence": 0.6875, "type": "inter_cluster", "style": "solid"}], ["Regulations & Rules", "Cognitive Understanding", {"weight": 1.0, "confidence": 0.42000000000000004, "type": "inter_cluster", "style": "solid"}], ["Regulations & Rules", "Fishing & Marine Life", {"weight": 0.2, "confidence": 0.32, "type": "inter_cluster", "style": "solid"}]];
        const clusterConcepts = {"Social Interactions": [["business", {"concepts": "business", "type": "concept", "cluster": "Social Interactions", "node_size": 10, "label": "business"}], ["management decisions", {"concepts": "management decisions", "type": "concept", "cluster": "Social Interactions", "node_size": 10, "label": "management decisions"}], ["economic standing", {"concepts": "economic standing", "type": "concept", "cluster": "Social Interactions", "node_size": 10, "label": "economic standing"}], ["industry", {"concepts": "industry", "type": "concept", "cluster": "Social Interactions", "node_size": 10, "label": "industry"}], ["economic impacts", {"concepts": "economic impacts", "type": "concept", "cluster": "Social Interactions", "node_size": 10, "label": "economic impacts"}], ["expensive meal", {"concepts": "expensive meal", "type": "concept", "cluster": "Social Interactions", "node_size": 10, "label": "expensive meal"}], ["economic benefits", {"concepts": "economic benefits", "type": "concept", "cluster": "Social Interactions", "node_size": 10, "label": "economic benefits"}]], "Environmental Concerns": [["social benefits", {"concepts": "social benefits", "type": "concept", "cluster": "Environmental Concerns", "node_size": 10, "label": "social benefits"}], ["social impacts", {"concepts": "social impacts", "type": "concept", "cluster": "Environmental Concerns", "node_size": 10, "label": "social impacts"}], ["great people", {"concepts": "great people", "type": "concept", "cluster": "Environmental Concerns", "node_size": 10, "label": "great people"}], ["social media", {"concepts": "social media", "type": "concept", "cluster": "Environmental Concerns", "node_size": 10, "label": "social media"}]], "Fishing & Marine Life": [["litter", {"concepts": "litter", "type": "concept", "cluster": "Fishing & Marine Life", "node_size": 10, "label": "litter"}], ["environmental factors", {"concepts": "environmental factors", "type": "concept", "cluster": "Fishing & Marine Life", "node_size": 10, "label": "environmental factors"}], ["biodiversity", {"concepts": "biodiversity", "type": "concept", "cluster": "Fishing & Marine Life", "node_size": 10, "label": "biodiversity"}], ["lack of regulation", {"concepts": "lack of regulation", "type": "concept", "cluster": "Fishing & Marine Life", "node_size": 10, "label": "lack of regulation"}], ["negative impacts", {"concepts": "negative impacts", "type": "concept", "cluster": "Fishing & Marine Life", "node_size": 10, "label": "negative impacts"}], ["trash", {"concepts": "trash", "type": "concept", "cluster": "Fishing & Marine Life", "node_size": 10, "label": "trash"}], ["area impact", {"concepts": "area impact", "type": "concept", "cluster": "Fishing & Marine Life", "node_size": 10, "label": "area impact"}], ["environmental groups", {"concepts": "environmental groups", "type": "concept", "cluster": "Fishing & Marine Life", "node_size": 10, "label": "environmental groups"}]], "Cognitive Understanding": [["fishing", {"concepts": "fishing", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "fishing"}], ["charter captain", {"concepts": "charter captain", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "charter captain"}], ["target species", {"concepts": "target species", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "target species"}], ["inshore charter", {"concepts": "inshore charter", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "inshore charter"}], ["experience", {"concepts": "experience", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "experience"}], ["positive reviews", {"concepts": "positive reviews", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "positive reviews"}], ["snorkeling", {"concepts": "snorkeling", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "snorkeling"}], ["variety of prey", {"concepts": "variety of prey", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "variety of prey"}], ["youtube videos", {"concepts": "youtube videos", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "youtube videos"}], ["audience", {"concepts": "audience", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "audience"}], ["state trooper", {"concepts": "state trooper", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "state trooper"}], ["snorkeling trips", {"concepts": "snorkeling trips", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "snorkeling trips"}], ["hard biology", {"concepts": "hard biology", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "hard biology"}], ["filets", {"concepts": "filets", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "filets"}], ["predatory animals", {"concepts": "predatory animals", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "predatory animals"}], ["hard facts", {"concepts": "hard facts", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "hard facts"}], ["opinions", {"concepts": "opinions", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "opinions"}], ["snorkeling trip", {"concepts": "snorkeling trip", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "snorkeling trip"}], ["concept mapping", {"concepts": "concept mapping", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "concept mapping"}], ["island hopping", {"concepts": "island hopping", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "island hopping"}], ["weeks bay", {"concepts": "weeks bay", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "weeks bay"}], ["manatees", {"concepts": "manatees", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "manatees"}], ["size regulation", {"concepts": "size regulation", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "size regulation"}], ["snorkeling habitat", {"concepts": "snorkeling habitat", "type": "concept", "cluster": "Cognitive Understanding", "node_size": 10, "label": "snorkeling habitat"}]], "Southern Science Reviews": [["soft science", {"concepts": "soft science", "type": "concept", "cluster": "Southern Science Reviews", "node_size": 10, "label": "soft science"}], ["southern rows", {"concepts": "southern rows", "type": "concept", "cluster": "Southern Science Reviews", "node_size": 10, "label": "southern rows"}], ["reviews", {"concepts": "reviews", "type": "concept", "cluster": "Southern Science Reviews", "node_size": 10, "label": "reviews"}], ["cognitive mapping", {"concepts": "cognitive mapping", "type": "concept", "cluster": "Southern Science Reviews", "node_size": 10, "label": "cognitive mapping"}], ["different audience", {"concepts": "different audience", "type": "concept", "cluster": "Southern Science Reviews", "node_size": 10, "label": "different audience"}], ["mindset", {"concepts": "mindset", "type": "concept", "cluster": "Southern Science Reviews", "node_size": 10, "label": "mindset"}], ["note-taking", {"concepts": "note-taking", "type": "concept", "cluster": "Southern Science Reviews", "node_size": 10, "label": "note-taking"}], ["unique ecosystems", {"concepts": "unique ecosystems", "type": "concept", "cluster": "Southern Science Reviews", "node_size": 10, "label": "unique ecosystems"}], ["psychological map", {"concepts": "psychological map", "type": "concept", "cluster": "Southern Science Reviews", "node_size": 10, "label": "psychological map"}]], "Marine Biodiversity": [["marine biodiversity", {"concepts": "marine biodiversity", "type": "concept", "cluster": "Marine Biodiversity", "node_size": 10, "label": "marine biodiversity"}], ["fish diversity", {"concepts": "fish diversity", "type": "concept", "cluster": "Marine Biodiversity", "node_size": 10, "label": "fish diversity"}], ["marine activities", {"concepts": "marine activities", "type": "concept", "cluster": "Marine Biodiversity", "node_size": 10, "label": "marine activities"}], ["marine life", {"concepts": "marine life", "type": "concept", "cluster": "Marine Biodiversity", "node_size": 10, "label": "marine life"}], ["coastal biodiversity", {"concepts": "coastal biodiversity", "type": "concept", "cluster": "Marine Biodiversity", "node_size": 10, "label": "coastal biodiversity"}]], "Estuary Ecosystem": [["jellyfish", {"concepts": "jellyfish", "type": "concept", "cluster": "Estuary Ecosystem", "node_size": 10, "label": "jellyfish"}], ["oyster reefs", {"concepts": "oyster reefs", "type": "concept", "cluster": "Estuary Ecosystem", "node_size": 10, "label": "oyster reefs"}], ["intercoastal waterways", {"concepts": "intercoastal waterways", "type": "concept", "cluster": "Estuary Ecosystem", "node_size": 10, "label": "intercoastal waterways"}], ["estuary protection", {"concepts": "estuary protection", "type": "concept", "cluster": "Estuary Ecosystem", "node_size": 10, "label": "estuary protection"}], ["seagrass", {"concepts": "seagrass", "type": "concept", "cluster": "Estuary Ecosystem", "node_size": 10, "label": "seagrass"}], ["protecting seagrass", {"concepts": "protecting seagrass", "type": "concept", "cluster": "Estuary Ecosystem", "node_size": 10, "label": "protecting seagrass"}], ["estuaries", {"concepts": "estuaries", "type": "concept", "cluster": "Estuary Ecosystem", "node_size": 10, "label": "estuaries"}]], "Fisheries Management": [["marine police", {"concepts": "marine police", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "marine police"}], ["fish protection", {"concepts": "fish protection", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fish protection"}], ["fishing guides", {"concepts": "fishing guides", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fishing guides"}], ["experience fishery", {"concepts": "experience fishery", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "experience fishery"}], ["breeder fish", {"concepts": "breeder fish", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "breeder fish"}], ["poaching", {"concepts": "poaching", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "poaching"}], ["white trout", {"concepts": "white trout", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "white trout"}], ["fishing charters", {"concepts": "fishing charters", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fishing charters"}], ["speckled trout", {"concepts": "speckled trout", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "speckled trout"}], ["marine regulations", {"concepts": "marine regulations", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "marine regulations"}], ["fisheries management", {"concepts": "fisheries management", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fisheries management"}], ["fish max", {"concepts": "fish max", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fish max"}], ["overfishing", {"concepts": "overfishing", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "overfishing"}], ["recreational fishing", {"concepts": "recreational fishing", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "recreational fishing"}], ["fishery", {"concepts": "fishery", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fishery"}]], "Regulations & Rules": [["state regulations", {"concepts": "state regulations", "type": "concept", "cluster": "Regulations & Rules", "node_size": 10, "label": "state regulations"}], ["stricter regulations", {"concepts": "stricter regulations", "type": "concept", "cluster": "Regulations & Rules", "node_size": 10, "label": "stricter regulations"}], ["guide regulations", {"concepts": "guide regulations", "type": "concept", "cluster": "Regulations & Rules", "node_size": 10, "label": "guide regulations"}], ["personal regulations", {"concepts": "personal regulations", "type": "concept", "cluster": "Regulations & Rules", "node_size": 10, "label": "personal regulations"}], ["regulations", {"concepts": "regulations", "type": "concept", "cluster": "Regulations & Rules", "node_size": 10, "label": "regulations"}], ["integrity", {"concepts": "integrity", "type": "concept", "cluster": "Regulations & Rules", "node_size": 10, "label": "integrity"}], ["anonymity", {"concepts": "anonymity", "type": "concept", "cluster": "Regulations & Rules", "node_size": 10, "label": "anonymity"}], ["confidentiality", {"concepts": "confidentiality", "type": "concept", "cluster": "Regulations & Rules", "node_size": 10, "label": "confidentiality"}]], "Boat Cruises": [["sunset cruises", {"concepts": "sunset cruises", "type": "concept", "cluster": "Boat Cruises", "node_size": 10, "label": "sunset cruises"}], ["dolphin cruises", {"concepts": "dolphin cruises", "type": "concept", "cluster": "Boat Cruises", "node_size": 10, "label": "dolphin cruises"}], ["boat cruise", {"concepts": "boat cruise", "type": "concept", "cluster": "Boat Cruises", "node_size": 10, "label": "boat cruise"}], ["dolphin cruise", {"concepts": "dolphin cruise", "type": "concept", "cluster": "Boat Cruises", "node_size": 10, "label": "dolphin cruise"}]], "Boating Harassment": [["boat traffic", {"concepts": "boat traffic", "type": "concept", "cluster": "Boating Harassment", "node_size": 10, "label": "boat traffic"}], ["harassment", {"concepts": "harassment", "type": "concept", "cluster": "Boating Harassment", "node_size": 10, "label": "harassment"}], ["boat captains", {"concepts": "boat captains", "type": "concept", "cluster": "Boating Harassment", "node_size": 10, "label": "boat captains"}], ["booze cruise", {"concepts": "booze cruise", "type": "concept", "cluster": "Boating Harassment", "node_size": 10, "label": "booze cruise"}]]};
        const clusterEdges = {"Social Interactions": [], "Environmental Concerns": [], "Fishing & Marine Life": [], "Cognitive Understanding": [], "Southern Science Reviews": [], "Marine Biodiversity": [], "Estuary Ecosystem": [], "Fisheries Management": [], "Regulations & Rules": [], "Boat Cruises": [], "Boating Harassment": []};
        
        let network;
        let currentView = 'clusters';
        let currentCluster = null;
        let minConfidence = 0.3;
        
        // Network options
        const options = {
            nodes: {
                font: { color: 'white', size: 14 },
                borderWidth: 2,
                shadow: true
            },
            edges: {
                arrows: { to: { enabled: true, scaleFactor: 1.2 } },
                shadow: true,
                smooth: { type: 'continuous' }
            },
            physics: {
                stabilization: { iterations: 100 },
                barnesHut: {
                    gravitationalConstant: -8000,
                    springConstant: 0.001,
                    springLength: 200
                }
            },
            interaction: {
                hover: true,
                selectConnectedEdges: false
            }
        };
        
        function initNetwork() {
            const container = document.getElementById('network');
            const data = getClusterViewData();
            network = new vis.Network(container, data, options);
            
            // Handle cluster clicks for drill-down
            network.on("click", function(params) {
                if (params.nodes.length > 0 && currentView === 'clusters') {
                    const clickedNode = params.nodes[0];
                    if (clusterConcepts[clickedNode]) {
                        showClusterDetail(clickedNode);
                    }
                }
            });
        }
        
        function getClusterViewData() {
            const nodes = [];
            const edges = [];
            
            // Add cluster nodes
            Object.entries(clusterData).forEach(([clusterId, data]) => {
                const concepts = data.concepts || [];
                const conceptsStr = Array.isArray(concepts) ? concepts.join(', ') : concepts;
                
                nodes.push({
                    id: clusterId,
                    label: clusterId,
                    title: `Cluster: ${clusterId}\nConcepts: ${conceptsStr}\nClick to explore internal relationships`,
                    color: '#4A90E2',
                    size: 25 + (conceptsStr.split(',').length * 2),
                    font: { color: 'white' }
                });
            });
            
            // Add inter-cluster edges
            interClusterEdges.forEach(([source, target, edgeData]) => {
                const confidence = edgeData.confidence || 1.0;
                const weight = edgeData.weight || 0;
                
                if (confidence >= minConfidence) {
                    edges.push({
                        from: source,
                        to: target,
                        color: weight > 0 ? '#28A745' : '#DC3545',
                        width: Math.abs(weight) * 3 + 1,
                        title: `${source} → ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                        dashes: false
                    });
                }
            });
            
            return { nodes: nodes, edges: edges };
        }
        
        function getClusterDetailData(clusterId) {
            const nodes = [];
            const edges = [];
            
            // Add concept nodes for this cluster
            if (clusterConcepts[clusterId]) {
                clusterConcepts[clusterId].forEach(([conceptId, data]) => {
                    nodes.push({
                        id: conceptId,
                        label: conceptId,
                        title: `Concept: ${conceptId}\nFrom cluster: ${clusterId}`,
                        color: '#FF9500',
                        size: 20,
                        font: { color: 'white' }
                    });
                });
            }
            
            // Add intra-cluster edges
            if (clusterEdges[clusterId]) {
                clusterEdges[clusterId].forEach(([source, target, edgeData]) => {
                    const confidence = edgeData.confidence || 1.0;
                    const weight = edgeData.weight || 0;
                    
                    if (confidence >= minConfidence) {
                        edges.push({
                            from: source,
                            to: target,
                            color: weight > 0 ? '#28A745' : '#DC3545',
                            width: Math.abs(weight) * 3 + 1,
                            title: `${source} → ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                            dashes: true
                        });
                    }
                });
            }
            
            return { nodes: nodes, edges: edges };
        }
        
        function showClusterView() {
            currentView = 'clusters';
            currentCluster = null;
            const data = getClusterViewData();
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'none';
            document.getElementById('current-view').textContent = 'Cluster Overview';
        }
        
        function showClusterDetail(clusterId) {
            currentView = 'concepts';
            currentCluster = clusterId;
            const data = getClusterDetailData(clusterId);
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'inline-block';
            document.getElementById('current-view').textContent = `Inside Cluster: ${clusterId}`;
        }
        
        function updateConfidenceFilter(value) {
            minConfidence = parseFloat(value);
            document.getElementById('confidence-value').textContent = value;
            
            // Refresh current view
            if (currentView === 'clusters') {
                showClusterView();
            } else {
                showClusterDetail(currentCluster);
            }
        }
        
        // Initialize the network when page loads
        window.onload = function() {
            initNetwork();
        };
    </script>
</body>
</html>
