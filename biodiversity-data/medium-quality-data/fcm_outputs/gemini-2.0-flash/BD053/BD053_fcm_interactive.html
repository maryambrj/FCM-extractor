
<!DOCTYPE html>
<html>
<head>
    <title>Hierarchical FCM Visualization</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 0; 
            padding: 20px;
            background: #f5f5f5;
        }
        
        #network { 
            width: 100%; 
            height: 600px; 
            border: 2px solid #ccc; 
            background: white;
            border-radius: 8px;
        }
        
        #controls {
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn {
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        
        .btn-primary { background: #4A90E2; color: white; }
        .btn-primary:hover { background: #357ABD; }
        
        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #545b62; }
        
        #current-view {
            font-weight: bold;
            color: #333;
            margin-left: 10px;
        }
        
        #legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-size: 12px;
            max-width: 200px;
        }
        
        .legend-item {
            margin: 5px 0;
            display: flex;
            align-items: center;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .legend-line {
            width: 20px;
            height: 2px;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <h1>Fuzzy Cognitive Map - Hierarchical View</h1>
    
    <div id="controls">
        <button class="btn btn-secondary" id="back-btn" onclick="showClusterView()" style="display: none;">
            ‚Üê Back to Clusters
        </button>
        <span id="current-view">Cluster Overview</span>
        <div style="float: right;">
            <label>Min Confidence: </label>
            <input type="range" id="confidence-slider" min="0" max="1" step="0.1" value="0.3" 
                   onchange="updateConfidenceFilter(this.value)">
            <span id="confidence-value">0.3</span>
        </div>
    </div>
    
    <div id="network"></div>
    
    <div id="legend">
        <h4>Legend</h4>
        <div class="legend-item">
            <div class="legend-color" style="background: #4A90E2;"></div>
            <span>Clusters</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #FF9500;"></div>
            <span>Concepts</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #28A745;"></div>
            <span>Positive relationship</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #DC3545;"></div>
            <span>Negative relationship</span>
        </div>
        <div style="margin-top: 10px; font-style: italic; color: #666;">
            Click clusters to explore internal concepts
        </div>
    </div>

    <script>
        // Embedded data
        const clusterData = {"Chesapeake Bay Context": {"concepts": "scientific committee, fisheries management (organizational), marine resource management, adaptive management, regional managers, management strategies, management approaches (organizational), decision making, policy, manager expert, fisheries management, resource managers, restoration goals, restoration priorities, restoration actions, mitigation, oyster restoration, reef restoration, reef restoration (organizational), oyster restoration (organizational), restoration activities, ecosystem restoration, conservation activities, conservation, species conservation, marsh protection, habitat restoration, marsh restoration, sav beds, ecological conditions, habitat conditions, habitat, estuarine habitat, habitat forming (organizational), habitat forming species, landscapes, island habitat, food web functions (organizational), food web, system dynamics, biophysical ecosystem, social-ecological system, societal ecosystem, system components, local dynamics, climate stressors, oyster disease (medical), white-nose syndrome (medical), harmful organisms (organizational), harmful organisms, disease impacts, harmful organisms (medical), oyster viability, excess turbidity (organizational), dead zones, algal blooms, eutrophication, sedimentation, nutrient pollution, sediment pollution, water quality, water quality improvement, water quality (organizational), aquatic vegetation, dredge spoils", "concept_list": ["scientific committee", "fisheries management (organizational)", "marine resource management", "adaptive management", "regional managers", "management strategies", "management approaches (organizational)", "decision making", "policy", "manager expert", "fisheries management", "resource managers", "restoration goals", "restoration priorities", "restoration actions", "mitigation", "oyster restoration", "reef restoration", "reef restoration (organizational)", "oyster restoration (organizational)", "restoration activities", "ecosystem restoration", "conservation activities", "conservation", "species conservation", "marsh protection", "habitat restoration", "marsh restoration", "sav beds", "ecological conditions", "habitat conditions", "habitat", "estuarine habitat", "habitat forming (organizational)", "habitat forming species", "landscapes", "island habitat", "food web functions (organizational)", "food web", "system dynamics", "biophysical ecosystem", "social-ecological system", "societal ecosystem", "system components", "local dynamics", "climate stressors", "oyster disease (medical)", "white-nose syndrome (medical)", "harmful organisms (organizational)", "harmful organisms", "disease impacts", "harmful organisms (medical)", "oyster viability", "excess turbidity (organizational)", "dead zones", "algal blooms", "eutrophication", "sedimentation", "nutrient pollution", "sediment pollution", "water quality", "water quality improvement", "water quality (organizational)", "aquatic vegetation", "dredge spoils"], "type": "cluster", "node_size": 210, "label": "Chesapeake Bay Context"}, "Management & Resilience": {"concepts": "food value, ecosystem services, economic value, resource value, ecological economics, environmental economics, biodiversity benefits, local communities, recreational users, fisheries stakeholders, agricultural community, stakeholders, users, resource user, resource users, aquaculture industry (organizational), conservation partnership, agreement, alignment, tradeoffs, human development, resource limitations, resource experts, knowledge capture, academics, fish and wildlife, national fish, technical assistance, collaborative discussion, case studies, species, bat conservation (organizational), sea level rise, nfwf, consensus, biodiversity, keystone species, farmers, harvest level, catch rates, fish and wildlife service, epa, science, wildlife foundation, conservation concern (organizational), noaa", "concept_list": ["food value", "ecosystem services", "economic value", "resource value", "ecological economics", "environmental economics", "biodiversity benefits", "local communities", "recreational users", "fisheries stakeholders", "agricultural community", "stakeholders", "users", "resource user", "resource users", "aquaculture industry (organizational)", "conservation partnership", "agreement", "alignment", "tradeoffs", "human development", "resource limitations", "resource experts", "knowledge capture", "academics", "fish and wildlife", "national fish", "technical assistance", "collaborative discussion", "case studies", "species", "bat conservation (organizational)", "sea level rise", "nfwf", "consensus", "biodiversity", "keystone species", "farmers", "harvest level", "catch rates", "fish and wildlife service", "epa", "science", "wildlife foundation", "conservation concern (organizational)", "noaa"], "type": "cluster", "node_size": 153, "label": "Management & Resilience"}, "Water Quality Impacts": {"concepts": "management approaches, man-made reefs (organizational), species of concern (organizational), watershed sources (organizational), habitat goal, environmental protection agency, smith island, usda, community resilience, chesapeake bay foundation, chesapeake bay program, chesapeake bay watershed, estuary, chesapeake research consortium, chesapeake programs, bay watershed, state level, local level, oyster reef sanctuaries (organizational), bottom habitat (organizational), historic populations (organizational), overharvesting (organizational), sediment delivery (organizational)", "concept_list": ["management approaches", "man-made reefs (organizational)", "species of concern (organizational)", "watershed sources (organizational)", "habitat goal", "environmental protection agency", "smith island", "usda", "community resilience", "chesapeake bay foundation", "chesapeake bay program", "chesapeake bay watershed", "estuary", "chesapeake research consortium", "chesapeake programs", "bay watershed", "state level", "local level", "oyster reef sanctuaries (organizational)", "bottom habitat (organizational)", "historic populations (organizational)", "overharvesting (organizational)", "sediment delivery (organizational)"], "type": "cluster", "node_size": 84, "label": "Water Quality Impacts"}, "Federal Action": {"concepts": "federal level, federal law, federal investments", "concept_list": ["federal level", "federal law", "federal investments"], "type": "cluster", "node_size": 24, "label": "Federal Action"}, "Grant Funding": {"concepts": "grant funding, grants programs, competitive grants, stewardship fund, stewardship fund program", "concept_list": ["grant funding", "grants programs", "competitive grants", "stewardship fund", "stewardship fund program"], "type": "cluster", "node_size": 30, "label": "Grant Funding"}, "Bay Area Funding": {"concepts": "bay partnership, private sector, social capital, funders", "concept_list": ["bay partnership", "private sector", "social capital", "funders"], "type": "cluster", "node_size": 27, "label": "Bay Area Funding"}, "Government Research": {"concepts": "leverage points, research institution, government researcher", "concept_list": ["leverage points", "research institution", "government researcher"], "type": "cluster", "node_size": 24, "label": "Government Research"}};
        const conceptData = {"scientific committee": {"concepts": "scientific committee", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "scientific committee"}, "fisheries management (organizational)": {"concepts": "fisheries management (organizational)", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "fisheries management (organizational)"}, "marine resource management": {"concepts": "marine resource management", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "marine resource management"}, "adaptive management": {"concepts": "adaptive management", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "adaptive management"}, "regional managers": {"concepts": "regional managers", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "regional managers"}, "management strategies": {"concepts": "management strategies", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "management strategies"}, "management approaches (organizational)": {"concepts": "management approaches (organizational)", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "management approaches (organizational)"}, "decision making": {"concepts": "decision making", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "decision making"}, "policy": {"concepts": "policy", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "policy"}, "manager expert": {"concepts": "manager expert", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "manager expert"}, "fisheries management": {"concepts": "fisheries management", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "fisheries management"}, "resource managers": {"concepts": "resource managers", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "resource managers"}, "restoration goals": {"concepts": "restoration goals", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "restoration goals"}, "restoration priorities": {"concepts": "restoration priorities", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "restoration priorities"}, "restoration actions": {"concepts": "restoration actions", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "restoration actions"}, "mitigation": {"concepts": "mitigation", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "mitigation"}, "oyster restoration": {"concepts": "oyster restoration", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "oyster restoration"}, "reef restoration": {"concepts": "reef restoration", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "reef restoration"}, "reef restoration (organizational)": {"concepts": "reef restoration (organizational)", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "reef restoration (organizational)"}, "oyster restoration (organizational)": {"concepts": "oyster restoration (organizational)", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "oyster restoration (organizational)"}, "restoration activities": {"concepts": "restoration activities", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "restoration activities"}, "ecosystem restoration": {"concepts": "ecosystem restoration", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "ecosystem restoration"}, "conservation activities": {"concepts": "conservation activities", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "conservation activities"}, "conservation": {"concepts": "conservation", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "conservation"}, "species conservation": {"concepts": "species conservation", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "species conservation"}, "marsh protection": {"concepts": "marsh protection", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "marsh protection"}, "habitat restoration": {"concepts": "habitat restoration", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "habitat restoration"}, "marsh restoration": {"concepts": "marsh restoration", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "marsh restoration"}, "sav beds": {"concepts": "sav beds", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "sav beds"}, "ecological conditions": {"concepts": "ecological conditions", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "ecological conditions"}, "habitat conditions": {"concepts": "habitat conditions", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "habitat conditions"}, "habitat": {"concepts": "habitat", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "habitat"}, "estuarine habitat": {"concepts": "estuarine habitat", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "estuarine habitat"}, "habitat forming (organizational)": {"concepts": "habitat forming (organizational)", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "habitat forming (organizational)"}, "habitat forming species": {"concepts": "habitat forming species", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "habitat forming species"}, "landscapes": {"concepts": "landscapes", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "landscapes"}, "island habitat": {"concepts": "island habitat", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "island habitat"}, "food web functions (organizational)": {"concepts": "food web functions (organizational)", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "food web functions (organizational)"}, "food web": {"concepts": "food web", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "food web"}, "system dynamics": {"concepts": "system dynamics", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "system dynamics"}, "biophysical ecosystem": {"concepts": "biophysical ecosystem", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "biophysical ecosystem"}, "social-ecological system": {"concepts": "social-ecological system", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "social-ecological system"}, "societal ecosystem": {"concepts": "societal ecosystem", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "societal ecosystem"}, "system components": {"concepts": "system components", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "system components"}, "local dynamics": {"concepts": "local dynamics", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "local dynamics"}, "climate stressors": {"concepts": "climate stressors", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "climate stressors"}, "oyster disease (medical)": {"concepts": "oyster disease (medical)", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "oyster disease (medical)"}, "white-nose syndrome (medical)": {"concepts": "white-nose syndrome (medical)", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "white-nose syndrome (medical)"}, "harmful organisms (organizational)": {"concepts": "harmful organisms (organizational)", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "harmful organisms (organizational)"}, "harmful organisms": {"concepts": "harmful organisms", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "harmful organisms"}, "disease impacts": {"concepts": "disease impacts", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "disease impacts"}, "harmful organisms (medical)": {"concepts": "harmful organisms (medical)", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "harmful organisms (medical)"}, "oyster viability": {"concepts": "oyster viability", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "oyster viability"}, "excess turbidity (organizational)": {"concepts": "excess turbidity (organizational)", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "excess turbidity (organizational)"}, "dead zones": {"concepts": "dead zones", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "dead zones"}, "algal blooms": {"concepts": "algal blooms", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "algal blooms"}, "eutrophication": {"concepts": "eutrophication", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "eutrophication"}, "sedimentation": {"concepts": "sedimentation", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "sedimentation"}, "nutrient pollution": {"concepts": "nutrient pollution", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "nutrient pollution"}, "sediment pollution": {"concepts": "sediment pollution", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "sediment pollution"}, "water quality": {"concepts": "water quality", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "water quality"}, "water quality improvement": {"concepts": "water quality improvement", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "water quality improvement"}, "water quality (organizational)": {"concepts": "water quality (organizational)", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "water quality (organizational)"}, "aquatic vegetation": {"concepts": "aquatic vegetation", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "aquatic vegetation"}, "dredge spoils": {"concepts": "dredge spoils", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "dredge spoils"}, "food value": {"concepts": "food value", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "food value"}, "ecosystem services": {"concepts": "ecosystem services", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "ecosystem services"}, "economic value": {"concepts": "economic value", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "economic value"}, "resource value": {"concepts": "resource value", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "resource value"}, "ecological economics": {"concepts": "ecological economics", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "ecological economics"}, "environmental economics": {"concepts": "environmental economics", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "environmental economics"}, "biodiversity benefits": {"concepts": "biodiversity benefits", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "biodiversity benefits"}, "local communities": {"concepts": "local communities", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "local communities"}, "recreational users": {"concepts": "recreational users", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "recreational users"}, "fisheries stakeholders": {"concepts": "fisheries stakeholders", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "fisheries stakeholders"}, "agricultural community": {"concepts": "agricultural community", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "agricultural community"}, "stakeholders": {"concepts": "stakeholders", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "stakeholders"}, "users": {"concepts": "users", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "users"}, "resource user": {"concepts": "resource user", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "resource user"}, "resource users": {"concepts": "resource users", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "resource users"}, "aquaculture industry (organizational)": {"concepts": "aquaculture industry (organizational)", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "aquaculture industry (organizational)"}, "conservation partnership": {"concepts": "conservation partnership", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "conservation partnership"}, "agreement": {"concepts": "agreement", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "agreement"}, "alignment": {"concepts": "alignment", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "alignment"}, "tradeoffs": {"concepts": "tradeoffs", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "tradeoffs"}, "human development": {"concepts": "human development", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "human development"}, "resource limitations": {"concepts": "resource limitations", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "resource limitations"}, "resource experts": {"concepts": "resource experts", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "resource experts"}, "knowledge capture": {"concepts": "knowledge capture", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "knowledge capture"}, "academics": {"concepts": "academics", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "academics"}, "fish and wildlife": {"concepts": "fish and wildlife", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "fish and wildlife"}, "national fish": {"concepts": "national fish", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "national fish"}, "technical assistance": {"concepts": "technical assistance", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "technical assistance"}, "collaborative discussion": {"concepts": "collaborative discussion", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "collaborative discussion"}, "case studies": {"concepts": "case studies", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "case studies"}, "species": {"concepts": "species", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "species"}, "bat conservation (organizational)": {"concepts": "bat conservation (organizational)", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "bat conservation (organizational)"}, "sea level rise": {"concepts": "sea level rise", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "sea level rise"}, "nfwf": {"concepts": "nfwf", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "nfwf"}, "consensus": {"concepts": "consensus", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "consensus"}, "biodiversity": {"concepts": "biodiversity", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "biodiversity"}, "keystone species": {"concepts": "keystone species", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "keystone species"}, "farmers": {"concepts": "farmers", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "farmers"}, "harvest level": {"concepts": "harvest level", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "harvest level"}, "catch rates": {"concepts": "catch rates", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "catch rates"}, "fish and wildlife service": {"concepts": "fish and wildlife service", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "fish and wildlife service"}, "epa": {"concepts": "epa", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "epa"}, "science": {"concepts": "science", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "science"}, "wildlife foundation": {"concepts": "wildlife foundation", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "wildlife foundation"}, "conservation concern (organizational)": {"concepts": "conservation concern (organizational)", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "conservation concern (organizational)"}, "noaa": {"concepts": "noaa", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "noaa"}, "management approaches": {"concepts": "management approaches", "type": "concept", "cluster": "Water Quality Impacts", "node_size": 10, "label": "management approaches"}, "man-made reefs (organizational)": {"concepts": "man-made reefs (organizational)", "type": "concept", "cluster": "Water Quality Impacts", "node_size": 10, "label": "man-made reefs (organizational)"}, "species of concern (organizational)": {"concepts": "species of concern (organizational)", "type": "concept", "cluster": "Water Quality Impacts", "node_size": 10, "label": "species of concern (organizational)"}, "watershed sources (organizational)": {"concepts": "watershed sources (organizational)", "type": "concept", "cluster": "Water Quality Impacts", "node_size": 10, "label": "watershed sources (organizational)"}, "habitat goal": {"concepts": "habitat goal", "type": "concept", "cluster": "Water Quality Impacts", "node_size": 10, "label": "habitat goal"}, "environmental protection agency": {"concepts": "environmental protection agency", "type": "concept", "cluster": "Water Quality Impacts", "node_size": 10, "label": "environmental protection agency"}, "smith island": {"concepts": "smith island", "type": "concept", "cluster": "Water Quality Impacts", "node_size": 10, "label": "smith island"}, "usda": {"concepts": "usda", "type": "concept", "cluster": "Water Quality Impacts", "node_size": 10, "label": "usda"}, "community resilience": {"concepts": "community resilience", "type": "concept", "cluster": "Water Quality Impacts", "node_size": 10, "label": "community resilience"}, "chesapeake bay foundation": {"concepts": "chesapeake bay foundation", "type": "concept", "cluster": "Water Quality Impacts", "node_size": 10, "label": "chesapeake bay foundation"}, "chesapeake bay program": {"concepts": "chesapeake bay program", "type": "concept", "cluster": "Water Quality Impacts", "node_size": 10, "label": "chesapeake bay program"}, "chesapeake bay watershed": {"concepts": "chesapeake bay watershed", "type": "concept", "cluster": "Water Quality Impacts", "node_size": 10, "label": "chesapeake bay watershed"}, "estuary": {"concepts": "estuary", "type": "concept", "cluster": "Water Quality Impacts", "node_size": 10, "label": "estuary"}, "chesapeake research consortium": {"concepts": "chesapeake research consortium", "type": "concept", "cluster": "Water Quality Impacts", "node_size": 10, "label": "chesapeake research consortium"}, "chesapeake programs": {"concepts": "chesapeake programs", "type": "concept", "cluster": "Water Quality Impacts", "node_size": 10, "label": "chesapeake programs"}, "bay watershed": {"concepts": "bay watershed", "type": "concept", "cluster": "Water Quality Impacts", "node_size": 10, "label": "bay watershed"}, "state level": {"concepts": "state level", "type": "concept", "cluster": "Water Quality Impacts", "node_size": 10, "label": "state level"}, "local level": {"concepts": "local level", "type": "concept", "cluster": "Water Quality Impacts", "node_size": 10, "label": "local level"}, "oyster reef sanctuaries (organizational)": {"concepts": "oyster reef sanctuaries (organizational)", "type": "concept", "cluster": "Water Quality Impacts", "node_size": 10, "label": "oyster reef sanctuaries (organizational)"}, "bottom habitat (organizational)": {"concepts": "bottom habitat (organizational)", "type": "concept", "cluster": "Water Quality Impacts", "node_size": 10, "label": "bottom habitat (organizational)"}, "historic populations (organizational)": {"concepts": "historic populations (organizational)", "type": "concept", "cluster": "Water Quality Impacts", "node_size": 10, "label": "historic populations (organizational)"}, "overharvesting (organizational)": {"concepts": "overharvesting (organizational)", "type": "concept", "cluster": "Water Quality Impacts", "node_size": 10, "label": "overharvesting (organizational)"}, "sediment delivery (organizational)": {"concepts": "sediment delivery (organizational)", "type": "concept", "cluster": "Water Quality Impacts", "node_size": 10, "label": "sediment delivery (organizational)"}, "federal level": {"concepts": "federal level", "type": "concept", "cluster": "Federal Action", "node_size": 10, "label": "federal level"}, "federal law": {"concepts": "federal law", "type": "concept", "cluster": "Federal Action", "node_size": 10, "label": "federal law"}, "federal investments": {"concepts": "federal investments", "type": "concept", "cluster": "Federal Action", "node_size": 10, "label": "federal investments"}, "grant funding": {"concepts": "grant funding", "type": "concept", "cluster": "Grant Funding", "node_size": 10, "label": "grant funding"}, "grants programs": {"concepts": "grants programs", "type": "concept", "cluster": "Grant Funding", "node_size": 10, "label": "grants programs"}, "competitive grants": {"concepts": "competitive grants", "type": "concept", "cluster": "Grant Funding", "node_size": 10, "label": "competitive grants"}, "stewardship fund": {"concepts": "stewardship fund", "type": "concept", "cluster": "Grant Funding", "node_size": 10, "label": "stewardship fund"}, "stewardship fund program": {"concepts": "stewardship fund program", "type": "concept", "cluster": "Grant Funding", "node_size": 10, "label": "stewardship fund program"}, "bay partnership": {"concepts": "bay partnership", "type": "concept", "cluster": "Bay Area Funding", "node_size": 10, "label": "bay partnership"}, "private sector": {"concepts": "private sector", "type": "concept", "cluster": "Bay Area Funding", "node_size": 10, "label": "private sector"}, "social capital": {"concepts": "social capital", "type": "concept", "cluster": "Bay Area Funding", "node_size": 10, "label": "social capital"}, "funders": {"concepts": "funders", "type": "concept", "cluster": "Bay Area Funding", "node_size": 10, "label": "funders"}, "leverage points": {"concepts": "leverage points", "type": "concept", "cluster": "Government Research", "node_size": 10, "label": "leverage points"}, "research institution": {"concepts": "research institution", "type": "concept", "cluster": "Government Research", "node_size": 10, "label": "research institution"}, "government researcher": {"concepts": "government researcher", "type": "concept", "cluster": "Government Research", "node_size": 10, "label": "government researcher"}};
        const interClusterEdges = [["Chesapeake Bay Context", "Bay Area Funding", {"weight": 0.4, "confidence": 0.12, "type": "inter_cluster", "style": "solid"}], ["Management & Resilience", "Government Research", {"weight": 0.8, "confidence": 0.32, "type": "inter_cluster", "style": "solid"}], ["Management & Resilience", "Grant Funding", {"weight": 0.6666666666666666, "confidence": 0.3666666666666667, "type": "inter_cluster", "style": "solid"}], ["Water Quality Impacts", "Grant Funding", {"weight": 0.75, "confidence": 0.4, "type": "inter_cluster", "style": "solid"}], ["Water Quality Impacts", "Government Research", {"weight": 0.5, "confidence": 0.2, "type": "inter_cluster", "style": "solid"}], ["Federal Action", "Grant Funding", {"weight": 1.0, "confidence": 0.8124999999999999, "type": "inter_cluster", "style": "solid"}], ["Federal Action", "Bay Area Funding", {"weight": 1.0, "confidence": 0.5875, "type": "inter_cluster", "style": "solid"}], ["Grant Funding", "Government Research", {"weight": 0.2, "confidence": 0.22000000000000003, "type": "inter_cluster", "style": "solid"}]];
        const clusterConcepts = {"Chesapeake Bay Context": [["scientific committee", {"concepts": "scientific committee", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "scientific committee"}], ["fisheries management (organizational)", {"concepts": "fisheries management (organizational)", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "fisheries management (organizational)"}], ["marine resource management", {"concepts": "marine resource management", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "marine resource management"}], ["adaptive management", {"concepts": "adaptive management", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "adaptive management"}], ["regional managers", {"concepts": "regional managers", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "regional managers"}], ["management strategies", {"concepts": "management strategies", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "management strategies"}], ["management approaches (organizational)", {"concepts": "management approaches (organizational)", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "management approaches (organizational)"}], ["decision making", {"concepts": "decision making", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "decision making"}], ["policy", {"concepts": "policy", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "policy"}], ["manager expert", {"concepts": "manager expert", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "manager expert"}], ["fisheries management", {"concepts": "fisheries management", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "fisheries management"}], ["resource managers", {"concepts": "resource managers", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "resource managers"}], ["restoration goals", {"concepts": "restoration goals", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "restoration goals"}], ["restoration priorities", {"concepts": "restoration priorities", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "restoration priorities"}], ["restoration actions", {"concepts": "restoration actions", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "restoration actions"}], ["mitigation", {"concepts": "mitigation", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "mitigation"}], ["oyster restoration", {"concepts": "oyster restoration", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "oyster restoration"}], ["reef restoration", {"concepts": "reef restoration", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "reef restoration"}], ["reef restoration (organizational)", {"concepts": "reef restoration (organizational)", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "reef restoration (organizational)"}], ["oyster restoration (organizational)", {"concepts": "oyster restoration (organizational)", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "oyster restoration (organizational)"}], ["restoration activities", {"concepts": "restoration activities", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "restoration activities"}], ["ecosystem restoration", {"concepts": "ecosystem restoration", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "ecosystem restoration"}], ["conservation activities", {"concepts": "conservation activities", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "conservation activities"}], ["conservation", {"concepts": "conservation", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "conservation"}], ["species conservation", {"concepts": "species conservation", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "species conservation"}], ["marsh protection", {"concepts": "marsh protection", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "marsh protection"}], ["habitat restoration", {"concepts": "habitat restoration", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "habitat restoration"}], ["marsh restoration", {"concepts": "marsh restoration", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "marsh restoration"}], ["sav beds", {"concepts": "sav beds", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "sav beds"}], ["ecological conditions", {"concepts": "ecological conditions", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "ecological conditions"}], ["habitat conditions", {"concepts": "habitat conditions", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "habitat conditions"}], ["habitat", {"concepts": "habitat", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "habitat"}], ["estuarine habitat", {"concepts": "estuarine habitat", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "estuarine habitat"}], ["habitat forming (organizational)", {"concepts": "habitat forming (organizational)", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "habitat forming (organizational)"}], ["habitat forming species", {"concepts": "habitat forming species", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "habitat forming species"}], ["landscapes", {"concepts": "landscapes", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "landscapes"}], ["island habitat", {"concepts": "island habitat", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "island habitat"}], ["food web functions (organizational)", {"concepts": "food web functions (organizational)", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "food web functions (organizational)"}], ["food web", {"concepts": "food web", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "food web"}], ["system dynamics", {"concepts": "system dynamics", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "system dynamics"}], ["biophysical ecosystem", {"concepts": "biophysical ecosystem", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "biophysical ecosystem"}], ["social-ecological system", {"concepts": "social-ecological system", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "social-ecological system"}], ["societal ecosystem", {"concepts": "societal ecosystem", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "societal ecosystem"}], ["system components", {"concepts": "system components", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "system components"}], ["local dynamics", {"concepts": "local dynamics", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "local dynamics"}], ["climate stressors", {"concepts": "climate stressors", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "climate stressors"}], ["oyster disease (medical)", {"concepts": "oyster disease (medical)", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "oyster disease (medical)"}], ["white-nose syndrome (medical)", {"concepts": "white-nose syndrome (medical)", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "white-nose syndrome (medical)"}], ["harmful organisms (organizational)", {"concepts": "harmful organisms (organizational)", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "harmful organisms (organizational)"}], ["harmful organisms", {"concepts": "harmful organisms", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "harmful organisms"}], ["disease impacts", {"concepts": "disease impacts", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "disease impacts"}], ["harmful organisms (medical)", {"concepts": "harmful organisms (medical)", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "harmful organisms (medical)"}], ["oyster viability", {"concepts": "oyster viability", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "oyster viability"}], ["excess turbidity (organizational)", {"concepts": "excess turbidity (organizational)", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "excess turbidity (organizational)"}], ["dead zones", {"concepts": "dead zones", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "dead zones"}], ["algal blooms", {"concepts": "algal blooms", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "algal blooms"}], ["eutrophication", {"concepts": "eutrophication", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "eutrophication"}], ["sedimentation", {"concepts": "sedimentation", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "sedimentation"}], ["nutrient pollution", {"concepts": "nutrient pollution", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "nutrient pollution"}], ["sediment pollution", {"concepts": "sediment pollution", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "sediment pollution"}], ["water quality", {"concepts": "water quality", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "water quality"}], ["water quality improvement", {"concepts": "water quality improvement", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "water quality improvement"}], ["water quality (organizational)", {"concepts": "water quality (organizational)", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "water quality (organizational)"}], ["aquatic vegetation", {"concepts": "aquatic vegetation", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "aquatic vegetation"}], ["dredge spoils", {"concepts": "dredge spoils", "type": "concept", "cluster": "Chesapeake Bay Context", "node_size": 10, "label": "dredge spoils"}]], "Management & Resilience": [["food value", {"concepts": "food value", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "food value"}], ["ecosystem services", {"concepts": "ecosystem services", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "ecosystem services"}], ["economic value", {"concepts": "economic value", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "economic value"}], ["resource value", {"concepts": "resource value", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "resource value"}], ["ecological economics", {"concepts": "ecological economics", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "ecological economics"}], ["environmental economics", {"concepts": "environmental economics", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "environmental economics"}], ["biodiversity benefits", {"concepts": "biodiversity benefits", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "biodiversity benefits"}], ["local communities", {"concepts": "local communities", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "local communities"}], ["recreational users", {"concepts": "recreational users", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "recreational users"}], ["fisheries stakeholders", {"concepts": "fisheries stakeholders", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "fisheries stakeholders"}], ["agricultural community", {"concepts": "agricultural community", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "agricultural community"}], ["stakeholders", {"concepts": "stakeholders", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "stakeholders"}], ["users", {"concepts": "users", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "users"}], ["resource user", {"concepts": "resource user", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "resource user"}], ["resource users", {"concepts": "resource users", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "resource users"}], ["aquaculture industry (organizational)", {"concepts": "aquaculture industry (organizational)", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "aquaculture industry (organizational)"}], ["conservation partnership", {"concepts": "conservation partnership", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "conservation partnership"}], ["agreement", {"concepts": "agreement", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "agreement"}], ["alignment", {"concepts": "alignment", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "alignment"}], ["tradeoffs", {"concepts": "tradeoffs", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "tradeoffs"}], ["human development", {"concepts": "human development", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "human development"}], ["resource limitations", {"concepts": "resource limitations", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "resource limitations"}], ["resource experts", {"concepts": "resource experts", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "resource experts"}], ["knowledge capture", {"concepts": "knowledge capture", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "knowledge capture"}], ["academics", {"concepts": "academics", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "academics"}], ["fish and wildlife", {"concepts": "fish and wildlife", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "fish and wildlife"}], ["national fish", {"concepts": "national fish", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "national fish"}], ["technical assistance", {"concepts": "technical assistance", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "technical assistance"}], ["collaborative discussion", {"concepts": "collaborative discussion", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "collaborative discussion"}], ["case studies", {"concepts": "case studies", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "case studies"}], ["species", {"concepts": "species", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "species"}], ["bat conservation (organizational)", {"concepts": "bat conservation (organizational)", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "bat conservation (organizational)"}], ["sea level rise", {"concepts": "sea level rise", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "sea level rise"}], ["nfwf", {"concepts": "nfwf", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "nfwf"}], ["consensus", {"concepts": "consensus", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "consensus"}], ["biodiversity", {"concepts": "biodiversity", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "biodiversity"}], ["keystone species", {"concepts": "keystone species", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "keystone species"}], ["farmers", {"concepts": "farmers", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "farmers"}], ["harvest level", {"concepts": "harvest level", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "harvest level"}], ["catch rates", {"concepts": "catch rates", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "catch rates"}], ["fish and wildlife service", {"concepts": "fish and wildlife service", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "fish and wildlife service"}], ["epa", {"concepts": "epa", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "epa"}], ["science", {"concepts": "science", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "science"}], ["wildlife foundation", {"concepts": "wildlife foundation", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "wildlife foundation"}], ["conservation concern (organizational)", {"concepts": "conservation concern (organizational)", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "conservation concern (organizational)"}], ["noaa", {"concepts": "noaa", "type": "concept", "cluster": "Management & Resilience", "node_size": 10, "label": "noaa"}]], "Water Quality Impacts": [["management approaches", {"concepts": "management approaches", "type": "concept", "cluster": "Water Quality Impacts", "node_size": 10, "label": "management approaches"}], ["man-made reefs (organizational)", {"concepts": "man-made reefs (organizational)", "type": "concept", "cluster": "Water Quality Impacts", "node_size": 10, "label": "man-made reefs (organizational)"}], ["species of concern (organizational)", {"concepts": "species of concern (organizational)", "type": "concept", "cluster": "Water Quality Impacts", "node_size": 10, "label": "species of concern (organizational)"}], ["watershed sources (organizational)", {"concepts": "watershed sources (organizational)", "type": "concept", "cluster": "Water Quality Impacts", "node_size": 10, "label": "watershed sources (organizational)"}], ["habitat goal", {"concepts": "habitat goal", "type": "concept", "cluster": "Water Quality Impacts", "node_size": 10, "label": "habitat goal"}], ["environmental protection agency", {"concepts": "environmental protection agency", "type": "concept", "cluster": "Water Quality Impacts", "node_size": 10, "label": "environmental protection agency"}], ["smith island", {"concepts": "smith island", "type": "concept", "cluster": "Water Quality Impacts", "node_size": 10, "label": "smith island"}], ["usda", {"concepts": "usda", "type": "concept", "cluster": "Water Quality Impacts", "node_size": 10, "label": "usda"}], ["community resilience", {"concepts": "community resilience", "type": "concept", "cluster": "Water Quality Impacts", "node_size": 10, "label": "community resilience"}], ["chesapeake bay foundation", {"concepts": "chesapeake bay foundation", "type": "concept", "cluster": "Water Quality Impacts", "node_size": 10, "label": "chesapeake bay foundation"}], ["chesapeake bay program", {"concepts": "chesapeake bay program", "type": "concept", "cluster": "Water Quality Impacts", "node_size": 10, "label": "chesapeake bay program"}], ["chesapeake bay watershed", {"concepts": "chesapeake bay watershed", "type": "concept", "cluster": "Water Quality Impacts", "node_size": 10, "label": "chesapeake bay watershed"}], ["estuary", {"concepts": "estuary", "type": "concept", "cluster": "Water Quality Impacts", "node_size": 10, "label": "estuary"}], ["chesapeake research consortium", {"concepts": "chesapeake research consortium", "type": "concept", "cluster": "Water Quality Impacts", "node_size": 10, "label": "chesapeake research consortium"}], ["chesapeake programs", {"concepts": "chesapeake programs", "type": "concept", "cluster": "Water Quality Impacts", "node_size": 10, "label": "chesapeake programs"}], ["bay watershed", {"concepts": "bay watershed", "type": "concept", "cluster": "Water Quality Impacts", "node_size": 10, "label": "bay watershed"}], ["state level", {"concepts": "state level", "type": "concept", "cluster": "Water Quality Impacts", "node_size": 10, "label": "state level"}], ["local level", {"concepts": "local level", "type": "concept", "cluster": "Water Quality Impacts", "node_size": 10, "label": "local level"}], ["oyster reef sanctuaries (organizational)", {"concepts": "oyster reef sanctuaries (organizational)", "type": "concept", "cluster": "Water Quality Impacts", "node_size": 10, "label": "oyster reef sanctuaries (organizational)"}], ["bottom habitat (organizational)", {"concepts": "bottom habitat (organizational)", "type": "concept", "cluster": "Water Quality Impacts", "node_size": 10, "label": "bottom habitat (organizational)"}], ["historic populations (organizational)", {"concepts": "historic populations (organizational)", "type": "concept", "cluster": "Water Quality Impacts", "node_size": 10, "label": "historic populations (organizational)"}], ["overharvesting (organizational)", {"concepts": "overharvesting (organizational)", "type": "concept", "cluster": "Water Quality Impacts", "node_size": 10, "label": "overharvesting (organizational)"}], ["sediment delivery (organizational)", {"concepts": "sediment delivery (organizational)", "type": "concept", "cluster": "Water Quality Impacts", "node_size": 10, "label": "sediment delivery (organizational)"}]], "Federal Action": [["federal level", {"concepts": "federal level", "type": "concept", "cluster": "Federal Action", "node_size": 10, "label": "federal level"}], ["federal law", {"concepts": "federal law", "type": "concept", "cluster": "Federal Action", "node_size": 10, "label": "federal law"}], ["federal investments", {"concepts": "federal investments", "type": "concept", "cluster": "Federal Action", "node_size": 10, "label": "federal investments"}]], "Grant Funding": [["grant funding", {"concepts": "grant funding", "type": "concept", "cluster": "Grant Funding", "node_size": 10, "label": "grant funding"}], ["grants programs", {"concepts": "grants programs", "type": "concept", "cluster": "Grant Funding", "node_size": 10, "label": "grants programs"}], ["competitive grants", {"concepts": "competitive grants", "type": "concept", "cluster": "Grant Funding", "node_size": 10, "label": "competitive grants"}], ["stewardship fund", {"concepts": "stewardship fund", "type": "concept", "cluster": "Grant Funding", "node_size": 10, "label": "stewardship fund"}], ["stewardship fund program", {"concepts": "stewardship fund program", "type": "concept", "cluster": "Grant Funding", "node_size": 10, "label": "stewardship fund program"}]], "Bay Area Funding": [["bay partnership", {"concepts": "bay partnership", "type": "concept", "cluster": "Bay Area Funding", "node_size": 10, "label": "bay partnership"}], ["private sector", {"concepts": "private sector", "type": "concept", "cluster": "Bay Area Funding", "node_size": 10, "label": "private sector"}], ["social capital", {"concepts": "social capital", "type": "concept", "cluster": "Bay Area Funding", "node_size": 10, "label": "social capital"}], ["funders", {"concepts": "funders", "type": "concept", "cluster": "Bay Area Funding", "node_size": 10, "label": "funders"}]], "Government Research": [["leverage points", {"concepts": "leverage points", "type": "concept", "cluster": "Government Research", "node_size": 10, "label": "leverage points"}], ["research institution", {"concepts": "research institution", "type": "concept", "cluster": "Government Research", "node_size": 10, "label": "research institution"}], ["government researcher", {"concepts": "government researcher", "type": "concept", "cluster": "Government Research", "node_size": 10, "label": "government researcher"}]]};
        const clusterEdges = {"Chesapeake Bay Context": [], "Management & Resilience": [], "Water Quality Impacts": [], "Federal Action": [], "Grant Funding": [], "Bay Area Funding": [], "Government Research": []};
        
        let network;
        let currentView = 'clusters';
        let currentCluster = null;
        let minConfidence = 0.3;
        
        // Network options
        const options = {
            nodes: {
                font: { color: 'white', size: 14 },
                borderWidth: 2,
                shadow: true
            },
            edges: {
                arrows: { to: { enabled: true, scaleFactor: 1.2 } },
                shadow: true,
                smooth: { type: 'continuous' }
            },
            physics: {
                stabilization: { iterations: 100 },
                barnesHut: {
                    gravitationalConstant: -8000,
                    springConstant: 0.001,
                    springLength: 200
                }
            },
            interaction: {
                hover: true,
                selectConnectedEdges: false
            }
        };
        
        function initNetwork() {
            const container = document.getElementById('network');
            const data = getClusterViewData();
            network = new vis.Network(container, data, options);
            
            // Handle cluster clicks for drill-down
            network.on("click", function(params) {
                if (params.nodes.length > 0 && currentView === 'clusters') {
                    const clickedNode = params.nodes[0];
                    if (clusterConcepts[clickedNode]) {
                        showClusterDetail(clickedNode);
                    }
                }
            });
        }
        
        function getClusterViewData() {
            const nodes = [];
            const edges = [];
            
            // Add cluster nodes
            Object.entries(clusterData).forEach(([clusterId, data]) => {
                const concepts = data.concepts || [];
                const conceptsStr = Array.isArray(concepts) ? concepts.join(', ') : concepts;
                
                nodes.push({
                    id: clusterId,
                    label: clusterId,
                    title: `Cluster: ${clusterId}\nConcepts: ${conceptsStr}\nClick to explore internal relationships`,
                    color: '#4A90E2',
                    size: 25 + (conceptsStr.split(',').length * 2),
                    font: { color: 'white' }
                });
            });
            
            // Add inter-cluster edges
            interClusterEdges.forEach(([source, target, edgeData]) => {
                const confidence = edgeData.confidence || 1.0;
                const weight = edgeData.weight || 0;
                
                if (confidence >= minConfidence) {
                    edges.push({
                        from: source,
                        to: target,
                        color: weight > 0 ? '#28A745' : '#DC3545',
                        width: Math.abs(weight) * 3 + 1,
                        title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                        dashes: false
                    });
                }
            });
            
            return { nodes: nodes, edges: edges };
        }
        
        function getClusterDetailData(clusterId) {
            const nodes = [];
            const edges = [];
            
            // Add concept nodes for this cluster
            if (clusterConcepts[clusterId]) {
                clusterConcepts[clusterId].forEach(([conceptId, data]) => {
                    nodes.push({
                        id: conceptId,
                        label: conceptId,
                        title: `Concept: ${conceptId}\nFrom cluster: ${clusterId}`,
                        color: '#FF9500',
                        size: 20,
                        font: { color: 'white' }
                    });
                });
            }
            
            // Add intra-cluster edges
            if (clusterEdges[clusterId]) {
                clusterEdges[clusterId].forEach(([source, target, edgeData]) => {
                    const confidence = edgeData.confidence || 1.0;
                    const weight = edgeData.weight || 0;
                    
                    if (confidence >= minConfidence) {
                        edges.push({
                            from: source,
                            to: target,
                            color: weight > 0 ? '#28A745' : '#DC3545',
                            width: Math.abs(weight) * 3 + 1,
                            title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                            dashes: true
                        });
                    }
                });
            }
            
            return { nodes: nodes, edges: edges };
        }
        
        function showClusterView() {
            currentView = 'clusters';
            currentCluster = null;
            const data = getClusterViewData();
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'none';
            document.getElementById('current-view').textContent = 'Cluster Overview';
        }
        
        function showClusterDetail(clusterId) {
            currentView = 'concepts';
            currentCluster = clusterId;
            const data = getClusterDetailData(clusterId);
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'inline-block';
            document.getElementById('current-view').textContent = `Inside Cluster: ${clusterId}`;
        }
        
        function updateConfidenceFilter(value) {
            minConfidence = parseFloat(value);
            document.getElementById('confidence-value').textContent = value;
            
            // Refresh current view
            if (currentView === 'clusters') {
                showClusterView();
            } else {
                showClusterDetail(currentCluster);
            }
        }
        
        // Initialize the network when page loads
        window.onload = function() {
            initNetwork();
        };
    </script>
</body>
</html>
