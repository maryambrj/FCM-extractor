
<!DOCTYPE html>
<html>
<head>
    <title>Hierarchical FCM Visualization</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 0; 
            padding: 20px;
            background: #f5f5f5;
        }
        
        #network { 
            width: 100%; 
            height: 600px; 
            border: 2px solid #ccc; 
            background: white;
            border-radius: 8px;
        }
        
        #controls {
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn {
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        
        .btn-primary { background: #4A90E2; color: white; }
        .btn-primary:hover { background: #357ABD; }
        
        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #545b62; }
        
        #current-view {
            font-weight: bold;
            color: #333;
            margin-left: 10px;
        }
        
        #legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-size: 12px;
            max-width: 200px;
        }
        
        .legend-item {
            margin: 5px 0;
            display: flex;
            align-items: center;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .legend-line {
            width: 20px;
            height: 2px;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <h1>Fuzzy Cognitive Map - Hierarchical View</h1>
    
    <div id="controls">
        <button class="btn btn-secondary" id="back-btn" onclick="showClusterView()" style="display: none;">
            ‚Üê Back to Clusters
        </button>
        <span id="current-view">Cluster Overview</span>
        <div style="float: right;">
            <label>Min Confidence: </label>
            <input type="range" id="confidence-slider" min="0" max="1" step="0.1" value="0.3" 
                   onchange="updateConfidenceFilter(this.value)">
            <span id="confidence-value">0.3</span>
        </div>
    </div>
    
    <div id="network"></div>
    
    <div id="legend">
        <h4>Legend</h4>
        <div class="legend-item">
            <div class="legend-color" style="background: #4A90E2;"></div>
            <span>Clusters</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #FF9500;"></div>
            <span>Concepts</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #28A745;"></div>
            <span>Positive relationship</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #DC3545;"></div>
            <span>Negative relationship</span>
        </div>
        <div style="margin-top: 10px; font-style: italic; color: #666;">
            Click clusters to explore internal concepts
        </div>
    </div>

    <script>
        // Embedded data
        const clusterData = {"Ecosystem Health": {"concepts": "oyster reefs, anadromous fish, marine conservation, marine resource management, salmon, sea turtles, marine ecology, oil spill damage assessment, cichlids, young fish, marine biologist, contaminant spills, coral reefs, oyster reef restoration, marine ecosystems, lionfish, marine mammals, oyster reef, marine ecosystem, marine policy, shellfish, aquatic biology, fisheries policy, pollutant spills, marine assessment", "concept_list": ["oyster reefs", "anadromous fish", "marine conservation", "marine resource management", "salmon", "sea turtles", "marine ecology", "oil spill damage assessment", "cichlids", "young fish", "marine biologist", "contaminant spills", "coral reefs", "oyster reef restoration", "marine ecosystems", "lionfish", "marine mammals", "oyster reef", "marine ecosystem", "marine policy", "shellfish", "aquatic biology", "fisheries policy", "pollutant spills", "marine assessment"], "type": "cluster", "node_size": 90, "label": "Ecosystem Health"}, "Conservation Management": {"concepts": "invasive non-native species, key food web supporting species, mangrove forests, key food web species, native organisms, ecosystem protections, native species, native abundance, species diversity, habitat forming species, biodiversity, predator-prey relationships, nutrient influx, healthy ecosystems, ecosystem balance, broad ecosystem protection, food web, excess nutrients, non-native fish, invasive species removal, invasive species, healthy ecosystem, nutrient flux, ecosystem restoration, ecosystem analysis, ecosystem protection, conservation concern, species of conservation concern, native organism abundance, predators, species conservation, microbial communities, natural inventory, species richness, key species, ecosystem health, top predators, harmful organisms", "concept_list": ["invasive non-native species", "key food web supporting species", "mangrove forests", "key food web species", "native organisms", "ecosystem protections", "native species", "native abundance", "species diversity", "habitat forming species", "biodiversity", "predator-prey relationships", "nutrient influx", "healthy ecosystems", "ecosystem balance", "broad ecosystem protection", "food web", "excess nutrients", "non-native fish", "invasive species removal", "invasive species", "healthy ecosystem", "nutrient flux", "ecosystem restoration", "ecosystem analysis", "ecosystem protection", "conservation concern", "species of conservation concern", "native organism abundance", "predators", "species conservation", "microbial communities", "natural inventory", "species richness", "key species", "ecosystem health", "top predators", "harmful organisms"], "type": "cluster", "node_size": 129, "label": "Conservation Management"}, "Coastal Ecosystems": {"concepts": "educational systems, university of washington, travel arrangements, quantitative process, experts, stakeholders, baseline data, everglades, meeting, no-take areas, pedagogy, concepts, natural state, uc santa barbara, organizational structures, invasive removal, social dynamics, management components, management attention, interviews, relationships, conservation, everglades restoration, gulf of mexico, power relations, bans on non-natives, expert opinions, upstream management, stressors, management, policies, management actions, nature conservancy, human action, importation bans, army corps of engineers, travel office, arrangements, contaminants, no take areas, workshop, qualitative aggregation, sedimentation", "concept_list": ["educational systems", "university of washington", "travel arrangements", "quantitative process", "experts", "stakeholders", "baseline data", "everglades", "meeting", "no-take areas", "pedagogy", "concepts", "natural state", "uc santa barbara", "organizational structures", "invasive removal", "social dynamics", "management components", "management attention", "interviews", "relationships", "conservation", "everglades restoration", "gulf of mexico", "power relations", "bans on non-natives", "expert opinions", "upstream management", "stressors", "management", "policies", "management actions", "nature conservancy", "human action", "importation bans", "army corps of engineers", "travel office", "arrangements", "contaminants", "no take areas", "workshop", "qualitative aggregation", "sedimentation"], "type": "cluster", "node_size": 144, "label": "Coastal Ecosystems"}, "Marine Conservation": {"concepts": "watershed management, geospatial analysis, estuary, coastal ecosystems, estuaries, sea level rise, wetlands, storm surge, coastlines, coastal ecosystem, coastal resilience, estuary systems, watershed, wetland filling", "concept_list": ["watershed management", "geospatial analysis", "estuary", "coastal ecosystems", "estuaries", "sea level rise", "wetlands", "storm surge", "coastlines", "coastal ecosystem", "coastal resilience", "estuary systems", "watershed", "wetland filling"], "type": "cluster", "node_size": 57, "label": "Marine Conservation"}};
        const conceptData = {"oyster reefs": {"concepts": "oyster reefs", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "oyster reefs"}, "anadromous fish": {"concepts": "anadromous fish", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "anadromous fish"}, "marine conservation": {"concepts": "marine conservation", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "marine conservation"}, "marine resource management": {"concepts": "marine resource management", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "marine resource management"}, "salmon": {"concepts": "salmon", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "salmon"}, "sea turtles": {"concepts": "sea turtles", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "sea turtles"}, "marine ecology": {"concepts": "marine ecology", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "marine ecology"}, "oil spill damage assessment": {"concepts": "oil spill damage assessment", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "oil spill damage assessment"}, "cichlids": {"concepts": "cichlids", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "cichlids"}, "young fish": {"concepts": "young fish", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "young fish"}, "marine biologist": {"concepts": "marine biologist", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "marine biologist"}, "contaminant spills": {"concepts": "contaminant spills", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "contaminant spills"}, "coral reefs": {"concepts": "coral reefs", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "coral reefs"}, "oyster reef restoration": {"concepts": "oyster reef restoration", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "oyster reef restoration"}, "marine ecosystems": {"concepts": "marine ecosystems", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "marine ecosystems"}, "lionfish": {"concepts": "lionfish", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "lionfish"}, "marine mammals": {"concepts": "marine mammals", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "marine mammals"}, "oyster reef": {"concepts": "oyster reef", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "oyster reef"}, "marine ecosystem": {"concepts": "marine ecosystem", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "marine ecosystem"}, "marine policy": {"concepts": "marine policy", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "marine policy"}, "shellfish": {"concepts": "shellfish", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "shellfish"}, "aquatic biology": {"concepts": "aquatic biology", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "aquatic biology"}, "fisheries policy": {"concepts": "fisheries policy", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "fisheries policy"}, "pollutant spills": {"concepts": "pollutant spills", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "pollutant spills"}, "marine assessment": {"concepts": "marine assessment", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "marine assessment"}, "invasive non-native species": {"concepts": "invasive non-native species", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "invasive non-native species"}, "key food web supporting species": {"concepts": "key food web supporting species", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "key food web supporting species"}, "mangrove forests": {"concepts": "mangrove forests", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "mangrove forests"}, "key food web species": {"concepts": "key food web species", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "key food web species"}, "native organisms": {"concepts": "native organisms", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "native organisms"}, "ecosystem protections": {"concepts": "ecosystem protections", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "ecosystem protections"}, "native species": {"concepts": "native species", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "native species"}, "native abundance": {"concepts": "native abundance", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "native abundance"}, "species diversity": {"concepts": "species diversity", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "species diversity"}, "habitat forming species": {"concepts": "habitat forming species", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "habitat forming species"}, "biodiversity": {"concepts": "biodiversity", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "biodiversity"}, "predator-prey relationships": {"concepts": "predator-prey relationships", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "predator-prey relationships"}, "nutrient influx": {"concepts": "nutrient influx", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "nutrient influx"}, "healthy ecosystems": {"concepts": "healthy ecosystems", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "healthy ecosystems"}, "ecosystem balance": {"concepts": "ecosystem balance", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "ecosystem balance"}, "broad ecosystem protection": {"concepts": "broad ecosystem protection", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "broad ecosystem protection"}, "food web": {"concepts": "food web", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "food web"}, "excess nutrients": {"concepts": "excess nutrients", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "excess nutrients"}, "non-native fish": {"concepts": "non-native fish", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "non-native fish"}, "invasive species removal": {"concepts": "invasive species removal", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "invasive species removal"}, "invasive species": {"concepts": "invasive species", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "invasive species"}, "healthy ecosystem": {"concepts": "healthy ecosystem", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "healthy ecosystem"}, "nutrient flux": {"concepts": "nutrient flux", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "nutrient flux"}, "ecosystem restoration": {"concepts": "ecosystem restoration", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "ecosystem restoration"}, "ecosystem analysis": {"concepts": "ecosystem analysis", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "ecosystem analysis"}, "ecosystem protection": {"concepts": "ecosystem protection", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "ecosystem protection"}, "conservation concern": {"concepts": "conservation concern", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "conservation concern"}, "species of conservation concern": {"concepts": "species of conservation concern", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "species of conservation concern"}, "native organism abundance": {"concepts": "native organism abundance", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "native organism abundance"}, "predators": {"concepts": "predators", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "predators"}, "species conservation": {"concepts": "species conservation", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "species conservation"}, "microbial communities": {"concepts": "microbial communities", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "microbial communities"}, "natural inventory": {"concepts": "natural inventory", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "natural inventory"}, "species richness": {"concepts": "species richness", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "species richness"}, "key species": {"concepts": "key species", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "key species"}, "ecosystem health": {"concepts": "ecosystem health", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "ecosystem health"}, "top predators": {"concepts": "top predators", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "top predators"}, "harmful organisms": {"concepts": "harmful organisms", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "harmful organisms"}, "educational systems": {"concepts": "educational systems", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "educational systems"}, "university of washington": {"concepts": "university of washington", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "university of washington"}, "travel arrangements": {"concepts": "travel arrangements", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "travel arrangements"}, "quantitative process": {"concepts": "quantitative process", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "quantitative process"}, "experts": {"concepts": "experts", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "experts"}, "stakeholders": {"concepts": "stakeholders", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "stakeholders"}, "baseline data": {"concepts": "baseline data", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "baseline data"}, "everglades": {"concepts": "everglades", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "everglades"}, "meeting": {"concepts": "meeting", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "meeting"}, "no-take areas": {"concepts": "no-take areas", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "no-take areas"}, "pedagogy": {"concepts": "pedagogy", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "pedagogy"}, "concepts": {"concepts": "concepts", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "concepts"}, "natural state": {"concepts": "natural state", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "natural state"}, "uc santa barbara": {"concepts": "uc santa barbara", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "uc santa barbara"}, "organizational structures": {"concepts": "organizational structures", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "organizational structures"}, "invasive removal": {"concepts": "invasive removal", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "invasive removal"}, "social dynamics": {"concepts": "social dynamics", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "social dynamics"}, "management components": {"concepts": "management components", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "management components"}, "management attention": {"concepts": "management attention", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "management attention"}, "interviews": {"concepts": "interviews", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "interviews"}, "relationships": {"concepts": "relationships", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "relationships"}, "conservation": {"concepts": "conservation", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "conservation"}, "everglades restoration": {"concepts": "everglades restoration", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "everglades restoration"}, "gulf of mexico": {"concepts": "gulf of mexico", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "gulf of mexico"}, "power relations": {"concepts": "power relations", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "power relations"}, "bans on non-natives": {"concepts": "bans on non-natives", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "bans on non-natives"}, "expert opinions": {"concepts": "expert opinions", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "expert opinions"}, "upstream management": {"concepts": "upstream management", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "upstream management"}, "stressors": {"concepts": "stressors", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "stressors"}, "management": {"concepts": "management", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "management"}, "policies": {"concepts": "policies", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "policies"}, "management actions": {"concepts": "management actions", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "management actions"}, "nature conservancy": {"concepts": "nature conservancy", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "nature conservancy"}, "human action": {"concepts": "human action", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "human action"}, "importation bans": {"concepts": "importation bans", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "importation bans"}, "army corps of engineers": {"concepts": "army corps of engineers", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "army corps of engineers"}, "travel office": {"concepts": "travel office", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "travel office"}, "arrangements": {"concepts": "arrangements", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "arrangements"}, "contaminants": {"concepts": "contaminants", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "contaminants"}, "no take areas": {"concepts": "no take areas", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "no take areas"}, "workshop": {"concepts": "workshop", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "workshop"}, "qualitative aggregation": {"concepts": "qualitative aggregation", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "qualitative aggregation"}, "sedimentation": {"concepts": "sedimentation", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "sedimentation"}, "watershed management": {"concepts": "watershed management", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "watershed management"}, "geospatial analysis": {"concepts": "geospatial analysis", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "geospatial analysis"}, "estuary": {"concepts": "estuary", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "estuary"}, "coastal ecosystems": {"concepts": "coastal ecosystems", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "coastal ecosystems"}, "estuaries": {"concepts": "estuaries", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "estuaries"}, "sea level rise": {"concepts": "sea level rise", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "sea level rise"}, "wetlands": {"concepts": "wetlands", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "wetlands"}, "storm surge": {"concepts": "storm surge", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "storm surge"}, "coastlines": {"concepts": "coastlines", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "coastlines"}, "coastal ecosystem": {"concepts": "coastal ecosystem", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "coastal ecosystem"}, "coastal resilience": {"concepts": "coastal resilience", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "coastal resilience"}, "estuary systems": {"concepts": "estuary systems", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "estuary systems"}, "watershed": {"concepts": "watershed", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "watershed"}, "wetland filling": {"concepts": "wetland filling", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "wetland filling"}};
        const interClusterEdges = [["Ecosystem Health", "Conservation Management", {"weight": 1.0, "confidence": 0.9259999999999999, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Health", "Marine Conservation", {"weight": 1.0, "confidence": 0.8099999999999999, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Health", "Coastal Ecosystems", {"weight": 0.8, "confidence": 0.61, "type": "inter_cluster", "style": "solid"}], ["Conservation Management", "Ecosystem Health", {"weight": -0.6, "confidence": 0.9400000000000001, "type": "inter_cluster", "style": "solid"}], ["Conservation Management", "Marine Conservation", {"weight": 1.0, "confidence": 0.834, "type": "inter_cluster", "style": "solid"}], ["Conservation Management", "Coastal Ecosystems", {"weight": 0.4, "confidence": 0.71, "type": "inter_cluster", "style": "solid"}], ["Coastal Ecosystems", "Conservation Management", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["Coastal Ecosystems", "Marine Conservation", {"weight": 0.8, "confidence": 0.6699999999999999, "type": "inter_cluster", "style": "solid"}], ["Coastal Ecosystems", "Ecosystem Health", {"weight": 0.8, "confidence": 0.5900000000000001, "type": "inter_cluster", "style": "solid"}], ["Marine Conservation", "Conservation Management", {"weight": 0.2, "confidence": 0.826, "type": "inter_cluster", "style": "solid"}], ["Marine Conservation", "Ecosystem Health", {"weight": 0.8, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["Marine Conservation", "Coastal Ecosystems", {"weight": 0.2, "confidence": 0.496, "type": "inter_cluster", "style": "solid"}]];
        const clusterConcepts = {"Ecosystem Health": [["oyster reefs", {"concepts": "oyster reefs", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "oyster reefs"}], ["anadromous fish", {"concepts": "anadromous fish", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "anadromous fish"}], ["marine conservation", {"concepts": "marine conservation", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "marine conservation"}], ["marine resource management", {"concepts": "marine resource management", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "marine resource management"}], ["salmon", {"concepts": "salmon", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "salmon"}], ["sea turtles", {"concepts": "sea turtles", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "sea turtles"}], ["marine ecology", {"concepts": "marine ecology", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "marine ecology"}], ["oil spill damage assessment", {"concepts": "oil spill damage assessment", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "oil spill damage assessment"}], ["cichlids", {"concepts": "cichlids", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "cichlids"}], ["young fish", {"concepts": "young fish", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "young fish"}], ["marine biologist", {"concepts": "marine biologist", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "marine biologist"}], ["contaminant spills", {"concepts": "contaminant spills", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "contaminant spills"}], ["coral reefs", {"concepts": "coral reefs", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "coral reefs"}], ["oyster reef restoration", {"concepts": "oyster reef restoration", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "oyster reef restoration"}], ["marine ecosystems", {"concepts": "marine ecosystems", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "marine ecosystems"}], ["lionfish", {"concepts": "lionfish", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "lionfish"}], ["marine mammals", {"concepts": "marine mammals", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "marine mammals"}], ["oyster reef", {"concepts": "oyster reef", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "oyster reef"}], ["marine ecosystem", {"concepts": "marine ecosystem", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "marine ecosystem"}], ["marine policy", {"concepts": "marine policy", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "marine policy"}], ["shellfish", {"concepts": "shellfish", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "shellfish"}], ["aquatic biology", {"concepts": "aquatic biology", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "aquatic biology"}], ["fisheries policy", {"concepts": "fisheries policy", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "fisheries policy"}], ["pollutant spills", {"concepts": "pollutant spills", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "pollutant spills"}], ["marine assessment", {"concepts": "marine assessment", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "marine assessment"}]], "Conservation Management": [["invasive non-native species", {"concepts": "invasive non-native species", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "invasive non-native species"}], ["key food web supporting species", {"concepts": "key food web supporting species", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "key food web supporting species"}], ["mangrove forests", {"concepts": "mangrove forests", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "mangrove forests"}], ["key food web species", {"concepts": "key food web species", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "key food web species"}], ["native organisms", {"concepts": "native organisms", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "native organisms"}], ["ecosystem protections", {"concepts": "ecosystem protections", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "ecosystem protections"}], ["native species", {"concepts": "native species", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "native species"}], ["native abundance", {"concepts": "native abundance", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "native abundance"}], ["species diversity", {"concepts": "species diversity", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "species diversity"}], ["habitat forming species", {"concepts": "habitat forming species", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "habitat forming species"}], ["biodiversity", {"concepts": "biodiversity", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "biodiversity"}], ["predator-prey relationships", {"concepts": "predator-prey relationships", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "predator-prey relationships"}], ["nutrient influx", {"concepts": "nutrient influx", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "nutrient influx"}], ["healthy ecosystems", {"concepts": "healthy ecosystems", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "healthy ecosystems"}], ["ecosystem balance", {"concepts": "ecosystem balance", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "ecosystem balance"}], ["broad ecosystem protection", {"concepts": "broad ecosystem protection", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "broad ecosystem protection"}], ["food web", {"concepts": "food web", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "food web"}], ["excess nutrients", {"concepts": "excess nutrients", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "excess nutrients"}], ["non-native fish", {"concepts": "non-native fish", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "non-native fish"}], ["invasive species removal", {"concepts": "invasive species removal", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "invasive species removal"}], ["invasive species", {"concepts": "invasive species", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "invasive species"}], ["healthy ecosystem", {"concepts": "healthy ecosystem", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "healthy ecosystem"}], ["nutrient flux", {"concepts": "nutrient flux", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "nutrient flux"}], ["ecosystem restoration", {"concepts": "ecosystem restoration", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "ecosystem restoration"}], ["ecosystem analysis", {"concepts": "ecosystem analysis", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "ecosystem analysis"}], ["ecosystem protection", {"concepts": "ecosystem protection", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "ecosystem protection"}], ["conservation concern", {"concepts": "conservation concern", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "conservation concern"}], ["species of conservation concern", {"concepts": "species of conservation concern", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "species of conservation concern"}], ["native organism abundance", {"concepts": "native organism abundance", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "native organism abundance"}], ["predators", {"concepts": "predators", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "predators"}], ["species conservation", {"concepts": "species conservation", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "species conservation"}], ["microbial communities", {"concepts": "microbial communities", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "microbial communities"}], ["natural inventory", {"concepts": "natural inventory", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "natural inventory"}], ["species richness", {"concepts": "species richness", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "species richness"}], ["key species", {"concepts": "key species", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "key species"}], ["ecosystem health", {"concepts": "ecosystem health", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "ecosystem health"}], ["top predators", {"concepts": "top predators", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "top predators"}], ["harmful organisms", {"concepts": "harmful organisms", "type": "concept", "cluster": "Conservation Management", "node_size": 10, "label": "harmful organisms"}]], "Coastal Ecosystems": [["educational systems", {"concepts": "educational systems", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "educational systems"}], ["university of washington", {"concepts": "university of washington", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "university of washington"}], ["travel arrangements", {"concepts": "travel arrangements", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "travel arrangements"}], ["quantitative process", {"concepts": "quantitative process", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "quantitative process"}], ["experts", {"concepts": "experts", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "experts"}], ["stakeholders", {"concepts": "stakeholders", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "stakeholders"}], ["baseline data", {"concepts": "baseline data", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "baseline data"}], ["everglades", {"concepts": "everglades", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "everglades"}], ["meeting", {"concepts": "meeting", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "meeting"}], ["no-take areas", {"concepts": "no-take areas", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "no-take areas"}], ["pedagogy", {"concepts": "pedagogy", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "pedagogy"}], ["concepts", {"concepts": "concepts", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "concepts"}], ["natural state", {"concepts": "natural state", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "natural state"}], ["uc santa barbara", {"concepts": "uc santa barbara", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "uc santa barbara"}], ["organizational structures", {"concepts": "organizational structures", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "organizational structures"}], ["invasive removal", {"concepts": "invasive removal", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "invasive removal"}], ["social dynamics", {"concepts": "social dynamics", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "social dynamics"}], ["management components", {"concepts": "management components", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "management components"}], ["management attention", {"concepts": "management attention", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "management attention"}], ["interviews", {"concepts": "interviews", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "interviews"}], ["relationships", {"concepts": "relationships", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "relationships"}], ["conservation", {"concepts": "conservation", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "conservation"}], ["everglades restoration", {"concepts": "everglades restoration", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "everglades restoration"}], ["gulf of mexico", {"concepts": "gulf of mexico", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "gulf of mexico"}], ["power relations", {"concepts": "power relations", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "power relations"}], ["bans on non-natives", {"concepts": "bans on non-natives", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "bans on non-natives"}], ["expert opinions", {"concepts": "expert opinions", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "expert opinions"}], ["upstream management", {"concepts": "upstream management", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "upstream management"}], ["stressors", {"concepts": "stressors", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "stressors"}], ["management", {"concepts": "management", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "management"}], ["policies", {"concepts": "policies", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "policies"}], ["management actions", {"concepts": "management actions", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "management actions"}], ["nature conservancy", {"concepts": "nature conservancy", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "nature conservancy"}], ["human action", {"concepts": "human action", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "human action"}], ["importation bans", {"concepts": "importation bans", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "importation bans"}], ["army corps of engineers", {"concepts": "army corps of engineers", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "army corps of engineers"}], ["travel office", {"concepts": "travel office", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "travel office"}], ["arrangements", {"concepts": "arrangements", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "arrangements"}], ["contaminants", {"concepts": "contaminants", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "contaminants"}], ["no take areas", {"concepts": "no take areas", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "no take areas"}], ["workshop", {"concepts": "workshop", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "workshop"}], ["qualitative aggregation", {"concepts": "qualitative aggregation", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "qualitative aggregation"}], ["sedimentation", {"concepts": "sedimentation", "type": "concept", "cluster": "Coastal Ecosystems", "node_size": 10, "label": "sedimentation"}]], "Marine Conservation": [["watershed management", {"concepts": "watershed management", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "watershed management"}], ["geospatial analysis", {"concepts": "geospatial analysis", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "geospatial analysis"}], ["estuary", {"concepts": "estuary", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "estuary"}], ["coastal ecosystems", {"concepts": "coastal ecosystems", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "coastal ecosystems"}], ["estuaries", {"concepts": "estuaries", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "estuaries"}], ["sea level rise", {"concepts": "sea level rise", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "sea level rise"}], ["wetlands", {"concepts": "wetlands", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "wetlands"}], ["storm surge", {"concepts": "storm surge", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "storm surge"}], ["coastlines", {"concepts": "coastlines", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "coastlines"}], ["coastal ecosystem", {"concepts": "coastal ecosystem", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "coastal ecosystem"}], ["coastal resilience", {"concepts": "coastal resilience", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "coastal resilience"}], ["estuary systems", {"concepts": "estuary systems", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "estuary systems"}], ["watershed", {"concepts": "watershed", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "watershed"}], ["wetland filling", {"concepts": "wetland filling", "type": "concept", "cluster": "Marine Conservation", "node_size": 10, "label": "wetland filling"}]]};
        const clusterEdges = {"Ecosystem Health": [], "Conservation Management": [], "Coastal Ecosystems": [], "Marine Conservation": []};
        
        let network;
        let currentView = 'clusters';
        let currentCluster = null;
        let minConfidence = 0.3;
        
        // Network options
        const options = {
            nodes: {
                font: { color: 'white', size: 14 },
                borderWidth: 2,
                shadow: true
            },
            edges: {
                arrows: { to: { enabled: true, scaleFactor: 1.2 } },
                shadow: true,
                smooth: { type: 'continuous' }
            },
            physics: {
                stabilization: { iterations: 100 },
                barnesHut: {
                    gravitationalConstant: -8000,
                    springConstant: 0.001,
                    springLength: 200
                }
            },
            interaction: {
                hover: true,
                selectConnectedEdges: false
            }
        };
        
        function initNetwork() {
            const container = document.getElementById('network');
            const data = getClusterViewData();
            network = new vis.Network(container, data, options);
            
            // Handle cluster clicks for drill-down
            network.on("click", function(params) {
                if (params.nodes.length > 0 && currentView === 'clusters') {
                    const clickedNode = params.nodes[0];
                    if (clusterConcepts[clickedNode]) {
                        showClusterDetail(clickedNode);
                    }
                }
            });
        }
        
        function getClusterViewData() {
            const nodes = [];
            const edges = [];
            
            // Add cluster nodes
            Object.entries(clusterData).forEach(([clusterId, data]) => {
                const concepts = data.concepts || [];
                const conceptsStr = Array.isArray(concepts) ? concepts.join(', ') : concepts;
                
                nodes.push({
                    id: clusterId,
                    label: clusterId,
                    title: `Cluster: ${clusterId}\nConcepts: ${conceptsStr}\nClick to explore internal relationships`,
                    color: '#4A90E2',
                    size: 25 + (conceptsStr.split(',').length * 2),
                    font: { color: 'white' }
                });
            });
            
            // Add inter-cluster edges
            interClusterEdges.forEach(([source, target, edgeData]) => {
                const confidence = edgeData.confidence || 1.0;
                const weight = edgeData.weight || 0;
                
                if (confidence >= minConfidence) {
                    edges.push({
                        from: source,
                        to: target,
                        color: weight > 0 ? '#28A745' : '#DC3545',
                        width: Math.abs(weight) * 3 + 1,
                        title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                        dashes: false
                    });
                }
            });
            
            return { nodes: nodes, edges: edges };
        }
        
        function getClusterDetailData(clusterId) {
            const nodes = [];
            const edges = [];
            
            // Add concept nodes for this cluster
            if (clusterConcepts[clusterId]) {
                clusterConcepts[clusterId].forEach(([conceptId, data]) => {
                    nodes.push({
                        id: conceptId,
                        label: conceptId,
                        title: `Concept: ${conceptId}\nFrom cluster: ${clusterId}`,
                        color: '#FF9500',
                        size: 20,
                        font: { color: 'white' }
                    });
                });
            }
            
            // Add intra-cluster edges
            if (clusterEdges[clusterId]) {
                clusterEdges[clusterId].forEach(([source, target, edgeData]) => {
                    const confidence = edgeData.confidence || 1.0;
                    const weight = edgeData.weight || 0;
                    
                    if (confidence >= minConfidence) {
                        edges.push({
                            from: source,
                            to: target,
                            color: weight > 0 ? '#28A745' : '#DC3545',
                            width: Math.abs(weight) * 3 + 1,
                            title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                            dashes: true
                        });
                    }
                });
            }
            
            return { nodes: nodes, edges: edges };
        }
        
        function showClusterView() {
            currentView = 'clusters';
            currentCluster = null;
            const data = getClusterViewData();
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'none';
            document.getElementById('current-view').textContent = 'Cluster Overview';
        }
        
        function showClusterDetail(clusterId) {
            currentView = 'concepts';
            currentCluster = clusterId;
            const data = getClusterDetailData(clusterId);
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'inline-block';
            document.getElementById('current-view').textContent = `Inside Cluster: ${clusterId}`;
        }
        
        function updateConfidenceFilter(value) {
            minConfidence = parseFloat(value);
            document.getElementById('confidence-value').textContent = value;
            
            // Refresh current view
            if (currentView === 'clusters') {
                showClusterView();
            } else {
                showClusterDetail(currentCluster);
            }
        }
        
        // Initialize the network when page loads
        window.onload = function() {
            initNetwork();
        };
    </script>
</body>
</html>
