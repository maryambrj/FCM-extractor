
<!DOCTYPE html>
<html>
<head>
    <title>Hierarchical FCM Visualization (Unconnected nodes removed)</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 0; 
            padding: 20px;
            background: #f5f5f5;
        }
        
        #network { 
            width: 100%; 
            height: 600px; 
            border: 2px solid #ccc; 
            background: white;
            border-radius: 8px;
        }
        
        #controls {
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn {
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        
        .btn-primary { background: #4A90E2; color: white; }
        .btn-primary:hover { background: #357ABD; }
        
        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #545b62; }
        
        #current-view {
            font-weight: bold;
            color: #333;
            margin-left: 10px;
        }
        
        #legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-size: 12px;
            max-width: 200px;
        }
        
        .legend-item {
            margin: 5px 0;
            display: flex;
            align-items: center;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .legend-line {
            width: 20px;
            height: 2px;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <h1>Fuzzy Cognitive Map - Hierarchical View</h1>
    
    <div id="controls">
        <button class="btn btn-secondary" id="back-btn" onclick="showClusterView()" style="display: none;">
            ← Back to Clusters
        </button>
        <span id="current-view">Cluster Overview</span>
        <div style="float: right;">
            <label>Min Confidence: </label>
            <input type="range" id="confidence-slider" min="0" max="1" step="0.1" value="0.3" 
                   onchange="updateConfidenceFilter(this.value)">
            <span id="confidence-value">0.3</span>
        </div>
    </div>
    
    <div id="network"></div>
    
    <div id="legend">
        <h4>Legend</h4>
        <div class="legend-item">
            <div class="legend-color" style="background: #4A90E2;"></div>
            <span>Clusters</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #FF9500;"></div>
            <span>Concepts</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #28A745;"></div>
            <span>Positive relationship</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #DC3545;"></div>
            <span>Negative relationship</span>
        </div>
        <div style="margin-top: 10px; font-style: italic; color: #666;">
            Click clusters to explore internal concepts
        </div>
    </div>

    <script>
        // Embedded data
        const clusterData = {"System Constraints": {"concepts": "exploitation target, exploitation", "concept_list": ["exploitation target", "exploitation"], "type": "cluster", "node_size": 21, "label": "System Constraints"}, "Graph Analysis": {"concepts": "environmental constraint, components, component identification", "concept_list": ["environmental constraint", "components", "component identification"], "type": "cluster", "node_size": 24, "label": "Graph Analysis"}, "Access Control": {"concepts": "analysis, graph", "concept_list": ["analysis", "graph"], "type": "cluster", "node_size": 21, "label": "Access Control"}, "Learning & Understanding": {"concepts": "obtaining access, full access, blocked access, information access, file read, availability, access, information availability, partial access, failure to obtain access, access goals", "concept_list": ["obtaining access", "full access", "blocked access", "information access", "file read", "availability", "access", "information availability", "partial access", "failure to obtain access", "access goals"], "type": "cluster", "node_size": 48, "label": "Learning & Understanding"}, "Exploitation Targets": {"concepts": "explanation, readability, problem solving strategies, demonstration, system understanding, understanding, experimentation, understandability, task diagramming, intuition, belief systems, memorization, questioning, experimenter, interpretation", "concept_list": ["explanation", "readability", "problem solving strategies", "demonstration", "system understanding", "understanding", "experimentation", "understandability", "task diagramming", "intuition", "belief systems", "memorization", "questioning", "experimenter", "interpretation"], "type": "cluster", "node_size": 60, "label": "Exploitation Targets"}, "**System Access & Dynamics**": {"concepts": "access control, educational factors, environment, blocking mechanism, dialogue, subcomponents, actor dependency, agreement, physical requirements, disagreement, communication, tool availability, identifiers, exploit components, institutional role, data sheets, node, non-functional interest, negotiation, problem-solving, institutional process, educational settings, fiscal requirement, component access, learning approaches, leadership practices, encryption, exploit, directed graph, meaningful information, functional interest, exploitation analysis, progress, functional relevance, factors, privileged access, challenge, fuzzy cognitive map, protocols, reverse engineering, power filtering, scheduling, software component, failure points, organizational factors, network structure, failure, educational context, dataset, connection, identification, success, enabling factor, organizational dynamics, cultural norm of cooperation, libraries, testing device, subset activities, hardware exploitation, subcomponent identification, features, non-functional components, target system, data availability, mislabeling, roles", "concept_list": ["access control", "educational factors", "environment", "blocking mechanism", "dialogue", "subcomponents", "actor dependency", "agreement", "physical requirements", "disagreement", "communication", "tool availability", "identifiers", "exploit components", "institutional role", "data sheets", "node", "non-functional interest", "negotiation", "problem-solving", "institutional process", "educational settings", "fiscal requirement", "component access", "learning approaches", "leadership practices", "encryption", "exploit", "directed graph", "meaningful information", "functional interest", "exploitation analysis", "progress", "functional relevance", "factors", "privileged access", "challenge", "fuzzy cognitive map", "protocols", "reverse engineering", "power filtering", "scheduling", "software component", "failure points", "organizational factors", "network structure", "failure", "educational context", "dataset", "connection", "identification", "success", "enabling factor", "organizational dynamics", "cultural norm of cooperation", "libraries", "testing device", "subset activities", "hardware exploitation", "subcomponent identification", "features", "non-functional components", "target system", "data availability", "mislabeling", "roles"], "type": "cluster", "node_size": 213, "label": "**System Access & Dynamics**"}, "**System Tools & Interfaces**": {"concepts": "software features, tools, physical tools, component interfacing, bespoke systems, general purpose tools, interfacing, server, firmware, bespoke tools, general purpose interface, physical interfacing, visualization tool, successful interfacing, software analysis, software, standardized interfaces, pins, software exploitation, connector, interface, soldering, physical interface, computer visualization, specialized interface, usability", "concept_list": ["software features", "tools", "physical tools", "component interfacing", "bespoke systems", "general purpose tools", "interfacing", "server", "firmware", "bespoke tools", "general purpose interface", "physical interfacing", "visualization tool", "successful interfacing", "software analysis", "software", "standardized interfaces", "pins", "software exploitation", "connector", "interface", "soldering", "physical interface", "computer visualization", "specialized interface", "usability"], "type": "cluster", "node_size": 93, "label": "**System Tools & Interfaces**"}, "**Knowledge Management**": {"concepts": "information acquisition, online resource, knowledge constraints, information sources, documentation, undocumented systems, data collection, data sheet, prior information, knowledge repository, data sheet analysis, online resources, information, knowledge representation, prior knowledge", "concept_list": ["information acquisition", "online resource", "knowledge constraints", "information sources", "documentation", "undocumented systems", "data collection", "data sheet", "prior information", "knowledge repository", "data sheet analysis", "online resources", "information", "knowledge representation", "prior knowledge"], "type": "cluster", "node_size": 60, "label": "**Knowledge Management**"}, "**Interaction Dynamics**": {"concepts": "collaboration, fcm exercise, positive relationship, connection attempt, psychological factors, distractions, interaction dynamic, cooperation, distraction, force function, interaction, negative relationship", "concept_list": ["collaboration", "fcm exercise", "positive relationship", "connection attempt", "psychological factors", "distractions", "interaction dynamic", "cooperation", "distraction", "force function", "interaction", "negative relationship"], "type": "cluster", "node_size": 51, "label": "**Interaction Dynamics**"}, "Access & Control": {"concepts": "matrix, languages, solution, translation, reinforcement, structures, adjustment, hindrance, parallel structure, primitives, decoding, correction, layout, problem, obstacle", "concept_list": ["matrix", "languages", "solution", "translation", "reinforcement", "structures", "adjustment", "hindrance", "parallel structure", "primitives", "decoding", "correction", "layout", "problem", "obstacle"], "type": "cluster", "node_size": 60, "label": "Access & Control"}, "**Security Measures**": {"concepts": "countersecurity, protections, additional security, security systems, security layer, countersecurity activities, layers of security, security mechanisms, system vulnerabilities, security mechanism, security measures, security feature, obfuscation", "concept_list": ["countersecurity", "protections", "additional security", "security systems", "security layer", "countersecurity activities", "layers of security", "security mechanisms", "system vulnerabilities", "security mechanism", "security measures", "security feature", "obfuscation"], "type": "cluster", "node_size": 54, "label": "**Security Measures**"}, "**Requirements & Protocols**": {"concepts": "technical requirement, protocol, technical protocol, requirements determination, data protocol", "concept_list": ["technical requirement", "protocol", "technical protocol", "requirements determination", "data protocol"], "type": "cluster", "node_size": 30, "label": "**Requirements & Protocols**"}, "**Problem-Solving Evaluation**": {"concepts": "decision-making, semi-structured interview, capture the flag, subset of activities, subject matter expert, problem-solving strategies", "concept_list": ["decision-making", "semi-structured interview", "capture the flag", "subset of activities", "subject matter expert", "problem-solving strategies"], "type": "cluster", "node_size": 33, "label": "**Problem-Solving Evaluation**"}, "Process Navigation": {"concepts": "frameworks, avenues, steps, stakeholders, impediments, approaches, challenges", "concept_list": ["frameworks", "avenues", "steps", "stakeholders", "impediments", "approaches", "challenges"], "type": "cluster", "node_size": 36, "label": "Process Navigation"}, "**Process & Decision Flow**": {"concepts": "decision processes, participant, iterative process, outcomes, process, clarification, processes, process flow", "concept_list": ["decision processes", "participant", "iterative process", "outcomes", "process", "clarification", "processes", "process flow"], "type": "cluster", "node_size": 39, "label": "**Process & Decision Flow**"}, "**System Overview**": {"concepts": "system capabilities, hardware labeling, system overview, system features, capabilities", "concept_list": ["system capabilities", "hardware labeling", "system overview", "system features", "capabilities"], "type": "cluster", "node_size": 30, "label": "**System Overview**"}};
        const conceptData = {};
        const interClusterEdges = [["System Constraints", "**Security Measures**", {"weight": -1.0, "confidence": 0.8480000000000001, "type": "inter_cluster", "style": "solid"}], ["System Constraints", "**Requirements & Protocols**", {"weight": 1.0, "confidence": 0.712, "type": "inter_cluster", "style": "solid"}], ["System Constraints", "**System Overview**", {"weight": 0.8, "confidence": 0.554, "type": "inter_cluster", "style": "solid"}], ["Graph Analysis", "**Problem-Solving Evaluation**", {"weight": 1.0, "confidence": 0.6700000000000002, "type": "inter_cluster", "style": "solid"}], ["Graph Analysis", "System Constraints", {"weight": 1.0, "confidence": 0.7475, "type": "inter_cluster", "style": "solid"}], ["Graph Analysis", "Access & Control", {"weight": 1.0, "confidence": 0.6479999999999999, "type": "inter_cluster", "style": "solid"}], ["Graph Analysis", "Learning & Understanding", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["Access Control", "**Interaction Dynamics**", {"weight": 1.0, "confidence": 0.7539999999999999, "type": "inter_cluster", "style": "solid"}], ["Access Control", "**Knowledge Management**", {"weight": 1.0, "confidence": 0.7380000000000001, "type": "inter_cluster", "style": "solid"}], ["Access Control", "**System Access & Dynamics**", {"weight": 1.0, "confidence": 0.7259999999999999, "type": "inter_cluster", "style": "solid"}], ["Access Control", "Process Navigation", {"weight": 1.0, "confidence": 0.7260000000000001, "type": "inter_cluster", "style": "solid"}], ["Access Control", "**System Tools & Interfaces**", {"weight": 1.0, "confidence": 0.7220000000000001, "type": "inter_cluster", "style": "solid"}], ["Access Control", "System Constraints", {"weight": 1.0, "confidence": 0.686, "type": "inter_cluster", "style": "solid"}], ["Access Control", "**Security Measures**", {"weight": 1.0, "confidence": 0.6679999999999999, "type": "inter_cluster", "style": "solid"}], ["Learning & Understanding", "Graph Analysis", {"weight": 0.2, "confidence": 0.6739999999999999, "type": "inter_cluster", "style": "solid"}], ["Learning & Understanding", "**System Tools & Interfaces**", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["Learning & Understanding", "**Process & Decision Flow**", {"weight": 1.0, "confidence": 0.715, "type": "inter_cluster", "style": "solid"}], ["Exploitation Targets", "**System Tools & Interfaces**", {"weight": 1.0, "confidence": 0.758, "type": "inter_cluster", "style": "solid"}], ["Exploitation Targets", "**Requirements & Protocols**", {"weight": 1.0, "confidence": 0.712, "type": "inter_cluster", "style": "solid"}], ["Exploitation Targets", "System Constraints", {"weight": 1.0, "confidence": 0.7133333333333334, "type": "inter_cluster", "style": "solid"}], ["Exploitation Targets", "Graph Analysis", {"weight": 1.0, "confidence": 0.73, "type": "inter_cluster", "style": "solid"}], ["**System Tools & Interfaces**", "Access & Control", {"weight": 1.0, "confidence": 0.7475, "type": "inter_cluster", "style": "solid"}], ["**System Tools & Interfaces**", "**Interaction Dynamics**", {"weight": 1.0, "confidence": 0.6725, "type": "inter_cluster", "style": "solid"}], ["**System Tools & Interfaces**", "**Requirements & Protocols**", {"weight": 1.0, "confidence": 0.7849999999999999, "type": "inter_cluster", "style": "solid"}], ["**System Tools & Interfaces**", "**Knowledge Management**", {"weight": 1.0, "confidence": 0.745, "type": "inter_cluster", "style": "solid"}], ["**System Tools & Interfaces**", "Graph Analysis", {"weight": 1.0, "confidence": 0.73, "type": "inter_cluster", "style": "solid"}], ["**Knowledge Management**", "**Security Measures**", {"weight": 1.0, "confidence": 0.7399999999999999, "type": "inter_cluster", "style": "solid"}], ["**Knowledge Management**", "**Process & Decision Flow**", {"weight": 1.0, "confidence": 0.72, "type": "inter_cluster", "style": "solid"}], ["**Interaction Dynamics**", "**Problem-Solving Evaluation**", {"weight": 1.0, "confidence": 0.715, "type": "inter_cluster", "style": "solid"}], ["**Interaction Dynamics**", "Exploitation Targets", {"weight": 1.0, "confidence": 0.665, "type": "inter_cluster", "style": "solid"}], ["**Interaction Dynamics**", "Learning & Understanding", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster", "style": "solid"}], ["**Interaction Dynamics**", "**System Tools & Interfaces**", {"weight": 0.6666666666666666, "confidence": 0.42333333333333334, "type": "inter_cluster", "style": "solid"}], ["**Interaction Dynamics**", "**Requirements & Protocols**", {"weight": 0.6666666666666666, "confidence": 0.4166666666666667, "type": "inter_cluster", "style": "solid"}], ["**Interaction Dynamics**", "System Constraints", {"weight": 1.0, "confidence": 0.66, "type": "inter_cluster", "style": "solid"}], ["Access & Control", "Graph Analysis", {"weight": 1.0, "confidence": 0.632, "type": "inter_cluster", "style": "solid"}], ["**Security Measures**", "Learning & Understanding", {"weight": -1.0, "confidence": 0.8933333333333334, "type": "inter_cluster", "style": "solid"}], ["**Security Measures**", "**System Access & Dynamics**", {"weight": -1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["**Requirements & Protocols**", "**System Access & Dynamics**", {"weight": 1.0, "confidence": 0.772, "type": "inter_cluster", "style": "solid"}], ["**Requirements & Protocols**", "**System Tools & Interfaces**", {"weight": 1.0, "confidence": 0.775, "type": "inter_cluster", "style": "solid"}], ["**Problem-Solving Evaluation**", "**Interaction Dynamics**", {"weight": 1.0, "confidence": 0.76, "type": "inter_cluster", "style": "solid"}], ["**Problem-Solving Evaluation**", "Access Control", {"weight": 1.0, "confidence": 0.76, "type": "inter_cluster", "style": "solid"}], ["**Problem-Solving Evaluation**", "**System Overview**", {"weight": 1.0, "confidence": 0.705, "type": "inter_cluster", "style": "solid"}], ["Process Navigation", "**Knowledge Management**", {"weight": 1.0, "confidence": 0.766, "type": "inter_cluster", "style": "solid"}], ["Process Navigation", "Exploitation Targets", {"weight": 1.0, "confidence": 0.706, "type": "inter_cluster", "style": "solid"}], ["Process Navigation", "System Constraints", {"weight": 1.0, "confidence": 0.716, "type": "inter_cluster", "style": "solid"}], ["Process Navigation", "**Requirements & Protocols**", {"weight": 1.0, "confidence": 0.708, "type": "inter_cluster", "style": "solid"}], ["**Process & Decision Flow**", "**Knowledge Management**", {"weight": 1.0, "confidence": 0.7725, "type": "inter_cluster", "style": "solid"}], ["**Process & Decision Flow**", "Access Control", {"weight": 1.0, "confidence": 0.735, "type": "inter_cluster", "style": "solid"}], ["**Process & Decision Flow**", "Access & Control", {"weight": 1.0, "confidence": 0.685, "type": "inter_cluster", "style": "solid"}], ["**System Overview**", "**Process & Decision Flow**", {"weight": 1.0, "confidence": 0.7200000000000001, "type": "inter_cluster", "style": "solid"}], ["**System Overview**", "Graph Analysis", {"weight": 1.0, "confidence": 0.765, "type": "inter_cluster", "style": "solid"}]];
        const clusterConcepts = {};
        const clusterEdges = {"System Constraints": [], "Graph Analysis": [], "Access Control": [], "Learning & Understanding": [], "Exploitation Targets": [], "**System Access & Dynamics**": [], "**System Tools & Interfaces**": [], "**Knowledge Management**": [], "**Interaction Dynamics**": [], "Access & Control": [], "**Security Measures**": [], "**Requirements & Protocols**": [], "**Problem-Solving Evaluation**": [], "Process Navigation": [], "**Process & Decision Flow**": [], "**System Overview**": []};
        
        let network;
        let currentView = 'clusters';
        let currentCluster = null;
        let minConfidence = 0.3;
        
        // Network options
        const options = {
            nodes: {
                font: { color: 'white', size: 14 },
                borderWidth: 2,
                shadow: true
            },
            edges: {
                arrows: { to: { enabled: true, scaleFactor: 1.2 } },
                shadow: true,
                smooth: { type: 'continuous' }
            },
            physics: {
                stabilization: { iterations: 100 },
                barnesHut: {
                    gravitationalConstant: -8000,
                    springConstant: 0.001,
                    springLength: 200
                }
            },
            interaction: {
                hover: true,
                selectConnectedEdges: false
            }
        };
        
        function initNetwork() {
            const container = document.getElementById('network');
            const data = getClusterViewData();
            network = new vis.Network(container, data, options);
            
            // Handle cluster clicks for drill-down
            network.on("click", function(params) {
                if (params.nodes.length > 0 && currentView === 'clusters') {
                    const clickedNode = params.nodes[0];
                    if (clusterConcepts[clickedNode]) {
                        showClusterDetail(clickedNode);
                    }
                }
            });
        }
        
        function getClusterViewData() {
            const nodes = [];
            const edges = [];
            
            // Add cluster nodes
            Object.entries(clusterData).forEach(([clusterId, data]) => {
                const concepts = data.concepts || [];
                const conceptsStr = Array.isArray(concepts) ? concepts.join(', ') : concepts;
                
                nodes.push({
                    id: clusterId,
                    label: clusterId,
                    title: `Cluster: ${clusterId}\nConcepts: ${conceptsStr}\nClick to explore internal relationships`,
                    color: '#4A90E2',
                    size: 25 + (conceptsStr.split(',').length * 2),
                    font: { color: 'white' }
                });
            });
            
            // Add inter-cluster edges
            interClusterEdges.forEach(([source, target, edgeData]) => {
                const confidence = edgeData.confidence || 1.0;
                const weight = edgeData.weight || 0;
                
                if (confidence >= minConfidence) {
                    edges.push({
                        from: source,
                        to: target,
                        color: weight > 0 ? '#28A745' : '#DC3545',
                        width: Math.abs(weight) * 3 + 1,
                        title: `${source} → ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                        dashes: false
                    });
                }
            });
            
            return { nodes: nodes, edges: edges };
        }
        
        function getClusterDetailData(clusterId) {
            const nodes = [];
            const edges = [];
            
            // Add concept nodes for this cluster
            if (clusterConcepts[clusterId]) {
                clusterConcepts[clusterId].forEach(([conceptId, data]) => {
                    nodes.push({
                        id: conceptId,
                        label: conceptId,
                        title: `Concept: ${conceptId}\nFrom cluster: ${clusterId}`,
                        color: '#FF9500',
                        size: 20,
                        font: { color: 'white' }
                    });
                });
            }
            
            // Add intra-cluster edges
            if (clusterEdges[clusterId]) {
                clusterEdges[clusterId].forEach(([source, target, edgeData]) => {
                    const confidence = edgeData.confidence || 1.0;
                    const weight = edgeData.weight || 0;
                    
                    if (confidence >= minConfidence) {
                        edges.push({
                            from: source,
                            to: target,
                            color: weight > 0 ? '#28A745' : '#DC3545',
                            width: Math.abs(weight) * 3 + 1,
                            title: `${source} → ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                            dashes: true
                        });
                    }
                });
            }
            
            return { nodes: nodes, edges: edges };
        }
        
        function showClusterView() {
            currentView = 'clusters';
            currentCluster = null;
            const data = getClusterViewData();
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'none';
            document.getElementById('current-view').textContent = 'Cluster Overview';
        }
        
        function showClusterDetail(clusterId) {
            currentView = 'concepts';
            currentCluster = clusterId;
            const data = getClusterDetailData(clusterId);
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'inline-block';
            document.getElementById('current-view').textContent = `Inside Cluster: ${clusterId}`;
        }
        
        function updateConfidenceFilter(value) {
            minConfidence = parseFloat(value);
            document.getElementById('confidence-value').textContent = value;
            
            // Refresh current view
            if (currentView === 'clusters') {
                showClusterView();
            } else {
                showClusterDetail(currentCluster);
            }
        }
        
        // Initialize the network when page loads
        window.onload = function() {
            initNetwork();
        };
    </script>
</body>
</html>
