
<!DOCTYPE html>
<html>
<head>
    <title>Hierarchical FCM Visualization</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 0; 
            padding: 20px;
            background: #f5f5f5;
        }
        
        #network { 
            width: 100%; 
            height: 600px; 
            border: 2px solid #ccc; 
            background: white;
            border-radius: 8px;
        }
        
        #controls {
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn {
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        
        .btn-primary { background: #4A90E2; color: white; }
        .btn-primary:hover { background: #357ABD; }
        
        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #545b62; }
        
        #current-view {
            font-weight: bold;
            color: #333;
            margin-left: 10px;
        }
        
        #legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-size: 12px;
            max-width: 200px;
        }
        
        .legend-item {
            margin: 5px 0;
            display: flex;
            align-items: center;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .legend-line {
            width: 20px;
            height: 2px;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <h1>Fuzzy Cognitive Map - Hierarchical View</h1>
    
    <div id="controls">
        <button class="btn btn-secondary" id="back-btn" onclick="showClusterView()" style="display: none;">
            ← Back to Clusters
        </button>
        <span id="current-view">Cluster Overview</span>
        <div style="float: right;">
            <label>Min Confidence: </label>
            <input type="range" id="confidence-slider" min="0" max="1" step="0.1" value="0.3" 
                   onchange="updateConfidenceFilter(this.value)">
            <span id="confidence-value">0.3</span>
        </div>
    </div>
    
    <div id="network"></div>
    
    <div id="legend">
        <h4>Legend</h4>
        <div class="legend-item">
            <div class="legend-color" style="background: #4A90E2;"></div>
            <span>Clusters</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #FF9500;"></div>
            <span>Concepts</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #28A745;"></div>
            <span>Positive relationship</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #DC3545;"></div>
            <span>Negative relationship</span>
        </div>
        <div style="margin-top: 10px; font-style: italic; color: #666;">
            Click clusters to explore internal concepts
        </div>
    </div>

    <script>
        // Embedded data
        const clusterData = {"privileged access": {"concepts": "privileged access", "concept_list": ["privileged access"], "type": "cluster", "label": "privileged access"}, "semi-structured interview": {"concepts": "semi-structured interview", "concept_list": ["semi-structured interview"], "type": "cluster", "label": "semi-structured interview"}, "languages": {"concepts": "languages", "concept_list": ["languages"], "type": "cluster", "label": "languages"}, "iterative process": {"concepts": "iterative process", "concept_list": ["iterative process"], "type": "cluster", "label": "iterative process"}, "matrix": {"concepts": "matrix", "concept_list": ["matrix"], "type": "cluster", "label": "matrix"}, "information acquisition": {"concepts": "information acquisition", "concept_list": ["information acquisition"], "type": "cluster", "label": "information acquisition"}, "fcm exercise": {"concepts": "fcm exercise", "concept_list": ["fcm exercise"], "type": "cluster", "label": "fcm exercise"}, "computer visualization tool": {"concepts": "computer visualization tool", "concept_list": ["computer visualization tool"], "type": "cluster", "label": "computer visualization tool"}, "Knowledge Base": {"concepts": "file read primitive, data protocol", "concept_list": ["file read primitive", "data protocol"], "type": "cluster", "label": "Knowledge Base"}, "Data Access": {"concepts": "general knowledge, prior knowledge, subject matter expert, knowledge", "concept_list": ["general knowledge", "prior knowledge", "subject matter expert", "knowledge"], "type": "cluster", "label": "Data Access"}, "Exploit Techniques": {"concepts": "data access, partial access", "concept_list": ["data access", "partial access"], "type": "cluster", "label": "Exploit Techniques"}, "Firmware Security": {"concepts": "exploitations, hardware exploitation, exploitation, exploit components", "concept_list": ["exploitations", "hardware exploitation", "exploitation", "exploit components"], "type": "cluster", "label": "Firmware Security"}, "File Access": {"concepts": "firmware, firmware security, firmware level, firmware software", "concept_list": ["firmware", "firmware security", "firmware level", "firmware software"], "type": "cluster", "label": "File Access"}, "Access Issues": {"concepts": "access failure, access", "concept_list": ["access failure", "access"], "type": "cluster", "label": "Access Issues"}, "Access Levels": {"concepts": "access goals, access level", "concept_list": ["access goals", "access level"], "type": "cluster", "label": "Access Levels"}, "Documentation Gaps": {"concepts": "undocumented system, lack of documentation", "concept_list": ["undocumented system", "lack of documentation"], "type": "cluster", "label": "Documentation Gaps"}, "Data Sheets": {"concepts": "data sheets, data sheet, data sheet information., fiscal requirements", "concept_list": ["data sheets", "data sheet", "data sheet information.", "fiscal requirements"], "type": "cluster", "label": "Data Sheets"}, "Knowledge Repositories": {"concepts": "documentation, repository of knowledge", "concept_list": ["documentation", "repository of knowledge"], "type": "cluster", "label": "Knowledge Repositories"}, "Data Precision": {"concepts": "granularity., granularity", "concept_list": ["granularity.", "granularity"], "type": "cluster", "label": "Data Precision"}, "Flag Capture": {"concepts": "capturing the flag, capture the flag", "concept_list": ["capturing the flag", "capture the flag"], "type": "cluster", "label": "Flag Capture"}, "System Overview": {"concepts": "overview, system understanding", "concept_list": ["overview", "system understanding"], "type": "cluster", "label": "System Overview"}, "Intuitive Beliefs": {"concepts": "beliefs, intuition", "concept_list": ["beliefs", "intuition"], "type": "cluster", "label": "Intuitive Beliefs"}, "Success Strategies": {"concepts": "success, successfully id, success steps", "concept_list": ["success", "successfully id", "success steps"], "type": "cluster", "label": "Success Strategies"}, "Reverse Engineering": {"concepts": "reverse engineered, re", "concept_list": ["reverse engineered", "re"], "type": "cluster", "label": "Reverse Engineering"}, "Decision Strategies": {"concepts": "strategies, decisions, factors", "concept_list": ["strategies", "decisions", "factors"], "type": "cluster", "label": "Decision Strategies"}, "Overcoming Barriers": {"concepts": "impediments, challenges", "concept_list": ["impediments", "challenges"], "type": "cluster", "label": "Overcoming Barriers"}, "Encryption Basics": {"concepts": "obtaining primitives, encryption", "concept_list": ["obtaining primitives", "encryption"], "type": "cluster", "label": "Encryption Basics"}, "Data Clarity": {"concepts": "understandable, readable", "concept_list": ["understandable", "readable"], "type": "cluster", "label": "Data Clarity"}, "Graph Structure": {"concepts": "task diagramming, node, directed graph", "concept_list": ["task diagramming", "node", "directed graph"], "type": "cluster", "label": "Graph Structure"}, "Label Accuracy": {"concepts": "mislabeling, labels", "concept_list": ["mislabeling", "labels"], "type": "cluster", "label": "Label Accuracy"}, "Informative Layout": {"concepts": "layout, meaningful information", "concept_list": ["layout", "meaningful information"], "type": "cluster", "label": "Informative Layout"}, "Essential Features": {"concepts": "key items, features, screen sharing", "concept_list": ["key items", "features", "screen sharing"], "type": "cluster", "label": "Essential Features"}, "Feedback Dynamics": {"concepts": "positive, negative", "concept_list": ["positive", "negative"], "type": "cluster", "label": "Feedback Dynamics"}, "Cognitive Mapping": {"concepts": "fuzzy cognitive map, connection", "concept_list": ["fuzzy cognitive map", "connection"], "type": "cluster", "label": "Cognitive Mapping"}, "System Outputs": {"concepts": "output, schedules", "concept_list": ["output", "schedules"], "type": "cluster", "label": "System Outputs"}, "Data Collection": {"concepts": "data collection, data collection stage", "concept_list": ["data collection", "data collection stage"], "type": "cluster", "label": "Data Collection"}, "Data Decoding": {"concepts": "decode data, data determination", "concept_list": ["decode data", "data determination"], "type": "cluster", "label": "Data Decoding"}, "Custom Systems": {"concepts": "bespoke system, bespoke system.", "concept_list": ["bespoke system", "bespoke system."], "type": "cluster", "label": "Custom Systems"}, "Dynamic Filtering": {"concepts": "force function, power filtering", "concept_list": ["force function", "power filtering"], "type": "cluster", "label": "Dynamic Filtering"}, "Interface Standards": {"concepts": "standardized interfaces, interfacing, interface", "concept_list": ["standardized interfaces", "interfacing", "interface"], "type": "cluster", "label": "Interface Standards"}, "Connector Interface": {"concepts": "connector, pins", "concept_list": ["connector", "pins"], "type": "cluster", "label": "Connector Interface"}, "Physical Interface": {"concepts": "physical interfacing, physical interface", "concept_list": ["physical interfacing", "physical interface"], "type": "cluster", "label": "Physical Interface"}, "Cyber Obfuscation": {"concepts": "obfuscation, cyber attacks", "concept_list": ["obfuscation", "cyber attacks"], "type": "cluster", "label": "Cyber Obfuscation"}, "Security Protocols": {"concepts": "security feature, specific security, security perspective, security measures, security layer, security mechanisms, security information", "concept_list": ["security feature", "specific security", "security perspective", "security measures", "security layer", "security mechanisms", "security information"], "type": "cluster", "label": "Security Protocols"}, "Unproductive Distractions": {"concepts": "non-functional aid, non-functional interest", "concept_list": ["non-functional aid", "non-functional interest"], "type": "cluster", "label": "Unproductive Distractions"}, "Key Functionality": {"concepts": "functionality of interest, functional interest, functionality", "concept_list": ["functionality of interest", "functional interest", "functionality"], "type": "cluster", "label": "Key Functionality"}, "Subcomponent Analysis": {"concepts": "subcomponents, subcomponents identification", "concept_list": ["subcomponents", "subcomponents identification"], "type": "cluster", "label": "Subcomponent Analysis"}, "Software Architecture": {"concepts": "software environment, software level, tool software, software features, software component, software", "concept_list": ["software environment", "software level", "tool software", "software features", "software component", "software"], "type": "cluster", "label": "Software Architecture"}, "Security Analysis": {"concepts": "software security, reverse engineering", "concept_list": ["software security", "reverse engineering"], "type": "cluster", "label": "Security Analysis"}, "Standard Protections": {"concepts": "protections, common protections., common protections", "concept_list": ["protections", "common protections.", "common protections"], "type": "cluster", "label": "Standard Protections"}, "Hardware Essentials": {"concepts": "physical tools, physical requirements, hardware access", "concept_list": ["physical tools", "physical requirements", "hardware access"], "type": "cluster", "label": "Hardware Essentials"}, "Data Protocols": {"concepts": "data availability, protocols", "concept_list": ["data availability", "protocols"], "type": "cluster", "label": "Data Protocols"}};
        const conceptData = {};
        const interClusterEdges = [["privileged access", "Exploit Techniques", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster"}], ["privileged access", "Flag Capture", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster"}], ["semi-structured interview", "System Overview", {"weight": 1.0, "confidence": 0.6666666666666666, "type": "inter_cluster"}], ["semi-structured interview", "Key Functionality", {"weight": 1.0, "confidence": 0.625, "type": "inter_cluster"}], ["semi-structured interview", "Interface Standards", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster"}], ["semi-structured interview", "Data Collection", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster"}], ["languages", "Data Protocols", {"weight": 1.0, "confidence": 0.6666666666666666, "type": "inter_cluster"}], ["languages", "Data Access", {"weight": 1.0, "confidence": 0.675, "type": "inter_cluster"}], ["languages", "Data Collection", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster"}], ["languages", "Data Clarity", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster"}], ["iterative process", "Data Access", {"weight": 1.0, "confidence": 0.6999999999999998, "type": "inter_cluster"}], ["iterative process", "Unproductive Distractions", {"weight": -1.0, "confidence": 0.675, "type": "inter_cluster"}], ["iterative process", "Custom Systems", {"weight": 1.0, "confidence": 0.675, "type": "inter_cluster"}], ["iterative process", "Intuitive Beliefs", {"weight": 1.0, "confidence": 0.675, "type": "inter_cluster"}], ["iterative process", "semi-structured interview", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster"}], ["iterative process", "Cognitive Mapping", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster"}], ["matrix", "fcm exercise", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster"}], ["matrix", "Decision Strategies", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster"}], ["matrix", "Graph Structure", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster"}], ["information acquisition", "Data Clarity", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster"}], ["information acquisition", "Reverse Engineering", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster"}], ["fcm exercise", "Cognitive Mapping", {"weight": 1.0, "confidence": 0.8500000000000001, "type": "inter_cluster"}], ["fcm exercise", "Overcoming Barriers", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster"}], ["fcm exercise", "Reverse Engineering", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster"}], ["fcm exercise", "Essential Features", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster"}], ["computer visualization tool", "Feedback Dynamics", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster"}], ["computer visualization tool", "Dynamic Filtering", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster"}], ["Knowledge Base", "Exploit Techniques", {"weight": 1.0, "confidence": 0.7833333333333333, "type": "inter_cluster"}], ["Knowledge Base", "Reverse Engineering", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster"}], ["Data Access", "Unproductive Distractions", {"weight": -1.0, "confidence": 0.6499999999999999, "type": "inter_cluster"}], ["Data Access", "Data Collection", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster"}], ["Data Access", "iterative process", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster"}], ["Data Access", "languages", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster"}], ["Exploit Techniques", "privileged access", {"weight": 1.0, "confidence": 0.8166666666666668, "type": "inter_cluster"}], ["Exploit Techniques", "Custom Systems", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster"}], ["Exploit Techniques", "Data Collection", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster"}], ["Firmware Security", "Cyber Obfuscation", {"weight": 1.0, "confidence": 0.7333333333333334, "type": "inter_cluster"}], ["Firmware Security", "Data Protocols", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster"}], ["Firmware Security", "Access Levels", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster"}], ["Firmware Security", "System Overview", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster"}], ["File Access", "Data Protocols", {"weight": 1.0, "confidence": 0.675, "type": "inter_cluster"}], ["File Access", "Informative Layout", {"weight": 1.0, "confidence": 0.675, "type": "inter_cluster"}], ["File Access", "Decision Strategies", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster"}], ["File Access", "Software Architecture", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster"}], ["File Access", "Security Analysis", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster"}], ["File Access", "Documentation Gaps", {"weight": -1.0, "confidence": 0.75, "type": "inter_cluster"}], ["File Access", "Standard Protections", {"weight": -1.0, "confidence": 0.75, "type": "inter_cluster"}], ["Access Issues", "Exploit Techniques", {"weight": -1.0, "confidence": 0.725, "type": "inter_cluster"}], ["Access Issues", "iterative process", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster"}], ["Access Issues", "languages", {"weight": -1.0, "confidence": 0.6, "type": "inter_cluster"}], ["Access Issues", "File Access", {"weight": -1.0, "confidence": 0.75, "type": "inter_cluster"}], ["Access Issues", "Decision Strategies", {"weight": -1.0, "confidence": 0.6, "type": "inter_cluster"}], ["Access Levels", "Label Accuracy", {"weight": -1.0, "confidence": 0.6, "type": "inter_cluster"}], ["Access Levels", "Security Analysis", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster"}], ["Access Levels", "System Overview", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster"}], ["Documentation Gaps", "Cognitive Mapping", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster"}], ["Documentation Gaps", "Knowledge Repositories", {"weight": -1.0, "confidence": 0.75, "type": "inter_cluster"}], ["Documentation Gaps", "Knowledge Base", {"weight": -1.0, "confidence": 0.75, "type": "inter_cluster"}], ["Documentation Gaps", "information acquisition", {"weight": -1.0, "confidence": 0.85, "type": "inter_cluster"}], ["Data Sheets", "Security Protocols", {"weight": -1.0, "confidence": 0.75, "type": "inter_cluster"}], ["Data Sheets", "System Outputs", {"weight": 1.0, "confidence": 0.675, "type": "inter_cluster"}], ["Knowledge Repositories", "Reverse Engineering", {"weight": 1.0, "confidence": 0.775, "type": "inter_cluster"}], ["Knowledge Repositories", "Documentation Gaps", {"weight": -1.0, "confidence": 0.7833333333333332, "type": "inter_cluster"}], ["Knowledge Repositories", "privileged access", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster"}], ["Knowledge Repositories", "iterative process", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster"}], ["Knowledge Repositories", "Graph Structure", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster"}], ["Data Precision", "Intuitive Beliefs", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster"}], ["Data Precision", "Informative Layout", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster"}], ["Flag Capture", "Encryption Basics", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster"}], ["Flag Capture", "Key Functionality", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster"}], ["Flag Capture", "Software Architecture", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster"}], ["System Overview", "semi-structured interview", {"weight": 1.0, "confidence": 0.6833333333333332, "type": "inter_cluster"}], ["Intuitive Beliefs", "Exploit Techniques", {"weight": 1.0, "confidence": 0.7333333333333334, "type": "inter_cluster"}], ["Intuitive Beliefs", "Decision Strategies", {"weight": 1.0, "confidence": 0.725, "type": "inter_cluster"}], ["Intuitive Beliefs", "Data Precision", {"weight": 1.0, "confidence": 0.575, "type": "inter_cluster"}], ["Intuitive Beliefs", "Subcomponent Analysis", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster"}], ["Intuitive Beliefs", "Hardware Essentials", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster"}], ["Intuitive Beliefs", "Flag Capture", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster"}], ["Success Strategies", "Informative Layout", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster"}], ["Reverse Engineering", "System Overview", {"weight": 1.0, "confidence": 0.7875000000000001, "type": "inter_cluster"}], ["Reverse Engineering", "Security Analysis", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster"}], ["Reverse Engineering", "Data Decoding", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster"}], ["Reverse Engineering", "Physical Interface", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster"}], ["Reverse Engineering", "Unproductive Distractions", {"weight": -1.0, "confidence": 0.6, "type": "inter_cluster"}], ["Decision Strategies", "Custom Systems", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster"}], ["Decision Strategies", "Software Architecture", {"weight": 1.0, "confidence": 0.675, "type": "inter_cluster"}], ["Decision Strategies", "Access Levels", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster"}], ["Decision Strategies", "Data Protocols", {"weight": 1.0, "confidence": 0.675, "type": "inter_cluster"}], ["Overcoming Barriers", "Reverse Engineering", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster"}], ["Overcoming Barriers", "fcm exercise", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster"}], ["Overcoming Barriers", "Cyber Obfuscation", {"weight": -1.0, "confidence": 0.8, "type": "inter_cluster"}], ["Overcoming Barriers", "Data Sheets", {"weight": -1.0, "confidence": 0.8, "type": "inter_cluster"}], ["Encryption Basics", "Flag Capture", {"weight": 1.0, "confidence": 0.775, "type": "inter_cluster"}], ["Data Clarity", "information acquisition", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster"}], ["Data Clarity", "Cognitive Mapping", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster"}], ["Data Clarity", "Flag Capture", {"weight": 1.0, "confidence": 0.85, "type": "inter_cluster"}], ["Data Clarity", "Dynamic Filtering", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster"}], ["Graph Structure", "iterative process", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster"}], ["Graph Structure", "fcm exercise", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster"}], ["Label Accuracy", "Data Protocols", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster"}], ["Label Accuracy", "Reverse Engineering", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster"}], ["Label Accuracy", "Data Sheets", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster"}], ["Label Accuracy", "Unproductive Distractions", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster"}], ["Informative Layout", "Dynamic Filtering", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster"}], ["Informative Layout", "Exploit Techniques", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster"}], ["Informative Layout", "Data Decoding", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster"}], ["Informative Layout", "Knowledge Repositories", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster"}], ["Essential Features", "Reverse Engineering", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster"}], ["Essential Features", "Physical Interface", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster"}], ["Essential Features", "Cognitive Mapping", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster"}], ["Essential Features", "Data Clarity", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster"}], ["Feedback Dynamics", "Overcoming Barriers", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster"}], ["Cognitive Mapping", "Security Protocols", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster"}], ["Cognitive Mapping", "Data Clarity", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster"}], ["Cognitive Mapping", "Documentation Gaps", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster"}], ["Cognitive Mapping", "iterative process", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster"}], ["Cognitive Mapping", "Essential Features", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster"}], ["System Outputs", "Data Protocols", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster"}], ["System Outputs", "languages", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster"}], ["System Outputs", "Essential Features", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster"}], ["Data Collection", "languages", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster"}], ["Data Decoding", "iterative process", {"weight": 1.0, "confidence": 0.675, "type": "inter_cluster"}], ["Data Decoding", "Security Protocols", {"weight": -1.0, "confidence": 0.6, "type": "inter_cluster"}], ["Data Decoding", "Label Accuracy", {"weight": -1.0, "confidence": 0.65, "type": "inter_cluster"}], ["Data Decoding", "languages", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster"}], ["Custom Systems", "Overcoming Barriers", {"weight": 1.0, "confidence": 0.7124999999999999, "type": "inter_cluster"}], ["Custom Systems", "iterative process", {"weight": 1.0, "confidence": 0.6833333333333332, "type": "inter_cluster"}], ["Custom Systems", "Access Levels", {"weight": -1.0, "confidence": 0.75, "type": "inter_cluster"}], ["Custom Systems", "Documentation Gaps", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster"}], ["Custom Systems", "Cyber Obfuscation", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster"}], ["Dynamic Filtering", "Informative Layout", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster"}], ["Dynamic Filtering", "iterative process", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster"}], ["Dynamic Filtering", "Physical Interface", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster"}], ["Dynamic Filtering", "fcm exercise", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster"}], ["Interface Standards", "Flag Capture", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster"}], ["Interface Standards", "Data Sheets", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster"}], ["Interface Standards", "Encryption Basics", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster"}], ["Interface Standards", "Decision Strategies", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster"}], ["Connector Interface", "Flag Capture", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster"}], ["Connector Interface", "System Overview", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster"}], ["Physical Interface", "Label Accuracy", {"weight": -1.0, "confidence": 0.65, "type": "inter_cluster"}], ["Physical Interface", "Knowledge Base", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster"}], ["Cyber Obfuscation", "Firmware Security", {"weight": -1.0, "confidence": 0.75, "type": "inter_cluster"}], ["Cyber Obfuscation", "Overcoming Barriers", {"weight": -1.0, "confidence": 0.825, "type": "inter_cluster"}], ["Cyber Obfuscation", "Essential Features", {"weight": -1.0, "confidence": 0.75, "type": "inter_cluster"}], ["Cyber Obfuscation", "Data Decoding", {"weight": -1.0, "confidence": 0.8, "type": "inter_cluster"}], ["Security Protocols", "Flag Capture", {"weight": -1.0, "confidence": 0.7333333333333334, "type": "inter_cluster"}], ["Security Protocols", "Data Collection", {"weight": -1.0, "confidence": 0.75, "type": "inter_cluster"}], ["Security Protocols", "Data Decoding", {"weight": -1.0, "confidence": 0.725, "type": "inter_cluster"}], ["Security Protocols", "Success Strategies", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster"}], ["Security Protocols", "Overcoming Barriers", {"weight": -1.0, "confidence": 0.75, "type": "inter_cluster"}], ["Security Protocols", "Encryption Basics", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster"}], ["Unproductive Distractions", "Essential Features", {"weight": -1.0, "confidence": 0.7749999999999999, "type": "inter_cluster"}], ["Unproductive Distractions", "Intuitive Beliefs", {"weight": -1.0, "confidence": 0.6, "type": "inter_cluster"}], ["Unproductive Distractions", "Label Accuracy", {"weight": -1.0, "confidence": 0.65, "type": "inter_cluster"}], ["Unproductive Distractions", "Exploit Techniques", {"weight": -1.0, "confidence": 0.6, "type": "inter_cluster"}], ["Key Functionality", "Hardware Essentials", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster"}], ["Key Functionality", "Software Architecture", {"weight": 1.0, "confidence": 0.6499999999999999, "type": "inter_cluster"}], ["Key Functionality", "Physical Interface", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster"}], ["Key Functionality", "Data Decoding", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster"}], ["Key Functionality", "information acquisition", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster"}], ["Key Functionality", "Overcoming Barriers", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster"}], ["Key Functionality", "fcm exercise", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster"}], ["Subcomponent Analysis", "Data Collection", {"weight": 1.0, "confidence": 0.775, "type": "inter_cluster"}], ["Subcomponent Analysis", "Cyber Obfuscation", {"weight": -1.0, "confidence": 0.75, "type": "inter_cluster"}], ["Software Architecture", "Data Access", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster"}], ["Software Architecture", "File Access", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster"}], ["Software Architecture", "Reverse Engineering", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster"}], ["Software Architecture", "Hardware Essentials", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster"}], ["Security Analysis", "Reverse Engineering", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster"}], ["Security Analysis", "Access Levels", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster"}], ["Standard Protections", "Physical Interface", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster"}], ["Standard Protections", "Data Decoding", {"weight": -1.0, "confidence": 0.7, "type": "inter_cluster"}], ["Standard Protections", "Interface Standards", {"weight": 1.0, "confidence": 0.675, "type": "inter_cluster"}], ["Hardware Essentials", "Key Functionality", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster"}], ["Hardware Essentials", "Feedback Dynamics", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster"}], ["Data Protocols", "Firmware Security", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster"}], ["Data Protocols", "File Access", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster"}], ["Data Protocols", "Data Precision", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster"}], ["Data Protocols", "Physical Interface", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster"}], ["Data Protocols", "Encryption Basics", {"weight": 1.0, "confidence": 0.65, "type": "inter_cluster"}]];
        const clusterConcepts = {};
        const clusterEdges = {};
        
        let network;
        let currentView = 'clusters';
        let currentCluster = null;
        let minConfidence = 0.3;
        
        // Network options
        const options = {
            nodes: {
                font: { color: 'white', size: 14 },
                borderWidth: 2,
                shadow: true
            },
            edges: {
                arrows: { to: { enabled: true, scaleFactor: 1.2 } },
                shadow: true,
                smooth: { type: 'continuous' }
            },
            physics: {
                stabilization: { iterations: 100 },
                barnesHut: {
                    gravitationalConstant: -8000,
                    springConstant: 0.001,
                    springLength: 200
                }
            },
            interaction: {
                hover: true,
                selectConnectedEdges: false
            }
        };
        
        function initNetwork() {
            const container = document.getElementById('network');
            const data = getClusterViewData();
            network = new vis.Network(container, data, options);
            
            // Handle cluster clicks for drill-down
            network.on("click", function(params) {
                if (params.nodes.length > 0 && currentView === 'clusters') {
                    const clickedNode = params.nodes[0];
                    if (clusterConcepts[clickedNode]) {
                        showClusterDetail(clickedNode);
                    }
                }
            });
        }
        
        function getClusterViewData() {
            const nodes = [];
            const edges = [];
            
            // Add cluster nodes
            Object.entries(clusterData).forEach(([clusterId, data]) => {
                const concepts = data.concepts || [];
                const conceptsStr = Array.isArray(concepts) ? concepts.join(', ') : concepts;
                
                nodes.push({
                    id: clusterId,
                    label: clusterId,
                    title: `Cluster: ${clusterId}\nConcepts: ${conceptsStr}\nClick to explore internal relationships`,
                    color: '#4A90E2',
                    size: 25 + (conceptsStr.split(',').length * 2),
                    font: { color: 'white' }
                });
            });
            
            // Add inter-cluster edges
            interClusterEdges.forEach(([source, target, edgeData]) => {
                const confidence = edgeData.confidence || 1.0;
                const weight = edgeData.weight || 0;
                
                if (confidence >= minConfidence) {
                    edges.push({
                        from: source,
                        to: target,
                        color: weight > 0 ? '#28A745' : '#DC3545',
                        width: Math.abs(weight) * 3 + 1,
                        title: `${source} → ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                        dashes: false
                    });
                }
            });
            
            return { nodes: nodes, edges: edges };
        }
        
        function getClusterDetailData(clusterId) {
            const nodes = [];
            const edges = [];
            
            // Add concept nodes for this cluster
            if (clusterConcepts[clusterId]) {
                clusterConcepts[clusterId].forEach(([conceptId, data]) => {
                    nodes.push({
                        id: conceptId,
                        label: conceptId,
                        title: `Concept: ${conceptId}\nFrom cluster: ${clusterId}`,
                        color: '#FF9500',
                        size: 20,
                        font: { color: 'white' }
                    });
                });
            }
            
            // Add intra-cluster edges
            if (clusterEdges[clusterId]) {
                clusterEdges[clusterId].forEach(([source, target, edgeData]) => {
                    const confidence = edgeData.confidence || 1.0;
                    const weight = edgeData.weight || 0;
                    
                    if (confidence >= minConfidence) {
                        edges.push({
                            from: source,
                            to: target,
                            color: weight > 0 ? '#28A745' : '#DC3545',
                            width: Math.abs(weight) * 3 + 1,
                            title: `${source} → ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                            dashes: true
                        });
                    }
                });
            }
            
            return { nodes: nodes, edges: edges };
        }
        
        function showClusterView() {
            currentView = 'clusters';
            currentCluster = null;
            const data = getClusterViewData();
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'none';
            document.getElementById('current-view').textContent = 'Cluster Overview';
        }
        
        function showClusterDetail(clusterId) {
            currentView = 'concepts';
            currentCluster = clusterId;
            const data = getClusterDetailData(clusterId);
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'inline-block';
            document.getElementById('current-view').textContent = `Inside Cluster: ${clusterId}`;
        }
        
        function updateConfidenceFilter(value) {
            minConfidence = parseFloat(value);
            document.getElementById('confidence-value').textContent = value;
            
            // Refresh current view
            if (currentView === 'clusters') {
                showClusterView();
            } else {
                showClusterDetail(currentCluster);
            }
        }
        
        // Initialize the network when page loads
        window.onload = function() {
            initNetwork();
        };
    </script>
</body>
</html>
