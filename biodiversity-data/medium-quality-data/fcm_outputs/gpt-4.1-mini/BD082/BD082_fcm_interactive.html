
<!DOCTYPE html>
<html>
<head>
    <title>Hierarchical FCM Visualization</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 0; 
            padding: 20px;
            background: #f5f5f5;
        }
        
        #network { 
            width: 100%; 
            height: 600px; 
            border: 2px solid #ccc; 
            background: white;
            border-radius: 8px;
        }
        
        #controls {
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn {
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        
        .btn-primary { background: #4A90E2; color: white; }
        .btn-primary:hover { background: #357ABD; }
        
        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #545b62; }
        
        #current-view {
            font-weight: bold;
            color: #333;
            margin-left: 10px;
        }
        
        #legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-size: 12px;
            max-width: 200px;
        }
        
        .legend-item {
            margin: 5px 0;
            display: flex;
            align-items: center;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .legend-line {
            width: 20px;
            height: 2px;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <h1>Fuzzy Cognitive Map - Hierarchical View</h1>
    
    <div id="controls">
        <button class="btn btn-secondary" id="back-btn" onclick="showClusterView()" style="display: none;">
            ‚Üê Back to Clusters
        </button>
        <span id="current-view">Cluster Overview</span>
        <div style="float: right;">
            <label>Min Confidence: </label>
            <input type="range" id="confidence-slider" min="0" max="1" step="0.1" value="0.3" 
                   onchange="updateConfidenceFilter(this.value)">
            <span id="confidence-value">0.3</span>
        </div>
    </div>
    
    <div id="network"></div>
    
    <div id="legend">
        <h4>Legend</h4>
        <div class="legend-item">
            <div class="legend-color" style="background: #4A90E2;"></div>
            <span>Clusters</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #FF9500;"></div>
            <span>Concepts</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #28A745;"></div>
            <span>Positive relationship</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #DC3545;"></div>
            <span>Negative relationship</span>
        </div>
        <div style="margin-top: 10px; font-style: italic; color: #666;">
            Click clusters to explore internal concepts
        </div>
    </div>

    <script>
        // Embedded data
        const clusterData = {"Disease and Environmental Stress": {"concepts": "gill netting, overharvest, overharvesting, bycatch, commercial overharvest, consumptive users, non-tribal gill netting, treaty tribes, species extinction, endangered species, conservation concern, species of conservation concern, species, government inefficiencies, national lawsuits, international waters", "concept_list": ["gill netting", "overharvest", "overharvesting", "bycatch", "commercial overharvest", "consumptive users", "non-tribal gill netting", "treaty tribes", "species extinction", "endangered species", "conservation concern", "species of conservation concern", "species", "government inefficiencies", "national lawsuits", "international waters"], "type": "cluster", "node_size": 63, "label": "Disease and Environmental Stress"}, "Runoff and Shoreline Impact": {"concepts": "bacterial infections, harmful organisms, whirling disease, executive director, researchers, managers, individual interviews, adipose fin clipping, environmental factors, biodiversity, environmental stressors, human considerations, brake dust, technical difficulties", "concept_list": ["bacterial infections", "harmful organisms", "whirling disease", "executive director", "researchers", "managers", "individual interviews", "adipose fin clipping", "environmental factors", "biodiversity", "environmental stressors", "human considerations", "brake dust", "technical difficulties"], "type": "cluster", "node_size": 57, "label": "Runoff and Shoreline Impact"}, "River Systems and Hydrology": {"concepts": "concrete docks, shoreline structures, soft structures, impervious surfaces, road runoff, runoff, industrial runoff, chemical runoff, brake dust", "concept_list": ["concrete docks", "shoreline structures", "soft structures", "impervious surfaces", "road runoff", "runoff", "industrial runoff", "chemical runoff", "brake dust"], "type": "cluster", "node_size": 42, "label": "River Systems and Hydrology"}, "Ecosystem and Habitat Management": {"concepts": "irrigation, riverine systems, nooksack river, major watersheds, nisqually river, natal streams, river hydrology, sediments, sedimentation, dam removal, puget sound, bellingham bay, pacific northwest, tributaries, columbia river, oregon, tribal layer, mobile chapter, federal policies, warmer water conditions, whitewater rafting, local policies, resource users, alaska, hydroelectric dams", "concept_list": ["irrigation", "riverine systems", "nooksack river", "major watersheds", "nisqually river", "natal streams", "river hydrology", "sediments", "sedimentation", "dam removal", "puget sound", "bellingham bay", "pacific northwest", "tributaries", "columbia river", "oregon", "tribal layer", "mobile chapter", "federal policies", "warmer water conditions", "whitewater rafting", "local policies", "resource users", "alaska", "hydroelectric dams"], "type": "cluster", "node_size": 90, "label": "Ecosystem and Habitat Management"}, "Overfishing and Conservation": {"concepts": "gulf of mexico, ecosystem-based management, food web, ecosystem based management, nutrient load, water pollution, chemical pollutants, wild populations, chesapeake bay workshop, habitat impact, msy, habitat development, cca washington, smelt, hydro projects, management consideration, habitat forming species, multi-species management, herring, marine derived nutrients, nutrient enhancement, ecosystem management, food web species, mobile bay, ecosystem, pristine habitat, canada, cca alabama, policy management, adipose fin clipping, industrial runoff, ecosystem services, maryland, habitat, case study, key food web species, habitat restoration, state policies, habitat projects, habitat protection", "concept_list": ["gulf of mexico", "ecosystem-based management", "food web", "ecosystem based management", "nutrient load", "water pollution", "chemical pollutants", "wild populations", "chesapeake bay workshop", "habitat impact", "msy", "habitat development", "cca washington", "smelt", "hydro projects", "management consideration", "habitat forming species", "multi-species management", "herring", "marine derived nutrients", "nutrient enhancement", "ecosystem management", "food web species", "mobile bay", "ecosystem", "pristine habitat", "canada", "cca alabama", "policy management", "adipose fin clipping", "industrial runoff", "ecosystem services", "maryland", "habitat", "case study", "key food web species", "habitat restoration", "state policies", "habitat projects", "habitat protection"], "type": "cluster", "node_size": 135, "label": "Overfishing and Conservation"}, "Harvest Management Strategies": {"concepts": "commercial harvest, harvest allocation, harvest policies, harvest management, commercial fishing, maximum sustainable yield", "concept_list": ["commercial harvest", "harvest allocation", "harvest policies", "harvest management", "commercial fishing", "maximum sustainable yield"], "type": "cluster", "node_size": 33, "label": "Harvest Management Strategies"}, "Fishing Impact Management": {"concepts": "trawler fishing, fishing pressure, recreational harvest, fishing seasons, recreational fishing, pacific ocean, tagging fish, fish bycatch", "concept_list": ["trawler fishing", "fishing pressure", "recreational harvest", "fishing seasons", "recreational fishing", "pacific ocean", "tagging fish", "fish bycatch"], "type": "cluster", "node_size": 39, "label": "Fishing Impact Management"}, "Ocean Fish Forecasting": {"concepts": "commercial ocean harvest, fish forecasting", "concept_list": ["commercial ocean harvest", "fish forecasting"], "type": "cluster", "node_size": 21, "label": "Ocean Fish Forecasting"}, "Resource Policies & Environment": {"concepts": "hatch reproduction, salmon reproduction, hatchery salmon, salmon marking, hatchery fish, hatcheries", "concept_list": ["hatch reproduction", "salmon reproduction", "hatchery salmon", "salmon marking", "hatchery fish", "hatcheries"], "type": "cluster", "node_size": 33, "label": "Resource Policies & Environment"}, "Salmon Conservation Efforts": {"concepts": "salmon mortality, wild salmon advocates, salmon conservation, fish population sustainability, salmon habitat, salmon rearing, salmon, salmon spawning, salmon stressors, department of fish and wildlife, salmon decline, salmon recovery, spawning grounds, wild salmon, forage fish, salmon migration", "concept_list": ["salmon mortality", "wild salmon advocates", "salmon conservation", "fish population sustainability", "salmon habitat", "salmon rearing", "salmon", "salmon spawning", "salmon stressors", "department of fish and wildlife", "salmon decline", "salmon recovery", "spawning grounds", "wild salmon", "forage fish", "salmon migration"], "type": "cluster", "node_size": 63, "label": "Salmon Conservation Efforts"}, "Fisheries Management": {"concepts": "mark selective fisheries, fisheries management, fisheries managers, commercial fisheries, fisheries policy", "concept_list": ["mark selective fisheries", "fisheries management", "fisheries managers", "commercial fisheries", "fisheries policy"], "type": "cluster", "node_size": 30, "label": "Fisheries Management"}};
        const conceptData = {"gill netting": {"concepts": "gill netting", "type": "concept", "cluster": "Disease and Environmental Stress", "node_size": 10, "label": "gill netting"}, "overharvest": {"concepts": "overharvest", "type": "concept", "cluster": "Disease and Environmental Stress", "node_size": 10, "label": "overharvest"}, "overharvesting": {"concepts": "overharvesting", "type": "concept", "cluster": "Disease and Environmental Stress", "node_size": 10, "label": "overharvesting"}, "bycatch": {"concepts": "bycatch", "type": "concept", "cluster": "Disease and Environmental Stress", "node_size": 10, "label": "bycatch"}, "commercial overharvest": {"concepts": "commercial overharvest", "type": "concept", "cluster": "Disease and Environmental Stress", "node_size": 10, "label": "commercial overharvest"}, "consumptive users": {"concepts": "consumptive users", "type": "concept", "cluster": "Disease and Environmental Stress", "node_size": 10, "label": "consumptive users"}, "non-tribal gill netting": {"concepts": "non-tribal gill netting", "type": "concept", "cluster": "Disease and Environmental Stress", "node_size": 10, "label": "non-tribal gill netting"}, "treaty tribes": {"concepts": "treaty tribes", "type": "concept", "cluster": "Disease and Environmental Stress", "node_size": 10, "label": "treaty tribes"}, "species extinction": {"concepts": "species extinction", "type": "concept", "cluster": "Disease and Environmental Stress", "node_size": 10, "label": "species extinction"}, "endangered species": {"concepts": "endangered species", "type": "concept", "cluster": "Disease and Environmental Stress", "node_size": 10, "label": "endangered species"}, "conservation concern": {"concepts": "conservation concern", "type": "concept", "cluster": "Disease and Environmental Stress", "node_size": 10, "label": "conservation concern"}, "species of conservation concern": {"concepts": "species of conservation concern", "type": "concept", "cluster": "Disease and Environmental Stress", "node_size": 10, "label": "species of conservation concern"}, "species": {"concepts": "species", "type": "concept", "cluster": "Disease and Environmental Stress", "node_size": 10, "label": "species"}, "government inefficiencies": {"concepts": "government inefficiencies", "type": "concept", "cluster": "Disease and Environmental Stress", "node_size": 10, "label": "government inefficiencies"}, "national lawsuits": {"concepts": "national lawsuits", "type": "concept", "cluster": "Disease and Environmental Stress", "node_size": 10, "label": "national lawsuits"}, "international waters": {"concepts": "international waters", "type": "concept", "cluster": "Disease and Environmental Stress", "node_size": 10, "label": "international waters"}, "bacterial infections": {"concepts": "bacterial infections", "type": "concept", "cluster": "Runoff and Shoreline Impact", "node_size": 10, "label": "bacterial infections"}, "harmful organisms": {"concepts": "harmful organisms", "type": "concept", "cluster": "Runoff and Shoreline Impact", "node_size": 10, "label": "harmful organisms"}, "whirling disease": {"concepts": "whirling disease", "type": "concept", "cluster": "Runoff and Shoreline Impact", "node_size": 10, "label": "whirling disease"}, "executive director": {"concepts": "executive director", "type": "concept", "cluster": "Runoff and Shoreline Impact", "node_size": 10, "label": "executive director"}, "researchers": {"concepts": "researchers", "type": "concept", "cluster": "Runoff and Shoreline Impact", "node_size": 10, "label": "researchers"}, "managers": {"concepts": "managers", "type": "concept", "cluster": "Runoff and Shoreline Impact", "node_size": 10, "label": "managers"}, "individual interviews": {"concepts": "individual interviews", "type": "concept", "cluster": "Runoff and Shoreline Impact", "node_size": 10, "label": "individual interviews"}, "adipose fin clipping": {"concepts": "adipose fin clipping", "type": "concept", "cluster": "Runoff and Shoreline Impact", "node_size": 10, "label": "adipose fin clipping"}, "environmental factors": {"concepts": "environmental factors", "type": "concept", "cluster": "Runoff and Shoreline Impact", "node_size": 10, "label": "environmental factors"}, "biodiversity": {"concepts": "biodiversity", "type": "concept", "cluster": "Runoff and Shoreline Impact", "node_size": 10, "label": "biodiversity"}, "environmental stressors": {"concepts": "environmental stressors", "type": "concept", "cluster": "Runoff and Shoreline Impact", "node_size": 10, "label": "environmental stressors"}, "human considerations": {"concepts": "human considerations", "type": "concept", "cluster": "Runoff and Shoreline Impact", "node_size": 10, "label": "human considerations"}, "brake dust": {"concepts": "brake dust", "type": "concept", "cluster": "Runoff and Shoreline Impact", "node_size": 10, "label": "brake dust"}, "technical difficulties": {"concepts": "technical difficulties", "type": "concept", "cluster": "Runoff and Shoreline Impact", "node_size": 10, "label": "technical difficulties"}, "concrete docks": {"concepts": "concrete docks", "type": "concept", "cluster": "River Systems and Hydrology", "node_size": 10, "label": "concrete docks"}, "shoreline structures": {"concepts": "shoreline structures", "type": "concept", "cluster": "River Systems and Hydrology", "node_size": 10, "label": "shoreline structures"}, "soft structures": {"concepts": "soft structures", "type": "concept", "cluster": "River Systems and Hydrology", "node_size": 10, "label": "soft structures"}, "impervious surfaces": {"concepts": "impervious surfaces", "type": "concept", "cluster": "River Systems and Hydrology", "node_size": 10, "label": "impervious surfaces"}, "road runoff": {"concepts": "road runoff", "type": "concept", "cluster": "River Systems and Hydrology", "node_size": 10, "label": "road runoff"}, "runoff": {"concepts": "runoff", "type": "concept", "cluster": "River Systems and Hydrology", "node_size": 10, "label": "runoff"}, "industrial runoff": {"concepts": "industrial runoff", "type": "concept", "cluster": "River Systems and Hydrology", "node_size": 10, "label": "industrial runoff"}, "chemical runoff": {"concepts": "chemical runoff", "type": "concept", "cluster": "River Systems and Hydrology", "node_size": 10, "label": "chemical runoff"}, "irrigation": {"concepts": "irrigation", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "irrigation"}, "riverine systems": {"concepts": "riverine systems", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "riverine systems"}, "nooksack river": {"concepts": "nooksack river", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "nooksack river"}, "major watersheds": {"concepts": "major watersheds", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "major watersheds"}, "nisqually river": {"concepts": "nisqually river", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "nisqually river"}, "natal streams": {"concepts": "natal streams", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "natal streams"}, "river hydrology": {"concepts": "river hydrology", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "river hydrology"}, "sediments": {"concepts": "sediments", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "sediments"}, "sedimentation": {"concepts": "sedimentation", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "sedimentation"}, "dam removal": {"concepts": "dam removal", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "dam removal"}, "puget sound": {"concepts": "puget sound", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "puget sound"}, "bellingham bay": {"concepts": "bellingham bay", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "bellingham bay"}, "pacific northwest": {"concepts": "pacific northwest", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "pacific northwest"}, "tributaries": {"concepts": "tributaries", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "tributaries"}, "columbia river": {"concepts": "columbia river", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "columbia river"}, "oregon": {"concepts": "oregon", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "oregon"}, "tribal layer": {"concepts": "tribal layer", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "tribal layer"}, "mobile chapter": {"concepts": "mobile chapter", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "mobile chapter"}, "federal policies": {"concepts": "federal policies", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "federal policies"}, "warmer water conditions": {"concepts": "warmer water conditions", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "warmer water conditions"}, "whitewater rafting": {"concepts": "whitewater rafting", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "whitewater rafting"}, "local policies": {"concepts": "local policies", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "local policies"}, "resource users": {"concepts": "resource users", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "resource users"}, "alaska": {"concepts": "alaska", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "alaska"}, "hydroelectric dams": {"concepts": "hydroelectric dams", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "hydroelectric dams"}, "gulf of mexico": {"concepts": "gulf of mexico", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "gulf of mexico"}, "ecosystem-based management": {"concepts": "ecosystem-based management", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "ecosystem-based management"}, "food web": {"concepts": "food web", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "food web"}, "ecosystem based management": {"concepts": "ecosystem based management", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "ecosystem based management"}, "nutrient load": {"concepts": "nutrient load", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "nutrient load"}, "water pollution": {"concepts": "water pollution", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "water pollution"}, "chemical pollutants": {"concepts": "chemical pollutants", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "chemical pollutants"}, "wild populations": {"concepts": "wild populations", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "wild populations"}, "chesapeake bay workshop": {"concepts": "chesapeake bay workshop", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "chesapeake bay workshop"}, "habitat impact": {"concepts": "habitat impact", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "habitat impact"}, "msy": {"concepts": "msy", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "msy"}, "habitat development": {"concepts": "habitat development", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "habitat development"}, "cca washington": {"concepts": "cca washington", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "cca washington"}, "smelt": {"concepts": "smelt", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "smelt"}, "hydro projects": {"concepts": "hydro projects", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "hydro projects"}, "management consideration": {"concepts": "management consideration", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "management consideration"}, "habitat forming species": {"concepts": "habitat forming species", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "habitat forming species"}, "multi-species management": {"concepts": "multi-species management", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "multi-species management"}, "herring": {"concepts": "herring", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "herring"}, "marine derived nutrients": {"concepts": "marine derived nutrients", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "marine derived nutrients"}, "nutrient enhancement": {"concepts": "nutrient enhancement", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "nutrient enhancement"}, "ecosystem management": {"concepts": "ecosystem management", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "ecosystem management"}, "food web species": {"concepts": "food web species", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "food web species"}, "mobile bay": {"concepts": "mobile bay", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "mobile bay"}, "ecosystem": {"concepts": "ecosystem", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "ecosystem"}, "pristine habitat": {"concepts": "pristine habitat", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "pristine habitat"}, "canada": {"concepts": "canada", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "canada"}, "cca alabama": {"concepts": "cca alabama", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "cca alabama"}, "policy management": {"concepts": "policy management", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "policy management"}, "ecosystem services": {"concepts": "ecosystem services", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "ecosystem services"}, "maryland": {"concepts": "maryland", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "maryland"}, "habitat": {"concepts": "habitat", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "habitat"}, "case study": {"concepts": "case study", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "case study"}, "key food web species": {"concepts": "key food web species", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "key food web species"}, "habitat restoration": {"concepts": "habitat restoration", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "habitat restoration"}, "state policies": {"concepts": "state policies", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "state policies"}, "habitat projects": {"concepts": "habitat projects", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "habitat projects"}, "habitat protection": {"concepts": "habitat protection", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "habitat protection"}, "commercial harvest": {"concepts": "commercial harvest", "type": "concept", "cluster": "Harvest Management Strategies", "node_size": 10, "label": "commercial harvest"}, "harvest allocation": {"concepts": "harvest allocation", "type": "concept", "cluster": "Harvest Management Strategies", "node_size": 10, "label": "harvest allocation"}, "harvest policies": {"concepts": "harvest policies", "type": "concept", "cluster": "Harvest Management Strategies", "node_size": 10, "label": "harvest policies"}, "harvest management": {"concepts": "harvest management", "type": "concept", "cluster": "Harvest Management Strategies", "node_size": 10, "label": "harvest management"}, "commercial fishing": {"concepts": "commercial fishing", "type": "concept", "cluster": "Harvest Management Strategies", "node_size": 10, "label": "commercial fishing"}, "maximum sustainable yield": {"concepts": "maximum sustainable yield", "type": "concept", "cluster": "Harvest Management Strategies", "node_size": 10, "label": "maximum sustainable yield"}, "trawler fishing": {"concepts": "trawler fishing", "type": "concept", "cluster": "Fishing Impact Management", "node_size": 10, "label": "trawler fishing"}, "fishing pressure": {"concepts": "fishing pressure", "type": "concept", "cluster": "Fishing Impact Management", "node_size": 10, "label": "fishing pressure"}, "recreational harvest": {"concepts": "recreational harvest", "type": "concept", "cluster": "Fishing Impact Management", "node_size": 10, "label": "recreational harvest"}, "fishing seasons": {"concepts": "fishing seasons", "type": "concept", "cluster": "Fishing Impact Management", "node_size": 10, "label": "fishing seasons"}, "recreational fishing": {"concepts": "recreational fishing", "type": "concept", "cluster": "Fishing Impact Management", "node_size": 10, "label": "recreational fishing"}, "pacific ocean": {"concepts": "pacific ocean", "type": "concept", "cluster": "Fishing Impact Management", "node_size": 10, "label": "pacific ocean"}, "tagging fish": {"concepts": "tagging fish", "type": "concept", "cluster": "Fishing Impact Management", "node_size": 10, "label": "tagging fish"}, "fish bycatch": {"concepts": "fish bycatch", "type": "concept", "cluster": "Fishing Impact Management", "node_size": 10, "label": "fish bycatch"}, "commercial ocean harvest": {"concepts": "commercial ocean harvest", "type": "concept", "cluster": "Ocean Fish Forecasting", "node_size": 10, "label": "commercial ocean harvest"}, "fish forecasting": {"concepts": "fish forecasting", "type": "concept", "cluster": "Ocean Fish Forecasting", "node_size": 10, "label": "fish forecasting"}, "hatch reproduction": {"concepts": "hatch reproduction", "type": "concept", "cluster": "Resource Policies & Environment", "node_size": 10, "label": "hatch reproduction"}, "salmon reproduction": {"concepts": "salmon reproduction", "type": "concept", "cluster": "Resource Policies & Environment", "node_size": 10, "label": "salmon reproduction"}, "hatchery salmon": {"concepts": "hatchery salmon", "type": "concept", "cluster": "Resource Policies & Environment", "node_size": 10, "label": "hatchery salmon"}, "salmon marking": {"concepts": "salmon marking", "type": "concept", "cluster": "Resource Policies & Environment", "node_size": 10, "label": "salmon marking"}, "hatchery fish": {"concepts": "hatchery fish", "type": "concept", "cluster": "Resource Policies & Environment", "node_size": 10, "label": "hatchery fish"}, "hatcheries": {"concepts": "hatcheries", "type": "concept", "cluster": "Resource Policies & Environment", "node_size": 10, "label": "hatcheries"}, "salmon mortality": {"concepts": "salmon mortality", "type": "concept", "cluster": "Salmon Conservation Efforts", "node_size": 10, "label": "salmon mortality"}, "wild salmon advocates": {"concepts": "wild salmon advocates", "type": "concept", "cluster": "Salmon Conservation Efforts", "node_size": 10, "label": "wild salmon advocates"}, "salmon conservation": {"concepts": "salmon conservation", "type": "concept", "cluster": "Salmon Conservation Efforts", "node_size": 10, "label": "salmon conservation"}, "fish population sustainability": {"concepts": "fish population sustainability", "type": "concept", "cluster": "Salmon Conservation Efforts", "node_size": 10, "label": "fish population sustainability"}, "salmon habitat": {"concepts": "salmon habitat", "type": "concept", "cluster": "Salmon Conservation Efforts", "node_size": 10, "label": "salmon habitat"}, "salmon rearing": {"concepts": "salmon rearing", "type": "concept", "cluster": "Salmon Conservation Efforts", "node_size": 10, "label": "salmon rearing"}, "salmon": {"concepts": "salmon", "type": "concept", "cluster": "Salmon Conservation Efforts", "node_size": 10, "label": "salmon"}, "salmon spawning": {"concepts": "salmon spawning", "type": "concept", "cluster": "Salmon Conservation Efforts", "node_size": 10, "label": "salmon spawning"}, "salmon stressors": {"concepts": "salmon stressors", "type": "concept", "cluster": "Salmon Conservation Efforts", "node_size": 10, "label": "salmon stressors"}, "department of fish and wildlife": {"concepts": "department of fish and wildlife", "type": "concept", "cluster": "Salmon Conservation Efforts", "node_size": 10, "label": "department of fish and wildlife"}, "salmon decline": {"concepts": "salmon decline", "type": "concept", "cluster": "Salmon Conservation Efforts", "node_size": 10, "label": "salmon decline"}, "salmon recovery": {"concepts": "salmon recovery", "type": "concept", "cluster": "Salmon Conservation Efforts", "node_size": 10, "label": "salmon recovery"}, "spawning grounds": {"concepts": "spawning grounds", "type": "concept", "cluster": "Salmon Conservation Efforts", "node_size": 10, "label": "spawning grounds"}, "wild salmon": {"concepts": "wild salmon", "type": "concept", "cluster": "Salmon Conservation Efforts", "node_size": 10, "label": "wild salmon"}, "forage fish": {"concepts": "forage fish", "type": "concept", "cluster": "Salmon Conservation Efforts", "node_size": 10, "label": "forage fish"}, "salmon migration": {"concepts": "salmon migration", "type": "concept", "cluster": "Salmon Conservation Efforts", "node_size": 10, "label": "salmon migration"}, "mark selective fisheries": {"concepts": "mark selective fisheries", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "mark selective fisheries"}, "fisheries management": {"concepts": "fisheries management", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fisheries management"}, "fisheries managers": {"concepts": "fisheries managers", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fisheries managers"}, "commercial fisheries": {"concepts": "commercial fisheries", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "commercial fisheries"}, "fisheries policy": {"concepts": "fisheries policy", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fisheries policy"}};
        const interClusterEdges = [["Disease and Environmental Stress", "Ocean Fish Forecasting", {"weight": 1.0, "confidence": 0.9333333333333332, "type": "inter_cluster", "style": "solid"}], ["Runoff and Shoreline Impact", "Salmon Conservation Efforts", {"weight": 0.3333333333333333, "confidence": 0.7333333333333334, "type": "inter_cluster", "style": "solid"}], ["River Systems and Hydrology", "Salmon Conservation Efforts", {"weight": -1.0, "confidence": 0.875, "type": "inter_cluster", "style": "solid"}], ["River Systems and Hydrology", "Overfishing and Conservation", {"weight": -1.0, "confidence": 0.8500000000000001, "type": "inter_cluster", "style": "solid"}], ["Ecosystem and Habitat Management", "Resource Policies & Environment", {"weight": 1.0, "confidence": 0.8, "type": "inter_cluster", "style": "solid"}], ["Ecosystem and Habitat Management", "River Systems and Hydrology", {"weight": 0.6666666666666666, "confidence": 0.5166666666666666, "type": "inter_cluster", "style": "solid"}], ["Ecosystem and Habitat Management", "Overfishing and Conservation", {"weight": 0.5, "confidence": 0.375, "type": "inter_cluster", "style": "solid"}], ["Ecosystem and Habitat Management", "Disease and Environmental Stress", {"weight": 0.5, "confidence": 0.475, "type": "inter_cluster", "style": "solid"}], ["Overfishing and Conservation", "Harvest Management Strategies", {"weight": -0.5, "confidence": 0.375, "type": "inter_cluster", "style": "solid"}], ["Overfishing and Conservation", "River Systems and Hydrology", {"weight": -0.25, "confidence": 0.225, "type": "inter_cluster", "style": "solid"}], ["Overfishing and Conservation", "Disease and Environmental Stress", {"weight": -0.5, "confidence": 0.575, "type": "inter_cluster", "style": "solid"}], ["Harvest Management Strategies", "Fishing Impact Management", {"weight": 0.6, "confidence": 0.85, "type": "inter_cluster", "style": "solid"}], ["Harvest Management Strategies", "Resource Policies & Environment", {"weight": -1.0, "confidence": 0.8125, "type": "inter_cluster", "style": "solid"}], ["Harvest Management Strategies", "Ocean Fish Forecasting", {"weight": 1.0, "confidence": 0.925, "type": "inter_cluster", "style": "solid"}], ["Harvest Management Strategies", "Overfishing and Conservation", {"weight": -0.6666666666666666, "confidence": 0.5, "type": "inter_cluster", "style": "solid"}], ["Fishing Impact Management", "Harvest Management Strategies", {"weight": 0.25, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Ocean Fish Forecasting", "Salmon Conservation Efforts", {"weight": -0.25, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["Ocean Fish Forecasting", "Fisheries Management", {"weight": 1.0, "confidence": 0.825, "type": "inter_cluster", "style": "solid"}], ["Resource Policies & Environment", "Overfishing and Conservation", {"weight": 0.2, "confidence": 0.45999999999999996, "type": "inter_cluster", "style": "solid"}], ["Resource Policies & Environment", "River Systems and Hydrology", {"weight": -0.3333333333333333, "confidence": 0.2833333333333333, "type": "inter_cluster", "style": "solid"}], ["Salmon Conservation Efforts", "Ocean Fish Forecasting", {"weight": -0.6, "confidence": 0.8399999999999999, "type": "inter_cluster", "style": "solid"}], ["Salmon Conservation Efforts", "Runoff and Shoreline Impact", {"weight": 0.75, "confidence": 0.6124999999999999, "type": "inter_cluster", "style": "solid"}], ["Salmon Conservation Efforts", "Disease and Environmental Stress", {"weight": -0.5, "confidence": 0.425, "type": "inter_cluster", "style": "solid"}], ["Fisheries Management", "Harvest Management Strategies", {"weight": 0.75, "confidence": 0.6375000000000001, "type": "inter_cluster", "style": "solid"}], ["Fisheries Management", "Disease and Environmental Stress", {"weight": -0.2, "confidence": 0.53, "type": "inter_cluster", "style": "solid"}], ["Fisheries Management", "Fishing Impact Management", {"weight": 0.25, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}]];
        const clusterConcepts = {"Disease and Environmental Stress": [["gill netting", {"concepts": "gill netting", "type": "concept", "cluster": "Disease and Environmental Stress", "node_size": 10, "label": "gill netting"}], ["overharvest", {"concepts": "overharvest", "type": "concept", "cluster": "Disease and Environmental Stress", "node_size": 10, "label": "overharvest"}], ["overharvesting", {"concepts": "overharvesting", "type": "concept", "cluster": "Disease and Environmental Stress", "node_size": 10, "label": "overharvesting"}], ["bycatch", {"concepts": "bycatch", "type": "concept", "cluster": "Disease and Environmental Stress", "node_size": 10, "label": "bycatch"}], ["commercial overharvest", {"concepts": "commercial overharvest", "type": "concept", "cluster": "Disease and Environmental Stress", "node_size": 10, "label": "commercial overharvest"}], ["consumptive users", {"concepts": "consumptive users", "type": "concept", "cluster": "Disease and Environmental Stress", "node_size": 10, "label": "consumptive users"}], ["non-tribal gill netting", {"concepts": "non-tribal gill netting", "type": "concept", "cluster": "Disease and Environmental Stress", "node_size": 10, "label": "non-tribal gill netting"}], ["treaty tribes", {"concepts": "treaty tribes", "type": "concept", "cluster": "Disease and Environmental Stress", "node_size": 10, "label": "treaty tribes"}], ["species extinction", {"concepts": "species extinction", "type": "concept", "cluster": "Disease and Environmental Stress", "node_size": 10, "label": "species extinction"}], ["endangered species", {"concepts": "endangered species", "type": "concept", "cluster": "Disease and Environmental Stress", "node_size": 10, "label": "endangered species"}], ["conservation concern", {"concepts": "conservation concern", "type": "concept", "cluster": "Disease and Environmental Stress", "node_size": 10, "label": "conservation concern"}], ["species of conservation concern", {"concepts": "species of conservation concern", "type": "concept", "cluster": "Disease and Environmental Stress", "node_size": 10, "label": "species of conservation concern"}], ["species", {"concepts": "species", "type": "concept", "cluster": "Disease and Environmental Stress", "node_size": 10, "label": "species"}], ["government inefficiencies", {"concepts": "government inefficiencies", "type": "concept", "cluster": "Disease and Environmental Stress", "node_size": 10, "label": "government inefficiencies"}], ["national lawsuits", {"concepts": "national lawsuits", "type": "concept", "cluster": "Disease and Environmental Stress", "node_size": 10, "label": "national lawsuits"}], ["international waters", {"concepts": "international waters", "type": "concept", "cluster": "Disease and Environmental Stress", "node_size": 10, "label": "international waters"}]], "Runoff and Shoreline Impact": [["bacterial infections", {"concepts": "bacterial infections", "type": "concept", "cluster": "Runoff and Shoreline Impact", "node_size": 10, "label": "bacterial infections"}], ["harmful organisms", {"concepts": "harmful organisms", "type": "concept", "cluster": "Runoff and Shoreline Impact", "node_size": 10, "label": "harmful organisms"}], ["whirling disease", {"concepts": "whirling disease", "type": "concept", "cluster": "Runoff and Shoreline Impact", "node_size": 10, "label": "whirling disease"}], ["executive director", {"concepts": "executive director", "type": "concept", "cluster": "Runoff and Shoreline Impact", "node_size": 10, "label": "executive director"}], ["researchers", {"concepts": "researchers", "type": "concept", "cluster": "Runoff and Shoreline Impact", "node_size": 10, "label": "researchers"}], ["managers", {"concepts": "managers", "type": "concept", "cluster": "Runoff and Shoreline Impact", "node_size": 10, "label": "managers"}], ["individual interviews", {"concepts": "individual interviews", "type": "concept", "cluster": "Runoff and Shoreline Impact", "node_size": 10, "label": "individual interviews"}], ["adipose fin clipping", {"concepts": "adipose fin clipping", "type": "concept", "cluster": "Runoff and Shoreline Impact", "node_size": 10, "label": "adipose fin clipping"}], ["environmental factors", {"concepts": "environmental factors", "type": "concept", "cluster": "Runoff and Shoreline Impact", "node_size": 10, "label": "environmental factors"}], ["biodiversity", {"concepts": "biodiversity", "type": "concept", "cluster": "Runoff and Shoreline Impact", "node_size": 10, "label": "biodiversity"}], ["environmental stressors", {"concepts": "environmental stressors", "type": "concept", "cluster": "Runoff and Shoreline Impact", "node_size": 10, "label": "environmental stressors"}], ["human considerations", {"concepts": "human considerations", "type": "concept", "cluster": "Runoff and Shoreline Impact", "node_size": 10, "label": "human considerations"}], ["brake dust", {"concepts": "brake dust", "type": "concept", "cluster": "Runoff and Shoreline Impact", "node_size": 10, "label": "brake dust"}], ["technical difficulties", {"concepts": "technical difficulties", "type": "concept", "cluster": "Runoff and Shoreline Impact", "node_size": 10, "label": "technical difficulties"}]], "River Systems and Hydrology": [["concrete docks", {"concepts": "concrete docks", "type": "concept", "cluster": "River Systems and Hydrology", "node_size": 10, "label": "concrete docks"}], ["shoreline structures", {"concepts": "shoreline structures", "type": "concept", "cluster": "River Systems and Hydrology", "node_size": 10, "label": "shoreline structures"}], ["soft structures", {"concepts": "soft structures", "type": "concept", "cluster": "River Systems and Hydrology", "node_size": 10, "label": "soft structures"}], ["impervious surfaces", {"concepts": "impervious surfaces", "type": "concept", "cluster": "River Systems and Hydrology", "node_size": 10, "label": "impervious surfaces"}], ["road runoff", {"concepts": "road runoff", "type": "concept", "cluster": "River Systems and Hydrology", "node_size": 10, "label": "road runoff"}], ["runoff", {"concepts": "runoff", "type": "concept", "cluster": "River Systems and Hydrology", "node_size": 10, "label": "runoff"}], ["industrial runoff", {"concepts": "industrial runoff", "type": "concept", "cluster": "River Systems and Hydrology", "node_size": 10, "label": "industrial runoff"}], ["chemical runoff", {"concepts": "chemical runoff", "type": "concept", "cluster": "River Systems and Hydrology", "node_size": 10, "label": "chemical runoff"}]], "Ecosystem and Habitat Management": [["irrigation", {"concepts": "irrigation", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "irrigation"}], ["riverine systems", {"concepts": "riverine systems", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "riverine systems"}], ["nooksack river", {"concepts": "nooksack river", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "nooksack river"}], ["major watersheds", {"concepts": "major watersheds", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "major watersheds"}], ["nisqually river", {"concepts": "nisqually river", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "nisqually river"}], ["natal streams", {"concepts": "natal streams", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "natal streams"}], ["river hydrology", {"concepts": "river hydrology", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "river hydrology"}], ["sediments", {"concepts": "sediments", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "sediments"}], ["sedimentation", {"concepts": "sedimentation", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "sedimentation"}], ["dam removal", {"concepts": "dam removal", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "dam removal"}], ["puget sound", {"concepts": "puget sound", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "puget sound"}], ["bellingham bay", {"concepts": "bellingham bay", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "bellingham bay"}], ["pacific northwest", {"concepts": "pacific northwest", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "pacific northwest"}], ["tributaries", {"concepts": "tributaries", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "tributaries"}], ["columbia river", {"concepts": "columbia river", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "columbia river"}], ["oregon", {"concepts": "oregon", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "oregon"}], ["tribal layer", {"concepts": "tribal layer", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "tribal layer"}], ["mobile chapter", {"concepts": "mobile chapter", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "mobile chapter"}], ["federal policies", {"concepts": "federal policies", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "federal policies"}], ["warmer water conditions", {"concepts": "warmer water conditions", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "warmer water conditions"}], ["whitewater rafting", {"concepts": "whitewater rafting", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "whitewater rafting"}], ["local policies", {"concepts": "local policies", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "local policies"}], ["resource users", {"concepts": "resource users", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "resource users"}], ["alaska", {"concepts": "alaska", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "alaska"}], ["hydroelectric dams", {"concepts": "hydroelectric dams", "type": "concept", "cluster": "Ecosystem and Habitat Management", "node_size": 10, "label": "hydroelectric dams"}]], "Overfishing and Conservation": [["gulf of mexico", {"concepts": "gulf of mexico", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "gulf of mexico"}], ["ecosystem-based management", {"concepts": "ecosystem-based management", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "ecosystem-based management"}], ["food web", {"concepts": "food web", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "food web"}], ["ecosystem based management", {"concepts": "ecosystem based management", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "ecosystem based management"}], ["nutrient load", {"concepts": "nutrient load", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "nutrient load"}], ["water pollution", {"concepts": "water pollution", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "water pollution"}], ["chemical pollutants", {"concepts": "chemical pollutants", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "chemical pollutants"}], ["wild populations", {"concepts": "wild populations", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "wild populations"}], ["chesapeake bay workshop", {"concepts": "chesapeake bay workshop", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "chesapeake bay workshop"}], ["habitat impact", {"concepts": "habitat impact", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "habitat impact"}], ["msy", {"concepts": "msy", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "msy"}], ["habitat development", {"concepts": "habitat development", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "habitat development"}], ["cca washington", {"concepts": "cca washington", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "cca washington"}], ["smelt", {"concepts": "smelt", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "smelt"}], ["hydro projects", {"concepts": "hydro projects", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "hydro projects"}], ["management consideration", {"concepts": "management consideration", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "management consideration"}], ["habitat forming species", {"concepts": "habitat forming species", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "habitat forming species"}], ["multi-species management", {"concepts": "multi-species management", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "multi-species management"}], ["herring", {"concepts": "herring", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "herring"}], ["marine derived nutrients", {"concepts": "marine derived nutrients", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "marine derived nutrients"}], ["nutrient enhancement", {"concepts": "nutrient enhancement", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "nutrient enhancement"}], ["ecosystem management", {"concepts": "ecosystem management", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "ecosystem management"}], ["food web species", {"concepts": "food web species", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "food web species"}], ["mobile bay", {"concepts": "mobile bay", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "mobile bay"}], ["ecosystem", {"concepts": "ecosystem", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "ecosystem"}], ["pristine habitat", {"concepts": "pristine habitat", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "pristine habitat"}], ["canada", {"concepts": "canada", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "canada"}], ["cca alabama", {"concepts": "cca alabama", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "cca alabama"}], ["policy management", {"concepts": "policy management", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "policy management"}], ["ecosystem services", {"concepts": "ecosystem services", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "ecosystem services"}], ["maryland", {"concepts": "maryland", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "maryland"}], ["habitat", {"concepts": "habitat", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "habitat"}], ["case study", {"concepts": "case study", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "case study"}], ["key food web species", {"concepts": "key food web species", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "key food web species"}], ["habitat restoration", {"concepts": "habitat restoration", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "habitat restoration"}], ["state policies", {"concepts": "state policies", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "state policies"}], ["habitat projects", {"concepts": "habitat projects", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "habitat projects"}], ["habitat protection", {"concepts": "habitat protection", "type": "concept", "cluster": "Overfishing and Conservation", "node_size": 10, "label": "habitat protection"}]], "Harvest Management Strategies": [["commercial harvest", {"concepts": "commercial harvest", "type": "concept", "cluster": "Harvest Management Strategies", "node_size": 10, "label": "commercial harvest"}], ["harvest allocation", {"concepts": "harvest allocation", "type": "concept", "cluster": "Harvest Management Strategies", "node_size": 10, "label": "harvest allocation"}], ["harvest policies", {"concepts": "harvest policies", "type": "concept", "cluster": "Harvest Management Strategies", "node_size": 10, "label": "harvest policies"}], ["harvest management", {"concepts": "harvest management", "type": "concept", "cluster": "Harvest Management Strategies", "node_size": 10, "label": "harvest management"}], ["commercial fishing", {"concepts": "commercial fishing", "type": "concept", "cluster": "Harvest Management Strategies", "node_size": 10, "label": "commercial fishing"}], ["maximum sustainable yield", {"concepts": "maximum sustainable yield", "type": "concept", "cluster": "Harvest Management Strategies", "node_size": 10, "label": "maximum sustainable yield"}]], "Fishing Impact Management": [["trawler fishing", {"concepts": "trawler fishing", "type": "concept", "cluster": "Fishing Impact Management", "node_size": 10, "label": "trawler fishing"}], ["fishing pressure", {"concepts": "fishing pressure", "type": "concept", "cluster": "Fishing Impact Management", "node_size": 10, "label": "fishing pressure"}], ["recreational harvest", {"concepts": "recreational harvest", "type": "concept", "cluster": "Fishing Impact Management", "node_size": 10, "label": "recreational harvest"}], ["fishing seasons", {"concepts": "fishing seasons", "type": "concept", "cluster": "Fishing Impact Management", "node_size": 10, "label": "fishing seasons"}], ["recreational fishing", {"concepts": "recreational fishing", "type": "concept", "cluster": "Fishing Impact Management", "node_size": 10, "label": "recreational fishing"}], ["pacific ocean", {"concepts": "pacific ocean", "type": "concept", "cluster": "Fishing Impact Management", "node_size": 10, "label": "pacific ocean"}], ["tagging fish", {"concepts": "tagging fish", "type": "concept", "cluster": "Fishing Impact Management", "node_size": 10, "label": "tagging fish"}], ["fish bycatch", {"concepts": "fish bycatch", "type": "concept", "cluster": "Fishing Impact Management", "node_size": 10, "label": "fish bycatch"}]], "Ocean Fish Forecasting": [["commercial ocean harvest", {"concepts": "commercial ocean harvest", "type": "concept", "cluster": "Ocean Fish Forecasting", "node_size": 10, "label": "commercial ocean harvest"}], ["fish forecasting", {"concepts": "fish forecasting", "type": "concept", "cluster": "Ocean Fish Forecasting", "node_size": 10, "label": "fish forecasting"}]], "Resource Policies & Environment": [["hatch reproduction", {"concepts": "hatch reproduction", "type": "concept", "cluster": "Resource Policies & Environment", "node_size": 10, "label": "hatch reproduction"}], ["salmon reproduction", {"concepts": "salmon reproduction", "type": "concept", "cluster": "Resource Policies & Environment", "node_size": 10, "label": "salmon reproduction"}], ["hatchery salmon", {"concepts": "hatchery salmon", "type": "concept", "cluster": "Resource Policies & Environment", "node_size": 10, "label": "hatchery salmon"}], ["salmon marking", {"concepts": "salmon marking", "type": "concept", "cluster": "Resource Policies & Environment", "node_size": 10, "label": "salmon marking"}], ["hatchery fish", {"concepts": "hatchery fish", "type": "concept", "cluster": "Resource Policies & Environment", "node_size": 10, "label": "hatchery fish"}], ["hatcheries", {"concepts": "hatcheries", "type": "concept", "cluster": "Resource Policies & Environment", "node_size": 10, "label": "hatcheries"}]], "Salmon Conservation Efforts": [["salmon mortality", {"concepts": "salmon mortality", "type": "concept", "cluster": "Salmon Conservation Efforts", "node_size": 10, "label": "salmon mortality"}], ["wild salmon advocates", {"concepts": "wild salmon advocates", "type": "concept", "cluster": "Salmon Conservation Efforts", "node_size": 10, "label": "wild salmon advocates"}], ["salmon conservation", {"concepts": "salmon conservation", "type": "concept", "cluster": "Salmon Conservation Efforts", "node_size": 10, "label": "salmon conservation"}], ["fish population sustainability", {"concepts": "fish population sustainability", "type": "concept", "cluster": "Salmon Conservation Efforts", "node_size": 10, "label": "fish population sustainability"}], ["salmon habitat", {"concepts": "salmon habitat", "type": "concept", "cluster": "Salmon Conservation Efforts", "node_size": 10, "label": "salmon habitat"}], ["salmon rearing", {"concepts": "salmon rearing", "type": "concept", "cluster": "Salmon Conservation Efforts", "node_size": 10, "label": "salmon rearing"}], ["salmon", {"concepts": "salmon", "type": "concept", "cluster": "Salmon Conservation Efforts", "node_size": 10, "label": "salmon"}], ["salmon spawning", {"concepts": "salmon spawning", "type": "concept", "cluster": "Salmon Conservation Efforts", "node_size": 10, "label": "salmon spawning"}], ["salmon stressors", {"concepts": "salmon stressors", "type": "concept", "cluster": "Salmon Conservation Efforts", "node_size": 10, "label": "salmon stressors"}], ["department of fish and wildlife", {"concepts": "department of fish and wildlife", "type": "concept", "cluster": "Salmon Conservation Efforts", "node_size": 10, "label": "department of fish and wildlife"}], ["salmon decline", {"concepts": "salmon decline", "type": "concept", "cluster": "Salmon Conservation Efforts", "node_size": 10, "label": "salmon decline"}], ["salmon recovery", {"concepts": "salmon recovery", "type": "concept", "cluster": "Salmon Conservation Efforts", "node_size": 10, "label": "salmon recovery"}], ["spawning grounds", {"concepts": "spawning grounds", "type": "concept", "cluster": "Salmon Conservation Efforts", "node_size": 10, "label": "spawning grounds"}], ["wild salmon", {"concepts": "wild salmon", "type": "concept", "cluster": "Salmon Conservation Efforts", "node_size": 10, "label": "wild salmon"}], ["forage fish", {"concepts": "forage fish", "type": "concept", "cluster": "Salmon Conservation Efforts", "node_size": 10, "label": "forage fish"}], ["salmon migration", {"concepts": "salmon migration", "type": "concept", "cluster": "Salmon Conservation Efforts", "node_size": 10, "label": "salmon migration"}]], "Fisheries Management": [["mark selective fisheries", {"concepts": "mark selective fisheries", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "mark selective fisheries"}], ["fisheries management", {"concepts": "fisheries management", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fisheries management"}], ["fisheries managers", {"concepts": "fisheries managers", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fisheries managers"}], ["commercial fisheries", {"concepts": "commercial fisheries", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "commercial fisheries"}], ["fisheries policy", {"concepts": "fisheries policy", "type": "concept", "cluster": "Fisheries Management", "node_size": 10, "label": "fisheries policy"}]]};
        const clusterEdges = {"Disease and Environmental Stress": [], "Runoff and Shoreline Impact": [], "River Systems and Hydrology": [], "Ecosystem and Habitat Management": [], "Overfishing and Conservation": [], "Harvest Management Strategies": [], "Fishing Impact Management": [], "Ocean Fish Forecasting": [], "Resource Policies & Environment": [], "Salmon Conservation Efforts": [], "Fisheries Management": []};
        
        let network;
        let currentView = 'clusters';
        let currentCluster = null;
        let minConfidence = 0.3;
        
        // Network options
        const options = {
            nodes: {
                font: { color: 'white', size: 14 },
                borderWidth: 2,
                shadow: true
            },
            edges: {
                arrows: { to: { enabled: true, scaleFactor: 1.2 } },
                shadow: true,
                smooth: { type: 'continuous' }
            },
            physics: {
                stabilization: { iterations: 100 },
                barnesHut: {
                    gravitationalConstant: -8000,
                    springConstant: 0.001,
                    springLength: 200
                }
            },
            interaction: {
                hover: true,
                selectConnectedEdges: false
            }
        };
        
        function initNetwork() {
            const container = document.getElementById('network');
            const data = getClusterViewData();
            network = new vis.Network(container, data, options);
            
            // Handle cluster clicks for drill-down
            network.on("click", function(params) {
                if (params.nodes.length > 0 && currentView === 'clusters') {
                    const clickedNode = params.nodes[0];
                    if (clusterConcepts[clickedNode]) {
                        showClusterDetail(clickedNode);
                    }
                }
            });
        }
        
        function getClusterViewData() {
            const nodes = [];
            const edges = [];
            
            // Add cluster nodes
            Object.entries(clusterData).forEach(([clusterId, data]) => {
                const concepts = data.concepts || [];
                const conceptsStr = Array.isArray(concepts) ? concepts.join(', ') : concepts;
                
                nodes.push({
                    id: clusterId,
                    label: clusterId,
                    title: `Cluster: ${clusterId}\nConcepts: ${conceptsStr}\nClick to explore internal relationships`,
                    color: '#4A90E2',
                    size: 25 + (conceptsStr.split(',').length * 2),
                    font: { color: 'white' }
                });
            });
            
            // Add inter-cluster edges
            interClusterEdges.forEach(([source, target, edgeData]) => {
                const confidence = edgeData.confidence || 1.0;
                const weight = edgeData.weight || 0;
                
                if (confidence >= minConfidence) {
                    edges.push({
                        from: source,
                        to: target,
                        color: weight > 0 ? '#28A745' : '#DC3545',
                        width: Math.abs(weight) * 3 + 1,
                        title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                        dashes: false
                    });
                }
            });
            
            return { nodes: nodes, edges: edges };
        }
        
        function getClusterDetailData(clusterId) {
            const nodes = [];
            const edges = [];
            
            // Add concept nodes for this cluster
            if (clusterConcepts[clusterId]) {
                clusterConcepts[clusterId].forEach(([conceptId, data]) => {
                    nodes.push({
                        id: conceptId,
                        label: conceptId,
                        title: `Concept: ${conceptId}\nFrom cluster: ${clusterId}`,
                        color: '#FF9500',
                        size: 20,
                        font: { color: 'white' }
                    });
                });
            }
            
            // Add intra-cluster edges
            if (clusterEdges[clusterId]) {
                clusterEdges[clusterId].forEach(([source, target, edgeData]) => {
                    const confidence = edgeData.confidence || 1.0;
                    const weight = edgeData.weight || 0;
                    
                    if (confidence >= minConfidence) {
                        edges.push({
                            from: source,
                            to: target,
                            color: weight > 0 ? '#28A745' : '#DC3545',
                            width: Math.abs(weight) * 3 + 1,
                            title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                            dashes: true
                        });
                    }
                });
            }
            
            return { nodes: nodes, edges: edges };
        }
        
        function showClusterView() {
            currentView = 'clusters';
            currentCluster = null;
            const data = getClusterViewData();
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'none';
            document.getElementById('current-view').textContent = 'Cluster Overview';
        }
        
        function showClusterDetail(clusterId) {
            currentView = 'concepts';
            currentCluster = clusterId;
            const data = getClusterDetailData(clusterId);
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'inline-block';
            document.getElementById('current-view').textContent = `Inside Cluster: ${clusterId}`;
        }
        
        function updateConfidenceFilter(value) {
            minConfidence = parseFloat(value);
            document.getElementById('confidence-value').textContent = value;
            
            // Refresh current view
            if (currentView === 'clusters') {
                showClusterView();
            } else {
                showClusterDetail(currentCluster);
            }
        }
        
        // Initialize the network when page loads
        window.onload = function() {
            initNetwork();
        };
    </script>
</body>
</html>
