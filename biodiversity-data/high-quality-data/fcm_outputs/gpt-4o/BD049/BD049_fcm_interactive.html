
<!DOCTYPE html>
<html>
<head>
    <title>Hierarchical FCM Visualization</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 0; 
            padding: 20px;
            background: #f5f5f5;
        }
        
        #network { 
            width: 100%; 
            height: 600px; 
            border: 2px solid #ccc; 
            background: white;
            border-radius: 8px;
        }
        
        #controls {
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn {
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        
        .btn-primary { background: #4A90E2; color: white; }
        .btn-primary:hover { background: #357ABD; }
        
        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #545b62; }
        
        #current-view {
            font-weight: bold;
            color: #333;
            margin-left: 10px;
        }
        
        #legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-size: 12px;
            max-width: 200px;
        }
        
        .legend-item {
            margin: 5px 0;
            display: flex;
            align-items: center;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .legend-line {
            width: 20px;
            height: 2px;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <h1>Fuzzy Cognitive Map - Hierarchical View</h1>
    
    <div id="controls">
        <button class="btn btn-secondary" id="back-btn" onclick="showClusterView()" style="display: none;">
            ‚Üê Back to Clusters
        </button>
        <span id="current-view">Cluster Overview</span>
        <div style="float: right;">
            <label>Min Confidence: </label>
            <input type="range" id="confidence-slider" min="0" max="1" step="0.1" value="0.3" 
                   onchange="updateConfidenceFilter(this.value)">
            <span id="confidence-value">0.3</span>
        </div>
    </div>
    
    <div id="network"></div>
    
    <div id="legend">
        <h4>Legend</h4>
        <div class="legend-item">
            <div class="legend-color" style="background: #4A90E2;"></div>
            <span>Clusters</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #FF9500;"></div>
            <span>Concepts</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #28A745;"></div>
            <span>Positive relationship</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #DC3545;"></div>
            <span>Negative relationship</span>
        </div>
        <div style="margin-top: 10px; font-style: italic; color: #666;">
            Click clusters to explore internal concepts
        </div>
    </div>

    <script>
        // Embedded data
        const clusterData = {"Ecosystem Resilience": {"concepts": "relative importance, ecological benefit, restoration, socio-ecological dynamics, flooding tolerance, management dynamics, holistic approach, species of concern, marsh drowning, permit, biodiversity components, keystone species, storms, ecosystem services, cost, food web, sav beds, resource managers, negative relationships, water quality, marsh resilience, system components, human alterations, bacteria, elevation, erosion, tammy roberson, species, aesthetics, low marsh, talbot county, marsh creation, diversity, marsh stability, salinity, ecologically correct, marshes, salt marsh sparrow, gulf of mexico, project success, scenery importance, algovats, mental modeler, sea level rise, practitioners, meso-haline bay, environmental conditions, system dynamics, stressors, for-profit, wildlife, biological diversity, mental models, system relationships, shifting climates, bio-geo-chemical processes, regional managers, property owners, management approaches, chesapeake bay, software, non-profits, maryland department of the environment, dorchester county, resilience, system resilience, mucus, water quality., growing season, temperature, securiticity, diverse community, perceptions, sav, scenery, biodiversity framework, marsh systems, relationship impact, elevation gradient, queen anne\u2019s county, temperature impact, university of washington, food web resilience, marsh migration, drowning, marsh platform, feedback loops, marsh elevation, species of conservation concern, positive relationships, facilitator species, relationships, dnr, species diversity, key food web species, salish sea, nutrient storage, ecosystem benefits, marsh, biological organisms, stakeholders, diverse assembly, diverse marsh, harmful organisms, ecosystem resilience, biodiversity, food web importance, high marsh, ecosystem", "concept_list": ["relative importance", "ecological benefit", "restoration", "socio-ecological dynamics", "flooding tolerance", "management dynamics", "holistic approach", "species of concern", "marsh drowning", "permit", "biodiversity components", "keystone species", "storms", "ecosystem services", "cost", "food web", "sav beds", "resource managers", "negative relationships", "water quality", "marsh resilience", "system components", "human alterations", "bacteria", "elevation", "erosion", "tammy roberson", "species", "aesthetics", "low marsh", "talbot county", "marsh creation", "diversity", "marsh stability", "salinity", "ecologically correct", "marshes", "salt marsh sparrow", "gulf of mexico", "project success", "scenery importance", "algovats", "mental modeler", "sea level rise", "practitioners", "meso-haline bay", "environmental conditions", "system dynamics", "stressors", "for-profit", "wildlife", "biological diversity", "mental models", "system relationships", "shifting climates", "bio-geo-chemical processes", "regional managers", "property owners", "management approaches", "chesapeake bay", "software", "non-profits", "maryland department of the environment", "dorchester county", "resilience", "system resilience", "mucus", "water quality.", "growing season", "temperature", "securiticity", "diverse community", "perceptions", "sav", "scenery", "biodiversity framework", "marsh systems", "relationship impact", "elevation gradient", "queen anne\u2019s county", "temperature impact", "university of washington", "food web resilience", "marsh migration", "drowning", "marsh platform", "feedback loops", "marsh elevation", "species of conservation concern", "positive relationships", "facilitator species", "relationships", "dnr", "species diversity", "key food web species", "salish sea", "nutrient storage", "ecosystem benefits", "marsh", "biological organisms", "stakeholders", "diverse assembly", "diverse marsh", "harmful organisms", "ecosystem resilience", "biodiversity", "food web importance", "high marsh", "ecosystem"], "type": "cluster", "node_size": 342, "label": "Ecosystem Resilience"}, "Shoreline Management": {"concepts": "permitters, marine resource management, environmental law, habitat, adjacent habitat, shoreline law, adjacent habitats, habitat forming species, living shoreline law, living shoreline, shoreline, coastal communities, erosion mitigation, marine resource users, living shorelines, migratory waterfowl", "concept_list": ["permitters", "marine resource management", "environmental law", "habitat", "adjacent habitat", "shoreline law", "adjacent habitats", "habitat forming species", "living shoreline law", "living shoreline", "shoreline", "coastal communities", "erosion mitigation", "marine resource users", "living shorelines", "migratory waterfowl"], "type": "cluster", "node_size": 63, "label": "Shoreline Management"}, "Plant Diversity": {"concepts": "plant species diversity, plant diversity, plant species, marsh plants, marsh plant species, plant communities, marsh plant diversity", "concept_list": ["plant species diversity", "plant diversity", "plant species", "marsh plants", "marsh plant species", "plant communities", "marsh plant diversity"], "type": "cluster", "node_size": 36, "label": "Plant Diversity"}, "Sediment Dynamics": {"concepts": "sediment dynamics, sediment supply, sediment layer replacement, sediment, sediment supply dynamics, sediment retention, sediment stressors", "concept_list": ["sediment dynamics", "sediment supply", "sediment layer replacement", "sediment", "sediment supply dynamics", "sediment retention", "sediment stressors"], "type": "cluster", "node_size": 36, "label": "Sediment Dynamics"}};
        const conceptData = {"relative importance": {"concepts": "relative importance", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "relative importance"}, "ecological benefit": {"concepts": "ecological benefit", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "ecological benefit"}, "restoration": {"concepts": "restoration", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "restoration"}, "socio-ecological dynamics": {"concepts": "socio-ecological dynamics", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "socio-ecological dynamics"}, "flooding tolerance": {"concepts": "flooding tolerance", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "flooding tolerance"}, "management dynamics": {"concepts": "management dynamics", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "management dynamics"}, "holistic approach": {"concepts": "holistic approach", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "holistic approach"}, "species of concern": {"concepts": "species of concern", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "species of concern"}, "marsh drowning": {"concepts": "marsh drowning", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "marsh drowning"}, "permit": {"concepts": "permit", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "permit"}, "biodiversity components": {"concepts": "biodiversity components", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "biodiversity components"}, "keystone species": {"concepts": "keystone species", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "keystone species"}, "storms": {"concepts": "storms", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "storms"}, "ecosystem services": {"concepts": "ecosystem services", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "ecosystem services"}, "cost": {"concepts": "cost", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "cost"}, "food web": {"concepts": "food web", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "food web"}, "sav beds": {"concepts": "sav beds", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "sav beds"}, "resource managers": {"concepts": "resource managers", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "resource managers"}, "negative relationships": {"concepts": "negative relationships", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "negative relationships"}, "water quality": {"concepts": "water quality", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "water quality"}, "marsh resilience": {"concepts": "marsh resilience", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "marsh resilience"}, "system components": {"concepts": "system components", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "system components"}, "human alterations": {"concepts": "human alterations", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "human alterations"}, "bacteria": {"concepts": "bacteria", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "bacteria"}, "elevation": {"concepts": "elevation", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "elevation"}, "erosion": {"concepts": "erosion", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "erosion"}, "tammy roberson": {"concepts": "tammy roberson", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "tammy roberson"}, "species": {"concepts": "species", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "species"}, "aesthetics": {"concepts": "aesthetics", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "aesthetics"}, "low marsh": {"concepts": "low marsh", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "low marsh"}, "talbot county": {"concepts": "talbot county", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "talbot county"}, "marsh creation": {"concepts": "marsh creation", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "marsh creation"}, "diversity": {"concepts": "diversity", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "diversity"}, "marsh stability": {"concepts": "marsh stability", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "marsh stability"}, "salinity": {"concepts": "salinity", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "salinity"}, "ecologically correct": {"concepts": "ecologically correct", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "ecologically correct"}, "marshes": {"concepts": "marshes", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "marshes"}, "salt marsh sparrow": {"concepts": "salt marsh sparrow", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "salt marsh sparrow"}, "gulf of mexico": {"concepts": "gulf of mexico", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "gulf of mexico"}, "project success": {"concepts": "project success", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "project success"}, "scenery importance": {"concepts": "scenery importance", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "scenery importance"}, "algovats": {"concepts": "algovats", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "algovats"}, "mental modeler": {"concepts": "mental modeler", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "mental modeler"}, "sea level rise": {"concepts": "sea level rise", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "sea level rise"}, "practitioners": {"concepts": "practitioners", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "practitioners"}, "meso-haline bay": {"concepts": "meso-haline bay", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "meso-haline bay"}, "environmental conditions": {"concepts": "environmental conditions", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "environmental conditions"}, "system dynamics": {"concepts": "system dynamics", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "system dynamics"}, "stressors": {"concepts": "stressors", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "stressors"}, "for-profit": {"concepts": "for-profit", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "for-profit"}, "wildlife": {"concepts": "wildlife", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "wildlife"}, "biological diversity": {"concepts": "biological diversity", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "biological diversity"}, "mental models": {"concepts": "mental models", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "mental models"}, "system relationships": {"concepts": "system relationships", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "system relationships"}, "shifting climates": {"concepts": "shifting climates", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "shifting climates"}, "bio-geo-chemical processes": {"concepts": "bio-geo-chemical processes", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "bio-geo-chemical processes"}, "regional managers": {"concepts": "regional managers", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "regional managers"}, "property owners": {"concepts": "property owners", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "property owners"}, "management approaches": {"concepts": "management approaches", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "management approaches"}, "chesapeake bay": {"concepts": "chesapeake bay", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "chesapeake bay"}, "software": {"concepts": "software", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "software"}, "non-profits": {"concepts": "non-profits", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "non-profits"}, "maryland department of the environment": {"concepts": "maryland department of the environment", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "maryland department of the environment"}, "dorchester county": {"concepts": "dorchester county", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "dorchester county"}, "resilience": {"concepts": "resilience", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "resilience"}, "system resilience": {"concepts": "system resilience", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "system resilience"}, "mucus": {"concepts": "mucus", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "mucus"}, "water quality.": {"concepts": "water quality.", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "water quality."}, "growing season": {"concepts": "growing season", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "growing season"}, "temperature": {"concepts": "temperature", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "temperature"}, "securiticity": {"concepts": "securiticity", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "securiticity"}, "diverse community": {"concepts": "diverse community", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "diverse community"}, "perceptions": {"concepts": "perceptions", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "perceptions"}, "sav": {"concepts": "sav", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "sav"}, "scenery": {"concepts": "scenery", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "scenery"}, "biodiversity framework": {"concepts": "biodiversity framework", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "biodiversity framework"}, "marsh systems": {"concepts": "marsh systems", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "marsh systems"}, "relationship impact": {"concepts": "relationship impact", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "relationship impact"}, "elevation gradient": {"concepts": "elevation gradient", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "elevation gradient"}, "queen anne\u2019s county": {"concepts": "queen anne\u2019s county", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "queen anne\u2019s county"}, "temperature impact": {"concepts": "temperature impact", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "temperature impact"}, "university of washington": {"concepts": "university of washington", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "university of washington"}, "food web resilience": {"concepts": "food web resilience", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "food web resilience"}, "marsh migration": {"concepts": "marsh migration", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "marsh migration"}, "drowning": {"concepts": "drowning", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "drowning"}, "marsh platform": {"concepts": "marsh platform", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "marsh platform"}, "feedback loops": {"concepts": "feedback loops", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "feedback loops"}, "marsh elevation": {"concepts": "marsh elevation", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "marsh elevation"}, "species of conservation concern": {"concepts": "species of conservation concern", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "species of conservation concern"}, "positive relationships": {"concepts": "positive relationships", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "positive relationships"}, "facilitator species": {"concepts": "facilitator species", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "facilitator species"}, "relationships": {"concepts": "relationships", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "relationships"}, "dnr": {"concepts": "dnr", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "dnr"}, "species diversity": {"concepts": "species diversity", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "species diversity"}, "key food web species": {"concepts": "key food web species", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "key food web species"}, "salish sea": {"concepts": "salish sea", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "salish sea"}, "nutrient storage": {"concepts": "nutrient storage", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "nutrient storage"}, "ecosystem benefits": {"concepts": "ecosystem benefits", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "ecosystem benefits"}, "marsh": {"concepts": "marsh", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "marsh"}, "biological organisms": {"concepts": "biological organisms", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "biological organisms"}, "stakeholders": {"concepts": "stakeholders", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "stakeholders"}, "diverse assembly": {"concepts": "diverse assembly", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "diverse assembly"}, "diverse marsh": {"concepts": "diverse marsh", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "diverse marsh"}, "harmful organisms": {"concepts": "harmful organisms", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "harmful organisms"}, "ecosystem resilience": {"concepts": "ecosystem resilience", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "ecosystem resilience"}, "biodiversity": {"concepts": "biodiversity", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "biodiversity"}, "food web importance": {"concepts": "food web importance", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "food web importance"}, "high marsh": {"concepts": "high marsh", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "high marsh"}, "ecosystem": {"concepts": "ecosystem", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "ecosystem"}, "permitters": {"concepts": "permitters", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "permitters"}, "marine resource management": {"concepts": "marine resource management", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "marine resource management"}, "environmental law": {"concepts": "environmental law", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "environmental law"}, "habitat": {"concepts": "habitat", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "habitat"}, "adjacent habitat": {"concepts": "adjacent habitat", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "adjacent habitat"}, "shoreline law": {"concepts": "shoreline law", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "shoreline law"}, "adjacent habitats": {"concepts": "adjacent habitats", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "adjacent habitats"}, "habitat forming species": {"concepts": "habitat forming species", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "habitat forming species"}, "living shoreline law": {"concepts": "living shoreline law", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "living shoreline law"}, "living shoreline": {"concepts": "living shoreline", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "living shoreline"}, "shoreline": {"concepts": "shoreline", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "shoreline"}, "coastal communities": {"concepts": "coastal communities", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "coastal communities"}, "erosion mitigation": {"concepts": "erosion mitigation", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "erosion mitigation"}, "marine resource users": {"concepts": "marine resource users", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "marine resource users"}, "living shorelines": {"concepts": "living shorelines", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "living shorelines"}, "migratory waterfowl": {"concepts": "migratory waterfowl", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "migratory waterfowl"}, "plant species diversity": {"concepts": "plant species diversity", "type": "concept", "cluster": "Plant Diversity", "node_size": 10, "label": "plant species diversity"}, "plant diversity": {"concepts": "plant diversity", "type": "concept", "cluster": "Plant Diversity", "node_size": 10, "label": "plant diversity"}, "plant species": {"concepts": "plant species", "type": "concept", "cluster": "Plant Diversity", "node_size": 10, "label": "plant species"}, "marsh plants": {"concepts": "marsh plants", "type": "concept", "cluster": "Plant Diversity", "node_size": 10, "label": "marsh plants"}, "marsh plant species": {"concepts": "marsh plant species", "type": "concept", "cluster": "Plant Diversity", "node_size": 10, "label": "marsh plant species"}, "plant communities": {"concepts": "plant communities", "type": "concept", "cluster": "Plant Diversity", "node_size": 10, "label": "plant communities"}, "marsh plant diversity": {"concepts": "marsh plant diversity", "type": "concept", "cluster": "Plant Diversity", "node_size": 10, "label": "marsh plant diversity"}, "sediment dynamics": {"concepts": "sediment dynamics", "type": "concept", "cluster": "Sediment Dynamics", "node_size": 10, "label": "sediment dynamics"}, "sediment supply": {"concepts": "sediment supply", "type": "concept", "cluster": "Sediment Dynamics", "node_size": 10, "label": "sediment supply"}, "sediment layer replacement": {"concepts": "sediment layer replacement", "type": "concept", "cluster": "Sediment Dynamics", "node_size": 10, "label": "sediment layer replacement"}, "sediment": {"concepts": "sediment", "type": "concept", "cluster": "Sediment Dynamics", "node_size": 10, "label": "sediment"}, "sediment supply dynamics": {"concepts": "sediment supply dynamics", "type": "concept", "cluster": "Sediment Dynamics", "node_size": 10, "label": "sediment supply dynamics"}, "sediment retention": {"concepts": "sediment retention", "type": "concept", "cluster": "Sediment Dynamics", "node_size": 10, "label": "sediment retention"}, "sediment stressors": {"concepts": "sediment stressors", "type": "concept", "cluster": "Sediment Dynamics", "node_size": 10, "label": "sediment stressors"}};
        const interClusterEdges = [["Ecosystem Resilience", "Shoreline Management", {"weight": 0.8, "confidence": 0.6499999999999999, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Resilience", "Sediment Dynamics", {"weight": 0.6, "confidence": 0.49000000000000005, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Resilience", "Plant Diversity", {"weight": 0.6, "confidence": 0.45, "type": "inter_cluster", "style": "solid"}], ["Shoreline Management", "Ecosystem Resilience", {"weight": 0.8, "confidence": 0.6399999999999999, "type": "inter_cluster", "style": "solid"}], ["Shoreline Management", "Sediment Dynamics", {"weight": 0.6, "confidence": 0.52, "type": "inter_cluster", "style": "solid"}], ["Shoreline Management", "Plant Diversity", {"weight": 0.4, "confidence": 0.35, "type": "inter_cluster", "style": "solid"}], ["Plant Diversity", "Sediment Dynamics", {"weight": 0.6, "confidence": 0.48, "type": "inter_cluster", "style": "solid"}], ["Plant Diversity", "Shoreline Management", {"weight": 0.4, "confidence": 0.31, "type": "inter_cluster", "style": "solid"}], ["Plant Diversity", "Ecosystem Resilience", {"weight": 0.2, "confidence": 0.16999999999999998, "type": "inter_cluster", "style": "solid"}], ["Sediment Dynamics", "Shoreline Management", {"weight": 0.8, "confidence": 0.6799999999999999, "type": "inter_cluster", "style": "solid"}], ["Sediment Dynamics", "Ecosystem Resilience", {"weight": 0.2, "confidence": 0.16, "type": "inter_cluster", "style": "solid"}]];
        const clusterConcepts = {"Ecosystem Resilience": [["relative importance", {"concepts": "relative importance", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "relative importance"}], ["ecological benefit", {"concepts": "ecological benefit", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "ecological benefit"}], ["restoration", {"concepts": "restoration", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "restoration"}], ["socio-ecological dynamics", {"concepts": "socio-ecological dynamics", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "socio-ecological dynamics"}], ["flooding tolerance", {"concepts": "flooding tolerance", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "flooding tolerance"}], ["management dynamics", {"concepts": "management dynamics", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "management dynamics"}], ["holistic approach", {"concepts": "holistic approach", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "holistic approach"}], ["species of concern", {"concepts": "species of concern", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "species of concern"}], ["marsh drowning", {"concepts": "marsh drowning", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "marsh drowning"}], ["permit", {"concepts": "permit", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "permit"}], ["biodiversity components", {"concepts": "biodiversity components", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "biodiversity components"}], ["keystone species", {"concepts": "keystone species", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "keystone species"}], ["storms", {"concepts": "storms", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "storms"}], ["ecosystem services", {"concepts": "ecosystem services", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "ecosystem services"}], ["cost", {"concepts": "cost", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "cost"}], ["food web", {"concepts": "food web", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "food web"}], ["sav beds", {"concepts": "sav beds", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "sav beds"}], ["resource managers", {"concepts": "resource managers", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "resource managers"}], ["negative relationships", {"concepts": "negative relationships", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "negative relationships"}], ["water quality", {"concepts": "water quality", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "water quality"}], ["marsh resilience", {"concepts": "marsh resilience", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "marsh resilience"}], ["system components", {"concepts": "system components", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "system components"}], ["human alterations", {"concepts": "human alterations", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "human alterations"}], ["bacteria", {"concepts": "bacteria", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "bacteria"}], ["elevation", {"concepts": "elevation", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "elevation"}], ["erosion", {"concepts": "erosion", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "erosion"}], ["tammy roberson", {"concepts": "tammy roberson", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "tammy roberson"}], ["species", {"concepts": "species", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "species"}], ["aesthetics", {"concepts": "aesthetics", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "aesthetics"}], ["low marsh", {"concepts": "low marsh", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "low marsh"}], ["talbot county", {"concepts": "talbot county", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "talbot county"}], ["marsh creation", {"concepts": "marsh creation", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "marsh creation"}], ["diversity", {"concepts": "diversity", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "diversity"}], ["marsh stability", {"concepts": "marsh stability", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "marsh stability"}], ["salinity", {"concepts": "salinity", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "salinity"}], ["ecologically correct", {"concepts": "ecologically correct", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "ecologically correct"}], ["marshes", {"concepts": "marshes", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "marshes"}], ["salt marsh sparrow", {"concepts": "salt marsh sparrow", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "salt marsh sparrow"}], ["gulf of mexico", {"concepts": "gulf of mexico", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "gulf of mexico"}], ["project success", {"concepts": "project success", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "project success"}], ["scenery importance", {"concepts": "scenery importance", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "scenery importance"}], ["algovats", {"concepts": "algovats", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "algovats"}], ["mental modeler", {"concepts": "mental modeler", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "mental modeler"}], ["sea level rise", {"concepts": "sea level rise", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "sea level rise"}], ["practitioners", {"concepts": "practitioners", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "practitioners"}], ["meso-haline bay", {"concepts": "meso-haline bay", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "meso-haline bay"}], ["environmental conditions", {"concepts": "environmental conditions", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "environmental conditions"}], ["system dynamics", {"concepts": "system dynamics", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "system dynamics"}], ["stressors", {"concepts": "stressors", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "stressors"}], ["for-profit", {"concepts": "for-profit", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "for-profit"}], ["wildlife", {"concepts": "wildlife", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "wildlife"}], ["biological diversity", {"concepts": "biological diversity", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "biological diversity"}], ["mental models", {"concepts": "mental models", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "mental models"}], ["system relationships", {"concepts": "system relationships", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "system relationships"}], ["shifting climates", {"concepts": "shifting climates", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "shifting climates"}], ["bio-geo-chemical processes", {"concepts": "bio-geo-chemical processes", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "bio-geo-chemical processes"}], ["regional managers", {"concepts": "regional managers", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "regional managers"}], ["property owners", {"concepts": "property owners", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "property owners"}], ["management approaches", {"concepts": "management approaches", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "management approaches"}], ["chesapeake bay", {"concepts": "chesapeake bay", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "chesapeake bay"}], ["software", {"concepts": "software", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "software"}], ["non-profits", {"concepts": "non-profits", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "non-profits"}], ["maryland department of the environment", {"concepts": "maryland department of the environment", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "maryland department of the environment"}], ["dorchester county", {"concepts": "dorchester county", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "dorchester county"}], ["resilience", {"concepts": "resilience", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "resilience"}], ["system resilience", {"concepts": "system resilience", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "system resilience"}], ["mucus", {"concepts": "mucus", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "mucus"}], ["water quality.", {"concepts": "water quality.", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "water quality."}], ["growing season", {"concepts": "growing season", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "growing season"}], ["temperature", {"concepts": "temperature", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "temperature"}], ["securiticity", {"concepts": "securiticity", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "securiticity"}], ["diverse community", {"concepts": "diverse community", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "diverse community"}], ["perceptions", {"concepts": "perceptions", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "perceptions"}], ["sav", {"concepts": "sav", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "sav"}], ["scenery", {"concepts": "scenery", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "scenery"}], ["biodiversity framework", {"concepts": "biodiversity framework", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "biodiversity framework"}], ["marsh systems", {"concepts": "marsh systems", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "marsh systems"}], ["relationship impact", {"concepts": "relationship impact", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "relationship impact"}], ["elevation gradient", {"concepts": "elevation gradient", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "elevation gradient"}], ["queen anne\u2019s county", {"concepts": "queen anne\u2019s county", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "queen anne\u2019s county"}], ["temperature impact", {"concepts": "temperature impact", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "temperature impact"}], ["university of washington", {"concepts": "university of washington", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "university of washington"}], ["food web resilience", {"concepts": "food web resilience", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "food web resilience"}], ["marsh migration", {"concepts": "marsh migration", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "marsh migration"}], ["drowning", {"concepts": "drowning", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "drowning"}], ["marsh platform", {"concepts": "marsh platform", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "marsh platform"}], ["feedback loops", {"concepts": "feedback loops", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "feedback loops"}], ["marsh elevation", {"concepts": "marsh elevation", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "marsh elevation"}], ["species of conservation concern", {"concepts": "species of conservation concern", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "species of conservation concern"}], ["positive relationships", {"concepts": "positive relationships", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "positive relationships"}], ["facilitator species", {"concepts": "facilitator species", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "facilitator species"}], ["relationships", {"concepts": "relationships", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "relationships"}], ["dnr", {"concepts": "dnr", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "dnr"}], ["species diversity", {"concepts": "species diversity", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "species diversity"}], ["key food web species", {"concepts": "key food web species", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "key food web species"}], ["salish sea", {"concepts": "salish sea", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "salish sea"}], ["nutrient storage", {"concepts": "nutrient storage", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "nutrient storage"}], ["ecosystem benefits", {"concepts": "ecosystem benefits", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "ecosystem benefits"}], ["marsh", {"concepts": "marsh", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "marsh"}], ["biological organisms", {"concepts": "biological organisms", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "biological organisms"}], ["stakeholders", {"concepts": "stakeholders", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "stakeholders"}], ["diverse assembly", {"concepts": "diverse assembly", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "diverse assembly"}], ["diverse marsh", {"concepts": "diverse marsh", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "diverse marsh"}], ["harmful organisms", {"concepts": "harmful organisms", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "harmful organisms"}], ["ecosystem resilience", {"concepts": "ecosystem resilience", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "ecosystem resilience"}], ["biodiversity", {"concepts": "biodiversity", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "biodiversity"}], ["food web importance", {"concepts": "food web importance", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "food web importance"}], ["high marsh", {"concepts": "high marsh", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "high marsh"}], ["ecosystem", {"concepts": "ecosystem", "type": "concept", "cluster": "Ecosystem Resilience", "node_size": 10, "label": "ecosystem"}]], "Shoreline Management": [["permitters", {"concepts": "permitters", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "permitters"}], ["marine resource management", {"concepts": "marine resource management", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "marine resource management"}], ["environmental law", {"concepts": "environmental law", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "environmental law"}], ["habitat", {"concepts": "habitat", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "habitat"}], ["adjacent habitat", {"concepts": "adjacent habitat", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "adjacent habitat"}], ["shoreline law", {"concepts": "shoreline law", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "shoreline law"}], ["adjacent habitats", {"concepts": "adjacent habitats", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "adjacent habitats"}], ["habitat forming species", {"concepts": "habitat forming species", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "habitat forming species"}], ["living shoreline law", {"concepts": "living shoreline law", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "living shoreline law"}], ["living shoreline", {"concepts": "living shoreline", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "living shoreline"}], ["shoreline", {"concepts": "shoreline", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "shoreline"}], ["coastal communities", {"concepts": "coastal communities", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "coastal communities"}], ["erosion mitigation", {"concepts": "erosion mitigation", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "erosion mitigation"}], ["marine resource users", {"concepts": "marine resource users", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "marine resource users"}], ["living shorelines", {"concepts": "living shorelines", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "living shorelines"}], ["migratory waterfowl", {"concepts": "migratory waterfowl", "type": "concept", "cluster": "Shoreline Management", "node_size": 10, "label": "migratory waterfowl"}]], "Plant Diversity": [["plant species diversity", {"concepts": "plant species diversity", "type": "concept", "cluster": "Plant Diversity", "node_size": 10, "label": "plant species diversity"}], ["plant diversity", {"concepts": "plant diversity", "type": "concept", "cluster": "Plant Diversity", "node_size": 10, "label": "plant diversity"}], ["plant species", {"concepts": "plant species", "type": "concept", "cluster": "Plant Diversity", "node_size": 10, "label": "plant species"}], ["marsh plants", {"concepts": "marsh plants", "type": "concept", "cluster": "Plant Diversity", "node_size": 10, "label": "marsh plants"}], ["marsh plant species", {"concepts": "marsh plant species", "type": "concept", "cluster": "Plant Diversity", "node_size": 10, "label": "marsh plant species"}], ["plant communities", {"concepts": "plant communities", "type": "concept", "cluster": "Plant Diversity", "node_size": 10, "label": "plant communities"}], ["marsh plant diversity", {"concepts": "marsh plant diversity", "type": "concept", "cluster": "Plant Diversity", "node_size": 10, "label": "marsh plant diversity"}]], "Sediment Dynamics": [["sediment dynamics", {"concepts": "sediment dynamics", "type": "concept", "cluster": "Sediment Dynamics", "node_size": 10, "label": "sediment dynamics"}], ["sediment supply", {"concepts": "sediment supply", "type": "concept", "cluster": "Sediment Dynamics", "node_size": 10, "label": "sediment supply"}], ["sediment layer replacement", {"concepts": "sediment layer replacement", "type": "concept", "cluster": "Sediment Dynamics", "node_size": 10, "label": "sediment layer replacement"}], ["sediment", {"concepts": "sediment", "type": "concept", "cluster": "Sediment Dynamics", "node_size": 10, "label": "sediment"}], ["sediment supply dynamics", {"concepts": "sediment supply dynamics", "type": "concept", "cluster": "Sediment Dynamics", "node_size": 10, "label": "sediment supply dynamics"}], ["sediment retention", {"concepts": "sediment retention", "type": "concept", "cluster": "Sediment Dynamics", "node_size": 10, "label": "sediment retention"}], ["sediment stressors", {"concepts": "sediment stressors", "type": "concept", "cluster": "Sediment Dynamics", "node_size": 10, "label": "sediment stressors"}]]};
        const clusterEdges = {"Ecosystem Resilience": [], "Shoreline Management": [], "Plant Diversity": [], "Sediment Dynamics": []};
        
        let network;
        let currentView = 'clusters';
        let currentCluster = null;
        let minConfidence = 0.3;
        
        // Network options
        const options = {
            nodes: {
                font: { color: 'white', size: 14 },
                borderWidth: 2,
                shadow: true
            },
            edges: {
                arrows: { to: { enabled: true, scaleFactor: 1.2 } },
                shadow: true,
                smooth: { type: 'continuous' }
            },
            physics: {
                stabilization: { iterations: 100 },
                barnesHut: {
                    gravitationalConstant: -8000,
                    springConstant: 0.001,
                    springLength: 200
                }
            },
            interaction: {
                hover: true,
                selectConnectedEdges: false
            }
        };
        
        function initNetwork() {
            const container = document.getElementById('network');
            const data = getClusterViewData();
            network = new vis.Network(container, data, options);
            
            // Handle cluster clicks for drill-down
            network.on("click", function(params) {
                if (params.nodes.length > 0 && currentView === 'clusters') {
                    const clickedNode = params.nodes[0];
                    if (clusterConcepts[clickedNode]) {
                        showClusterDetail(clickedNode);
                    }
                }
            });
        }
        
        function getClusterViewData() {
            const nodes = [];
            const edges = [];
            
            // Add cluster nodes
            Object.entries(clusterData).forEach(([clusterId, data]) => {
                const concepts = data.concepts || [];
                const conceptsStr = Array.isArray(concepts) ? concepts.join(', ') : concepts;
                
                nodes.push({
                    id: clusterId,
                    label: clusterId,
                    title: `Cluster: ${clusterId}\nConcepts: ${conceptsStr}\nClick to explore internal relationships`,
                    color: '#4A90E2',
                    size: 25 + (conceptsStr.split(',').length * 2),
                    font: { color: 'white' }
                });
            });
            
            // Add inter-cluster edges
            interClusterEdges.forEach(([source, target, edgeData]) => {
                const confidence = edgeData.confidence || 1.0;
                const weight = edgeData.weight || 0;
                
                if (confidence >= minConfidence) {
                    edges.push({
                        from: source,
                        to: target,
                        color: weight > 0 ? '#28A745' : '#DC3545',
                        width: Math.abs(weight) * 3 + 1,
                        title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                        dashes: false
                    });
                }
            });
            
            return { nodes: nodes, edges: edges };
        }
        
        function getClusterDetailData(clusterId) {
            const nodes = [];
            const edges = [];
            
            // Add concept nodes for this cluster
            if (clusterConcepts[clusterId]) {
                clusterConcepts[clusterId].forEach(([conceptId, data]) => {
                    nodes.push({
                        id: conceptId,
                        label: conceptId,
                        title: `Concept: ${conceptId}\nFrom cluster: ${clusterId}`,
                        color: '#FF9500',
                        size: 20,
                        font: { color: 'white' }
                    });
                });
            }
            
            // Add intra-cluster edges
            if (clusterEdges[clusterId]) {
                clusterEdges[clusterId].forEach(([source, target, edgeData]) => {
                    const confidence = edgeData.confidence || 1.0;
                    const weight = edgeData.weight || 0;
                    
                    if (confidence >= minConfidence) {
                        edges.push({
                            from: source,
                            to: target,
                            color: weight > 0 ? '#28A745' : '#DC3545',
                            width: Math.abs(weight) * 3 + 1,
                            title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                            dashes: true
                        });
                    }
                });
            }
            
            return { nodes: nodes, edges: edges };
        }
        
        function showClusterView() {
            currentView = 'clusters';
            currentCluster = null;
            const data = getClusterViewData();
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'none';
            document.getElementById('current-view').textContent = 'Cluster Overview';
        }
        
        function showClusterDetail(clusterId) {
            currentView = 'concepts';
            currentCluster = clusterId;
            const data = getClusterDetailData(clusterId);
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'inline-block';
            document.getElementById('current-view').textContent = `Inside Cluster: ${clusterId}`;
        }
        
        function updateConfidenceFilter(value) {
            minConfidence = parseFloat(value);
            document.getElementById('confidence-value').textContent = value;
            
            // Refresh current view
            if (currentView === 'clusters') {
                showClusterView();
            } else {
                showClusterDetail(currentCluster);
            }
        }
        
        // Initialize the network when page loads
        window.onload = function() {
            initNetwork();
        };
    </script>
</body>
</html>
