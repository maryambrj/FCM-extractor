
<!DOCTYPE html>
<html>
<head>
    <title>Hierarchical FCM Visualization</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 0; 
            padding: 20px;
            background: #f5f5f5;
        }
        
        #network { 
            width: 100%; 
            height: 600px; 
            border: 2px solid #ccc; 
            background: white;
            border-radius: 8px;
        }
        
        #controls {
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn {
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        
        .btn-primary { background: #4A90E2; color: white; }
        .btn-primary:hover { background: #357ABD; }
        
        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #545b62; }
        
        #current-view {
            font-weight: bold;
            color: #333;
            margin-left: 10px;
        }
        
        #legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-size: 12px;
            max-width: 200px;
        }
        
        .legend-item {
            margin: 5px 0;
            display: flex;
            align-items: center;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .legend-line {
            width: 20px;
            height: 2px;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <h1>Fuzzy Cognitive Map - Hierarchical View</h1>
    
    <div id="controls">
        <button class="btn btn-secondary" id="back-btn" onclick="showClusterView()" style="display: none;">
            ‚Üê Back to Clusters
        </button>
        <span id="current-view">Cluster Overview</span>
        <div style="float: right;">
            <label>Min Confidence: </label>
            <input type="range" id="confidence-slider" min="0" max="1" step="0.1" value="0.3" 
                   onchange="updateConfidenceFilter(this.value)">
            <span id="confidence-value">0.3</span>
        </div>
    </div>
    
    <div id="network"></div>
    
    <div id="legend">
        <h4>Legend</h4>
        <div class="legend-item">
            <div class="legend-color" style="background: #4A90E2;"></div>
            <span>Clusters</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #FF9500;"></div>
            <span>Concepts</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #28A745;"></div>
            <span>Positive relationship</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #DC3545;"></div>
            <span>Negative relationship</span>
        </div>
        <div style="margin-top: 10px; font-style: italic; color: #666;">
            Click clusters to explore internal concepts
        </div>
    </div>

    <script>
        // Embedded data
        const clusterData = {"dam removal": {"concepts": "dam removal", "concept_list": ["dam removal"], "type": "cluster", "node_size": 18, "label": "dam removal"}, "environmental spiel": {"concepts": "environmental spiel, social media, \"social science\", \"chesapeake\"", "concept_list": ["environmental spiel", "social media", "\"social science\"", "\"chesapeake\""], "type": "cluster", "node_size": 27, "label": "environmental spiel"}, "Management Studies": {"concepts": "restoration, \"urchin barons\"", "concept_list": ["restoration", "\"urchin barons\""], "type": "cluster", "node_size": 21, "label": "Management Studies"}, "Scuba Education": {"concepts": "management, \"case studies\"", "concept_list": ["management", "\"case studies\""], "type": "cluster", "node_size": 21, "label": "Scuba Education"}, "Ecological Systems": {"concepts": "educational series, scuba classes", "concept_list": ["educational series", "scuba classes"], "type": "cluster", "node_size": 21, "label": "Ecological Systems"}, "University Education": {"concepts": "\"social ecological system\", predator prey", "concept_list": ["\"social ecological system\"", "predator prey"], "type": "cluster", "node_size": 21, "label": "University Education"}, "Urchin Restoration": {"concepts": "\"instructor course\", educational materials, \"lab science\", business perspective, \"northeastern university\", \"masters program\"", "concept_list": ["\"instructor course\"", "educational materials", "\"lab science\"", "business perspective", "\"northeastern university\"", "\"masters program\""], "type": "cluster", "node_size": 33, "label": "Urchin Restoration"}, "Ecosystem Restoration": {"concepts": "\"conservation\", biodiversity, underwater cleanup, conservation, kelp restoration, \"preservation\", health restoration", "concept_list": ["\"conservation\"", "biodiversity", "underwater cleanup", "conservation", "kelp restoration", "\"preservation\"", "health restoration"], "type": "cluster", "node_size": 36, "label": "Ecosystem Restoration"}, "Kelp Forest Ecosystem": {"concepts": "sea cucumbers, \"kelp\", \"foundational species\", \"kelp problems\", sea urchins, \"kelp forests\", \"kelp forest\", giant pacific octopus, wolf eels, \"kelp research\", kelp forests, \"ecological dynamics\", \"eelgrass\"", "concept_list": ["sea cucumbers", "\"kelp\"", "\"foundational species\"", "\"kelp problems\"", "sea urchins", "\"kelp forests\"", "\"kelp forest\"", "giant pacific octopus", "wolf eels", "\"kelp research\"", "kelp forests", "\"ecological dynamics\"", "\"eelgrass\""], "type": "cluster", "node_size": 54, "label": "Kelp Forest Ecosystem"}, "Puget Sound Management": {"concepts": "padi, state agencies, \"community members\", cold water diving, boat laws, \"researchers\", southern resident orcas, \"resource managers\", \"management approaches\", water taxi pier, variety of species, habitat, \"collaborative discussion\", \"environmental variables\", southern resident workers, bureaucracy levels, endangered species, west seattle, \"gulf coast\", \"scuba diver\", species, \"practitioners\", \"puget sound\", \"environmental policy\", variety species, invasive species, policy work, bureaucracy, management stressors", "concept_list": ["padi", "state agencies", "\"community members\"", "cold water diving", "boat laws", "\"researchers\"", "southern resident orcas", "\"resource managers\"", "\"management approaches\"", "water taxi pier", "variety of species", "habitat", "\"collaborative discussion\"", "\"environmental variables\"", "southern resident workers", "bureaucracy levels", "endangered species", "west seattle", "\"gulf coast\"", "\"scuba diver\"", "species", "\"practitioners\"", "\"puget sound\"", "\"environmental policy\"", "variety species", "invasive species", "policy work", "bureaucracy", "management stressors"], "type": "cluster", "node_size": 102, "label": "Puget Sound Management"}, "Marine Life & Management": {"concepts": "\"fishing communities\", \"marine managers\", marine mammals, salmon stock, marine environment, wildlife veterinarian, \"marine biodiversity\", \"sharks\", \"coastal biodiversity\", \"marine mammals\"", "concept_list": ["\"fishing communities\"", "\"marine managers\"", "marine mammals", "salmon stock", "marine environment", "wildlife veterinarian", "\"marine biodiversity\"", "\"sharks\"", "\"coastal biodiversity\"", "\"marine mammals\""], "type": "cluster", "node_size": 45, "label": "Marine Life & Management"}, "Seaweed Ecosystems": {"concepts": "\"seaweed\", \"seaweed ecosystems\", invasive seaweed", "concept_list": ["\"seaweed\"", "\"seaweed ecosystems\"", "invasive seaweed"], "type": "cluster", "node_size": 24, "label": "Seaweed Ecosystems"}, "Salish Sea Diving": {"concepts": "salish sea diver, marine preserve, salish sea ecology, dogfish sharks, ratfish, rockfish", "concept_list": ["salish sea diver", "marine preserve", "salish sea ecology", "dogfish sharks", "ratfish", "rockfish"], "type": "cluster", "node_size": 33, "label": "Salish Sea Diving"}, "Conservation Workforce": {"concepts": "worker conservation, conservation work, conservation coordinator", "concept_list": ["worker conservation", "conservation work", "conservation coordinator"], "type": "cluster", "node_size": 24, "label": "Conservation Workforce"}, "Coastal Conservation": {"concepts": "shorelines, habitat creep, trash removal, seadoc society", "concept_list": ["shorelines", "habitat creep", "trash removal", "seadoc society"], "type": "cluster", "node_size": 27, "label": "Coastal Conservation"}, "Climate Change Impacts": {"concepts": "warming temperatures, climate change, dams", "concept_list": ["warming temperatures", "climate change", "dams"], "type": "cluster", "node_size": 24, "label": "Climate Change Impacts"}, "Local Pollution": {"concepts": "pollution, local environment", "concept_list": ["pollution", "local environment"], "type": "cluster", "node_size": 21, "label": "Local Pollution"}, "Ecosystem Health": {"concepts": "food web, predator prey dynamics, \"healthy ecosystems\", healthy ecosystems, ecosystems", "concept_list": ["food web", "predator prey dynamics", "\"healthy ecosystems\"", "healthy ecosystems", "ecosystems"], "type": "cluster", "node_size": 30, "label": "Ecosystem Health"}, "Diving Services": {"concepts": "diving company, dive boats, \"dive shop\", diving access, dive agency, dive shop", "concept_list": ["diving company", "dive boats", "\"dive shop\"", "diving access", "dive agency", "dive shop"], "type": "cluster", "node_size": 33, "label": "Diving Services"}, "Octopus & Divers": {"concepts": "pacific octopus, dive community, \"aaus science diver\", independent scientists, \"scripps institution\"", "concept_list": ["pacific octopus", "dive community", "\"aaus science diver\"", "independent scientists", "\"scripps institution\""], "type": "cluster", "node_size": 30, "label": "Octopus & Divers"}, "Certified Divers": {"concepts": "certified divers, divers, volunteer divers", "concept_list": ["certified divers", "divers", "volunteer divers"], "type": "cluster", "node_size": 24, "label": "Certified Divers"}, "Nonprofit Grants": {"concepts": "grants, nonprofits", "concept_list": ["grants", "nonprofits"], "type": "cluster", "node_size": 21, "label": "Nonprofit Grants"}, "Sea Star Wasting": {"concepts": "sea star wasting, sea stars, \"sea stars\"", "concept_list": ["sea star wasting", "sea stars", "\"sea stars\""], "type": "cluster", "node_size": 24, "label": "Sea Star Wasting"}, "Sunflower Sea Star": {"concepts": "\"sunflower sea star\", sunflower sea star", "concept_list": ["\"sunflower sea star\"", "sunflower sea star"], "type": "cluster", "node_size": 21, "label": "Sunflower Sea Star"}, "Sea Life": {"concepts": "\"sea creatures\", \"sea urchins\"", "concept_list": ["\"sea creatures\"", "\"sea urchins\""], "type": "cluster", "node_size": 21, "label": "Sea Life"}, "Nudibranch Critters": {"concepts": "nudibranch, nudibranchs, critters, chimera", "concept_list": ["nudibranch", "nudibranchs", "critters", "chimera"], "type": "cluster", "node_size": 27, "label": "Nudibranch Critters"}, "Orca Population": {"concepts": "orca population, orcas", "concept_list": ["orca population", "orcas"], "type": "cluster", "node_size": 21, "label": "Orca Population"}, "SR3 Cleanup Guide": {"concepts": "cleanup events, safe guide, sr3", "concept_list": ["cleanup events", "safe guide", "sr3"], "type": "cluster", "node_size": 24, "label": "SR3 Cleanup Guide"}, "Customer System Dynamics": {"concepts": "customers, des moines, uc davis, system dynamics", "concept_list": ["customers", "des moines", "uc davis", "system dynamics"], "type": "cluster", "node_size": 27, "label": "Customer System Dynamics"}};
        const conceptData = {"social media": {"concepts": "social media", "type": "concept", "cluster": "environmental spiel", "node_size": 10, "label": "social media"}, "\"social science\"": {"concepts": "\"social science\"", "type": "concept", "cluster": "environmental spiel", "node_size": 10, "label": "\"social science\""}, "\"chesapeake\"": {"concepts": "\"chesapeake\"", "type": "concept", "cluster": "environmental spiel", "node_size": 10, "label": "\"chesapeake\""}, "restoration": {"concepts": "restoration", "type": "concept", "cluster": "Management Studies", "node_size": 10, "label": "restoration"}, "\"urchin barons\"": {"concepts": "\"urchin barons\"", "type": "concept", "cluster": "Management Studies", "node_size": 10, "label": "\"urchin barons\""}, "management": {"concepts": "management", "type": "concept", "cluster": "Scuba Education", "node_size": 10, "label": "management"}, "\"case studies\"": {"concepts": "\"case studies\"", "type": "concept", "cluster": "Scuba Education", "node_size": 10, "label": "\"case studies\""}, "educational series": {"concepts": "educational series", "type": "concept", "cluster": "Ecological Systems", "node_size": 10, "label": "educational series"}, "scuba classes": {"concepts": "scuba classes", "type": "concept", "cluster": "Ecological Systems", "node_size": 10, "label": "scuba classes"}, "\"social ecological system\"": {"concepts": "\"social ecological system\"", "type": "concept", "cluster": "University Education", "node_size": 10, "label": "\"social ecological system\""}, "predator prey": {"concepts": "predator prey", "type": "concept", "cluster": "University Education", "node_size": 10, "label": "predator prey"}, "\"instructor course\"": {"concepts": "\"instructor course\"", "type": "concept", "cluster": "Urchin Restoration", "node_size": 10, "label": "\"instructor course\""}, "educational materials": {"concepts": "educational materials", "type": "concept", "cluster": "Urchin Restoration", "node_size": 10, "label": "educational materials"}, "\"lab science\"": {"concepts": "\"lab science\"", "type": "concept", "cluster": "Urchin Restoration", "node_size": 10, "label": "\"lab science\""}, "business perspective": {"concepts": "business perspective", "type": "concept", "cluster": "Urchin Restoration", "node_size": 10, "label": "business perspective"}, "\"northeastern university\"": {"concepts": "\"northeastern university\"", "type": "concept", "cluster": "Urchin Restoration", "node_size": 10, "label": "\"northeastern university\""}, "\"masters program\"": {"concepts": "\"masters program\"", "type": "concept", "cluster": "Urchin Restoration", "node_size": 10, "label": "\"masters program\""}, "\"conservation\"": {"concepts": "\"conservation\"", "type": "concept", "cluster": "Ecosystem Restoration", "node_size": 10, "label": "\"conservation\""}, "biodiversity": {"concepts": "biodiversity", "type": "concept", "cluster": "Ecosystem Restoration", "node_size": 10, "label": "biodiversity"}, "underwater cleanup": {"concepts": "underwater cleanup", "type": "concept", "cluster": "Ecosystem Restoration", "node_size": 10, "label": "underwater cleanup"}, "conservation": {"concepts": "conservation", "type": "concept", "cluster": "Ecosystem Restoration", "node_size": 10, "label": "conservation"}, "kelp restoration": {"concepts": "kelp restoration", "type": "concept", "cluster": "Ecosystem Restoration", "node_size": 10, "label": "kelp restoration"}, "\"preservation\"": {"concepts": "\"preservation\"", "type": "concept", "cluster": "Ecosystem Restoration", "node_size": 10, "label": "\"preservation\""}, "health restoration": {"concepts": "health restoration", "type": "concept", "cluster": "Ecosystem Restoration", "node_size": 10, "label": "health restoration"}, "sea cucumbers": {"concepts": "sea cucumbers", "type": "concept", "cluster": "Kelp Forest Ecosystem", "node_size": 10, "label": "sea cucumbers"}, "\"kelp\"": {"concepts": "\"kelp\"", "type": "concept", "cluster": "Kelp Forest Ecosystem", "node_size": 10, "label": "\"kelp\""}, "\"foundational species\"": {"concepts": "\"foundational species\"", "type": "concept", "cluster": "Kelp Forest Ecosystem", "node_size": 10, "label": "\"foundational species\""}, "\"kelp problems\"": {"concepts": "\"kelp problems\"", "type": "concept", "cluster": "Kelp Forest Ecosystem", "node_size": 10, "label": "\"kelp problems\""}, "sea urchins": {"concepts": "sea urchins", "type": "concept", "cluster": "Kelp Forest Ecosystem", "node_size": 10, "label": "sea urchins"}, "\"kelp forests\"": {"concepts": "\"kelp forests\"", "type": "concept", "cluster": "Kelp Forest Ecosystem", "node_size": 10, "label": "\"kelp forests\""}, "\"kelp forest\"": {"concepts": "\"kelp forest\"", "type": "concept", "cluster": "Kelp Forest Ecosystem", "node_size": 10, "label": "\"kelp forest\""}, "giant pacific octopus": {"concepts": "giant pacific octopus", "type": "concept", "cluster": "Kelp Forest Ecosystem", "node_size": 10, "label": "giant pacific octopus"}, "wolf eels": {"concepts": "wolf eels", "type": "concept", "cluster": "Kelp Forest Ecosystem", "node_size": 10, "label": "wolf eels"}, "\"kelp research\"": {"concepts": "\"kelp research\"", "type": "concept", "cluster": "Kelp Forest Ecosystem", "node_size": 10, "label": "\"kelp research\""}, "kelp forests": {"concepts": "kelp forests", "type": "concept", "cluster": "Kelp Forest Ecosystem", "node_size": 10, "label": "kelp forests"}, "\"ecological dynamics\"": {"concepts": "\"ecological dynamics\"", "type": "concept", "cluster": "Kelp Forest Ecosystem", "node_size": 10, "label": "\"ecological dynamics\""}, "\"eelgrass\"": {"concepts": "\"eelgrass\"", "type": "concept", "cluster": "Kelp Forest Ecosystem", "node_size": 10, "label": "\"eelgrass\""}, "padi": {"concepts": "padi", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "padi"}, "state agencies": {"concepts": "state agencies", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "state agencies"}, "\"community members\"": {"concepts": "\"community members\"", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "\"community members\""}, "cold water diving": {"concepts": "cold water diving", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "cold water diving"}, "boat laws": {"concepts": "boat laws", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "boat laws"}, "\"researchers\"": {"concepts": "\"researchers\"", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "\"researchers\""}, "southern resident orcas": {"concepts": "southern resident orcas", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "southern resident orcas"}, "\"resource managers\"": {"concepts": "\"resource managers\"", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "\"resource managers\""}, "\"management approaches\"": {"concepts": "\"management approaches\"", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "\"management approaches\""}, "water taxi pier": {"concepts": "water taxi pier", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "water taxi pier"}, "variety of species": {"concepts": "variety of species", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "variety of species"}, "habitat": {"concepts": "habitat", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "habitat"}, "\"collaborative discussion\"": {"concepts": "\"collaborative discussion\"", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "\"collaborative discussion\""}, "\"environmental variables\"": {"concepts": "\"environmental variables\"", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "\"environmental variables\""}, "southern resident workers": {"concepts": "southern resident workers", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "southern resident workers"}, "bureaucracy levels": {"concepts": "bureaucracy levels", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "bureaucracy levels"}, "endangered species": {"concepts": "endangered species", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "endangered species"}, "west seattle": {"concepts": "west seattle", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "west seattle"}, "\"gulf coast\"": {"concepts": "\"gulf coast\"", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "\"gulf coast\""}, "\"scuba diver\"": {"concepts": "\"scuba diver\"", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "\"scuba diver\""}, "species": {"concepts": "species", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "species"}, "\"practitioners\"": {"concepts": "\"practitioners\"", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "\"practitioners\""}, "\"puget sound\"": {"concepts": "\"puget sound\"", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "\"puget sound\""}, "\"environmental policy\"": {"concepts": "\"environmental policy\"", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "\"environmental policy\""}, "variety species": {"concepts": "variety species", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "variety species"}, "invasive species": {"concepts": "invasive species", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "invasive species"}, "policy work": {"concepts": "policy work", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "policy work"}, "bureaucracy": {"concepts": "bureaucracy", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "bureaucracy"}, "management stressors": {"concepts": "management stressors", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "management stressors"}, "\"fishing communities\"": {"concepts": "\"fishing communities\"", "type": "concept", "cluster": "Marine Life & Management", "node_size": 10, "label": "\"fishing communities\""}, "\"marine managers\"": {"concepts": "\"marine managers\"", "type": "concept", "cluster": "Marine Life & Management", "node_size": 10, "label": "\"marine managers\""}, "marine mammals": {"concepts": "marine mammals", "type": "concept", "cluster": "Marine Life & Management", "node_size": 10, "label": "marine mammals"}, "salmon stock": {"concepts": "salmon stock", "type": "concept", "cluster": "Marine Life & Management", "node_size": 10, "label": "salmon stock"}, "marine environment": {"concepts": "marine environment", "type": "concept", "cluster": "Marine Life & Management", "node_size": 10, "label": "marine environment"}, "wildlife veterinarian": {"concepts": "wildlife veterinarian", "type": "concept", "cluster": "Marine Life & Management", "node_size": 10, "label": "wildlife veterinarian"}, "\"marine biodiversity\"": {"concepts": "\"marine biodiversity\"", "type": "concept", "cluster": "Marine Life & Management", "node_size": 10, "label": "\"marine biodiversity\""}, "\"sharks\"": {"concepts": "\"sharks\"", "type": "concept", "cluster": "Marine Life & Management", "node_size": 10, "label": "\"sharks\""}, "\"coastal biodiversity\"": {"concepts": "\"coastal biodiversity\"", "type": "concept", "cluster": "Marine Life & Management", "node_size": 10, "label": "\"coastal biodiversity\""}, "\"marine mammals\"": {"concepts": "\"marine mammals\"", "type": "concept", "cluster": "Marine Life & Management", "node_size": 10, "label": "\"marine mammals\""}, "\"seaweed\"": {"concepts": "\"seaweed\"", "type": "concept", "cluster": "Seaweed Ecosystems", "node_size": 10, "label": "\"seaweed\""}, "\"seaweed ecosystems\"": {"concepts": "\"seaweed ecosystems\"", "type": "concept", "cluster": "Seaweed Ecosystems", "node_size": 10, "label": "\"seaweed ecosystems\""}, "invasive seaweed": {"concepts": "invasive seaweed", "type": "concept", "cluster": "Seaweed Ecosystems", "node_size": 10, "label": "invasive seaweed"}, "salish sea diver": {"concepts": "salish sea diver", "type": "concept", "cluster": "Salish Sea Diving", "node_size": 10, "label": "salish sea diver"}, "marine preserve": {"concepts": "marine preserve", "type": "concept", "cluster": "Salish Sea Diving", "node_size": 10, "label": "marine preserve"}, "salish sea ecology": {"concepts": "salish sea ecology", "type": "concept", "cluster": "Salish Sea Diving", "node_size": 10, "label": "salish sea ecology"}, "dogfish sharks": {"concepts": "dogfish sharks", "type": "concept", "cluster": "Salish Sea Diving", "node_size": 10, "label": "dogfish sharks"}, "ratfish": {"concepts": "ratfish", "type": "concept", "cluster": "Salish Sea Diving", "node_size": 10, "label": "ratfish"}, "rockfish": {"concepts": "rockfish", "type": "concept", "cluster": "Salish Sea Diving", "node_size": 10, "label": "rockfish"}, "worker conservation": {"concepts": "worker conservation", "type": "concept", "cluster": "Conservation Workforce", "node_size": 10, "label": "worker conservation"}, "conservation work": {"concepts": "conservation work", "type": "concept", "cluster": "Conservation Workforce", "node_size": 10, "label": "conservation work"}, "conservation coordinator": {"concepts": "conservation coordinator", "type": "concept", "cluster": "Conservation Workforce", "node_size": 10, "label": "conservation coordinator"}, "shorelines": {"concepts": "shorelines", "type": "concept", "cluster": "Coastal Conservation", "node_size": 10, "label": "shorelines"}, "habitat creep": {"concepts": "habitat creep", "type": "concept", "cluster": "Coastal Conservation", "node_size": 10, "label": "habitat creep"}, "trash removal": {"concepts": "trash removal", "type": "concept", "cluster": "Coastal Conservation", "node_size": 10, "label": "trash removal"}, "seadoc society": {"concepts": "seadoc society", "type": "concept", "cluster": "Coastal Conservation", "node_size": 10, "label": "seadoc society"}, "warming temperatures": {"concepts": "warming temperatures", "type": "concept", "cluster": "Climate Change Impacts", "node_size": 10, "label": "warming temperatures"}, "climate change": {"concepts": "climate change", "type": "concept", "cluster": "Climate Change Impacts", "node_size": 10, "label": "climate change"}, "dams": {"concepts": "dams", "type": "concept", "cluster": "Climate Change Impacts", "node_size": 10, "label": "dams"}, "pollution": {"concepts": "pollution", "type": "concept", "cluster": "Local Pollution", "node_size": 10, "label": "pollution"}, "local environment": {"concepts": "local environment", "type": "concept", "cluster": "Local Pollution", "node_size": 10, "label": "local environment"}, "food web": {"concepts": "food web", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "food web"}, "predator prey dynamics": {"concepts": "predator prey dynamics", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "predator prey dynamics"}, "\"healthy ecosystems\"": {"concepts": "\"healthy ecosystems\"", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "\"healthy ecosystems\""}, "healthy ecosystems": {"concepts": "healthy ecosystems", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "healthy ecosystems"}, "ecosystems": {"concepts": "ecosystems", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "ecosystems"}, "diving company": {"concepts": "diving company", "type": "concept", "cluster": "Diving Services", "node_size": 10, "label": "diving company"}, "dive boats": {"concepts": "dive boats", "type": "concept", "cluster": "Diving Services", "node_size": 10, "label": "dive boats"}, "\"dive shop\"": {"concepts": "\"dive shop\"", "type": "concept", "cluster": "Diving Services", "node_size": 10, "label": "\"dive shop\""}, "diving access": {"concepts": "diving access", "type": "concept", "cluster": "Diving Services", "node_size": 10, "label": "diving access"}, "dive agency": {"concepts": "dive agency", "type": "concept", "cluster": "Diving Services", "node_size": 10, "label": "dive agency"}, "dive shop": {"concepts": "dive shop", "type": "concept", "cluster": "Diving Services", "node_size": 10, "label": "dive shop"}, "pacific octopus": {"concepts": "pacific octopus", "type": "concept", "cluster": "Octopus & Divers", "node_size": 10, "label": "pacific octopus"}, "dive community": {"concepts": "dive community", "type": "concept", "cluster": "Octopus & Divers", "node_size": 10, "label": "dive community"}, "\"aaus science diver\"": {"concepts": "\"aaus science diver\"", "type": "concept", "cluster": "Octopus & Divers", "node_size": 10, "label": "\"aaus science diver\""}, "independent scientists": {"concepts": "independent scientists", "type": "concept", "cluster": "Octopus & Divers", "node_size": 10, "label": "independent scientists"}, "\"scripps institution\"": {"concepts": "\"scripps institution\"", "type": "concept", "cluster": "Octopus & Divers", "node_size": 10, "label": "\"scripps institution\""}, "certified divers": {"concepts": "certified divers", "type": "concept", "cluster": "Certified Divers", "node_size": 10, "label": "certified divers"}, "divers": {"concepts": "divers", "type": "concept", "cluster": "Certified Divers", "node_size": 10, "label": "divers"}, "volunteer divers": {"concepts": "volunteer divers", "type": "concept", "cluster": "Certified Divers", "node_size": 10, "label": "volunteer divers"}, "grants": {"concepts": "grants", "type": "concept", "cluster": "Nonprofit Grants", "node_size": 10, "label": "grants"}, "nonprofits": {"concepts": "nonprofits", "type": "concept", "cluster": "Nonprofit Grants", "node_size": 10, "label": "nonprofits"}, "sea star wasting": {"concepts": "sea star wasting", "type": "concept", "cluster": "Sea Star Wasting", "node_size": 10, "label": "sea star wasting"}, "sea stars": {"concepts": "sea stars", "type": "concept", "cluster": "Sea Star Wasting", "node_size": 10, "label": "sea stars"}, "\"sea stars\"": {"concepts": "\"sea stars\"", "type": "concept", "cluster": "Sea Star Wasting", "node_size": 10, "label": "\"sea stars\""}, "\"sunflower sea star\"": {"concepts": "\"sunflower sea star\"", "type": "concept", "cluster": "Sunflower Sea Star", "node_size": 10, "label": "\"sunflower sea star\""}, "sunflower sea star": {"concepts": "sunflower sea star", "type": "concept", "cluster": "Sunflower Sea Star", "node_size": 10, "label": "sunflower sea star"}, "\"sea creatures\"": {"concepts": "\"sea creatures\"", "type": "concept", "cluster": "Sea Life", "node_size": 10, "label": "\"sea creatures\""}, "\"sea urchins\"": {"concepts": "\"sea urchins\"", "type": "concept", "cluster": "Sea Life", "node_size": 10, "label": "\"sea urchins\""}, "nudibranch": {"concepts": "nudibranch", "type": "concept", "cluster": "Nudibranch Critters", "node_size": 10, "label": "nudibranch"}, "nudibranchs": {"concepts": "nudibranchs", "type": "concept", "cluster": "Nudibranch Critters", "node_size": 10, "label": "nudibranchs"}, "critters": {"concepts": "critters", "type": "concept", "cluster": "Nudibranch Critters", "node_size": 10, "label": "critters"}, "chimera": {"concepts": "chimera", "type": "concept", "cluster": "Nudibranch Critters", "node_size": 10, "label": "chimera"}, "orca population": {"concepts": "orca population", "type": "concept", "cluster": "Orca Population", "node_size": 10, "label": "orca population"}, "orcas": {"concepts": "orcas", "type": "concept", "cluster": "Orca Population", "node_size": 10, "label": "orcas"}, "cleanup events": {"concepts": "cleanup events", "type": "concept", "cluster": "SR3 Cleanup Guide", "node_size": 10, "label": "cleanup events"}, "safe guide": {"concepts": "safe guide", "type": "concept", "cluster": "SR3 Cleanup Guide", "node_size": 10, "label": "safe guide"}, "sr3": {"concepts": "sr3", "type": "concept", "cluster": "SR3 Cleanup Guide", "node_size": 10, "label": "sr3"}, "customers": {"concepts": "customers", "type": "concept", "cluster": "Customer System Dynamics", "node_size": 10, "label": "customers"}, "des moines": {"concepts": "des moines", "type": "concept", "cluster": "Customer System Dynamics", "node_size": 10, "label": "des moines"}, "uc davis": {"concepts": "uc davis", "type": "concept", "cluster": "Customer System Dynamics", "node_size": 10, "label": "uc davis"}, "system dynamics": {"concepts": "system dynamics", "type": "concept", "cluster": "Customer System Dynamics", "node_size": 10, "label": "system dynamics"}};
        const interClusterEdges = [["Management Studies", "Ecosystem Health", {"weight": 1.0, "confidence": 0.63, "type": "inter_cluster", "style": "solid"}], ["Management Studies", "Kelp Forest Ecosystem", {"weight": 0.8, "confidence": 0.42000000000000004, "type": "inter_cluster", "style": "solid"}], ["Ecological Systems", "environmental spiel", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["Ecological Systems", "Nonprofit Grants", {"weight": 1.0, "confidence": 0.45, "type": "inter_cluster", "style": "solid"}], ["Ecological Systems", "Sea Life", {"weight": 0.75, "confidence": 0.325, "type": "inter_cluster", "style": "solid"}], ["Ecological Systems", "Urchin Restoration", {"weight": 0.6, "confidence": 0.29, "type": "inter_cluster", "style": "solid"}], ["Ecological Systems", "Conservation Workforce", {"weight": 1.0, "confidence": 0.4, "type": "inter_cluster", "style": "solid"}], ["University Education", "Scuba Education", {"weight": 0.75, "confidence": 0.35, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Restoration", "SR3 Cleanup Guide", {"weight": 1.0, "confidence": 0.7000000000000001, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Restoration", "Nonprofit Grants", {"weight": 1.0, "confidence": 0.5833333333333334, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Restoration", "Orca Population", {"weight": 1.0, "confidence": 0.5333333333333333, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Restoration", "Sunflower Sea Star", {"weight": 1.0, "confidence": 0.4666666666666666, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Restoration", "Diving Services", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["Ecosystem Restoration", "dam removal", {"weight": 1.0, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Puget Sound Management", "Scuba Education", {"weight": 0.8, "confidence": 0.44000000000000006, "type": "inter_cluster", "style": "solid"}], ["Puget Sound Management", "Conservation Workforce", {"weight": 1.0, "confidence": 0.43333333333333335, "type": "inter_cluster", "style": "solid"}], ["Puget Sound Management", "University Education", {"weight": 0.3333333333333333, "confidence": 0.09999999999999999, "type": "inter_cluster", "style": "solid"}], ["Marine Life & Management", "Scuba Education", {"weight": 1.0, "confidence": 0.53, "type": "inter_cluster", "style": "solid"}], ["Marine Life & Management", "Kelp Forest Ecosystem", {"weight": 0.6666666666666666, "confidence": 0.45, "type": "inter_cluster", "style": "solid"}], ["Seaweed Ecosystems", "Ecological Systems", {"weight": 1.0, "confidence": 0.4, "type": "inter_cluster", "style": "solid"}], ["Salish Sea Diving", "Kelp Forest Ecosystem", {"weight": 0.75, "confidence": 0.475, "type": "inter_cluster", "style": "solid"}], ["Salish Sea Diving", "Diving Services", {"weight": 1.0, "confidence": 0.7, "type": "inter_cluster", "style": "solid"}], ["Conservation Workforce", "Coastal Conservation", {"weight": 0.6666666666666666, "confidence": 0.39999999999999997, "type": "inter_cluster", "style": "solid"}], ["Coastal Conservation", "Ecosystem Restoration", {"weight": 1.0, "confidence": 0.5666666666666665, "type": "inter_cluster", "style": "solid"}], ["Coastal Conservation", "SR3 Cleanup Guide", {"weight": 1.0, "confidence": 0.44999999999999996, "type": "inter_cluster", "style": "solid"}], ["Climate Change Impacts", "University Education", {"weight": -1.0, "confidence": 0.53, "type": "inter_cluster", "style": "solid"}], ["Climate Change Impacts", "Ecosystem Restoration", {"weight": -1.0, "confidence": 0.45999999999999996, "type": "inter_cluster", "style": "solid"}], ["Climate Change Impacts", "Marine Life & Management", {"weight": -1.0, "confidence": 0.3625, "type": "inter_cluster", "style": "solid"}], ["Local Pollution", "Scuba Education", {"weight": 0.6666666666666666, "confidence": 0.2333333333333333, "type": "inter_cluster", "style": "solid"}], ["Local Pollution", "Management Studies", {"weight": 1.0, "confidence": 0.35, "type": "inter_cluster", "style": "solid"}], ["Diving Services", "Scuba Education", {"weight": 0.5, "confidence": 0.2, "type": "inter_cluster", "style": "solid"}], ["Octopus & Divers", "Sea Life", {"weight": 0.3333333333333333, "confidence": 0.19999999999999998, "type": "inter_cluster", "style": "solid"}], ["Octopus & Divers", "Nudibranch Critters", {"weight": 0.5, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Octopus & Divers", "Salish Sea Diving", {"weight": 0.25, "confidence": 0.125, "type": "inter_cluster", "style": "solid"}], ["Certified Divers", "Ecological Systems", {"weight": 1.0, "confidence": 0.5499999999999999, "type": "inter_cluster", "style": "solid"}], ["Certified Divers", "Marine Life & Management", {"weight": 0.25, "confidence": 0.1375, "type": "inter_cluster", "style": "solid"}], ["Nonprofit Grants", "Climate Change Impacts", {"weight": -0.3333333333333333, "confidence": 0.09999999999999999, "type": "inter_cluster", "style": "solid"}], ["Sea Star Wasting", "Sea Life", {"weight": 0.5, "confidence": 0.525, "type": "inter_cluster", "style": "solid"}], ["Sea Star Wasting", "Marine Life & Management", {"weight": -0.8, "confidence": 0.28, "type": "inter_cluster", "style": "solid"}], ["Sea Star Wasting", "Orca Population", {"weight": -0.6666666666666666, "confidence": 0.21666666666666665, "type": "inter_cluster", "style": "solid"}], ["Sunflower Sea Star", "Puget Sound Management", {"weight": 1.0, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Orca Population", "Ecosystem Health", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["SR3 Cleanup Guide", "Management Studies", {"weight": 1.0, "confidence": 0.575, "type": "inter_cluster", "style": "solid"}], ["SR3 Cleanup Guide", "Sunflower Sea Star", {"weight": 0.5, "confidence": 0.15, "type": "inter_cluster", "style": "solid"}], ["Customer System Dynamics", "Diving Services", {"weight": 0.75, "confidence": 0.425, "type": "inter_cluster", "style": "solid"}]];
        const clusterConcepts = {"environmental spiel": [["social media", {"concepts": "social media", "type": "concept", "cluster": "environmental spiel", "node_size": 10, "label": "social media"}], ["\"social science\"", {"concepts": "\"social science\"", "type": "concept", "cluster": "environmental spiel", "node_size": 10, "label": "\"social science\""}], ["\"chesapeake\"", {"concepts": "\"chesapeake\"", "type": "concept", "cluster": "environmental spiel", "node_size": 10, "label": "\"chesapeake\""}]], "Management Studies": [["restoration", {"concepts": "restoration", "type": "concept", "cluster": "Management Studies", "node_size": 10, "label": "restoration"}], ["\"urchin barons\"", {"concepts": "\"urchin barons\"", "type": "concept", "cluster": "Management Studies", "node_size": 10, "label": "\"urchin barons\""}]], "Scuba Education": [["management", {"concepts": "management", "type": "concept", "cluster": "Scuba Education", "node_size": 10, "label": "management"}], ["\"case studies\"", {"concepts": "\"case studies\"", "type": "concept", "cluster": "Scuba Education", "node_size": 10, "label": "\"case studies\""}]], "Ecological Systems": [["educational series", {"concepts": "educational series", "type": "concept", "cluster": "Ecological Systems", "node_size": 10, "label": "educational series"}], ["scuba classes", {"concepts": "scuba classes", "type": "concept", "cluster": "Ecological Systems", "node_size": 10, "label": "scuba classes"}]], "University Education": [["\"social ecological system\"", {"concepts": "\"social ecological system\"", "type": "concept", "cluster": "University Education", "node_size": 10, "label": "\"social ecological system\""}], ["predator prey", {"concepts": "predator prey", "type": "concept", "cluster": "University Education", "node_size": 10, "label": "predator prey"}]], "Urchin Restoration": [["\"instructor course\"", {"concepts": "\"instructor course\"", "type": "concept", "cluster": "Urchin Restoration", "node_size": 10, "label": "\"instructor course\""}], ["educational materials", {"concepts": "educational materials", "type": "concept", "cluster": "Urchin Restoration", "node_size": 10, "label": "educational materials"}], ["\"lab science\"", {"concepts": "\"lab science\"", "type": "concept", "cluster": "Urchin Restoration", "node_size": 10, "label": "\"lab science\""}], ["business perspective", {"concepts": "business perspective", "type": "concept", "cluster": "Urchin Restoration", "node_size": 10, "label": "business perspective"}], ["\"northeastern university\"", {"concepts": "\"northeastern university\"", "type": "concept", "cluster": "Urchin Restoration", "node_size": 10, "label": "\"northeastern university\""}], ["\"masters program\"", {"concepts": "\"masters program\"", "type": "concept", "cluster": "Urchin Restoration", "node_size": 10, "label": "\"masters program\""}]], "Ecosystem Restoration": [["\"conservation\"", {"concepts": "\"conservation\"", "type": "concept", "cluster": "Ecosystem Restoration", "node_size": 10, "label": "\"conservation\""}], ["biodiversity", {"concepts": "biodiversity", "type": "concept", "cluster": "Ecosystem Restoration", "node_size": 10, "label": "biodiversity"}], ["underwater cleanup", {"concepts": "underwater cleanup", "type": "concept", "cluster": "Ecosystem Restoration", "node_size": 10, "label": "underwater cleanup"}], ["conservation", {"concepts": "conservation", "type": "concept", "cluster": "Ecosystem Restoration", "node_size": 10, "label": "conservation"}], ["kelp restoration", {"concepts": "kelp restoration", "type": "concept", "cluster": "Ecosystem Restoration", "node_size": 10, "label": "kelp restoration"}], ["\"preservation\"", {"concepts": "\"preservation\"", "type": "concept", "cluster": "Ecosystem Restoration", "node_size": 10, "label": "\"preservation\""}], ["health restoration", {"concepts": "health restoration", "type": "concept", "cluster": "Ecosystem Restoration", "node_size": 10, "label": "health restoration"}]], "Kelp Forest Ecosystem": [["sea cucumbers", {"concepts": "sea cucumbers", "type": "concept", "cluster": "Kelp Forest Ecosystem", "node_size": 10, "label": "sea cucumbers"}], ["\"kelp\"", {"concepts": "\"kelp\"", "type": "concept", "cluster": "Kelp Forest Ecosystem", "node_size": 10, "label": "\"kelp\""}], ["\"foundational species\"", {"concepts": "\"foundational species\"", "type": "concept", "cluster": "Kelp Forest Ecosystem", "node_size": 10, "label": "\"foundational species\""}], ["\"kelp problems\"", {"concepts": "\"kelp problems\"", "type": "concept", "cluster": "Kelp Forest Ecosystem", "node_size": 10, "label": "\"kelp problems\""}], ["sea urchins", {"concepts": "sea urchins", "type": "concept", "cluster": "Kelp Forest Ecosystem", "node_size": 10, "label": "sea urchins"}], ["\"kelp forests\"", {"concepts": "\"kelp forests\"", "type": "concept", "cluster": "Kelp Forest Ecosystem", "node_size": 10, "label": "\"kelp forests\""}], ["\"kelp forest\"", {"concepts": "\"kelp forest\"", "type": "concept", "cluster": "Kelp Forest Ecosystem", "node_size": 10, "label": "\"kelp forest\""}], ["giant pacific octopus", {"concepts": "giant pacific octopus", "type": "concept", "cluster": "Kelp Forest Ecosystem", "node_size": 10, "label": "giant pacific octopus"}], ["wolf eels", {"concepts": "wolf eels", "type": "concept", "cluster": "Kelp Forest Ecosystem", "node_size": 10, "label": "wolf eels"}], ["\"kelp research\"", {"concepts": "\"kelp research\"", "type": "concept", "cluster": "Kelp Forest Ecosystem", "node_size": 10, "label": "\"kelp research\""}], ["kelp forests", {"concepts": "kelp forests", "type": "concept", "cluster": "Kelp Forest Ecosystem", "node_size": 10, "label": "kelp forests"}], ["\"ecological dynamics\"", {"concepts": "\"ecological dynamics\"", "type": "concept", "cluster": "Kelp Forest Ecosystem", "node_size": 10, "label": "\"ecological dynamics\""}], ["\"eelgrass\"", {"concepts": "\"eelgrass\"", "type": "concept", "cluster": "Kelp Forest Ecosystem", "node_size": 10, "label": "\"eelgrass\""}]], "Puget Sound Management": [["padi", {"concepts": "padi", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "padi"}], ["state agencies", {"concepts": "state agencies", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "state agencies"}], ["\"community members\"", {"concepts": "\"community members\"", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "\"community members\""}], ["cold water diving", {"concepts": "cold water diving", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "cold water diving"}], ["boat laws", {"concepts": "boat laws", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "boat laws"}], ["\"researchers\"", {"concepts": "\"researchers\"", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "\"researchers\""}], ["southern resident orcas", {"concepts": "southern resident orcas", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "southern resident orcas"}], ["\"resource managers\"", {"concepts": "\"resource managers\"", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "\"resource managers\""}], ["\"management approaches\"", {"concepts": "\"management approaches\"", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "\"management approaches\""}], ["water taxi pier", {"concepts": "water taxi pier", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "water taxi pier"}], ["variety of species", {"concepts": "variety of species", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "variety of species"}], ["habitat", {"concepts": "habitat", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "habitat"}], ["\"collaborative discussion\"", {"concepts": "\"collaborative discussion\"", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "\"collaborative discussion\""}], ["\"environmental variables\"", {"concepts": "\"environmental variables\"", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "\"environmental variables\""}], ["southern resident workers", {"concepts": "southern resident workers", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "southern resident workers"}], ["bureaucracy levels", {"concepts": "bureaucracy levels", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "bureaucracy levels"}], ["endangered species", {"concepts": "endangered species", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "endangered species"}], ["west seattle", {"concepts": "west seattle", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "west seattle"}], ["\"gulf coast\"", {"concepts": "\"gulf coast\"", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "\"gulf coast\""}], ["\"scuba diver\"", {"concepts": "\"scuba diver\"", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "\"scuba diver\""}], ["species", {"concepts": "species", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "species"}], ["\"practitioners\"", {"concepts": "\"practitioners\"", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "\"practitioners\""}], ["\"puget sound\"", {"concepts": "\"puget sound\"", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "\"puget sound\""}], ["\"environmental policy\"", {"concepts": "\"environmental policy\"", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "\"environmental policy\""}], ["variety species", {"concepts": "variety species", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "variety species"}], ["invasive species", {"concepts": "invasive species", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "invasive species"}], ["policy work", {"concepts": "policy work", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "policy work"}], ["bureaucracy", {"concepts": "bureaucracy", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "bureaucracy"}], ["management stressors", {"concepts": "management stressors", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "management stressors"}]], "Marine Life & Management": [["\"fishing communities\"", {"concepts": "\"fishing communities\"", "type": "concept", "cluster": "Marine Life & Management", "node_size": 10, "label": "\"fishing communities\""}], ["\"marine managers\"", {"concepts": "\"marine managers\"", "type": "concept", "cluster": "Marine Life & Management", "node_size": 10, "label": "\"marine managers\""}], ["marine mammals", {"concepts": "marine mammals", "type": "concept", "cluster": "Marine Life & Management", "node_size": 10, "label": "marine mammals"}], ["salmon stock", {"concepts": "salmon stock", "type": "concept", "cluster": "Marine Life & Management", "node_size": 10, "label": "salmon stock"}], ["marine environment", {"concepts": "marine environment", "type": "concept", "cluster": "Marine Life & Management", "node_size": 10, "label": "marine environment"}], ["wildlife veterinarian", {"concepts": "wildlife veterinarian", "type": "concept", "cluster": "Marine Life & Management", "node_size": 10, "label": "wildlife veterinarian"}], ["\"marine biodiversity\"", {"concepts": "\"marine biodiversity\"", "type": "concept", "cluster": "Marine Life & Management", "node_size": 10, "label": "\"marine biodiversity\""}], ["\"sharks\"", {"concepts": "\"sharks\"", "type": "concept", "cluster": "Marine Life & Management", "node_size": 10, "label": "\"sharks\""}], ["\"coastal biodiversity\"", {"concepts": "\"coastal biodiversity\"", "type": "concept", "cluster": "Marine Life & Management", "node_size": 10, "label": "\"coastal biodiversity\""}], ["\"marine mammals\"", {"concepts": "\"marine mammals\"", "type": "concept", "cluster": "Marine Life & Management", "node_size": 10, "label": "\"marine mammals\""}]], "Seaweed Ecosystems": [["\"seaweed\"", {"concepts": "\"seaweed\"", "type": "concept", "cluster": "Seaweed Ecosystems", "node_size": 10, "label": "\"seaweed\""}], ["\"seaweed ecosystems\"", {"concepts": "\"seaweed ecosystems\"", "type": "concept", "cluster": "Seaweed Ecosystems", "node_size": 10, "label": "\"seaweed ecosystems\""}], ["invasive seaweed", {"concepts": "invasive seaweed", "type": "concept", "cluster": "Seaweed Ecosystems", "node_size": 10, "label": "invasive seaweed"}]], "Salish Sea Diving": [["salish sea diver", {"concepts": "salish sea diver", "type": "concept", "cluster": "Salish Sea Diving", "node_size": 10, "label": "salish sea diver"}], ["marine preserve", {"concepts": "marine preserve", "type": "concept", "cluster": "Salish Sea Diving", "node_size": 10, "label": "marine preserve"}], ["salish sea ecology", {"concepts": "salish sea ecology", "type": "concept", "cluster": "Salish Sea Diving", "node_size": 10, "label": "salish sea ecology"}], ["dogfish sharks", {"concepts": "dogfish sharks", "type": "concept", "cluster": "Salish Sea Diving", "node_size": 10, "label": "dogfish sharks"}], ["ratfish", {"concepts": "ratfish", "type": "concept", "cluster": "Salish Sea Diving", "node_size": 10, "label": "ratfish"}], ["rockfish", {"concepts": "rockfish", "type": "concept", "cluster": "Salish Sea Diving", "node_size": 10, "label": "rockfish"}]], "Conservation Workforce": [["worker conservation", {"concepts": "worker conservation", "type": "concept", "cluster": "Conservation Workforce", "node_size": 10, "label": "worker conservation"}], ["conservation work", {"concepts": "conservation work", "type": "concept", "cluster": "Conservation Workforce", "node_size": 10, "label": "conservation work"}], ["conservation coordinator", {"concepts": "conservation coordinator", "type": "concept", "cluster": "Conservation Workforce", "node_size": 10, "label": "conservation coordinator"}]], "Coastal Conservation": [["shorelines", {"concepts": "shorelines", "type": "concept", "cluster": "Coastal Conservation", "node_size": 10, "label": "shorelines"}], ["habitat creep", {"concepts": "habitat creep", "type": "concept", "cluster": "Coastal Conservation", "node_size": 10, "label": "habitat creep"}], ["trash removal", {"concepts": "trash removal", "type": "concept", "cluster": "Coastal Conservation", "node_size": 10, "label": "trash removal"}], ["seadoc society", {"concepts": "seadoc society", "type": "concept", "cluster": "Coastal Conservation", "node_size": 10, "label": "seadoc society"}]], "Climate Change Impacts": [["warming temperatures", {"concepts": "warming temperatures", "type": "concept", "cluster": "Climate Change Impacts", "node_size": 10, "label": "warming temperatures"}], ["climate change", {"concepts": "climate change", "type": "concept", "cluster": "Climate Change Impacts", "node_size": 10, "label": "climate change"}], ["dams", {"concepts": "dams", "type": "concept", "cluster": "Climate Change Impacts", "node_size": 10, "label": "dams"}]], "Local Pollution": [["pollution", {"concepts": "pollution", "type": "concept", "cluster": "Local Pollution", "node_size": 10, "label": "pollution"}], ["local environment", {"concepts": "local environment", "type": "concept", "cluster": "Local Pollution", "node_size": 10, "label": "local environment"}]], "Ecosystem Health": [["food web", {"concepts": "food web", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "food web"}], ["predator prey dynamics", {"concepts": "predator prey dynamics", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "predator prey dynamics"}], ["\"healthy ecosystems\"", {"concepts": "\"healthy ecosystems\"", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "\"healthy ecosystems\""}], ["healthy ecosystems", {"concepts": "healthy ecosystems", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "healthy ecosystems"}], ["ecosystems", {"concepts": "ecosystems", "type": "concept", "cluster": "Ecosystem Health", "node_size": 10, "label": "ecosystems"}]], "Diving Services": [["diving company", {"concepts": "diving company", "type": "concept", "cluster": "Diving Services", "node_size": 10, "label": "diving company"}], ["dive boats", {"concepts": "dive boats", "type": "concept", "cluster": "Diving Services", "node_size": 10, "label": "dive boats"}], ["\"dive shop\"", {"concepts": "\"dive shop\"", "type": "concept", "cluster": "Diving Services", "node_size": 10, "label": "\"dive shop\""}], ["diving access", {"concepts": "diving access", "type": "concept", "cluster": "Diving Services", "node_size": 10, "label": "diving access"}], ["dive agency", {"concepts": "dive agency", "type": "concept", "cluster": "Diving Services", "node_size": 10, "label": "dive agency"}], ["dive shop", {"concepts": "dive shop", "type": "concept", "cluster": "Diving Services", "node_size": 10, "label": "dive shop"}]], "Octopus & Divers": [["pacific octopus", {"concepts": "pacific octopus", "type": "concept", "cluster": "Octopus & Divers", "node_size": 10, "label": "pacific octopus"}], ["dive community", {"concepts": "dive community", "type": "concept", "cluster": "Octopus & Divers", "node_size": 10, "label": "dive community"}], ["\"aaus science diver\"", {"concepts": "\"aaus science diver\"", "type": "concept", "cluster": "Octopus & Divers", "node_size": 10, "label": "\"aaus science diver\""}], ["independent scientists", {"concepts": "independent scientists", "type": "concept", "cluster": "Octopus & Divers", "node_size": 10, "label": "independent scientists"}], ["\"scripps institution\"", {"concepts": "\"scripps institution\"", "type": "concept", "cluster": "Octopus & Divers", "node_size": 10, "label": "\"scripps institution\""}]], "Certified Divers": [["certified divers", {"concepts": "certified divers", "type": "concept", "cluster": "Certified Divers", "node_size": 10, "label": "certified divers"}], ["divers", {"concepts": "divers", "type": "concept", "cluster": "Certified Divers", "node_size": 10, "label": "divers"}], ["volunteer divers", {"concepts": "volunteer divers", "type": "concept", "cluster": "Certified Divers", "node_size": 10, "label": "volunteer divers"}]], "Nonprofit Grants": [["grants", {"concepts": "grants", "type": "concept", "cluster": "Nonprofit Grants", "node_size": 10, "label": "grants"}], ["nonprofits", {"concepts": "nonprofits", "type": "concept", "cluster": "Nonprofit Grants", "node_size": 10, "label": "nonprofits"}]], "Sea Star Wasting": [["sea star wasting", {"concepts": "sea star wasting", "type": "concept", "cluster": "Sea Star Wasting", "node_size": 10, "label": "sea star wasting"}], ["sea stars", {"concepts": "sea stars", "type": "concept", "cluster": "Sea Star Wasting", "node_size": 10, "label": "sea stars"}], ["\"sea stars\"", {"concepts": "\"sea stars\"", "type": "concept", "cluster": "Sea Star Wasting", "node_size": 10, "label": "\"sea stars\""}]], "Sunflower Sea Star": [["\"sunflower sea star\"", {"concepts": "\"sunflower sea star\"", "type": "concept", "cluster": "Sunflower Sea Star", "node_size": 10, "label": "\"sunflower sea star\""}], ["sunflower sea star", {"concepts": "sunflower sea star", "type": "concept", "cluster": "Sunflower Sea Star", "node_size": 10, "label": "sunflower sea star"}]], "Sea Life": [["\"sea creatures\"", {"concepts": "\"sea creatures\"", "type": "concept", "cluster": "Sea Life", "node_size": 10, "label": "\"sea creatures\""}], ["\"sea urchins\"", {"concepts": "\"sea urchins\"", "type": "concept", "cluster": "Sea Life", "node_size": 10, "label": "\"sea urchins\""}]], "Nudibranch Critters": [["nudibranch", {"concepts": "nudibranch", "type": "concept", "cluster": "Nudibranch Critters", "node_size": 10, "label": "nudibranch"}], ["nudibranchs", {"concepts": "nudibranchs", "type": "concept", "cluster": "Nudibranch Critters", "node_size": 10, "label": "nudibranchs"}], ["critters", {"concepts": "critters", "type": "concept", "cluster": "Nudibranch Critters", "node_size": 10, "label": "critters"}], ["chimera", {"concepts": "chimera", "type": "concept", "cluster": "Nudibranch Critters", "node_size": 10, "label": "chimera"}]], "Orca Population": [["orca population", {"concepts": "orca population", "type": "concept", "cluster": "Orca Population", "node_size": 10, "label": "orca population"}], ["orcas", {"concepts": "orcas", "type": "concept", "cluster": "Orca Population", "node_size": 10, "label": "orcas"}]], "SR3 Cleanup Guide": [["cleanup events", {"concepts": "cleanup events", "type": "concept", "cluster": "SR3 Cleanup Guide", "node_size": 10, "label": "cleanup events"}], ["safe guide", {"concepts": "safe guide", "type": "concept", "cluster": "SR3 Cleanup Guide", "node_size": 10, "label": "safe guide"}], ["sr3", {"concepts": "sr3", "type": "concept", "cluster": "SR3 Cleanup Guide", "node_size": 10, "label": "sr3"}]], "Customer System Dynamics": [["customers", {"concepts": "customers", "type": "concept", "cluster": "Customer System Dynamics", "node_size": 10, "label": "customers"}], ["des moines", {"concepts": "des moines", "type": "concept", "cluster": "Customer System Dynamics", "node_size": 10, "label": "des moines"}], ["uc davis", {"concepts": "uc davis", "type": "concept", "cluster": "Customer System Dynamics", "node_size": 10, "label": "uc davis"}], ["system dynamics", {"concepts": "system dynamics", "type": "concept", "cluster": "Customer System Dynamics", "node_size": 10, "label": "system dynamics"}]]};
        const clusterEdges = {"environmental spiel": [], "Management Studies": [], "Scuba Education": [], "Ecological Systems": [], "University Education": [], "Urchin Restoration": [], "Ecosystem Restoration": [], "Kelp Forest Ecosystem": [], "Puget Sound Management": [], "Marine Life & Management": [], "Seaweed Ecosystems": [], "Salish Sea Diving": [], "Conservation Workforce": [], "Coastal Conservation": [], "Climate Change Impacts": [], "Local Pollution": [], "Ecosystem Health": [], "Diving Services": [], "Octopus & Divers": [], "Certified Divers": [], "Nonprofit Grants": [], "Sea Star Wasting": [], "Sunflower Sea Star": [], "Sea Life": [], "Nudibranch Critters": [], "Orca Population": [], "SR3 Cleanup Guide": [], "Customer System Dynamics": []};
        
        let network;
        let currentView = 'clusters';
        let currentCluster = null;
        let minConfidence = 0.3;
        
        // Network options
        const options = {
            nodes: {
                font: { color: 'white', size: 14 },
                borderWidth: 2,
                shadow: true
            },
            edges: {
                arrows: { to: { enabled: true, scaleFactor: 1.2 } },
                shadow: true,
                smooth: { type: 'continuous' }
            },
            physics: {
                stabilization: { iterations: 100 },
                barnesHut: {
                    gravitationalConstant: -8000,
                    springConstant: 0.001,
                    springLength: 200
                }
            },
            interaction: {
                hover: true,
                selectConnectedEdges: false
            }
        };
        
        function initNetwork() {
            const container = document.getElementById('network');
            const data = getClusterViewData();
            network = new vis.Network(container, data, options);
            
            // Handle cluster clicks for drill-down
            network.on("click", function(params) {
                if (params.nodes.length > 0 && currentView === 'clusters') {
                    const clickedNode = params.nodes[0];
                    if (clusterConcepts[clickedNode]) {
                        showClusterDetail(clickedNode);
                    }
                }
            });
        }
        
        function getClusterViewData() {
            const nodes = [];
            const edges = [];
            
            // Add cluster nodes
            Object.entries(clusterData).forEach(([clusterId, data]) => {
                const concepts = data.concepts || [];
                const conceptsStr = Array.isArray(concepts) ? concepts.join(', ') : concepts;
                
                nodes.push({
                    id: clusterId,
                    label: clusterId,
                    title: `Cluster: ${clusterId}\nConcepts: ${conceptsStr}\nClick to explore internal relationships`,
                    color: '#4A90E2',
                    size: 25 + (conceptsStr.split(',').length * 2),
                    font: { color: 'white' }
                });
            });
            
            // Add inter-cluster edges
            interClusterEdges.forEach(([source, target, edgeData]) => {
                const confidence = edgeData.confidence || 1.0;
                const weight = edgeData.weight || 0;
                
                if (confidence >= minConfidence) {
                    edges.push({
                        from: source,
                        to: target,
                        color: weight > 0 ? '#28A745' : '#DC3545',
                        width: Math.abs(weight) * 3 + 1,
                        title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                        dashes: false
                    });
                }
            });
            
            return { nodes: nodes, edges: edges };
        }
        
        function getClusterDetailData(clusterId) {
            const nodes = [];
            const edges = [];
            
            // Add concept nodes for this cluster
            if (clusterConcepts[clusterId]) {
                clusterConcepts[clusterId].forEach(([conceptId, data]) => {
                    nodes.push({
                        id: conceptId,
                        label: conceptId,
                        title: `Concept: ${conceptId}\nFrom cluster: ${clusterId}`,
                        color: '#FF9500',
                        size: 20,
                        font: { color: 'white' }
                    });
                });
            }
            
            // Add intra-cluster edges
            if (clusterEdges[clusterId]) {
                clusterEdges[clusterId].forEach(([source, target, edgeData]) => {
                    const confidence = edgeData.confidence || 1.0;
                    const weight = edgeData.weight || 0;
                    
                    if (confidence >= minConfidence) {
                        edges.push({
                            from: source,
                            to: target,
                            color: weight > 0 ? '#28A745' : '#DC3545',
                            width: Math.abs(weight) * 3 + 1,
                            title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                            dashes: true
                        });
                    }
                });
            }
            
            return { nodes: nodes, edges: edges };
        }
        
        function showClusterView() {
            currentView = 'clusters';
            currentCluster = null;
            const data = getClusterViewData();
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'none';
            document.getElementById('current-view').textContent = 'Cluster Overview';
        }
        
        function showClusterDetail(clusterId) {
            currentView = 'concepts';
            currentCluster = clusterId;
            const data = getClusterDetailData(clusterId);
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'inline-block';
            document.getElementById('current-view').textContent = `Inside Cluster: ${clusterId}`;
        }
        
        function updateConfidenceFilter(value) {
            minConfidence = parseFloat(value);
            document.getElementById('confidence-value').textContent = value;
            
            // Refresh current view
            if (currentView === 'clusters') {
                showClusterView();
            } else {
                showClusterDetail(currentCluster);
            }
        }
        
        // Initialize the network when page loads
        window.onload = function() {
            initNetwork();
        };
    </script>
</body>
</html>
