
<!DOCTYPE html>
<html>
<head>
    <title>Hierarchical FCM Visualization</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 0; 
            padding: 20px;
            background: #f5f5f5;
        }
        
        #network { 
            width: 100%; 
            height: 600px; 
            border: 2px solid #ccc; 
            background: white;
            border-radius: 8px;
        }
        
        #controls {
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn {
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        
        .btn-primary { background: #4A90E2; color: white; }
        .btn-primary:hover { background: #357ABD; }
        
        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #545b62; }
        
        #current-view {
            font-weight: bold;
            color: #333;
            margin-left: 10px;
        }
        
        #legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-size: 12px;
            max-width: 200px;
        }
        
        .legend-item {
            margin: 5px 0;
            display: flex;
            align-items: center;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .legend-line {
            width: 20px;
            height: 2px;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <h1>Fuzzy Cognitive Map - Hierarchical View</h1>
    
    <div id="controls">
        <button class="btn btn-secondary" id="back-btn" onclick="showClusterView()" style="display: none;">
            ‚Üê Back to Clusters
        </button>
        <span id="current-view">Cluster Overview</span>
        <div style="float: right;">
            <label>Min Confidence: </label>
            <input type="range" id="confidence-slider" min="0" max="1" step="0.1" value="0.3" 
                   onchange="updateConfidenceFilter(this.value)">
            <span id="confidence-value">0.3</span>
        </div>
    </div>
    
    <div id="network"></div>
    
    <div id="legend">
        <h4>Legend</h4>
        <div class="legend-item">
            <div class="legend-color" style="background: #4A90E2;"></div>
            <span>Clusters</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #FF9500;"></div>
            <span>Concepts</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #28A745;"></div>
            <span>Positive relationship</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #DC3545;"></div>
            <span>Negative relationship</span>
        </div>
        <div style="margin-top: 10px; font-style: italic; color: #666;">
            Click clusters to explore internal concepts
        </div>
    </div>

    <script>
        // Embedded data
        const clusterData = {"species recovery": {"concepts": "species recovery", "concept_list": ["species recovery"], "type": "cluster", "node_size": 18, "label": "species recovery"}, "Geographic Awareness": {"concepts": "environmental consulting, environmental work, respondent understanding, environmental justice", "concept_list": ["environmental consulting", "environmental work", "respondent understanding", "environmental justice"], "type": "cluster", "node_size": 27, "label": "Geographic Awareness"}, "Ecological Systems": {"concepts": "spatial reference, geographic literacy, geographic location, nearshore focus, sense of place", "concept_list": ["spatial reference", "geographic literacy", "geographic location", "nearshore focus", "sense of place"], "type": "cluster", "node_size": 30, "label": "Ecological Systems"}, "Ecotourism & Wellbeing": {"concepts": "ecological systems, habitat, estuaries, salmon, fisheries, ecological survey, habitat management, restoration efforts, habitat specific, marine water quality, ecosystem services, marine biodiversity, invertebrates, shoreline types, food web, marine species, european green crab, conservation concern, endangered species, habitat forming, food webs, niche habitats, marine resources, estuary restoration, shrub steppe", "concept_list": ["ecological systems", "habitat", "estuaries", "salmon", "fisheries", "ecological survey", "habitat management", "restoration efforts", "habitat specific", "marine water quality", "ecosystem services", "marine biodiversity", "invertebrates", "shoreline types", "food web", "marine species", "european green crab", "conservation concern", "endangered species", "habitat forming", "food webs", "niche habitats", "marine resources", "estuary restoration", "shrub steppe"], "type": "cluster", "node_size": 90, "label": "Ecotourism & Wellbeing"}, "Social-Ecological Dynamics": {"concepts": "wildlife presence, ecotourism, coastal sense, landscape values, recreation, ecotourism presence, wildlife watcher, human well-being, recreational value", "concept_list": ["wildlife presence", "ecotourism", "coastal sense", "landscape values", "recreation", "ecotourism presence", "wildlife watcher", "human well-being", "recreational value"], "type": "cluster", "node_size": 42, "label": "Social-Ecological Dynamics"}, "Environmental Understanding": {"concepts": "survey questions, social-ecological dynamics, regional planning, natural resource, oyster farmers, social ecological dynamics, fishing access, natural resources, coastal communities, habitat program, open-ended question, conservation issues, social-ecological landscape, snowball sampling, fishermen", "concept_list": ["survey questions", "social-ecological dynamics", "regional planning", "natural resource", "oyster farmers", "social ecological dynamics", "fishing access", "natural resources", "coastal communities", "habitat program", "open-ended question", "conservation issues", "social-ecological landscape", "snowball sampling", "fishermen"], "type": "cluster", "node_size": 60, "label": "Environmental Understanding"}, "Social Science Research": {"concepts": "social scientists, social science, social scientist, qualitative coding, mental modeler, researchers", "concept_list": ["social scientists", "social science", "social scientist", "qualitative coding", "mental modeler", "researchers"], "type": "cluster", "node_size": 33, "label": "Social Science Research"}, "Community Engagement": {"concepts": "stakeholders, homeowners, communications, economic benefits, plain language, education program, workshops, scientific terms, resource users, tribal members, ngos, community members, resource managers, resource reliance, community communication, public engagement", "concept_list": ["stakeholders", "homeowners", "communications", "economic benefits", "plain language", "education program", "workshops", "scientific terms", "resource users", "tribal members", "ngos", "community members", "resource managers", "resource reliance", "community communication", "public engagement"], "type": "cluster", "node_size": 63, "label": "Community Engagement"}, "DEI in Agencies": {"concepts": "dei data, staff focus, differences, politics, state agencies, agency focus, inclusion, agency funding, commonalities, agency alignment, equity, diversity", "concept_list": ["dei data", "staff focus", "differences", "politics", "state agencies", "agency focus", "inclusion", "agency funding", "commonalities", "agency alignment", "equity", "diversity"], "type": "cluster", "node_size": 51, "label": "DEI in Agencies"}, "Puget Sound Management": {"concepts": "network models, decision support, case studies, policy analysis, community research, management interventions, tribal representation, orca, cognitive mapping, puget sound, school districts, nature, resource management, research overlaps, public participation, management approaches, preservation, institutional factors, comparative analysis, wdfw curriculum, internal consultant, treaty rights, decision making, federal level, team supervision, conservation, state legislature, integrated model", "concept_list": ["network models", "decision support", "case studies", "policy analysis", "community research", "management interventions", "tribal representation", "orca", "cognitive mapping", "puget sound", "school districts", "nature", "resource management", "research overlaps", "public participation", "management approaches", "preservation", "institutional factors", "comparative analysis", "wdfw curriculum", "internal consultant", "treaty rights", "decision making", "federal level", "team supervision", "conservation", "state legislature", "integrated model"], "type": "cluster", "node_size": 99, "label": "Puget Sound Management"}, "Research Scientists": {"concepts": "species, invasive species, species variation, species interactions, harmful organisms", "concept_list": ["species", "invasive species", "species variation", "species interactions", "harmful organisms"], "type": "cluster", "node_size": 30, "label": "Research Scientists"}, "Biodiversity Understanding": {"concepts": "biodiversity knowledge, biodiversity communications, biodiversity, visualizing biodiversity", "concept_list": ["biodiversity knowledge", "biodiversity communications", "biodiversity", "visualizing biodiversity"], "type": "cluster", "node_size": 27, "label": "Biodiversity Understanding"}};
        const conceptData = {"environmental consulting": {"concepts": "environmental consulting", "type": "concept", "cluster": "Geographic Awareness", "node_size": 10, "label": "environmental consulting"}, "environmental work": {"concepts": "environmental work", "type": "concept", "cluster": "Geographic Awareness", "node_size": 10, "label": "environmental work"}, "respondent understanding": {"concepts": "respondent understanding", "type": "concept", "cluster": "Geographic Awareness", "node_size": 10, "label": "respondent understanding"}, "environmental justice": {"concepts": "environmental justice", "type": "concept", "cluster": "Geographic Awareness", "node_size": 10, "label": "environmental justice"}, "spatial reference": {"concepts": "spatial reference", "type": "concept", "cluster": "Ecological Systems", "node_size": 10, "label": "spatial reference"}, "geographic literacy": {"concepts": "geographic literacy", "type": "concept", "cluster": "Ecological Systems", "node_size": 10, "label": "geographic literacy"}, "geographic location": {"concepts": "geographic location", "type": "concept", "cluster": "Ecological Systems", "node_size": 10, "label": "geographic location"}, "nearshore focus": {"concepts": "nearshore focus", "type": "concept", "cluster": "Ecological Systems", "node_size": 10, "label": "nearshore focus"}, "sense of place": {"concepts": "sense of place", "type": "concept", "cluster": "Ecological Systems", "node_size": 10, "label": "sense of place"}, "ecological systems": {"concepts": "ecological systems", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "ecological systems"}, "habitat": {"concepts": "habitat", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "habitat"}, "estuaries": {"concepts": "estuaries", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "estuaries"}, "salmon": {"concepts": "salmon", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "salmon"}, "fisheries": {"concepts": "fisheries", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "fisheries"}, "ecological survey": {"concepts": "ecological survey", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "ecological survey"}, "habitat management": {"concepts": "habitat management", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "habitat management"}, "restoration efforts": {"concepts": "restoration efforts", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "restoration efforts"}, "habitat specific": {"concepts": "habitat specific", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "habitat specific"}, "marine water quality": {"concepts": "marine water quality", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "marine water quality"}, "ecosystem services": {"concepts": "ecosystem services", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "ecosystem services"}, "marine biodiversity": {"concepts": "marine biodiversity", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "marine biodiversity"}, "invertebrates": {"concepts": "invertebrates", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "invertebrates"}, "shoreline types": {"concepts": "shoreline types", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "shoreline types"}, "food web": {"concepts": "food web", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "food web"}, "marine species": {"concepts": "marine species", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "marine species"}, "european green crab": {"concepts": "european green crab", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "european green crab"}, "conservation concern": {"concepts": "conservation concern", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "conservation concern"}, "endangered species": {"concepts": "endangered species", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "endangered species"}, "habitat forming": {"concepts": "habitat forming", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "habitat forming"}, "food webs": {"concepts": "food webs", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "food webs"}, "niche habitats": {"concepts": "niche habitats", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "niche habitats"}, "marine resources": {"concepts": "marine resources", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "marine resources"}, "estuary restoration": {"concepts": "estuary restoration", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "estuary restoration"}, "shrub steppe": {"concepts": "shrub steppe", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "shrub steppe"}, "wildlife presence": {"concepts": "wildlife presence", "type": "concept", "cluster": "Social-Ecological Dynamics", "node_size": 10, "label": "wildlife presence"}, "ecotourism": {"concepts": "ecotourism", "type": "concept", "cluster": "Social-Ecological Dynamics", "node_size": 10, "label": "ecotourism"}, "coastal sense": {"concepts": "coastal sense", "type": "concept", "cluster": "Social-Ecological Dynamics", "node_size": 10, "label": "coastal sense"}, "landscape values": {"concepts": "landscape values", "type": "concept", "cluster": "Social-Ecological Dynamics", "node_size": 10, "label": "landscape values"}, "recreation": {"concepts": "recreation", "type": "concept", "cluster": "Social-Ecological Dynamics", "node_size": 10, "label": "recreation"}, "ecotourism presence": {"concepts": "ecotourism presence", "type": "concept", "cluster": "Social-Ecological Dynamics", "node_size": 10, "label": "ecotourism presence"}, "wildlife watcher": {"concepts": "wildlife watcher", "type": "concept", "cluster": "Social-Ecological Dynamics", "node_size": 10, "label": "wildlife watcher"}, "human well-being": {"concepts": "human well-being", "type": "concept", "cluster": "Social-Ecological Dynamics", "node_size": 10, "label": "human well-being"}, "recreational value": {"concepts": "recreational value", "type": "concept", "cluster": "Social-Ecological Dynamics", "node_size": 10, "label": "recreational value"}, "survey questions": {"concepts": "survey questions", "type": "concept", "cluster": "Environmental Understanding", "node_size": 10, "label": "survey questions"}, "social-ecological dynamics": {"concepts": "social-ecological dynamics", "type": "concept", "cluster": "Environmental Understanding", "node_size": 10, "label": "social-ecological dynamics"}, "regional planning": {"concepts": "regional planning", "type": "concept", "cluster": "Environmental Understanding", "node_size": 10, "label": "regional planning"}, "natural resource": {"concepts": "natural resource", "type": "concept", "cluster": "Environmental Understanding", "node_size": 10, "label": "natural resource"}, "oyster farmers": {"concepts": "oyster farmers", "type": "concept", "cluster": "Environmental Understanding", "node_size": 10, "label": "oyster farmers"}, "social ecological dynamics": {"concepts": "social ecological dynamics", "type": "concept", "cluster": "Environmental Understanding", "node_size": 10, "label": "social ecological dynamics"}, "fishing access": {"concepts": "fishing access", "type": "concept", "cluster": "Environmental Understanding", "node_size": 10, "label": "fishing access"}, "natural resources": {"concepts": "natural resources", "type": "concept", "cluster": "Environmental Understanding", "node_size": 10, "label": "natural resources"}, "coastal communities": {"concepts": "coastal communities", "type": "concept", "cluster": "Environmental Understanding", "node_size": 10, "label": "coastal communities"}, "habitat program": {"concepts": "habitat program", "type": "concept", "cluster": "Environmental Understanding", "node_size": 10, "label": "habitat program"}, "open-ended question": {"concepts": "open-ended question", "type": "concept", "cluster": "Environmental Understanding", "node_size": 10, "label": "open-ended question"}, "conservation issues": {"concepts": "conservation issues", "type": "concept", "cluster": "Environmental Understanding", "node_size": 10, "label": "conservation issues"}, "social-ecological landscape": {"concepts": "social-ecological landscape", "type": "concept", "cluster": "Environmental Understanding", "node_size": 10, "label": "social-ecological landscape"}, "snowball sampling": {"concepts": "snowball sampling", "type": "concept", "cluster": "Environmental Understanding", "node_size": 10, "label": "snowball sampling"}, "fishermen": {"concepts": "fishermen", "type": "concept", "cluster": "Environmental Understanding", "node_size": 10, "label": "fishermen"}, "social scientists": {"concepts": "social scientists", "type": "concept", "cluster": "Social Science Research", "node_size": 10, "label": "social scientists"}, "social science": {"concepts": "social science", "type": "concept", "cluster": "Social Science Research", "node_size": 10, "label": "social science"}, "social scientist": {"concepts": "social scientist", "type": "concept", "cluster": "Social Science Research", "node_size": 10, "label": "social scientist"}, "qualitative coding": {"concepts": "qualitative coding", "type": "concept", "cluster": "Social Science Research", "node_size": 10, "label": "qualitative coding"}, "mental modeler": {"concepts": "mental modeler", "type": "concept", "cluster": "Social Science Research", "node_size": 10, "label": "mental modeler"}, "researchers": {"concepts": "researchers", "type": "concept", "cluster": "Social Science Research", "node_size": 10, "label": "researchers"}, "stakeholders": {"concepts": "stakeholders", "type": "concept", "cluster": "Community Engagement", "node_size": 10, "label": "stakeholders"}, "homeowners": {"concepts": "homeowners", "type": "concept", "cluster": "Community Engagement", "node_size": 10, "label": "homeowners"}, "communications": {"concepts": "communications", "type": "concept", "cluster": "Community Engagement", "node_size": 10, "label": "communications"}, "economic benefits": {"concepts": "economic benefits", "type": "concept", "cluster": "Community Engagement", "node_size": 10, "label": "economic benefits"}, "plain language": {"concepts": "plain language", "type": "concept", "cluster": "Community Engagement", "node_size": 10, "label": "plain language"}, "education program": {"concepts": "education program", "type": "concept", "cluster": "Community Engagement", "node_size": 10, "label": "education program"}, "workshops": {"concepts": "workshops", "type": "concept", "cluster": "Community Engagement", "node_size": 10, "label": "workshops"}, "scientific terms": {"concepts": "scientific terms", "type": "concept", "cluster": "Community Engagement", "node_size": 10, "label": "scientific terms"}, "resource users": {"concepts": "resource users", "type": "concept", "cluster": "Community Engagement", "node_size": 10, "label": "resource users"}, "tribal members": {"concepts": "tribal members", "type": "concept", "cluster": "Community Engagement", "node_size": 10, "label": "tribal members"}, "ngos": {"concepts": "ngos", "type": "concept", "cluster": "Community Engagement", "node_size": 10, "label": "ngos"}, "community members": {"concepts": "community members", "type": "concept", "cluster": "Community Engagement", "node_size": 10, "label": "community members"}, "resource managers": {"concepts": "resource managers", "type": "concept", "cluster": "Community Engagement", "node_size": 10, "label": "resource managers"}, "resource reliance": {"concepts": "resource reliance", "type": "concept", "cluster": "Community Engagement", "node_size": 10, "label": "resource reliance"}, "community communication": {"concepts": "community communication", "type": "concept", "cluster": "Community Engagement", "node_size": 10, "label": "community communication"}, "public engagement": {"concepts": "public engagement", "type": "concept", "cluster": "Community Engagement", "node_size": 10, "label": "public engagement"}, "dei data": {"concepts": "dei data", "type": "concept", "cluster": "DEI in Agencies", "node_size": 10, "label": "dei data"}, "staff focus": {"concepts": "staff focus", "type": "concept", "cluster": "DEI in Agencies", "node_size": 10, "label": "staff focus"}, "differences": {"concepts": "differences", "type": "concept", "cluster": "DEI in Agencies", "node_size": 10, "label": "differences"}, "politics": {"concepts": "politics", "type": "concept", "cluster": "DEI in Agencies", "node_size": 10, "label": "politics"}, "state agencies": {"concepts": "state agencies", "type": "concept", "cluster": "DEI in Agencies", "node_size": 10, "label": "state agencies"}, "agency focus": {"concepts": "agency focus", "type": "concept", "cluster": "DEI in Agencies", "node_size": 10, "label": "agency focus"}, "inclusion": {"concepts": "inclusion", "type": "concept", "cluster": "DEI in Agencies", "node_size": 10, "label": "inclusion"}, "agency funding": {"concepts": "agency funding", "type": "concept", "cluster": "DEI in Agencies", "node_size": 10, "label": "agency funding"}, "commonalities": {"concepts": "commonalities", "type": "concept", "cluster": "DEI in Agencies", "node_size": 10, "label": "commonalities"}, "agency alignment": {"concepts": "agency alignment", "type": "concept", "cluster": "DEI in Agencies", "node_size": 10, "label": "agency alignment"}, "equity": {"concepts": "equity", "type": "concept", "cluster": "DEI in Agencies", "node_size": 10, "label": "equity"}, "diversity": {"concepts": "diversity", "type": "concept", "cluster": "DEI in Agencies", "node_size": 10, "label": "diversity"}, "network models": {"concepts": "network models", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "network models"}, "decision support": {"concepts": "decision support", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "decision support"}, "case studies": {"concepts": "case studies", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "case studies"}, "policy analysis": {"concepts": "policy analysis", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "policy analysis"}, "community research": {"concepts": "community research", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "community research"}, "management interventions": {"concepts": "management interventions", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "management interventions"}, "tribal representation": {"concepts": "tribal representation", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "tribal representation"}, "orca": {"concepts": "orca", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "orca"}, "cognitive mapping": {"concepts": "cognitive mapping", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "cognitive mapping"}, "puget sound": {"concepts": "puget sound", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "puget sound"}, "school districts": {"concepts": "school districts", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "school districts"}, "nature": {"concepts": "nature", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "nature"}, "resource management": {"concepts": "resource management", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "resource management"}, "research overlaps": {"concepts": "research overlaps", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "research overlaps"}, "public participation": {"concepts": "public participation", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "public participation"}, "management approaches": {"concepts": "management approaches", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "management approaches"}, "preservation": {"concepts": "preservation", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "preservation"}, "institutional factors": {"concepts": "institutional factors", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "institutional factors"}, "comparative analysis": {"concepts": "comparative analysis", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "comparative analysis"}, "wdfw curriculum": {"concepts": "wdfw curriculum", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "wdfw curriculum"}, "internal consultant": {"concepts": "internal consultant", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "internal consultant"}, "treaty rights": {"concepts": "treaty rights", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "treaty rights"}, "decision making": {"concepts": "decision making", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "decision making"}, "federal level": {"concepts": "federal level", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "federal level"}, "team supervision": {"concepts": "team supervision", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "team supervision"}, "conservation": {"concepts": "conservation", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "conservation"}, "state legislature": {"concepts": "state legislature", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "state legislature"}, "integrated model": {"concepts": "integrated model", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "integrated model"}, "species": {"concepts": "species", "type": "concept", "cluster": "Research Scientists", "node_size": 10, "label": "species"}, "invasive species": {"concepts": "invasive species", "type": "concept", "cluster": "Research Scientists", "node_size": 10, "label": "invasive species"}, "species variation": {"concepts": "species variation", "type": "concept", "cluster": "Research Scientists", "node_size": 10, "label": "species variation"}, "species interactions": {"concepts": "species interactions", "type": "concept", "cluster": "Research Scientists", "node_size": 10, "label": "species interactions"}, "harmful organisms": {"concepts": "harmful organisms", "type": "concept", "cluster": "Research Scientists", "node_size": 10, "label": "harmful organisms"}, "biodiversity knowledge": {"concepts": "biodiversity knowledge", "type": "concept", "cluster": "Biodiversity Understanding", "node_size": 10, "label": "biodiversity knowledge"}, "biodiversity communications": {"concepts": "biodiversity communications", "type": "concept", "cluster": "Biodiversity Understanding", "node_size": 10, "label": "biodiversity communications"}, "biodiversity": {"concepts": "biodiversity", "type": "concept", "cluster": "Biodiversity Understanding", "node_size": 10, "label": "biodiversity"}, "visualizing biodiversity": {"concepts": "visualizing biodiversity", "type": "concept", "cluster": "Biodiversity Understanding", "node_size": 10, "label": "visualizing biodiversity"}};
        const interClusterEdges = [["species recovery", "Research Scientists", {"weight": 0.2, "confidence": 0.4800000000000001, "type": "inter_cluster", "style": "solid"}], ["species recovery", "Community Engagement", {"weight": 0.6666666666666666, "confidence": 0.2833333333333334, "type": "inter_cluster", "style": "solid"}], ["species recovery", "Social-Ecological Dynamics", {"weight": 1.0, "confidence": 0.35, "type": "inter_cluster", "style": "solid"}], ["species recovery", "Geographic Awareness", {"weight": 0.4, "confidence": 0.1, "type": "inter_cluster", "style": "solid"}], ["Ecological Systems", "Research Scientists", {"weight": 1.0, "confidence": 0.39, "type": "inter_cluster", "style": "solid"}], ["Ecological Systems", "Community Engagement", {"weight": 1.0, "confidence": 0.37, "type": "inter_cluster", "style": "solid"}], ["Ecotourism & Wellbeing", "Research Scientists", {"weight": 1.0, "confidence": 0.6, "type": "inter_cluster", "style": "solid"}], ["Ecotourism & Wellbeing", "Puget Sound Management", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["Ecotourism & Wellbeing", "Community Engagement", {"weight": 0.5, "confidence": 0.275, "type": "inter_cluster", "style": "solid"}], ["Social-Ecological Dynamics", "Research Scientists", {"weight": 1.0, "confidence": 0.4600000000000001, "type": "inter_cluster", "style": "solid"}], ["Social-Ecological Dynamics", "Environmental Understanding", {"weight": 1.0, "confidence": 0.43, "type": "inter_cluster", "style": "solid"}], ["Environmental Understanding", "Social-Ecological Dynamics", {"weight": 1.0, "confidence": 0.5, "type": "inter_cluster", "style": "solid"}], ["Social Science Research", "DEI in Agencies", {"weight": 1.0, "confidence": 0.5599999999999999, "type": "inter_cluster", "style": "solid"}], ["Social Science Research", "species recovery", {"weight": 1.0, "confidence": 0.3, "type": "inter_cluster", "style": "solid"}], ["Social Science Research", "Geographic Awareness", {"weight": 1.0, "confidence": 0.5, "type": "inter_cluster", "style": "solid"}], ["Community Engagement", "Biodiversity Understanding", {"weight": 1.0, "confidence": 0.6399999999999999, "type": "inter_cluster", "style": "solid"}], ["Community Engagement", "Ecotourism & Wellbeing", {"weight": 1.0, "confidence": 0.5900000000000001, "type": "inter_cluster", "style": "solid"}], ["DEI in Agencies", "Biodiversity Understanding", {"weight": 1.0, "confidence": 0.5, "type": "inter_cluster", "style": "solid"}], ["Puget Sound Management", "Geographic Awareness", {"weight": 1.0, "confidence": 0.5, "type": "inter_cluster", "style": "solid"}], ["Puget Sound Management", "Research Scientists", {"weight": 0.8, "confidence": 0.39, "type": "inter_cluster", "style": "solid"}], ["Puget Sound Management", "Social-Ecological Dynamics", {"weight": 1.0, "confidence": 0.55, "type": "inter_cluster", "style": "solid"}], ["Puget Sound Management", "DEI in Agencies", {"weight": 1.0, "confidence": 0.42500000000000004, "type": "inter_cluster", "style": "solid"}], ["Research Scientists", "Biodiversity Understanding", {"weight": 0.6, "confidence": 0.5, "type": "inter_cluster", "style": "solid"}], ["Research Scientists", "Environmental Understanding", {"weight": 1.0, "confidence": 0.5375000000000001, "type": "inter_cluster", "style": "solid"}], ["Research Scientists", "Ecological Systems", {"weight": 1.0, "confidence": 0.37, "type": "inter_cluster", "style": "solid"}], ["Research Scientists", "Ecotourism & Wellbeing", {"weight": 1.0, "confidence": 0.75, "type": "inter_cluster", "style": "solid"}], ["Biodiversity Understanding", "Puget Sound Management", {"weight": 1.0, "confidence": 0.59, "type": "inter_cluster", "style": "solid"}], ["Biodiversity Understanding", "species recovery", {"weight": 1.0, "confidence": 0.5199999999999999, "type": "inter_cluster", "style": "solid"}], ["Biodiversity Understanding", "Social-Ecological Dynamics", {"weight": 1.0, "confidence": 0.5199999999999999, "type": "inter_cluster", "style": "solid"}], ["Biodiversity Understanding", "Research Scientists", {"weight": 1.0, "confidence": 0.48, "type": "inter_cluster", "style": "solid"}]];
        const clusterConcepts = {"Geographic Awareness": [["environmental consulting", {"concepts": "environmental consulting", "type": "concept", "cluster": "Geographic Awareness", "node_size": 10, "label": "environmental consulting"}], ["environmental work", {"concepts": "environmental work", "type": "concept", "cluster": "Geographic Awareness", "node_size": 10, "label": "environmental work"}], ["respondent understanding", {"concepts": "respondent understanding", "type": "concept", "cluster": "Geographic Awareness", "node_size": 10, "label": "respondent understanding"}], ["environmental justice", {"concepts": "environmental justice", "type": "concept", "cluster": "Geographic Awareness", "node_size": 10, "label": "environmental justice"}]], "Ecological Systems": [["spatial reference", {"concepts": "spatial reference", "type": "concept", "cluster": "Ecological Systems", "node_size": 10, "label": "spatial reference"}], ["geographic literacy", {"concepts": "geographic literacy", "type": "concept", "cluster": "Ecological Systems", "node_size": 10, "label": "geographic literacy"}], ["geographic location", {"concepts": "geographic location", "type": "concept", "cluster": "Ecological Systems", "node_size": 10, "label": "geographic location"}], ["nearshore focus", {"concepts": "nearshore focus", "type": "concept", "cluster": "Ecological Systems", "node_size": 10, "label": "nearshore focus"}], ["sense of place", {"concepts": "sense of place", "type": "concept", "cluster": "Ecological Systems", "node_size": 10, "label": "sense of place"}]], "Ecotourism & Wellbeing": [["ecological systems", {"concepts": "ecological systems", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "ecological systems"}], ["habitat", {"concepts": "habitat", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "habitat"}], ["estuaries", {"concepts": "estuaries", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "estuaries"}], ["salmon", {"concepts": "salmon", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "salmon"}], ["fisheries", {"concepts": "fisheries", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "fisheries"}], ["ecological survey", {"concepts": "ecological survey", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "ecological survey"}], ["habitat management", {"concepts": "habitat management", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "habitat management"}], ["restoration efforts", {"concepts": "restoration efforts", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "restoration efforts"}], ["habitat specific", {"concepts": "habitat specific", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "habitat specific"}], ["marine water quality", {"concepts": "marine water quality", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "marine water quality"}], ["ecosystem services", {"concepts": "ecosystem services", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "ecosystem services"}], ["marine biodiversity", {"concepts": "marine biodiversity", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "marine biodiversity"}], ["invertebrates", {"concepts": "invertebrates", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "invertebrates"}], ["shoreline types", {"concepts": "shoreline types", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "shoreline types"}], ["food web", {"concepts": "food web", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "food web"}], ["marine species", {"concepts": "marine species", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "marine species"}], ["european green crab", {"concepts": "european green crab", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "european green crab"}], ["conservation concern", {"concepts": "conservation concern", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "conservation concern"}], ["endangered species", {"concepts": "endangered species", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "endangered species"}], ["habitat forming", {"concepts": "habitat forming", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "habitat forming"}], ["food webs", {"concepts": "food webs", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "food webs"}], ["niche habitats", {"concepts": "niche habitats", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "niche habitats"}], ["marine resources", {"concepts": "marine resources", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "marine resources"}], ["estuary restoration", {"concepts": "estuary restoration", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "estuary restoration"}], ["shrub steppe", {"concepts": "shrub steppe", "type": "concept", "cluster": "Ecotourism & Wellbeing", "node_size": 10, "label": "shrub steppe"}]], "Social-Ecological Dynamics": [["wildlife presence", {"concepts": "wildlife presence", "type": "concept", "cluster": "Social-Ecological Dynamics", "node_size": 10, "label": "wildlife presence"}], ["ecotourism", {"concepts": "ecotourism", "type": "concept", "cluster": "Social-Ecological Dynamics", "node_size": 10, "label": "ecotourism"}], ["coastal sense", {"concepts": "coastal sense", "type": "concept", "cluster": "Social-Ecological Dynamics", "node_size": 10, "label": "coastal sense"}], ["landscape values", {"concepts": "landscape values", "type": "concept", "cluster": "Social-Ecological Dynamics", "node_size": 10, "label": "landscape values"}], ["recreation", {"concepts": "recreation", "type": "concept", "cluster": "Social-Ecological Dynamics", "node_size": 10, "label": "recreation"}], ["ecotourism presence", {"concepts": "ecotourism presence", "type": "concept", "cluster": "Social-Ecological Dynamics", "node_size": 10, "label": "ecotourism presence"}], ["wildlife watcher", {"concepts": "wildlife watcher", "type": "concept", "cluster": "Social-Ecological Dynamics", "node_size": 10, "label": "wildlife watcher"}], ["human well-being", {"concepts": "human well-being", "type": "concept", "cluster": "Social-Ecological Dynamics", "node_size": 10, "label": "human well-being"}], ["recreational value", {"concepts": "recreational value", "type": "concept", "cluster": "Social-Ecological Dynamics", "node_size": 10, "label": "recreational value"}]], "Environmental Understanding": [["survey questions", {"concepts": "survey questions", "type": "concept", "cluster": "Environmental Understanding", "node_size": 10, "label": "survey questions"}], ["social-ecological dynamics", {"concepts": "social-ecological dynamics", "type": "concept", "cluster": "Environmental Understanding", "node_size": 10, "label": "social-ecological dynamics"}], ["regional planning", {"concepts": "regional planning", "type": "concept", "cluster": "Environmental Understanding", "node_size": 10, "label": "regional planning"}], ["natural resource", {"concepts": "natural resource", "type": "concept", "cluster": "Environmental Understanding", "node_size": 10, "label": "natural resource"}], ["oyster farmers", {"concepts": "oyster farmers", "type": "concept", "cluster": "Environmental Understanding", "node_size": 10, "label": "oyster farmers"}], ["social ecological dynamics", {"concepts": "social ecological dynamics", "type": "concept", "cluster": "Environmental Understanding", "node_size": 10, "label": "social ecological dynamics"}], ["fishing access", {"concepts": "fishing access", "type": "concept", "cluster": "Environmental Understanding", "node_size": 10, "label": "fishing access"}], ["natural resources", {"concepts": "natural resources", "type": "concept", "cluster": "Environmental Understanding", "node_size": 10, "label": "natural resources"}], ["coastal communities", {"concepts": "coastal communities", "type": "concept", "cluster": "Environmental Understanding", "node_size": 10, "label": "coastal communities"}], ["habitat program", {"concepts": "habitat program", "type": "concept", "cluster": "Environmental Understanding", "node_size": 10, "label": "habitat program"}], ["open-ended question", {"concepts": "open-ended question", "type": "concept", "cluster": "Environmental Understanding", "node_size": 10, "label": "open-ended question"}], ["conservation issues", {"concepts": "conservation issues", "type": "concept", "cluster": "Environmental Understanding", "node_size": 10, "label": "conservation issues"}], ["social-ecological landscape", {"concepts": "social-ecological landscape", "type": "concept", "cluster": "Environmental Understanding", "node_size": 10, "label": "social-ecological landscape"}], ["snowball sampling", {"concepts": "snowball sampling", "type": "concept", "cluster": "Environmental Understanding", "node_size": 10, "label": "snowball sampling"}], ["fishermen", {"concepts": "fishermen", "type": "concept", "cluster": "Environmental Understanding", "node_size": 10, "label": "fishermen"}]], "Social Science Research": [["social scientists", {"concepts": "social scientists", "type": "concept", "cluster": "Social Science Research", "node_size": 10, "label": "social scientists"}], ["social science", {"concepts": "social science", "type": "concept", "cluster": "Social Science Research", "node_size": 10, "label": "social science"}], ["social scientist", {"concepts": "social scientist", "type": "concept", "cluster": "Social Science Research", "node_size": 10, "label": "social scientist"}], ["qualitative coding", {"concepts": "qualitative coding", "type": "concept", "cluster": "Social Science Research", "node_size": 10, "label": "qualitative coding"}], ["mental modeler", {"concepts": "mental modeler", "type": "concept", "cluster": "Social Science Research", "node_size": 10, "label": "mental modeler"}], ["researchers", {"concepts": "researchers", "type": "concept", "cluster": "Social Science Research", "node_size": 10, "label": "researchers"}]], "Community Engagement": [["stakeholders", {"concepts": "stakeholders", "type": "concept", "cluster": "Community Engagement", "node_size": 10, "label": "stakeholders"}], ["homeowners", {"concepts": "homeowners", "type": "concept", "cluster": "Community Engagement", "node_size": 10, "label": "homeowners"}], ["communications", {"concepts": "communications", "type": "concept", "cluster": "Community Engagement", "node_size": 10, "label": "communications"}], ["economic benefits", {"concepts": "economic benefits", "type": "concept", "cluster": "Community Engagement", "node_size": 10, "label": "economic benefits"}], ["plain language", {"concepts": "plain language", "type": "concept", "cluster": "Community Engagement", "node_size": 10, "label": "plain language"}], ["education program", {"concepts": "education program", "type": "concept", "cluster": "Community Engagement", "node_size": 10, "label": "education program"}], ["workshops", {"concepts": "workshops", "type": "concept", "cluster": "Community Engagement", "node_size": 10, "label": "workshops"}], ["scientific terms", {"concepts": "scientific terms", "type": "concept", "cluster": "Community Engagement", "node_size": 10, "label": "scientific terms"}], ["resource users", {"concepts": "resource users", "type": "concept", "cluster": "Community Engagement", "node_size": 10, "label": "resource users"}], ["tribal members", {"concepts": "tribal members", "type": "concept", "cluster": "Community Engagement", "node_size": 10, "label": "tribal members"}], ["ngos", {"concepts": "ngos", "type": "concept", "cluster": "Community Engagement", "node_size": 10, "label": "ngos"}], ["community members", {"concepts": "community members", "type": "concept", "cluster": "Community Engagement", "node_size": 10, "label": "community members"}], ["resource managers", {"concepts": "resource managers", "type": "concept", "cluster": "Community Engagement", "node_size": 10, "label": "resource managers"}], ["resource reliance", {"concepts": "resource reliance", "type": "concept", "cluster": "Community Engagement", "node_size": 10, "label": "resource reliance"}], ["community communication", {"concepts": "community communication", "type": "concept", "cluster": "Community Engagement", "node_size": 10, "label": "community communication"}], ["public engagement", {"concepts": "public engagement", "type": "concept", "cluster": "Community Engagement", "node_size": 10, "label": "public engagement"}]], "DEI in Agencies": [["dei data", {"concepts": "dei data", "type": "concept", "cluster": "DEI in Agencies", "node_size": 10, "label": "dei data"}], ["staff focus", {"concepts": "staff focus", "type": "concept", "cluster": "DEI in Agencies", "node_size": 10, "label": "staff focus"}], ["differences", {"concepts": "differences", "type": "concept", "cluster": "DEI in Agencies", "node_size": 10, "label": "differences"}], ["politics", {"concepts": "politics", "type": "concept", "cluster": "DEI in Agencies", "node_size": 10, "label": "politics"}], ["state agencies", {"concepts": "state agencies", "type": "concept", "cluster": "DEI in Agencies", "node_size": 10, "label": "state agencies"}], ["agency focus", {"concepts": "agency focus", "type": "concept", "cluster": "DEI in Agencies", "node_size": 10, "label": "agency focus"}], ["inclusion", {"concepts": "inclusion", "type": "concept", "cluster": "DEI in Agencies", "node_size": 10, "label": "inclusion"}], ["agency funding", {"concepts": "agency funding", "type": "concept", "cluster": "DEI in Agencies", "node_size": 10, "label": "agency funding"}], ["commonalities", {"concepts": "commonalities", "type": "concept", "cluster": "DEI in Agencies", "node_size": 10, "label": "commonalities"}], ["agency alignment", {"concepts": "agency alignment", "type": "concept", "cluster": "DEI in Agencies", "node_size": 10, "label": "agency alignment"}], ["equity", {"concepts": "equity", "type": "concept", "cluster": "DEI in Agencies", "node_size": 10, "label": "equity"}], ["diversity", {"concepts": "diversity", "type": "concept", "cluster": "DEI in Agencies", "node_size": 10, "label": "diversity"}]], "Puget Sound Management": [["network models", {"concepts": "network models", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "network models"}], ["decision support", {"concepts": "decision support", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "decision support"}], ["case studies", {"concepts": "case studies", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "case studies"}], ["policy analysis", {"concepts": "policy analysis", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "policy analysis"}], ["community research", {"concepts": "community research", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "community research"}], ["management interventions", {"concepts": "management interventions", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "management interventions"}], ["tribal representation", {"concepts": "tribal representation", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "tribal representation"}], ["orca", {"concepts": "orca", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "orca"}], ["cognitive mapping", {"concepts": "cognitive mapping", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "cognitive mapping"}], ["puget sound", {"concepts": "puget sound", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "puget sound"}], ["school districts", {"concepts": "school districts", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "school districts"}], ["nature", {"concepts": "nature", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "nature"}], ["resource management", {"concepts": "resource management", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "resource management"}], ["research overlaps", {"concepts": "research overlaps", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "research overlaps"}], ["public participation", {"concepts": "public participation", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "public participation"}], ["management approaches", {"concepts": "management approaches", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "management approaches"}], ["preservation", {"concepts": "preservation", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "preservation"}], ["institutional factors", {"concepts": "institutional factors", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "institutional factors"}], ["comparative analysis", {"concepts": "comparative analysis", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "comparative analysis"}], ["wdfw curriculum", {"concepts": "wdfw curriculum", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "wdfw curriculum"}], ["internal consultant", {"concepts": "internal consultant", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "internal consultant"}], ["treaty rights", {"concepts": "treaty rights", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "treaty rights"}], ["decision making", {"concepts": "decision making", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "decision making"}], ["federal level", {"concepts": "federal level", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "federal level"}], ["team supervision", {"concepts": "team supervision", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "team supervision"}], ["conservation", {"concepts": "conservation", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "conservation"}], ["state legislature", {"concepts": "state legislature", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "state legislature"}], ["integrated model", {"concepts": "integrated model", "type": "concept", "cluster": "Puget Sound Management", "node_size": 10, "label": "integrated model"}]], "Research Scientists": [["species", {"concepts": "species", "type": "concept", "cluster": "Research Scientists", "node_size": 10, "label": "species"}], ["invasive species", {"concepts": "invasive species", "type": "concept", "cluster": "Research Scientists", "node_size": 10, "label": "invasive species"}], ["species variation", {"concepts": "species variation", "type": "concept", "cluster": "Research Scientists", "node_size": 10, "label": "species variation"}], ["species interactions", {"concepts": "species interactions", "type": "concept", "cluster": "Research Scientists", "node_size": 10, "label": "species interactions"}], ["harmful organisms", {"concepts": "harmful organisms", "type": "concept", "cluster": "Research Scientists", "node_size": 10, "label": "harmful organisms"}]], "Biodiversity Understanding": [["biodiversity knowledge", {"concepts": "biodiversity knowledge", "type": "concept", "cluster": "Biodiversity Understanding", "node_size": 10, "label": "biodiversity knowledge"}], ["biodiversity communications", {"concepts": "biodiversity communications", "type": "concept", "cluster": "Biodiversity Understanding", "node_size": 10, "label": "biodiversity communications"}], ["biodiversity", {"concepts": "biodiversity", "type": "concept", "cluster": "Biodiversity Understanding", "node_size": 10, "label": "biodiversity"}], ["visualizing biodiversity", {"concepts": "visualizing biodiversity", "type": "concept", "cluster": "Biodiversity Understanding", "node_size": 10, "label": "visualizing biodiversity"}]]};
        const clusterEdges = {"Geographic Awareness": [], "Ecological Systems": [], "Ecotourism & Wellbeing": [], "Social-Ecological Dynamics": [], "Environmental Understanding": [], "Social Science Research": [], "Community Engagement": [], "DEI in Agencies": [], "Puget Sound Management": [], "Research Scientists": [], "Biodiversity Understanding": []};
        
        let network;
        let currentView = 'clusters';
        let currentCluster = null;
        let minConfidence = 0.3;
        
        // Network options
        const options = {
            nodes: {
                font: { color: 'white', size: 14 },
                borderWidth: 2,
                shadow: true
            },
            edges: {
                arrows: { to: { enabled: true, scaleFactor: 1.2 } },
                shadow: true,
                smooth: { type: 'continuous' }
            },
            physics: {
                stabilization: { iterations: 100 },
                barnesHut: {
                    gravitationalConstant: -8000,
                    springConstant: 0.001,
                    springLength: 200
                }
            },
            interaction: {
                hover: true,
                selectConnectedEdges: false
            }
        };
        
        function initNetwork() {
            const container = document.getElementById('network');
            const data = getClusterViewData();
            network = new vis.Network(container, data, options);
            
            // Handle cluster clicks for drill-down
            network.on("click", function(params) {
                if (params.nodes.length > 0 && currentView === 'clusters') {
                    const clickedNode = params.nodes[0];
                    if (clusterConcepts[clickedNode]) {
                        showClusterDetail(clickedNode);
                    }
                }
            });
        }
        
        function getClusterViewData() {
            const nodes = [];
            const edges = [];
            
            // Add cluster nodes
            Object.entries(clusterData).forEach(([clusterId, data]) => {
                const concepts = data.concepts || [];
                const conceptsStr = Array.isArray(concepts) ? concepts.join(', ') : concepts;
                
                nodes.push({
                    id: clusterId,
                    label: clusterId,
                    title: `Cluster: ${clusterId}\nConcepts: ${conceptsStr}\nClick to explore internal relationships`,
                    color: '#4A90E2',
                    size: 25 + (conceptsStr.split(',').length * 2),
                    font: { color: 'white' }
                });
            });
            
            // Add inter-cluster edges
            interClusterEdges.forEach(([source, target, edgeData]) => {
                const confidence = edgeData.confidence || 1.0;
                const weight = edgeData.weight || 0;
                
                if (confidence >= minConfidence) {
                    edges.push({
                        from: source,
                        to: target,
                        color: weight > 0 ? '#28A745' : '#DC3545',
                        width: Math.abs(weight) * 3 + 1,
                        title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                        dashes: false
                    });
                }
            });
            
            return { nodes: nodes, edges: edges };
        }
        
        function getClusterDetailData(clusterId) {
            const nodes = [];
            const edges = [];
            
            // Add concept nodes for this cluster
            if (clusterConcepts[clusterId]) {
                clusterConcepts[clusterId].forEach(([conceptId, data]) => {
                    nodes.push({
                        id: conceptId,
                        label: conceptId,
                        title: `Concept: ${conceptId}\nFrom cluster: ${clusterId}`,
                        color: '#FF9500',
                        size: 20,
                        font: { color: 'white' }
                    });
                });
            }
            
            // Add intra-cluster edges
            if (clusterEdges[clusterId]) {
                clusterEdges[clusterId].forEach(([source, target, edgeData]) => {
                    const confidence = edgeData.confidence || 1.0;
                    const weight = edgeData.weight || 0;
                    
                    if (confidence >= minConfidence) {
                        edges.push({
                            from: source,
                            to: target,
                            color: weight > 0 ? '#28A745' : '#DC3545',
                            width: Math.abs(weight) * 3 + 1,
                            title: `${source} ‚Üí ${target}\nWeight: ${weight}\nConfidence: ${confidence.toFixed(2)}`,
                            dashes: true
                        });
                    }
                });
            }
            
            return { nodes: nodes, edges: edges };
        }
        
        function showClusterView() {
            currentView = 'clusters';
            currentCluster = null;
            const data = getClusterViewData();
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'none';
            document.getElementById('current-view').textContent = 'Cluster Overview';
        }
        
        function showClusterDetail(clusterId) {
            currentView = 'concepts';
            currentCluster = clusterId;
            const data = getClusterDetailData(clusterId);
            network.setData(data);
            
            document.getElementById('back-btn').style.display = 'inline-block';
            document.getElementById('current-view').textContent = `Inside Cluster: ${clusterId}`;
        }
        
        function updateConfidenceFilter(value) {
            minConfidence = parseFloat(value);
            document.getElementById('confidence-value').textContent = value;
            
            // Refresh current view
            if (currentView === 'clusters') {
                showClusterView();
            } else {
                showClusterDetail(currentCluster);
            }
        }
        
        // Initialize the network when page loads
        window.onload = function() {
            initNetwork();
        };
    </script>
</body>
</html>
